(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-25febee5"],{"04f8":function(t,e,i){"use strict";var a=i("cebc"),n=i("2f62"),s={mixins:[i("9add").a],props:{isCheck:{type:Boolean,default:function(){return!0}}},data:function(){return{peopletree:[],selection:[{label:"人员名称",value:"name"}],limit:200}},mounted:function(){this.treeInitialFinish()},methods:Object(a.a)({},Object(n.b)(["queryDustmanListInfoTree"]),{treeInitialFinish:function(){var t=this;this.queryDustmanListInfoTree().then(function(e){var i=e.data;t.peopletree=i})},handlerCheck:function(t){this.$emit("node-click",t)},handlerListsClick:function(t){3==t.type&&this.$emit("node-click",t)},iconsFilter:function(t){switch(t.manType){case"0":case"1":case"2":t.iconSkin="workerMan";break;case"4":case"5":case"6":t.iconSkin="inspectorMan"}},handlerLimitCheck:function(t){if(t.sumCount>this.limit)return this.$message.warning("该公司或车组下车辆超过".concat(this.limit,"辆车，不能一次性勾选!")),!1}})},l=(i("ff7e"),i("2877")),o=Object(l.a)(s,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("cv-tabs",{staticClass:"cv-tabs-tree",attrs:{titles:["人员选择","人员列表"],isScrollbar:"",type:"border-card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("cv-tree-search",{ref:"tree",attrs:{data:t.peopletree,lazy:"","is-check":t.isCheck,"node-filter":["type","3"],"limit-check":t.handlerLimitCheck},on:{"node-click":t.handlerListsClick}}),i("cv-tree-lists",{ref:"lists",attrs:{"search-api":"/manLocation/queryTdustmanInfoList","is-check":t.isCheck,params:{key:"types",result:"0,1,2,3,4,5"},selection:t.selection},on:{"node-click":t.handlerListsClick},scopedSlots:t._u([{key:"label",fn:function(e){return[i("cv-icon",{attrs:{name:"4"==e.row.manType||"5"==e.row.manType?"yunwei1":"renyuan"}}),i("span",[t._v(t._s(e.row.text))])]}}])},[i("template",{slot:"checkbox"},[i("el-checkbox",{attrs:{label:"0,1,2"}},[t._v("清洁工")]),i("el-checkbox",{attrs:{label:"4,5"}},[t._v("管理员")])],1)],2)],1)},[],!1,null,null,null);e.a=o.exports},"096a":function(t,e,i){"use strict";var a=i("5d24");i.n(a).a},"0a13":function(t,e,i){"use strict";var a=i("63df");i.n(a).a},"219f":function(t,e,i){"use strict";var a=i("c87b");i.n(a).a},"21f9":function(t,e,i){},"2fc5":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAeCAYAAADHJYVoAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjZFQzEyNUQwN0UzQTExRTY5MDQ3QTE3RjVCRDdEODJGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjZFQzEyNUQxN0UzQTExRTY5MDQ3QTE3RjVCRDdEODJGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NkVDMTI1Q0U3RTNBMTFFNjkwNDdBMTdGNUJEN0Q4MkYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NkVDMTI1Q0Y3RTNBMTFFNjkwNDdBMTdGNUJEN0Q4MkYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5/f0GxAAACH0lEQVR42qyWv0scQRTH3+5d0EKbExIOOy2tPA6iwYudVUQhClYGK4skRUggf0E0EEOChaVgYxOsLGz9Eb0T/NGmOSwtjqtyEZPc7fh9+vYYlpndWc8HH1mZN9958925t+N5Bz5ZwgMlMAuegn7wBPwGF+AQ/AAHQBkFLOLPwTdQoOQ4A+/AfnQgqpwBy2DXUZgkj/M/y/x2ZCMLrYN5Sh9s4UeQBwsgiFb+6Z7CevD8pajnY+KZR50Hv9xxftFh5StxwsFYK61FX0LPn8lRc4roQv7PjCmN9YpZOceJQvzMQrpYwo6mffHbGLqYpcK4mODKB9LMSOH/IIvnXERCW1LsIsfiddBnssQknCLq7Hm1Ewticqq+qeE8wFnn2GdbtsCHpEzdb8eFtli8As7BsGvFDv6zXiXsivxz3bSdDn6Oq9aw2IreuPjPia36lMFVF7mmsHFx/30d9uEOgue/MfXzMvjeoTjPP7J9Q7tksHBPO0bBX9s3lAdmQC2lMOe/1IVN4iTXhklw5SjMeVMyj5LEOY6lz/9LEObxOXlf5CpOqhTsUIte4LFhSWlgnHe4Hfe9C8kKGcG/feFrfoGGaAP/5bUDd0m/6JVaDE7l2LWEpqBwUJQu3AN6QTd4JNwtNuLlvPfeW3qMm1iN9tRXtUplVReh/8K1XPV4p013cdmFdnUItEqt4mFv4cQ/cpQyEUHPcO1QGlFb2k3oRoABAIVVs5Qx7DgzAAAAAElFTkSuQmCC"},"5d24":function(t,e,i){},"63df":function(t,e,i){},"91ee":function(t,e,i){"use strict";var a=i("96ae");i.n(a).a},"96ae":function(t,e,i){},a57f:function(t,e,i){},aa62:function(t,e,i){"use strict";i.r(e),i("7f7f"),i("c5f6"),i("ac6a");var a=i("cebc"),n={components:{},props:{selectedVehicle:{default:function(){return{text:"",id:""}}},btnFlag:{default:function(){return{flag:!1}}},screenFullSize:{default:!1}},mixins:[""],data:function(){return{isShow:!1,timeVal:[this.$filter.timeStamp(this.$filter.format(new Date,"yyyy-MM-dd")),this.$filter.timeStamp(this.$filter.format(new Date,"yyyy-MM-dd"))],pickerOption:{disabledDate:function(t){return t.getTime()>Date.now()-864e5}}}},methods:{screenFull:function(){this.$emit("isScreenFull")},selectVeh:function(){this.$emit("toggleTree")},search:function(){if(!this.selectedVehicle.id)return this.$message.warning("请选择人员"),!1;if(!this.timeVal)return this.$message.warning("请选择查询时间"),!1;var t=this.$filter.timeStamp(this.$filter.format(this.timeVal[0],"yyyy-MM-dd"));if(5184e5<this.$filter.timeStamp(this.$filter.format(this.timeVal[1],"yyyy-MM-dd"))-t)return this.$message.warning("查询时间不能超过7天"),!1;var e={beginTime:this.$filter.format(this.timeVal[0],"yyyy-MM-dd"),endTime:this.$filter.format(this.timeVal[1],"yyyy-MM-dd")};this.$emit("trackSearch",e)}},mounted:function(){if(this.isShow=!0,this.$route.query.id){var t={beginTime:this.$filter.format(this.timeVal[0],"yyyy-MM-dd"),endTime:this.$filter.format(this.timeVal[1],"yyyy-MM-dd")};this.$emit("childToFather",t)}}},s=(i("ac9e"),i("2877")),l=Object(s.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-form",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"history-topbar",attrs:{inline:""}},[i("el-form-item",[i("el-input",{staticStyle:{width:"100px","font-size":"14px"},attrs:{size:"small",placeholder:"人员选择",readonly:""},nativeOn:{click:function(e){return t.selectVeh(e)}},model:{value:t.selectedVehicle.text,callback:function(e){t.$set(t.selectedVehicle,"text",e)},expression:"selectedVehicle.text"}})],1),i("el-form-item",[i("el-date-picker",{attrs:{type:"daterange",clearable:!1,editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOption},model:{value:t.timeVal,callback:function(e){t.timeVal=e},expression:"timeVal"}})],1),i("el-form-item",{staticStyle:{float:"right"}},[i("el-button",{staticStyle:{"font-size":"14px"},attrs:{type:"primary",size:"small"},on:{click:t.screenFull}},[i("i",{class:["fullBtn",t.screenFullSize?"el-icon-tsp-fullscreen-exit":"el-icon-tsp-fullscreen"]})])],1),i("el-form-item",{staticStyle:{float:"right"}},[i("el-button",{staticStyle:{"font-size":"14px"},attrs:{size:"small",type:"primary",loading:t.btnFlag.flag},on:{click:t.search}},[t._v("查询")])],1)],1)},[],!1,null,"8bd9940e",null).exports,o=i("04f8"),r=i("3b6f"),c=i("cc81"),d={props:{data:{}},mixins:[r.a],data:function(){return{content:"",timer:null,pagination:0,currentDatas:[],currentId:""}},computed:{_tooltip:function(){return this.$refs.tooltip}},methods:{setPagination:function(t){this.currentDatas=t},handlerMouseover:function(t){var e=Object(c.a)(t,"el-col");e&&(this.content=this.mixins_ellipsisShowTooltip(e,this._tooltip))},handlerMouseleave:function(){this.mixins_hideTooltip(this._tooltip)}},watch:{data:function(t){this.pagination=0,this.currentDatas=[],this.setPagination(t)}},mounted:function(){this.setPagination(this.data)}},h=(i("91ee"),Object(s.a)(d,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{},[i("el-row",{staticClass:"history-bottom-header"},[i("el-col",{staticClass:"tab-item",attrs:{span:3}},[t._v("速度(km/h)")]),i("el-col",{staticClass:"tab-item",attrs:{span:2}},[t._v("时间")]),i("el-col",{staticClass:"tab-item",attrs:{span:2}},[t._v("方向")]),i("el-col",{staticClass:"tab-item",attrs:{span:2}},[t._v("海拔(m)")]),i("el-col",{staticClass:"tab-item",attrs:{span:8}},[t._v("位置")])],1),i("cv-inifinite-scroll",{staticStyle:{height:"170px"},attrs:{list:t.currentDatas},nativeOn:{mouseover:function(e){return t.handlerMouseover(e)}},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-col",{staticClass:"tab-item",attrs:{span:3},nativeOn:{mouseleave:function(e){return t.handlerMouseleave(e)}}},[t._v(t._s(t._f("isValue")(e.row.speed)))]),i("el-col",{staticClass:"tab-item",attrs:{span:2},nativeOn:{mouseleave:function(e){return t.handlerMouseleave(e)}}},[t._v(t._s(t._f("isValue")(t._f("format")(e.row.gpsTime,"yyyy-MM-dd HH:mm:ss"))))]),i("el-col",{staticClass:"tab-item",attrs:{span:2},nativeOn:{mouseleave:function(e){return t.handlerMouseleave(e)}}},[t._v(t._s(t._f("isValue")(t._f("direction")(e.row.direction))))]),i("el-col",{staticClass:"tab-item",attrs:{span:2},nativeOn:{mouseleave:function(e){return t.handlerMouseleave(e)}}},[t._v(t._s(t._f("isValue")(e.row.high)))]),i("el-col",{staticClass:"tab-item",attrs:{span:8},nativeOn:{mouseleave:function(e){return t.handlerMouseleave(e)}}},[t._v(t._s(t._f("isValue")(e.row.locationDescribe)))])]}}])}),i("el-tooltip",{ref:"tooltip",attrs:{content:t.content,placement:"top"}})],1)},[],!1,null,"354a51d8",null).exports),u={props:{data:{},points:{},mapName:"",allPoints:[]},inject:["store"],data:function(){return{playFlag:!1,playVal:"1000",setStepPoint:0,showData:0,allData:[],playSpeed:"1000",trackSpeed:null,allLinePoint:[],curIndex:0,addPoint:null,changSpeedFlag:!1,infoWindowStatus:!0}},watch:{data:function(t){this.playFlag=!1,this.allData=t,this.showData=0,this.curIndex=0,this.runTrack()},points:function(t){this.allLinePoint=t}},methods:{trackPaly:function(){0<this.allData.length&&(this.playFlag?this.playFlag=!1:(this.playFlag=!0,this.showData==this.allData.length-1&&(this.showData=0)),this.runTrack())},runTrack:function(t){var e=this;this.playFlag?(t&&(clearInterval(this.trackSpeed),this.changSpeedFlag=!1),this.trackChage=!1,this.trackSpeed=setInterval(function(){e.curIndex=++e.curIndex,e.showData=e.curIndex,e.showData!=e.allData.length-1&&0!=e.showData||(e.playFlag=!1),null!=e.addPoint&&e.store._mapMethods.moveToCenter([e.addPoint.point]),e.moveTrack()},parseInt(this.playSpeed))):clearInterval(this.trackSpeed)},moveTrack:function(){this.allLinePoint.length>this.curIndex?this.generatesPoint():(this.curIndex=0,clearInterval(this.trackSpeed))},generatesPoint:function(){var t=this;this.addPoint,this.store._mapMethods.removeOverlay(this.addPoint);var e=this,i={alarmCount:this.allData[this.curIndex].alarmCount,locationDescribe:this.allData[this.curIndex].locationDescribe,speed:this.allData[this.curIndex].speed,direction:this.$filter.direction(this.allData[this.curIndex].direction)};this.addPoint=this.store._mapMethods.mapAddpoint({longitude:Number(this.allData[this.curIndex].longitude),latitude:Number(this.allData[this.curIndex].latitude)},this.$filter.isOnline(i,!1,this.$store.getters.mapName),{width:36,height:36}),this.addPoint.setRotation(this.allData[this.curIndex].direction),this.store._mapMethods.addOverlay(this.addPoint),this.store._mapMethods.addEventListener(this.addPoint,"click",function(){e.infoWindowStatus=!0,e.openInfo(t.curIndex)}),this.openInfo(this.curIndex)},openInfo:function(t){var e=this,i=this.allData[t],a=this;if(this.infoWindowStatus){var n="<style>.BMap_pop{margin-left:5px;margin-top: 1px;visibility: visible !important;}.BMap_shadow{display:none}}</style><div style=\"margin-top: 0;margin-bottom: 0;width:360px;height:180px;overflow:hidden;font-family: 'simsun';font-size: 14px;font-weight: bold;color: #333;\">"+"<div><span style='color: #333;font-weight: bold;'>人员名称:</span>".concat(i.userName,"</div>")+"<div><span style=\"display:inline-block;margin: 5px 10px 5px 0px;width: 185px;font-size: 12px;font-weight: normal;color: #666;\"><span class='titleName'>时间:</span>".concat(this.$filter.format(i.gpsTime,"yyyy-MM-dd HH:mm:ss"),"</span>")+"<span style=\"display:inline-block;margin: 5px 0px;width: 150px;font-size: 12px;font-weight: normal;color: #666;\"><span class='titleName'>方向:</span>".concat(this.$filter.direction(i.direction),"</span>")+"</div><div><span style=\"display:inline-block;margin: 5px 10px 5px 0px;width: 185px;font-size: 12px;font-weight: normal;color: #666;\"><span class='titleName'>海拔:</span>".concat(i.high,"(m)</span>")+"</div><div><span style=\"display:inline-block;margin: 5px 10px 5px 0px;width: 185px;font-size: 12px;font-weight: normal;color: #666;\"><span class='titleName'>行驶速度:</span>".concat(i.speed,"(km/h)</span>")+"</div><div><span style=\"display:inline-block;margin: 5px 10px 5px 0px;width: 185px;font-size: 12px;font-weight: normal;color: #666;\"><span class='titleName'>经度:</span>".concat(this.$filter.toFixed(i.longitude,6),"</span>")+"<span style=\"display:inline-block;margin: 5px 0px;width: 130px;font-size: 12px;font-weight: normal;color: #666;\"><span class='titleName'>纬度:</span>".concat(this.$filter.toFixed(i.latitude,6),"</span></div>")+"<div style=\"margin-top: 6px;font-size: 12px;font-weight: normal;color: #666;\"><span class='titleName'>位置信息:</span>".concat(null==i.locationDescribe?i.locationDescribe="--":i.locationDescribe," </div></div>");"cvGaodeMap"==this.$store.getters.mapName?this.infoMarker=a.store._mapMethods.infoWindow(n,this.addPoint,function(){a.infoWindowStatus=!1,a.store._mapMethods.closeInfoWindow()}):(this.infoMarker=a.store._mapMethods.infoWindow(n,this.addPoint),a.store._mapMethods.addEventListener(this.infoMarker,"clickclose",function(){e.infoWindowStatus=!1})),a.store._mapMethods.cvOpenInfoWindow(this.infoMarker,this.addPoint.point)}},changTrackIndex:function(){0!=this.showData&&(this.curIndex=this.showData,this.moveTrack())},changLabel:function(){this.playSpeed=this.playVal,this.changSpeedFlag=!0,this.runTrack(this.changSpeedFlag)}},mounted:function(){$(".el-slider__runway").css("margin","9px 0px")},beforeDestroy:function(){clearInterval(this.trackSpeed)}},p=(i("0a13"),{components:{personList:h,play:Object(s.a)(u,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"play",staticClass:"cv-play",attrs:{mapName:t.mapName}},[i("cv-icon",{ref:"playBtn",staticStyle:{cursor:"pointer"},attrs:{name:t.playFlag?"zanting":"bofang",size:"23",disabled:!(0<t.allData.length)},nativeOn:{click:function(e){return t.trackPaly(e)}}}),i("el-slider",{ref:"slider",staticClass:"slider",attrs:{"show-tooltip":!1,step:1,disabled:!(0<t.allData.length),max:0<t.allData.length?t.allData.length-1:100},on:{change:t.changTrackIndex},model:{value:t.showData,callback:function(e){t.showData=e},expression:"showData"}}),i("el-select",{ref:"playStep",attrs:{placeholder:"请选择",size:"mini",disabled:!(0<t.allData.length)},on:{change:t.changLabel},model:{value:t.playVal,callback:function(e){t.playVal=e},expression:"playVal"}},[i("el-option",{attrs:{label:"X1",value:"1000"}}),i("el-option",{attrs:{label:"X2",value:"750"}}),i("el-option",{attrs:{label:"X3",value:"500"}}),i("el-option",{attrs:{label:"X4",value:"250"}})],1)],1)},[],!1,null,null,null).exports},props:{data:{},points:[],isTree:{default:!1},titles:{default:function(){return[{name:"人员信息",key:"list",color:"#f39d38",icon:"cheliangjiankong"}]}}},data:function(){return{name:"",mapName:"personMap",cur:0,key:"list",pagination:0,isToggleTree:!1,isToggle:!1,timer:null,allDataInfo:[],allPoint:[]}},methods:{tabChange:function(t,e){switch(this.key=t,this.isToggle=!0,this.$emit("history-panel",!1),this.cur=e,t){case"list":this.name="personList"}},toggleTree:function(){this.$emit("history-panel"),this.isToggle=!1},toggle:function(){this.$emit("history-panel",!1),this.isToggle=!this.isToggle}},watch:{points:function(t){this.allPoint=t},data:function(t){this.allDataInfo=t}}}),m=(i("096a"),Object(s.a)(p,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cv-track-list",style:{bottom:t.isToggle?0:"-200px"}},[i("ul",{staticClass:"tab-header bg"},[t.isTree?i("li",{staticClass:"tab-head-item tab-header-icon",on:{click:t.toggleTree}},[i("cv-icon",{attrs:{name:"zuzhi1",color:"#fff"}})],1):t._e(),t._l(t.titles,function(e,a){return i("li",{key:e.key,staticClass:"tab-head-item",class:[t.cur==a?"tab-item-on":""],on:{click:function(i){return t.tabChange(e.key,a)}}},[i("span",{staticClass:"tab-item-text"},[i("cv-icon",{attrs:{name:e.icon}}),t._v(t._s(e.name))],1),i("span",{staticClass:"tab-item-num",style:{color:e.color}},[t._v("\n\t\t\t\t"+t._s(0==a?t.allDataInfo.length:"")+"\n\t\t\t")])])}),i("li",{staticClass:"tab-head-item"},[i("play",{attrs:{data:t.allDataInfo,points:t.allPoint}})],1),i("li",{staticClass:"tab-head-item toggle-style",on:{click:t.toggle}},[i("cv-icon",{staticStyle:{"vertical-align":"middle"},attrs:{color:"#969696",size:"24",name:t.isToggle?"xialajiantou":"shanglajiantou-copy"}})],1)],2),i("div",{staticClass:"tab-content-detail history-content-detail"},[i("person-list",{staticClass:"every-detail",style:{top:"list"==t.key?0:"9999px"},attrs:{data:t.allDataInfo}})],1)])},[],!1,null,null,null).exports),f=i("2fc5"),g=i.n(f),v=i("c0f0"),b=i.n(v),y=i("b0ad"),w=i("2f62"),k={name:"add",mixins:[y.a],props:{options:{}},data:function(){return{loading:!1,formData:{time:""},time:"",table:[]}},methods:Object(a.a)({},Object(w.b)(["getPersonList"]),{tableLoad:function(){var t=this,e={userId:this.options.userId,beginTime:this.options.beginTime,endTime:this.options.endTime};this.getPersonList(e).then(function(e){var i=e.flag,a=e.data;if(i&&a){var n=a.time;a.time.forEach(function(e){t.table.push({time:e})}),0==n&&(t.table=[])}else t.table=[]})},tableModify:function(t){this.$emit("confirm",{queryDate:t.row.time})},handleCurrentChange:function(t){this.time=t.time},confirm:function(){this.$emit("confirm",{queryDate:this.time})}}),mounted:function(){this.tableLoad()}},M=Object(s.a)(k,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-row",[i("cv-grid",{ref:"table",attrs:{data:t.table},on:{"row-click":t.handleCurrentChange}},[i("el-table-column",{attrs:{label:"轨迹时间",prop:"time"}}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("cv-span",{attrs:{type:"success"},nativeOn:{click:function(i){return t.tableModify(e)}}},[t._v("轨迹查看")])]}}])})],1)],1),i("el-row",{staticClass:"dialog-footer",staticStyle:{"margin-top":"20px"}},[i("el-button",{on:{click:function(e){t.options.flag=!1}}},[t._v(t._s(t.$t("action.cancel")))])],1)],1)},[],!1,null,null,null).exports,x={components:{peopleTree:o.a,topBar:l,scrollbarPagination:m,add:M},data:function(){return{store:{_mapMethods:null},treeActive:!1,fullPoster:null,mapFull:!1,trackFlag:{flag:!1},selectPerson:{},listAll:[],allPoint:[],isReturnData:!1,allLineTwo:null,startPoint:null,endPoint:null,allData:null,dialog:{flag:!1,title:"--",size:"dialog-tiny",name:"search",userId:"",beginTime:"",endTime:""}}},computed:Object(a.a)({},Object(w.c)(["mapName","mapType"]),{_mapMethods:function(){return this.$refs.peopleHistoryMap.mapMethods}}),provide:function(){return{store:this.store}},methods:Object(a.a)({},Object(w.b)(["queryDustmanLocationInfoList"]),{screenF:function(){this.mapFull=!this.mapFull,this.mapFull?this.fullPoster.style.top="0px":this.fullPoster.style.top="90px"},toggleTree:function(t){this.treeActive=void 0===t?!this.treeActive:!!t},nodeClick:function(t){this.selectPerson=t},mapReady:function(){this.store._mapMethods=this._mapMethods},handlerPerson:function(t){this.selectPerson=t.data[0]},trackPersonDate:function(t){this.dialog.flag=!0,this.dialog.name="add",this.dialog.title="查看轨迹",this.dialog.size="dialog-small",this.dialog.userId=this.selectPerson.id,this.dialog.beginTime=t.beginTime,this.dialog.endTime=t.endTime},trackPerson:function(t){var e=this;this._mapMethods&&this._mapMethods.clearOverlays(),this.listAll=[],this.allPoint=[];var i={userId:this.selectPerson.id,queryDate:t.queryDate};this.trackFlag.flag=!0,this.queryDustmanLocationInfoList(i).then(function(t){var i=t.data.locations;0<i.length?(e.dialog.flag=!1,e.searchResultDetail(i)):e.$message.warning("暂无行程！"),e.trackFlag.flag=!1}).catch(function(){e.trackFlag.flag=!1,e.$message.error("暂无行程！")})},searchResultDetail:function(t){this.isReturnData=!0,this.listAll=t,this.showLines(t)},showLines:function(t){var e=this;t.forEach(function(t){e.allPoint.push({lng:t.longitude,lat:t.latitude})}),this.allLineTwo=this._mapMethods.mapAddline(this.allPoint,{strokeWeight:3}),this.showStartEnd(t,this.allPoint),this.toggleTree(!1),this._mapMethods.getBestView(this.allPoint)},showStartEnd:function(t,e){this.allData=t;var i,a,n=e.length-1,s=t.length-1,l=e[0],o=e[n],r=t[0],c=t[s];i='\n\t\t\t\t<div class="mapcontent">开始位置: '.concat(null==r.locationDescribe?"未获取到位置信息":r.locationDescribe,"</div>"),this.startPoint=this._mapMethods.mapAddpoint({longitude:Number(l.lng),latitude:Number(l.lat)},g.a,{width:36,height:36}),this._mapMethods.overlayClickOpenInfoWindow(this.startPoint,this.startPoint.point,i),this._mapMethods.addOverlay(this.startPoint),a='\n\t\t\t\t\t\t\t<div class="mapcontent">结束位置: '.concat(null==c.locationDescribe?"未获取到位置信息":c.locationDescribe,"</div>"),this.endPoint=this._mapMethods.mapAddpoint({longitude:Number(o.lng),latitude:Number(o.lat)},b.a,{width:36,height:36}),this._mapMethods.overlayClickOpenInfoWindow(this.endPoint,this.endPoint.point,a),this._mapMethods.addOverlay(this.endPoint)},cTof:function(t){this.trackPerson(t)},togglePanel:function(t){this.toggleTree(t)}}),mounted:function(){var t=this;setTimeout(function(){t.fullPoster=document.querySelector("#contents")},500),this.$route.query&&(this.selectPerson.id=this.$route.query.id,this.selectPerson.text=this.$route.query.text)},beforeDestroy:function(){this.allPoint=[],this.listAll=[],this.fullPoster=null},watch:{"dialog.flag":function(t){t||(this.dialog.name="")}}},D=(i("219f"),Object(s.a)(x,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"personHistory"},[i(t.mapName,{ref:"peopleHistoryMap",tag:"component",staticClass:"personalmonitor-map",attrs:{mapLoaded:t.mapReady}}),i("cv-lazy-render",{attrs:{transition:"top",time:"500"}},[i("top-bar",{attrs:{selectedVehicle:t.selectPerson,btnFlag:t.trackFlag,screenFullSize:t.mapFull},on:{trackSearch:t.trackPersonDate,isScreenFull:t.screenF,childToFather:t.cTof,toggleTree:t.toggleTree}})],1),i("cv-lazy-render",{attrs:{transition:"left",time:"200",immediate:t.treeActive}},[i("people-tree",{class:["multicar-monitor-tabs",t.treeActive?"monitor-tabs__active":""],attrs:{"is-check":!1,"node-monitor":t.handlerPerson},on:{"node-click":t.nodeClick}})],1),i("cv-lazy-render",{attrs:{transition:"bottom",time:"500"}},[i("scrollbar-pagination",{ref:"pagination",staticClass:"track-list",attrs:{"is-tree":!0,plateCode:t.selectPerson,data:t.listAll,points:t.allPoint},on:{"history-panel":t.togglePanel}})],1),i("el-dialog",{attrs:{visible:t.dialog.flag,title:t.dialog.title,"custom-class":t.dialog.size},on:{"update:visible":function(e){return t.$set(t.dialog,"flag",e)}}},[i(t.dialog.name,{tag:"component",attrs:{options:t.dialog},on:{confirm:t.trackPerson}})],1)],1)},[],!1,null,null,null).exports);D.install=function(t){t.component(D.name,D)},e.default=D},ac9e:function(t,e,i){"use strict";var a=i("a57f");i.n(a).a},b0ad:function(t,e,i){"use strict";(function(t){i("7f7f"),e.a={methods:{confirmPrompt:function(t,e){var i=this,a=t||this.$t("action.confirmIsRemove");return new Promise(function(t,n){i.$confirm(a,i.$t("action.tip"),{confirmButtonText:i.$t("action.confirm"),cancelButtonText:i.$t("action.cancel"),type:"warning"}).then(function(){t()}).catch(function(){"function"==typeof e&&e()})})},timeLimitFunc:function(t,e,i){if(t&&e)return((new Date(e)-new Date(t))/864e5).toFixed(1)<=i||this.$message.error({message:this.$t("请选择时间范围在"+i+"天内")});this.$message.error({message:this.$t("请选择时间范围")})},addRemoveUnique:function(t,e,i){var a=t.length,n=e.length;return n<a?{name:"add",data:this.$service.isUnique(t,e,i)}:a<n?{name:"remove",data:this.$service.isUnique(e,t,i)}:a==n?{name:"equal",data:this.$service.isUnique(t,e,i)}:void 0},showTooltip:function(t,e){var i=t.target,a=this.$refs[e];a.referenceElm=i,a.$refs.popper.style.display="none",a.doDestroy(),a.setExpectedState(!0),a.handleShowPopper()},mouseenterShowTip:function(t,e,i){var a=t.target;if(a.scrollWidth>a.offsetWidth||i)return this.showTooltip(t,e),i?i.startTime+"~"+i.endTime:a.innerText},mouseenterShowToolTip:function(t,e,i){var a=t.target;return this.showTooltip(t,e),!i&&a.innerText},mouseoverHideTip:function(t){var e=this.$refs[t];e&&(e.setExpectedState(!1),e.handleClosePopper())},asyncDownloadScript:function(e,i){var a=this,n=0<arguments.length&&void 0!==e?e:"Baidu",s=1<arguments.length?i:void 0;return t[n]?t[n]._preloader?t[n]._preloader:Promise.resolve(t[n]):(t[n]={},t[n]._preloader=new Promise(function(e,i){var l=document.createElement("script");l.src=s,t.document.body.appendChild(l),a.$service.isIe()&&a.$service.IE_VERSION<11?l.onreadystatechange=function(){"loaded"!=l.readyState&&"complete"!=l.readyState||(e(t[n]),t[n]._preloader=null)}:l.onload=function(){e(t[n]),t[n]._preloader=null}}),t[n]._preloader)}}}}).call(this,i("c8ba"))},c0f0:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAeCAYAAADHJYVoAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjA4M0UxNDRDN0UzQjExRTZBQTM5QTgyQjM3QzY1RUFFIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjA4M0UxNDREN0UzQjExRTZBQTM5QTgyQjM3QzY1RUFFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDgzRTE0NEE3RTNCMTFFNkFBMzlBODJCMzdDNjVFQUUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDgzRTE0NEI3RTNCMTFFNkFBMzlBODJCMzdDNjVFQUUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz55ESDOAAACOklEQVR42qyWO0hcQRSG5+7eQHyhrIWIRSAW1hFRELNYWSlE0IApIpaigjYK9vGVgIlgK9hoIWIVtLDwQSJKNG06CyEpZCEm6/ra3et/5MwyTGbuY80PH9zLnfPPmbNnz71O5eylsMgBL0EvaAF1oAb8BafgC1gD+8AzGljMk2AeNIpgnYAxsKc/iGn3cTANdkIaC15H62c4viBX22gJvBXRRSWcALVgAOT1zN8VaayK4qf0srTxzv9D49wIBfMPfLR/9Hu81PfeUqL3suat3GqhpW5QNZcxLSG/Jpf72GqiBpvuffQqxvX2NaZreS8N9Y0M6qDMnwcdXzWRGwQYk+op84TpCQWbDPQT+ChBmadAdZjSqKdQN7CcIkWz5RAXzWE7IsBQ1ZHLA6fZVBZbuUL+oHtU8/WgnlY7JELm63Lk0th8EdQpEUrznaalNO8DK1GHiE9p3oBVaU7l+aZnX6Qo6yYau3Jw0fwdknP4EaL4YdM8PwAfH2lO8V9tr7lJ/nGL0QnHW9+hN6AHnEc0Pue4Gz9zwZ8NXSAT0jjD60+D3v5ShzznbwOM6flrXi/CmouLibJNkc924jJtWZLGc8r4s9/7TuIycYY2dsoHtxvjz1qWhROrLUR5+V+5s+P+9GL7MbddjskyHv4/nmpcDirAU/CEedjMbehIlHR/GolV1iXzf37uXm2MLmR/bKXY6I655k89Omk2tLk8hcxbydbXXH5x0cJLbqW4ZugYPjs8Bb0sObnoXoABABvI3ROZF4JrAAAAAElFTkSuQmCC"},c87b:function(t,e,i){},cc81:function(t,e,i){"use strict";i.d(e,"a",function(){return n}),Array.prototype.slice,document.addEventListener,document.removeEventListener;var a=["html","div","a","ul","li","em","span"],n=function(t,e){var i=t.target,n=!1;for(0<=a.indexOf(e)&&(n=!0);i&&"HTML"!==i.tagName.toUpperCase();){if(n&&i.tagName.toLowerCase()===e)return i;for(var s=i.className.split(/\s+/g),l=0,o=s.length;l<o;l++)if(new RegExp("^"+e+"$").test(s[l]))return i;i=i.parentNode}return null}},ff7e:function(t,e,i){"use strict";var a=i("21f9");i.n(a).a}}]);
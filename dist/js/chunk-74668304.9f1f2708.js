(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-74668304"],{"1c6a":function(t,e,a){"use strict";var i=a("6491");a.n(i).a},"5e65":function(t,e,a){"use strict";a.r(e),a("386d");var i={mixins:[a("8369").a],props:{model:{}},methods:{tableLoad:function(t){var e={begin:this.$filter.format(this.model.searchTime[0],"yyyy-MM-dd HH:mm:ss"),end:this.$filter.format(this.model.searchTime[1],"yyyy-MM-dd HH:mm:ss"),id:this.model.vehicleId};this.tableLoading("/vehicleBearing/queryBearingHistoryByPager",e,t)},details:function(t){this.$emit("openDialog",t)}}},r=a("2877"),l=Object(r.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cv-grid",{attrs:{options:t.table},on:{load:function(e){return t.tableLoad(!1)}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.table.loading,expression:"table.loading"}],attrs:{border:"",stripe:"",data:t.table.data}},[a("el-table-column",{attrs:{label:"上传时间",prop:"bearingTime"}}),a("el-table-column",{attrs:{label:"承重(%)",prop:"bearingVal"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"cv-table-tool"},[a("cv-span",{attrs:{type:"success"},nativeOn:{click:function(a){return t.details(e.row)}}},[t._v("详情")])],1)]}}])})],1)],1)},[],!1,null,null,null).exports,n=(a("ac6a"),{props:{model:{}},data:function(){return{loading:!1,dataItem:[]}},methods:{showEchart:function(t,e){var a={tooltip:{trigger:"axis",formatter:"{b}<br/><span style='display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:rgb(255, 70, 131)'></span>{a}: {c} (%)"},title:{left:"center",text:"车辆承重变化图",subtext:"鼠标滚轮可缩放数据"},xAxis:{type:"category",data:t},yAxis:{name:"承重(%)",type:"value",max:100,min:0},dataZoom:[{type:"inside"}],grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},series:[{name:"承重",type:"line",smooth:!0,itemStyle:{normal:{color:"rgb(255, 70, 131)"}},areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(255, 70, 131)"},{offset:1,color:"rgb(255, 158, 68)"}])}},data:e}]};this.dataItem=a},findBearingHistory:function(){var t=this,e={begin:this.$filter.format(this.model.searchTime[0],"yyyy-MM-dd HH:mm:ss"),end:this.$filter.format(this.model.searchTime[1],"yyyy-MM-dd HH:mm:ss"),id:this.model.vehicleId};this.$store.dispatch("queryBearingHistory",e).then(function(e){e.flag?t.setByData(e.data):t.$message.error(t.$t("error."+e.errorCode))})},setByData:function(t){var e=[],a=[];t.forEach(function(t){e.push(t.bearingTime),a.push(t.bearingVal)}),this.showEchart(e,a)}},watch:{model:function(t){this.findBearingHistory(t)}}}),o=Object(r.a)(n,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{width:"100%"}},[e("cv-echart",{staticClass:"propChart",staticStyle:{width:"100%",height:"400px"},attrs:{name:"line",data:this.dataItem}})],1)},[],!1,null,null,null).exports,s={props:{options:{}},data:function(){return{table:{data:[],loading:!1},bearingStr:"--",bearingLevelColor:"green"}},methods:{tableLoad:function(){var t=this,e={gpsTime:this.options.options.bearingTime,id:this.options.vehicleId};this.table.loading=!0,this.$store.dispatch("queryBearingDetail",e).then(function(e){e.flag?(t.table.data=e.data.parameterList,t.bearingStr=e.data.bearingStr,t.bearingLevelColor=t.getTextColor(e.data.bearingLevel)):t.table.data=[],t.table.loading=!1})},getTextColor:function(t){switch(t){case 0:return"green";case 1:return"blue";case 2:return"orange";case 3:return"red"}}},watch:{"options.flag":function(t){t||(this.options.name="")}},mounted:function(){this.tableLoad()}},c=(a("1c6a"),{components:{tableList:l,echart:o,dialogs:Object(r.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bearingHistory-dialog"},[a("cv-grid",{attrs:{options:t.table},on:{load:function(e){return t.tableLoad(!1)}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.table.loading,expression:"table.loading"}],attrs:{border:"",stripe:"",data:t.table.data}},[a("el-table-column",{attrs:{label:"传感器",prop:"id"}}),a("el-table-column",{attrs:{label:"当前承重(%)",prop:"original"}}),a("el-table-column",{attrs:{label:"空载标定(%)",prop:"emptyVal"}}),a("el-table-column",{attrs:{label:"满载标定(%)",prop:"fullVal"}}),a("el-table-column",{attrs:{label:"实际承重(%)",prop:"real"}})],1)],1),a("div",{staticClass:"textColor"},[a("span",[t._v("车辆承重:")]),a("span",{class:t.bearingLevelColor},[t._v(t._s(t.bearingStr))])])],1)},[],!1,null,"1c56d24a",null).exports},data:function(){return{search:{searchTime:[this.$filter.timeStamp(this.$filter.format(new Date-864e5,"yyyy-MM-dd HH:mm:ss")),this.$filter.timeStamp(this.$filter.format(new Date-864e5,"yyyy-MM-dd HH:mm:ss"))],vehicleId:""},dialog:{flag:!1,title:"详情",size:"dialog-small",name:"",options:{}}}},computed:{_echart:function(){return this.$refs.bearingHistoryEchart},_tableList:function(){return this.$refs.bearingHistoryTable}},methods:{details:function(t){this.dialog.flag=!0,this.dialog.name="dialogs",this.dialog.options=t,this.dialog.vehicleId=this.search.vehicleId},tableLoad:function(){if(this.search.vehicleId){if(!this.search.searchTime)return this.$message.warning("请选择查询时间"),!1;this._echart.findBearingHistory(),this._tableList.tableLoad(!0)}else this.$message.warning("请选择车辆")}},watch:{"$store.getters.ptSingleCar":function(t){this.search.vehicleId=t.id}}}),u=Object(r.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bearingHistory"},[a("cv-header",[a("el-form-item",{attrs:{label:"查询时间:"}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},model:{value:t.search.searchTime,callback:function(e){t.$set(t.search,"searchTime",e)},expression:"search.searchTime"}})],1),a("cv-tool",{staticStyle:{margin:"0"},attrs:{name:t.$route.name,data:t.$store.getters.monitorMenu,"is-remove":!1,"is-add":!1,"is-modify":!1,"is-export":!1},on:{search:t.tableLoad}})],1),a("cv-content",[a("div",{staticStyle:{width:"100%","margin-bottom":"30px"}},[a("echart",{ref:"bearingHistoryEchart",attrs:{model:t.search}})],1),a("tableList",{ref:"bearingHistoryTable",attrs:{model:t.search},on:{openDialog:t.details}})],1),a("el-dialog",{attrs:{visible:t.dialog.flag,title:t.dialog.title,"custom-class":t.dialog.size},on:{"update:visible":function(e){return t.$set(t.dialog,"flag",e)}}},[a(t.dialog.name,{tag:"component",attrs:{options:t.dialog},on:{confirm:function(e){return t.tableLoad(!0)}}})],1)],1)},[],!1,null,null,null).exports;e.default=u},6491:function(t,e,a){},8369:function(t,e,a){"use strict";var i=a("cebc");e.a={data:function(){return{table:{size:10,total:0,current:1,flag:!1,loading:!1,data:[]}}},methods:{tableLoading:function(t,e,a,r){var l=this;a?(this.table.flag=!0,this.table.current=1):this.table.flag=!1,this.table.loading=!0;var n=Object(i.a)({current:this.table.current,size:this.table.size},e);this.$http(r?{url:t,data:n}:{url:t,params:n}).then(function(t){var e=t.data;t.flag&&0!=e.length?(l.table.data=e.records,l.table.total=e.total,l.table.current=e.current):(l.table.data=[],l.table.total=0),l.table.loading=!1}).catch(function(t){l.table.loading=!1})},tableFilterColor:function(t){return this.$filter.plateCodeColor(t.plateColor)},tableFilterIcType:function(t){return this.$filter.icType(t.state)},tableFilterIcResult:function(t){return this.$filter.icResult(t.readerresult)},tableFilterTiredAlarm:function(t){return this.$filter.tiredAlarmType(t.alarm)},tableFilterTiredAdas:function(t){return this.$filter.tiredAdasType(t.alarm)},tableFilterOrderTypeS:function(t){return this.$filter.orderTypeS(t.sendFlag)},tableFilterFormat:function(t){return this.$filter.format(t.orderTime||t.gpsTime)},tableFilterFormats:function(t){return this.$filter.format(t.backTime)},tableBusLineType:function(t){return this.$filter.lineType(t.lineType)},tableFilterAcc:function(t){return this.$filter.accStatus(t.accStatus)},tableSplitMobile:function(t){return t.mobileCode?t.mobileCode.slice(1,t.mobileCode.length):""},tableConfirm:function(t){return this.$filter.isConfirm(t.isnotarize)},tableUpkeep:function(t){return this.$filter.isConfirm(t.type)},tableRenewal:function(t){return this.$filter.renewal(t.state)},tableReMot:function(t){return this.$filter.reMot(t.state)},tableOil:function(t){return this.$filter.fixNumber(t.total,2)},tableSex:function(t){return this.$filter.sex(t.sex)},plateCodeF:function(t){return t.plateCode?t.plateCode:"--"},plateCodeAndColor:function(t){return t.plateCode+"("+this.$filter.plateCodeColor(t.plateColor)+")"},driverStuas:function(t){return this.$filter.alarmStatus(t.fatigueDrive)},overStuas:function(t){return this.$filter.alarmStatus(t.tOversSpeed)},overHStuas:function(t){return this.$filter.alarmStatus(t.tOverSpeedH)},filterAlStuas:function(t){return this.$filter.alarmStatus(t.overSpeed)},filteralarmStuas:function(t){return this.$filter.alarmStatus(t.overSpeedH)},filterLStuas:function(t){return this.$filter.alarmStatus(t.forbid)},applyFlag:function(t){return this.$filter.applyFlag(t.applyFlag)},SEtime:function(t){return this.$filter.SEtime(t.StartTime,t.EndTime)},channelType:function(t){return this.$filter.channelType(t.Channel)},FileSize:function(t){return this.$filter.FileSize(t.fileSize||t.FileSize||0)},AlarmFilter:function(t){return this.$filter.AlarmFilter(t.Alarm)},MediaTypeFilter:function(t){return this.$filter.MediaTypeFilter(t.MediaType)},StreamTypeFilter:function(t){return this.$filter.StreamTypeFilter(t.StreamType)},StorageTypeFilter:function(t){return this.$filter.StorageTypeFilter(t.StorageType)},statusType:function(t){return this.$filter.statusType(t.Status)},fileSource:function(t){return this.$filter.fileSource(t.fileSource)}}}}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3f6800c2"],{"05c0":function(e,t,i){"use strict";i("7f7f"),i("20d6"),i("ac6a");var a=i("cebc"),n=i("3f4e"),s=i("2f62"),o={name:"CvPublictreeContent",components:{CvContent:n.a},props:{model:String,vehicleMonitor:Function,loading:Boolean,noresize:{default:!1,type:Boolean}},data:function(){return{entryList:[],condition:""}},computed:Object(a.a)({},Object(s.c)(["onlineList","isAttention","socketEnterprise","socketVehicle","vehicle_data","vehicleCondition"]),{isCheck:function(){switch(this.model){case"multi":return!0;case"single":default:return!1}},_treeMethods:function(){return this.$refs.tabs},_contentMethods:function(){return this.$refs.content}}),beforeDestroy:function(){var e=this._treeMethods.getAllNodes;this.setStoreVehicleSearchCondition(this.condition),this.setStoreVehicleData(e())},mounted:function(){var e=this._treeMethods.$refs.tree.reference().ztreeApi;e()&&e().checkAllNodes(!1)},methods:Object(a.a)({},Object(s.b)(["setStoreVehicleData","setStoreVehicleSearchCondition"]),{handlerVehicleSearch:function(e){this.condition=e},vehicle_Monitor:function(e){var t=e.data;if(e.name,"function"==typeof this.vehicleMonitor)switch(this.model){case"multi":return this.vehicle_Monitor_multi(e);case"single":return this.vehicleMonitor(t[0])}},vehicle_Monitor_multi:function(e){var t=this,i=e.data;switch(e.name){case"check":this.entryList=this.entryList.concat(i);break;case"cancel":i.forEach(function(e){var i=t.entryList.findIndex(function(t){return t.id==e.id});0<=i&&t.entryList.splice(i,1)})}this.vehicleMonitor(this.entryList)}})},r=(i("45d7"),i("2877")),l=Object(r.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("cv-content",{ref:"content",attrs:{loading:e.loading,noresize:e.noresize}},[e.model?i("cv-tabs-tree",{ref:"tabs",staticClass:"vehiclemaster-tree",attrs:{slot:"aside","vehicle-search":e.vehicleCondition,"is-checked":e.isCheck,"tree-data":e.vehicle_data,"online-monitor":e.onlineList,"vehicle-monitor":e.socketVehicle,"attention-monitor":e.isAttention,"enterprise-fleet-monitor":e.socketEnterprise,"node-monitor":e.vehicle_Monitor},on:{"vehicle-choose-search":e.handlerVehicleSearch},slot:"aside"}):e._e(),e._t("default")],2)},[],!1,null,"2dfdf41b",null).exports;l.install=function(e){e.component(l.name,l)},t.a=l},"2bf9":function(e,t,i){"use strict";var a=i("52d6");i.n(a).a},"45d7":function(e,t,i){"use strict";var a=i("6e18");i.n(a).a},"52d6":function(e,t,i){},"6e18":function(e,t,i){},"72e8":function(e,t,i){},8500:function(e,t,i){"use strict";var a=i("72e8");i.n(a).a},"98c3":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjU2Njg2QUVEN0UzQjExRTY5NUZGQjIzQjQ3NTgyMEU2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjU2Njg2QUVFN0UzQjExRTY5NUZGQjIzQjQ3NTgyMEU2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NTY2ODZBRUI3RTNCMTFFNjk1RkZCMjNCNDc1ODIwRTYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NTY2ODZBRUM3RTNCMTFFNjk1RkZCMjNCNDc1ODIwRTYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6GFva4AAAB5klEQVR42qyVyytFURTG13aPZ6QokkhiZkLJxOMfkLphTEpGJCMTlMdIBkyMlL9AhJQZRgaYmKmbYuIWBoT73L51raPj3L1xH1/9bqe91v7ufq6t1FkBGVQI+kEQdIN6EAH34ALsgAMQ83dUBsMBsA6a6Hfdgmmw5230uimwJgl/mZHk7EofZTJcBTOUuWak748pB2VdctEge7BhET5uQGOOhnegxcHPkM2s6E1R7U2Ayp++lui1StNDa4KiZdqU3gCGHZlumoph1nzuUCD+vd5UGVYp81BXnCJm0yAvYKcpUoORec1ccRvHLOpkwzpTxJ2mSRWP1lgdG8Ypf4qxYcgU4Q2w6aXaGgux4YkpEm5JUMJJ78htHLPojM9hDz5ObTtd4zs2YRwbyw6z+tybcgnac1y/K9Dh3uXZPGzIgrc4HEvlyFZHYN9fbabAYxZm3GfCVL74co8AnYEZ545K3zRD1iFYzsBwRZ4Cshmy5sHmP8w4Z87fWGBJngRbv5htSw7915CvwjhY8q2plrYxySHrq6d7knwduHqXyjPKBNSG6qU2tZhKutbzekqfillMeAdR+GiTYQWo5uoFSuQPHM9MklKdouCDb6McmxfX0PGNmB/zZ0lMjVDMlGfKSd8II16DTwEGADTfiu5ZDIeLAAAAAElFTkSuQmCC"},fd5a:function(e,t,i){"use strict";i.r(t),i("7f7f"),i("386d");var a=i("98c3"),n=i.n(a),s={props:{options:{}},mixins:[i("7e2f").a],data:function(){return{content:"",height:300,activeName:"DA",tabs:{activeName:"tabs0",titles:["疑点报表","疑点详情","疑点位置"]},search:{gbId:this.options.id},loading:!1,echartSpeed:{},single1:{},single2:{},single3:{},single4:{},single5:{},single6:{},single7:{},single8:{},dataItem:[],isPoints:[],markerAll:[]}},computed:{_table:function(){return this.$refs.table},_mapMethods:function(){return this.$refs.mapDb.mapMethods}},methods:{searchTable:function(){this._table.tableInitial()},func1:function(e){return"速度("+e.value+"km/h)  <br>时间"+e.name},Chart:function(){var e={gbId:this.options.id},t=this;this.$store.dispatch("queryDoubtFlash",e).then(function(e){e.flag&&0!=e.length&&(t.echartSpeed.x=e.data.reptime,t.echartSpeed.y=e.data.speed,t.single1.x=e.data.reptime,t.single1.y=e.data.single1,t.single2.x=e.data.reptime,t.single2.y=e.data.single2,t.single3.x=e.data.reptime,t.single3.y=e.data.single3,t.single4.x=e.data.reptime,t.single5.y=e.data.single4,t.single5.x=e.data.reptime,t.single5.y=e.data.single5,t.single6.x=e.data.reptime,t.single6.y=e.data.single6,t.getCarCount(t.echartSpeed))})},getCarCount:function(e){var t=this,i={tooltip:{formatter:function(e){var i=e;return t.func1(i)}},grid:{left:"10%"},xAxis:{type:"category",boundaryGap:!1,data:t.getArry(e.x)},yAxis:[{type:"value"}],series:[{name:name,type:"line",itemStyle:{normal:{color:"rgb(64, 203,55)"}},symbolSize:8,lineStyle:{normal:{width:3}},data:e.y}]};this.dataItem=i},getArry:function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t},allReady:function(){this.LoadgridT()},LoadgridT:function(){var e=this,t={gbId:this.options.id,mapType:this.$store.getters.mapType};this.$http({url:"/driverRecord/queryDoubtAddr",params:t}).then(function(t){if(!t.flag&&t.errorCode)e.$message.error({message:e.$t("error."+t.errorCode)});else{e.isPoints=t.data;var i=e;null==e.isPoints.speed&&(e.isPoints.speed="--");var a=e.tContent(e.isPoints),s=e._mapMethods.point({lat:e.isPoints.lat,lng:e.isPoints.lng}),o=e._mapMethods.mapAddpoint({latitude:e.isPoints.lat,longitude:e.isPoints.lng},n.a,{width:32,height:32});e._mapMethods.addOverlay(o),e._mapMethods.moveToCenter(s,17),e._mapMethods.openInfoWindow(a,s),e._mapMethods.overlayClickOpenInfoWindow(o,s,a,function(e){i.infoWindow=e},{})}})},tContent:function(e){return"<div>\n                              <span>车速: "+e.speed+"</span>\n                              <br>\n                              <span>位置描述: "+e.address+"</span>\n                            </div>"}},created:function(){this.Chart()},watch:{"options.flag":function(e){this.options.name=""}}},o=(i("8500"),i("2877")),r={components:{doubtful:Object(o.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mian",staticStyle:{"min-height":"450px"}},[i("el-form",{staticStyle:{"padding-left":"10px"},attrs:{inline:!0,model:e.options.form}},[i("el-form-item",{attrs:{label:"停车时间"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{size:"small",disabled:!0},model:{value:e.options.form.stopTime,callback:function(t){e.$set(e.options.form,"stopTime",t)},expression:"options.form.stopTime"}})],1),i("el-form-item",{attrs:{label:"车牌号"}},[i("el-input",{attrs:{placeholder:"",size:"small",disabled:!0},model:{value:e.options.form.plateCode,callback:function(t){e.$set(e.options.form,"plateCode",t)},expression:"options.form.plateCode"}})],1),i("el-form-item",{attrs:{label:"位置"}},[i("el-input",{attrs:{placeholder:"",size:"small",disabled:!0},model:{value:e.options.form.address,callback:function(t){e.$set(e.options.form,"address",t)},expression:"options.form.address"}})],1)],1),i("div",{staticClass:"contentD"},[i("cv-tabs",{attrs:{titles:e.tabs.titles},model:{value:e.tabs.activeName,callback:function(t){e.$set(e.tabs,"activeName",t)},expression:"tabs.activeName"}},[i("cv-echart",{staticClass:"propChart",staticStyle:{width:"100%",height:"350px"},attrs:{name:"line",data:e.dataItem}}),i("cv-grid",{ref:"table",attrs:{url:"/driverRecord/troubleRecoirdInfo",params:e.search}},[i("el-table-column",{attrs:{label:"上报时间",prop:"reptime","min-width":"100px"}}),i("el-table-column",{attrs:{label:"车速(km/h)",prop:"speed","min-width":"130px"}}),i("el-table-column",{attrs:{label:"加速",prop:"signal0","min-width":"150px"}}),i("el-table-column",{attrs:{label:"避震",prop:"signal1","min-width":"150px"}}),i("el-table-column",{attrs:{label:"减速",prop:"signal2","min-width":"150px"}}),i("el-table-column",{attrs:{label:"近光",prop:"signal3","min-width":"150px"}}),i("el-table-column",{attrs:{label:"远光",prop:"signal4","min-width":"150px"}})],1),i(e.$store.getters.mapName,{ref:"mapDb",tag:"component",staticStyle:{width:"100%",height:"400px",overflow:"hidden",margin:"0"},on:{ready:e.allReady}})],1)],1),i("div",{staticStyle:{"text-algin":"right","margin-top":"20px"}},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e.options.flag=!1}}},[e._v("关闭")])],1)],1)},[],!1,null,"f822903e",null).exports,CvPublictreeContent:i("05c0").a},mixins:[],data:function(){return{plateCode:"",reset:!1,receiveTime:[this.$filter.timeStamp(this.$filter.format(new Date(new Date-864e5),"yyyy-MM-dd start")),this.$filter.timeStamp(this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss"))],search:{startTime:this.$filter.format(new Date-864e5,"yyyy-MM-dd start"),endTime:this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss"),vehicleId:"",mapType:this.$store.getters.mapType},pickerOption:{disabledDate:function(e){return e.getTime()>Date.now()}},dialog:{title:"--",flag:!1,name:"",size:"dialog-small",form:{stopTime:"",plateCode:"",address:"",diverName:""}}}},computed:{_table:function(){return this.$refs.table}},methods:{isSearchEvent:function(){return this.search.vehicleId?this.receiveTime?(this.search.startTime=this.$filter.format(this.receiveTime[0],"yyyy-MM-dd HH:mm:ss"),this.search.endTime=this.$filter.format(this.receiveTime[1],"yyyy-MM-dd HH:mm:ss"),3<this.$filter.timeRange(this.search.startTime,this.search.endTime)?(this.$message.warning("时间范围为3天"),!1):void this._table.tableInitial()):(this.$message.warning("请选择时间范围"),!1):(this.$message.warning("请选择车辆"),!1)},handleInformation:function(e){this.dialog.flag=!0,this.dialog.title="事故疑点明细-报表、位置",this.dialog.name="doubtful",this.dialog.size="dialog-large",this.dialog.id=e.id,this.dialog.form.plateCode=e.plateCode,this.dialog.form.diverName=e.diverName,this.dialog.form.address=e.address,this.dialog.form.stopTime=e.stopTime},down:function(){if(!this.search.vehicleId)return this.$message.warning("请选择车辆"),!1;if(!this.receiveTime)return this.$message.warning("请选择时间范围"),!1;if(this.search.startTime=this.$filter.format(this.receiveTime[0],"yyyy-MM-dd HH:mm:ss"),this.search.endTime=this.$filter.format(this.receiveTime[1],"yyyy-MM-dd HH:mm:ss"),3<this.$filter.timeRange(this.search.startTime,this.search.endTime))return this.$message.warning("时间范围为3天"),!1;var e=this.search;e.current=this._table.current,e.size=this._table.size;var t=this.$service.winParams(this.$COMMON.baseUrl+"/report/troubleRecordReport",e);window.location.href=t},handlerVehicleMonitor:function(e){this.search.vehicleId=e.id,this.plateCode=e.plateCode}}},l=(i("2bf9"),Object(o.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"main"},[i("cv-operation",{staticClass:"header",attrs:{position:"left"}},[i("el-form-item",{attrs:{label:"起始时间:"}},[i("el-date-picker",{attrs:{editable:!1,clearable:!1,size:"small",type:"datetimerange",placeholder:"请选择时间","picker-options":e.pickerOption},model:{value:e.receiveTime,callback:function(t){e.receiveTime=t},expression:"receiveTime"}})],1),i("el-form-item",{staticStyle:{float:"right"},attrs:{label:""}},[i("cv-tool",{staticClass:"cv-tool",staticStyle:{margin:"0"},attrs:{name:e.$route.name,data:e.$store.getters.monitorMenu,"is-remove":!1,"is-add":!1,"is-modify":!1,"is-reset":!1},on:{search:e.isSearchEvent,export:e.down}})],1)],1),i("cv-publictree-content",{attrs:{model:"single","vehicle-monitor":e.handlerVehicleMonitor}},[i("cv-grid",{ref:"table",attrs:{url:"/driverRecord/troubleRecord",params:e.search}},[i("el-table-column",{attrs:{label:"车牌号码",prop:"plateCode","min-width":"100px"}}),i("el-table-column",{attrs:{label:"所属公司",prop:"etprsName","min-width":"100px"}}),i("el-table-column",{attrs:{label:"车辆分组",prop:"dpName","min-width":"100px"}}),i("el-table-column",{attrs:{label:"制动起始速度(km/h)",prop:"brakeSpeed","min-width":"200px"}}),i("el-table-column",{attrs:{label:"制动时间(s)",prop:"brakeTime","min-width":"150px"}}),i("el-table-column",{attrs:{label:"停车时间",prop:"stopTime","min-width":"120px"}}),i("el-table-column",{attrs:{label:"停车位置",prop:"address","min-width":"100px"}}),i("el-table-column",{attrs:{label:"操作",prop:"operation","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("cv-span",{attrs:{type:"primary"},nativeOn:{click:function(i){return e.handleInformation(t.row)}}},[e._v("详细信息")])]}}])})],1)],1),i("el-dialog",{attrs:{visible:e.dialog.flag,title:e.dialog.title,"custom-class":e.dialog.size},on:{"update:visible":function(t){return e.$set(e.dialog,"flag",t)}}},[i(e.dialog.name,{tag:"component",attrs:{options:e.dialog}})],1)],1)},[],!1,null,"c1cb7686",null).exports);l.install=function(e){e.component(l.name,l)},t.default=l}}]);
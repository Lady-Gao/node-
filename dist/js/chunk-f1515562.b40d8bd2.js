(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f1515562"],{"18ad":function(t,e,i){"use strict";i.r(e);var a={props:{options:{}},data:function(){return{submitFalg:!1,dialogFlag:!1,upload:{fileLen:"0",manufatureId:"1",terminalVersion:"1.0",appVersion:"1.0",dialPointName:"",timeLimit:"1",mehicleType:"",mehicleVersion:"",category:1},tokens:{Accept:"application/json, text/plain",token:localStorage.getItem("token")},rules:{terminalVersion:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},{pattern:/^\d[\d\.]+\d$/,message:this.$t("filter.type6")}],appVersion:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},{pattern:/^\d[\d\.]+\d$/,message:this.$t("filter.type6")}],manufatureId:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},{pattern:/^[0-9]+$/,message:this.$t("filter.type2")}],timeLimit:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},{pattern:/^[0-9]+$/,message:this.$t("filter.type2")}]}}},methods:{save:function(){var t=this;t.$refs.uploadForm.validate(function(e){e&&(0!=t.upload.fileLen&&"0"!=t.upload.fileLen?(t.loading=!0,t.$refs.upload.submit()):t.$message.warning("请选择上传bin文件!"))})},successFile:function(t,e,i){t.flag?(this.loading=!1,this.$message.success(this.$t("action.addSuccess")),this.$emit("confirm")):(this.loading=!1,this.$message.error(this.$t("error."+t.errorCode))),this.options.flag=!1},errorFile:function(t,e,i){this.loading=!1,this.$message.error(this.$t("action.addFail")),this.options.flag=!1},changeFile:function(t,e){this.upload.fileLen=e.length},init:function(){var t=this;this.$store.dispatch("queryTerminalParam",{vehicleId:this.options.vehicleId}).then(function(e){e.flag||t.$message.error(t.$t("error."+e.errorCode))})}},watch:{"options.flag":function(t){t||(this.options.name="")}}},r=(i("a994"),i("2877")),l=Object(r.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogFlag,expression:"dialogFlag"}],staticClass:"remote-updata"},[i("el-form",{ref:"uploadForm",attrs:{inline:!0,"label-position":"right","label-width":"110px",model:t.upload,rules:t.rules}},[i("el-form-item",{attrs:{label:"上传新版本:"}},[i("el-upload",{ref:"upload",attrs:{action:t.$COMMON.baseUrl+"/upgradeLog/insertUploadBinFileInfo",data:t.upload,"auto-upload":!1,headers:t.tokens,"on-change":t.changeFile,"on-remove":t.changeFile,"on-success":t.successFile,"on-error":t.errorFile,accept:".bin"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),i("el-form-item",{attrs:{label:"制造商ID:",prop:"manufatureId"}},[i("el-input",{attrs:{size:"small",maxlength:4},model:{value:t.upload.manufatureId,callback:function(e){t.$set(t.upload,"manufatureId","string"==typeof e?e.trim():e)},expression:"upload.manufatureId"}})],1),i("el-form-item",{attrs:{label:"硬件版本:",prop:"terminalVersion"}},[i("el-input",{attrs:{size:"small",maxlength:5},model:{value:t.upload.terminalVersion,callback:function(e){t.$set(t.upload,"terminalVersion","string"==typeof e?e.trim():e)},expression:"upload.terminalVersion"}})],1),i("el-form-item",{attrs:{label:"固件版本:",prop:"appVersion"}},[i("el-input",{attrs:{size:"small",maxlength:5},model:{value:t.upload.appVersion,callback:function(e){t.$set(t.upload,"appVersion","string"==typeof e?e.trim():e)},expression:"upload.appVersion"}})],1),i("el-form-item",{attrs:{label:"拨号点名称:",prop:"dialPointName"}},[i("el-input",{attrs:{size:"small",maxlength:12},model:{value:t.upload.dialPointName,callback:function(e){t.$set(t.upload,"dialPointName","string"==typeof e?e.trim():e)},expression:"upload.dialPointName"}})],1),i("el-form-item",{attrs:{label:"超时阀值(分):",prop:"timeLimit"}},[i("el-input",{attrs:{size:"small",maxlength:12},model:{value:t.upload.timeLimit,callback:function(e){t.$set(t.upload,"timeLimit","string"==typeof e?e.trim():e)},expression:"upload.timeLimit"}})],1)],1),i("div",{staticClass:"dialog-footer"},[i("el-button",{attrs:{type:"primary",loading:t.submitFalg},on:{click:t.save}},[t._v(t._s(t.$t("action.confirm")))]),i("el-button",{on:{click:function(e){t.options.flag=!1}}},[t._v(t._s(t.$t("action.cancel")))])],1)],1)},[],!1,null,null,null).exports,n=i("8369"),s=(i("ac6a"),i("0e86")),o={props:{options:{}},data:function(){return{submitFalg:!1,dialogFlag:!1,infoList:[],setting:{timeLimit:"",vehicleId:this.options.vehicleId?this.options.vehicleId:this.options.id,TCPPort:"",UDPPort:"",serverAddr:"",dialPointName:"",dialPassword:"",dialAccount:"",manufatureId:"",url:"",appVersion:"",terminalVersion:"",binName:"",id:"",enterpriseId:this.options.enterpriseId,category:1},tokens:{Accept:"application/json, text/plain",token:localStorage.getItem("token")},rules:{terminalVersion:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},{pattern:/^\d||\d[\d\.]+\d$/,message:this.$t("filter.type6")}],appVersion:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},{pattern:/^\d||\d[\d\.]+\d$/,message:this.$t("filter.type6")}],url:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],manufatureId:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},{pattern:/^\d+$/,message:this.$t("filter.type6")}],UDPPort:{pattern:/^\d+$/,message:this.$t("filter.type6"),trigger:"blur,change"},TCPPort:{pattern:/^\d+$/,message:this.$t("filter.type6"),trigger:"blur,change"},timeLimit:{pattern:/^\d+$/,message:this.$t("filter.type6"),trigger:"blur,change"},serverAddr:{pattern:/^(https?|ftp|file):\/\/[-A-Za-z0-9+&@#\/%?=~_|!:,.;]+[-A-Za-z0-9+&@#\/%=~_|]/,message:this.$t("filter.type6"),trigger:"blur,change"}}}},methods:{save:function(){var t=this,e=this;this.$refs.uploadForm.validate(function(i){i&&(e.submitFalg=!0,e.setting.category=1,t.$store.dispatch("insertUpgradeOrderInfoNew",e.setting).then(function(i){e.submitFalg=!1,e.options.flag=!1,t.$emit("confirm"),Object(s.a)(i,e.options)}))})},changeFile:function(t,e){this.upload.fileLen=e.length},init:function(){var t=this;this.$store.dispatch("queryUpgradeLogInfoListNew",{category:1}).then(function(e){e.flag?t.infoList=e.data:t.$message.error(t.$t("error."+e.errorCode))})},iptText:function(t){var e=this;this.infoList.forEach(function(i){i.id==t&&(e.setting.timeLimit=i.timeLimit,e.setting.TCPPort=i.tcpport,e.setting.UDPPort=i.udpport,e.setting.serverAddr=i.serverAddr,e.setting.dialPointName=i.dialPointName,e.setting.dialPassword=i.dialPassword,e.setting.dialAccount=i.dialAccount,e.setting.manufatureId=i.manufatureId,e.setting.url=i.url,e.setting.appVersion=i.appVersion,e.setting.terminalVersion=i.terminalVersion,e.setting.binName=i.binName)})}},watch:{"options.flag":function(t){t||(this.options.name="")}},mounted:function(){this.init()}},u=(i("684d"),{components:{updata:l,setting:Object(r.a)(o,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogFlag,expression:"dialogFlag"}],staticClass:"remote-setting"},[i("el-form",{ref:"uploadForm",attrs:{inline:!0,"label-position":"right","label-width":"130px",model:t.setting,rules:t.rules}},[i("el-form-item",{attrs:{label:"选择升级版本:",prop:"text"}},[i("el-select",{attrs:{placeholder:"请选择"},on:{change:t.iptText},model:{value:t.setting.id,callback:function(e){t.$set(t.setting,"id",e)},expression:"setting.id"}},t._l(t.infoList,function(t){return i("el-option",{key:t.id,attrs:{value:t.id,label:t.binName}})}),1)],1),i("el-form-item",{attrs:{label:"文件名称:",prop:"binName"}},[i("el-input",{attrs:{size:"small",maxlength:12},model:{value:t.setting.binName,callback:function(e){t.$set(t.setting,"binName","string"==typeof e?e.trim():e)},expression:"setting.binName"}})],1),i("el-form-item",{attrs:{label:"硬件版本:",prop:"terminalVersion"}},[i("el-input",{attrs:{size:"small",maxlength:12},model:{value:t.setting.terminalVersion,callback:function(e){t.$set(t.setting,"terminalVersion","string"==typeof e?e.trim():e)},expression:"setting.terminalVersion"}})],1),i("el-form-item",{attrs:{label:"固件版本:",prop:"appVersion"}},[i("el-input",{attrs:{size:"small",maxlength:12},model:{value:t.setting.appVersion,callback:function(e){t.$set(t.setting,"appVersion","string"==typeof e?e.trim():e)},expression:"setting.appVersion"}})],1),i("el-form-item",{attrs:{label:"URL地址:"}},[i("el-input",{attrs:{size:"small"},model:{value:t.setting.url,callback:function(e){t.$set(t.setting,"url","string"==typeof e?e.trim():e)},expression:"setting.url"}})],1),i("el-form-item",{attrs:{label:"制造商ID:",prop:"manufatureId"}},[i("el-input",{attrs:{size:"small",maxlength:12},model:{value:t.setting.manufatureId,callback:function(e){t.$set(t.setting,"manufatureId","string"==typeof e?e.trim():e)},expression:"setting.manufatureId"}})],1),i("el-form-item",{attrs:{label:"拨号用户名:",prop:"dialAccount"}},[i("el-input",{attrs:{size:"small"},model:{value:t.setting.dialAccount,callback:function(e){t.$set(t.setting,"dialAccount","string"==typeof e?e.trim():e)},expression:"setting.dialAccount"}})],1),i("el-form-item",{attrs:{label:"拨号密码:",prop:"dialPassword"}},[i("el-input",{attrs:{size:"small",maxlength:12},model:{value:t.setting.dialPassword,callback:function(e){t.$set(t.setting,"dialPassword","string"==typeof e?e.trim():e)},expression:"setting.dialPassword"}})],1),i("el-form-item",{attrs:{label:"拨号点名称:",prop:"dialPointName"}},[i("el-input",{attrs:{size:"small",maxlength:20},model:{value:t.setting.dialPointName,callback:function(e){t.$set(t.setting,"dialPointName","string"==typeof e?e.trim():e)},expression:"setting.dialPointName"}})],1),i("el-form-item",{attrs:{label:"服务器地址:",prop:"serverAddr"}},[i("el-input",{attrs:{size:"small"},model:{value:t.setting.serverAddr,callback:function(e){t.$set(t.setting,"serverAddr","string"==typeof e?e.trim():e)},expression:"setting.serverAddr"}})],1),i("el-form-item",{attrs:{label:"UDP端口号:",prop:"UDPPort"}},[i("el-input",{attrs:{size:"small",maxlength:7},model:{value:t.setting.UDPPort,callback:function(e){t.$set(t.setting,"UDPPort","string"==typeof e?e.trim():e)},expression:"setting.UDPPort"}})],1),i("el-form-item",{attrs:{label:"TCP端口号:",prop:"TCPPort"}},[i("el-input",{attrs:{size:"small",maxlength:12},model:{value:t.setting.TCPPort,callback:function(e){t.$set(t.setting,"TCPPort","string"==typeof e?e.trim():e)},expression:"setting.TCPPort"}})],1),i("el-form-item",{attrs:{label:"超时阀值(分):",prop:"timeLimit"}},[i("el-input",{attrs:{size:"small",maxlength:7},model:{value:t.setting.timeLimit,callback:function(e){t.$set(t.setting,"timeLimit","string"==typeof e?e.trim():e)},expression:"setting.timeLimit"}})],1)],1),i("div",{staticClass:"dialog-footer"},[i("el-button",{attrs:{type:"primary",loading:t.submitFalg},on:{click:t.save}},[t._v(t._s(t.$t("action.confirm")))]),i("el-button",{on:{click:function(e){t.options.flag=!1}}},[t._v(t._s(t.$t("action.cancel")))])],1)],1)},[],!1,null,null,null).exports},mixins:[n.a],data:function(){return{dialog:{title:"--",flag:!1,vehicleId:"",name:"updata",size:"dialog-full",id:"",enterpriseId:""}}},methods:{handlerMonitor:function(t){this.dialog.enterpriseId=t.enterpriseId,this.vehicleId=t.id,this.dialog.vehicleId=t.id,this.load()},load:function(){this.tableLoading("/upgradeLog/queryUpgradeLogInfo",{vehicleId:this.vehicleId})},update:function(){this.dialog.flag=!0,this.dialog.title="上传",this.dialog.name="updata",this.dialog.size="dialog-large"},set:function(){this.dialog.flag=!0,this.dialog.title="升级",this.dialog.name="setting",this.dialog.size="dialog-middle"},upgradeType:function(t){return"1"==t.upgradeType?"平台主动":"终端主动"}},mounted:function(){var t=this;this.$http({url:"/monitor/findVehicleTreeInfoList",params:{flag:!1,carCategory:1}}).then(function(e){t.energetree=e.data,t.treeLoading=!1})}}),p=Object(r.a)(u,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"terminal-params-set"},[i("cv-header",[i("el-form-item",{staticStyle:{float:"right"}},[i("el-button",{attrs:{size:"small"},on:{click:t.update}},[t._v("上传")]),i("el-button",{attrs:{size:"small"},on:{click:t.set}},[t._v("升级")])],1)],1),i("cv-content",[i("cv-tabs-tree",{staticClass:"energe-tree",attrs:{slot:"aside","is-operation":!1,titles:["车辆选择","车辆列表"],"is-checked":!1,"tree-data":t.energeTree,"node-monitor":t.handlerMonitor},slot:"aside"}),i("cv-grid",{attrs:{options:t.table},on:{load:t.load}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.table.loading,expression:"table.loading"}],ref:"table",attrs:{border:"",stripe:"",data:t.table.data,height:t.$service.getAutoHeight()}},[i("el-table-column",{attrs:{label:"固态版本",prop:"appVersion","show-overflow-tooltip":!0}}),i("el-table-column",{attrs:{label:"硬件版本",prop:"terminalVersion","show-overflow-tooltip":!0}}),i("el-table-column",{attrs:{label:"升级版本名称",prop:"binName","show-overflow-tooltip":!0}}),i("el-table-column",{attrs:{label:"升级方式",prop:"upgradeType","show-overflow-tooltip":!0,formatter:t.upgradeType}}),i("el-table-column",{attrs:{label:"升级时间",prop:"upgradeDate","show-overflow-tooltip":!0}})],1)],1)],1),i("el-dialog",{attrs:{visible:t.dialog.flag,title:t.dialog.title,"custom-class":t.dialog.size},on:{"update:visible":function(e){return t.$set(t.dialog,"flag",e)}}},[i(t.dialog.name,{tag:"component",attrs:{options:t.dialog},on:{confirm:t.load}})],1)],1)},[],!1,null,null,null).exports;e.default=p},"52e0":function(t,e,i){},"684d":function(t,e,i){"use strict";var a=i("94a5");i.n(a).a},8369:function(t,e,i){"use strict";var a=i("cebc");e.a={data:function(){return{table:{size:10,total:0,current:1,flag:!1,loading:!1,data:[]}}},methods:{tableLoading:function(t,e,i,r){var l=this;i?(this.table.flag=!0,this.table.current=1):this.table.flag=!1,this.table.loading=!0;var n=Object(a.a)({current:this.table.current,size:this.table.size},e);this.$http(r?{url:t,data:n}:{url:t,params:n}).then(function(t){var e=t.data;t.flag&&0!=e.length?(l.table.data=e.records,l.table.total=e.total,l.table.current=e.current):(l.table.data=[],l.table.total=0),l.table.loading=!1}).catch(function(t){l.table.loading=!1})},tableFilterColor:function(t){return this.$filter.plateCodeColor(t.plateColor)},tableFilterIcType:function(t){return this.$filter.icType(t.state)},tableFilterIcResult:function(t){return this.$filter.icResult(t.readerresult)},tableFilterTiredAlarm:function(t){return this.$filter.tiredAlarmType(t.alarm)},tableFilterTiredAdas:function(t){return this.$filter.tiredAdasType(t.alarm)},tableFilterOrderTypeS:function(t){return this.$filter.orderTypeS(t.sendFlag)},tableFilterFormat:function(t){return this.$filter.format(t.orderTime||t.gpsTime)},tableFilterFormats:function(t){return this.$filter.format(t.backTime)},tableBusLineType:function(t){return this.$filter.lineType(t.lineType)},tableFilterAcc:function(t){return this.$filter.accStatus(t.accStatus)},tableSplitMobile:function(t){return t.mobileCode?t.mobileCode.slice(1,t.mobileCode.length):""},tableConfirm:function(t){return this.$filter.isConfirm(t.isnotarize)},tableUpkeep:function(t){return this.$filter.isConfirm(t.type)},tableRenewal:function(t){return this.$filter.renewal(t.state)},tableReMot:function(t){return this.$filter.reMot(t.state)},tableOil:function(t){return this.$filter.fixNumber(t.total,2)},tableSex:function(t){return this.$filter.sex(t.sex)},plateCodeF:function(t){return t.plateCode?t.plateCode:"--"},plateCodeAndColor:function(t){return t.plateCode+"("+this.$filter.plateCodeColor(t.plateColor)+")"},driverStuas:function(t){return this.$filter.alarmStatus(t.fatigueDrive)},overStuas:function(t){return this.$filter.alarmStatus(t.tOversSpeed)},overHStuas:function(t){return this.$filter.alarmStatus(t.tOverSpeedH)},filterAlStuas:function(t){return this.$filter.alarmStatus(t.overSpeed)},filteralarmStuas:function(t){return this.$filter.alarmStatus(t.overSpeedH)},filterLStuas:function(t){return this.$filter.alarmStatus(t.forbid)},applyFlag:function(t){return this.$filter.applyFlag(t.applyFlag)},SEtime:function(t){return this.$filter.SEtime(t.StartTime,t.EndTime)},channelType:function(t){return this.$filter.channelType(t.Channel)},FileSize:function(t){return this.$filter.FileSize(t.fileSize||t.FileSize||0)},AlarmFilter:function(t){return this.$filter.AlarmFilter(t.Alarm)},MediaTypeFilter:function(t){return this.$filter.MediaTypeFilter(t.MediaType)},StreamTypeFilter:function(t){return this.$filter.StreamTypeFilter(t.StreamType)},StorageTypeFilter:function(t){return this.$filter.StorageTypeFilter(t.StorageType)},statusType:function(t){return this.$filter.statusType(t.Status)},fileSource:function(t){return this.$filter.fileSource(t.fileSource)}}}},"94a5":function(t,e,i){},a994:function(t,e,i){"use strict";var a=i("52e0");i.n(a).a}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0086e772"],{"0778":function(e,t,s){"use strict";var r=s("dabc");s.n(r).a},"312b":function(e,t,s){"use strict";var r=s("7b81");s.n(r).a},"69f9":function(e,t,s){"use strict";var r=s("cebc"),a=s("a057"),i=s.n(a),o=s("2f62"),n={props:{options:{}},data:function(){return{loading:!1,form:{pass:"",checkPass:""},rules:{pass:[{required:!0,message:this.$t("action.passwordEmpty"),trigger:"blur,change"},{validator:this.validatePass},{min:4,max:20,message:this.$filter.lanReplace(this.$t("filter.Length"),{min:4,max:20})}],checkPass:[{required:!0,message:this.$t("action.passwordEmpty"),trigger:"blur,change"},{validator:this.validatePass2},{min:4,max:20,message:this.$filter.lanReplace(this.$t("filter.Length"),{min:4,max:20})}]}}},computed:Object(r.a)({},Object(o.c)(["user"])),methods:{validatePass:function(e,t,s){""===t?s(new Error(this.$t("action.enterPassword"))):(""!==this.form.checkPass&&this.$refs.form.validateField("checkPass"),s())},validatePass2:function(e,t,s){""===t?s(new Error(this.$t("action.setAgain"))):t!==this.form.pass?s(new Error(this.$t("action.setDifferent"))):s()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$store.dispatch("updateUserPwdT",{userId:t.options.UserId,newPwd:i.a.$SHA512(i.a.$SHA512(t.form.checkPass)+"&"+t.options.account)}).then(function(e){t.loading=!1,e.flag?(t.$message.success({message:t.$t("action.modifySuccess")}),t.options.flag=!1):t.$message.error({message:t.$t("error."+e.errorCode)})}).catch(function(e){t.loading=!1})})},resetForm:function(e){this.$refs[e].resetFields()}},watch:{"options.flag":function(e){this.$refs.form.resetFields()}}},l=s("2877"),c=Object(l.a)(n,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modifyPass"},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"200px"}},[s("el-form-item",{attrs:{label:e.$t("UserManage.newPassword"),prop:"pass"}},[s("el-input",{staticStyle:{width:"200px"},attrs:{type:"password","auto-complete":"off",maxlength:20},model:{value:e.form.pass,callback:function(t){e.$set(e.form,"pass","string"==typeof t?t.trim():t)},expression:"form.pass"}}),s("cvPasswordStrength",{attrs:{value:e.form.pass}})],1),s("el-form-item",{attrs:{label:e.$t("UserManage.onceAgain"),prop:"checkPass"}},[s("el-input",{staticStyle:{width:"200px"},attrs:{type:"password","auto-complete":"off",maxlength:20},model:{value:e.form.checkPass,callback:function(t){e.$set(e.form,"checkPass","string"==typeof t?t.trim():t)},expression:"form.checkPass"}})],1),s("el-form-item",{staticClass:"textcenter"},[s("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("form")}}},[e._v(e._s(e.$t("action.save")))]),s("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v(e._s(e.$t("action.reset")))])],1)],1)],1)},[],!1,null,null,null);t.a=c.exports},"7b81":function(e,t,s){},a6c5:function(e,t,s){"use strict";s("ac6a");var r={props:{data:{},allChecked:{},checkDisabled:!1,checkFlag:!1},data:function(){return{checked:[],checkAll:!1,isIndeterminate:!1}},methods:{handleCheckAll:function(e){var t=[];this.data.actions.forEach(function(e){t.push(e.id)}),this.checked=e?t:[],this.isIndeterminate=!1,this.$emit("checked",{id:this.data.menuId,checked:this.checked,moduleId:this.data.moduleId})},handleChecked:function(e){this.$emit("checked",{id:this.data.menuId,checked:this.checked,moduleId:this.data.moduleId});var t=e.length;this.checkAll=t===this.data.actions.length,this.isIndeterminate=0<t&&t<this.data.actions.length}},mounted:function(){this.checked=[];var e=this.data;e&&(""!=e.actionIds?(this.checked=this.$service.stringArr(e.actionIds),this.checked.length===e.actions.length?this.checkAll=!0:0==this.checked.length?this.checkAll=!1:this.isIndeterminate=!0,this.$emit("checked",{id:this.data.menuId,checked:this.checked,moduleId:this.data.moduleId})):(this.checked=[],this.checkAll=!1))},watch:{data:function(e){var t=e;t&&(""!=t.actionIds?(this.checked=this.$service.stringArr(t.actionIds),this.checked.length==e.actions.length&&(this.isIndeterminate=!1,this.checkAll=!0),this.checked.length!=e.actions.length&&(0==this.checked.length?(this.isIndeterminate=!1,this.checkAll=!1):(this.checkAll=!1,this.isIndeterminate=!0)),this.$emit("checked",{id:this.data.menuId,checked:this.checked,moduleId:this.data.moduleId})):(this.checked=[],this.isIndeterminate=!1,this.checkAll=!1))},checkFlag:function(e){e&&(this.checked=[],this.checkAll=!1)}}},a=(s("312b"),s("2877")),i=Object(a.a)(r,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cv-allCheck"},[s("el-checkbox",{staticClass:"allCheck",attrs:{label:e.data.crumbs,name:e.data.crumbs,indeterminate:e.isIndeterminate,disabled:e.checkDisabled},on:{change:e.handleCheckAll},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v(e._s(e.data.crumbs))]),s("el-checkbox-group",{staticClass:"checkGroup",attrs:{disabled:e.checkDisabled},on:{change:e.handleChecked},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},e._l(e.data.actions,function(t){return s("el-checkbox",{key:t.id,attrs:{label:t.id,disabled:e.checkDisabled}},[e._v(e._s(t.name))])}),1)],1)},[],!1,null,null,null);t.a=i.exports},aea5:function(e,t,s){"use strict";s.r(t),s("7f7f"),s("96cf");var r,a=s("3b8d"),i=(s("28a5"),s("ac6a"),{components:{allCheck:s("a6c5").a},props:{options:{}},computed:{_tree:function(){return this.$refs.vgTree}},data:function(){return{isAccount:!1,componentName:"",tabDisabled:!0,label:"",enterpriseName:"",fleetChange:!1,newFleetIds:"",newEntid:"",panelLoading:!1,fleetIds:"",enterpriseIds:"",open:"",btn:!0,tabs:{activeName:"tabs0"},limitFlag:!1,allChecked:[],newAllChecked:[],allModules:[],arr:[],pickerOptions0:{disabledDate:function(e){return e.getTime()>Date.now()-864e5}},loading:!1,disable:!1,activeName:[],fleetTree:[],roleCheckID:[],userLevelList:[{value:0,label:this.$t("UserManage.userType2")},{value:1,label:this.$t("UserManage.userType6")}],userForm:{enterpriseId:"",username:"",account:"",mobilephone:"",shortname:"",email:"",sex:"",accountType:"",remark:"",landline:"",id:"",roleIds:"",idcards:"",userExt:{birthday:"",fox:"",zipCode:"",address:""},roleModule:[],fleetIds:"",hasLockCar:"'0'",userLevel:0},rules:{enterpriseId:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],account:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},{min:2,max:15,message:this.$filter.lanReplace(this.$t("filter.Length"),{min:2,max:15})},{pattern:/^(?!_)(?!.*?_$)[a-zA-Z0-9_\u4e00-\u9fa5]+$/,message:this.$t("filter.type4")},{validator:this.estimateEnterpriseName,trigger:"blur,change"},{validator:this.verificationAccount,trigger:"blur"}],accountType:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],roleToUser:[{message:this.$t("filter.notEmpty"),trigger:"blur,change"}],username:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],idcards:[{pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,message:this.$t("filter.type11")}],mobilephone:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},{pattern:/^(1[3|4|5|7|8][0-9]{9})$/,message:this.$t("filter.type10")}]},sex:[{value:"1",label:this.$t("common.sex.1")},{value:"0",label:this.$t("common.sex.0")}],userType:[{value:"1",label:this.$t("UserManage.userType1"),disabled:!0},{value:"2",label:this.$t("UserManage.userType2")},{value:"3",label:this.$t("UserManage.userType3"),disabled:!0},{value:"4",label:this.$t("UserManage.userType4"),disabled:!0},{value:"5",label:this.$t("UserManage.userType5"),disabled:!0}],roleList:[],filterText:""}},methods:{getEnterpriseList:function(e){},collapseClick:function(e){},disabledAllNodes:function(e){var t=this._tree.ztreeApi().getNodes()[0];this._tree.ztreeApi().setChkDisabled(t,e,!0,!0)},checkNodeByIds:function(e,t){var s=this,r=!(1<arguments.length&&void 0!==t)||t;e&&0<e.length&&e.forEach(function(e){var t=s._tree.ztreeApi().getNodesByParam("id",e);s._tree.ztreeApi().checkNode(t[0],!0,r)})},vgTreeReady:function(){2!=this.userForm.accountType?(this._tree.ztreeApi().checkAllNodes(!0),this.disabledAllNodes(!0)):(this.disabledAllNodes(!1),this._tree.ztreeApi().checkAllNodes(!1))},verificationAccount:function(e,t,s){var r=this;this.$service.isContext(t)||(t+""!=this.options.modifyData.account?this.$store.dispatch("checkEntUserIsAt",{account:t}).then(function(e){e.flag?s():s(new Error(r.$t("error.4000")))}):s())},estimateUserType:function(){4!=this.userForm.accountType&&5!=this.userForm.accountType||(this.disable=!0),2!=this.userForm.accountType?(this._tree.ztreeApi().checkAllNodes(!0),this.disabledAllNodes(!0)):(this.disabledAllNodes(!1),this._tree.ztreeApi().checkAllNodes(!1))},estimateEnterpriseName:function(e,t,s){""==this.userForm.enterpriseName?s(new Error(this.$t("UserManage.selectCompany"))):s()},checkedVal:function(e){var t=this;if(0<e.checked.length)if(0<this.allChecked.length){var s=this.findMenuID(e.id);s.flag?this.allChecked[s.index].actionIds=e.checked.join(","):this.allChecked.push({menuId:e.id,actionIds:e.checked.join(","),moduleId:e.moduleId})}else this.allChecked.push({menuId:e.id,actionIds:e.checked.join(","),moduleId:e.moduleId});0==e.checked.length&&this.allChecked.forEach(function(s,r){s.menuId!=e.id||t.allChecked.splice(r,1)})},findMenuID:function(e){for(var t=this.allChecked,s=!1,r=-1,a=0;a<t.length;a++)if(t[a].menuId==e){s=!0,r=a;break}return{flag:s,index:r}},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(t.userForm.roleModule=t.newAllChecked,!e)return!(t.tabs.activeName="tabs0");if(2!=t.userForm.accountType)t.userForm.fleetIds="";else{var s=t.fleetIds.split(","),r=t.enterpriseIds.split(",");1==t.fleetsChange?(t.userForm.fleetIds=s.join(","),t.userForm.entIds=r.join(",")):(t.userForm.fleetIds=t.newFleetIds,t.userForm.entIds=t.newEntid)}t.loading=!0,null==t.userForm.id?t.userAction("/user/insertUser",t.userForm):t.userAction("/user/updateUserById",t.userForm)})},userAction:function(e,t){var s=this;this.$http({url:e,data:JSON.stringify(t)}).then(function(e){!e.flag&&e.errorCode?s.$message.error({message:s.$t("error."+e.errorCode)}):(s.$emit("confirm",s.userForm.enterpriseId),s.options.flag=!1,s.$message.success(s.$t("UserManage.actionSuccess"))),s.loading=!1}).catch(function(){s.loading=!1})},getUserByID:function(e){var t=this,s=this.$loading({text:this.$t("role.type1"),target:document.querySelector(".el-dialog")});this.$http({url:"/user/getUserById",params:{id:e}}).then(function(e){if(s.close(),!e.flag&&e.errorCode)t.$message.error({message:t.$t("error."+e.errorCode)});else{t.messageMatch(t.userForm,e.data),t.userForm.accountType=e.data.accountType+"",t.userForm.userType=e.data.userType+"",t.userForm.roleToUser=e.data.roleToUser,t.userForm.hasLockCar=e.data.hasLockCar,4==e.data.accountType?t.disable=!0:t.disable=!1,""==!e.data.userExt.birthday&&(t.userForm.userExt.birthday=new Date(e.data.userExt.birthday+"T16:00:00.000Z"));var r=t.userForm.roleIds,a=[];null!=r&&""!=r&&(a=r.split(","),t.userForm.roleIds=a.join(","),t.roleCheckID=a),setTimeout(t.getMenuByIdsT(t.userForm.enterpriseId,t.userForm.roleIds,t.userForm.id),1e3)}}).catch(function(){s.close()})},messageMatch:function(e,t){for(var s in e)for(var r in t)r==s&&(e[s]=t[r])},getRoleByenterpriseId:function(e){var t=this;this.$http({url:"/role/findAllRole",method:"get",params:{enterpriseId:e}}).then(function(e){!e.flag&&e.errorCode?t.$message.error({message:t.$t("error."+e.errorCode)}):t.roleList=e.data})},resetForm:function(e){this.$refs[e].resetFields(),this.options.flag=!1},filterNode:function(){var e=this._tree.ztreeApi().getCheckedNodes();if(this.fleetsChange=!0,0<e.length){var t=[],s=[];e.forEach(function(e){2!=e.type&&3!=e.type||t.push(e.id),1==e.type&&s.push(e.id)}),this.fleetIds=t.join(","),this.enterpriseIds=s.join(",")}else this.fleetIds="",this.enterpriseIds=""},selectRole:function(e){this.roleCheckID=e},getFleetsByEnterpriseId:function(e){var t=this;this.$http({url:"/fleet/findEnterpriseFleetInfoListByEnt",params:{enterpriseId:e}}).then(function(e){!e.flag&&e.errorCode?t.$message.error({message:t.$t("error."+e.errorCode)}):(t.fleetTree=[],t.$store.dispatch("fleetTree",e.data),t.fleetTree=e.data,2==t.userForm.accountType&&t.getUserFleetsByid(t.userForm.id,t.userForm.enterpriseId))})},getUserFleetsByid:function(e,t){var s=this,r={userId:e};this.$http({url:"/user/findFleetUserBySysUser",params:r}).then(function(e){!e.flag&&e.errorCode?s.$message.error({message:s.$t("error."+e.errorCode)}):(e.data.fleetIds&&(s.newFleetIds=e.data.fleetIds.join(",")),e.data.entIds&&(s.newEntid=e.data.entIds.join(",")),0!=e.data.length&&s.checkNodeByIds(e.data.fleetIds),2!=s.userForm.accountType&&s._tree.disabledAllNodes())})},getMenuByIdsT:function(e,t,s){var r=this,a={enterpriseId:e,roleIds:t,id:s};this.$store.dispatch("getMenuByenterpriseIdAndroleIdsT",a).then(function(e){e.flag&&!e.errorCode?r.allModules=e.data:r.allModules=[],setTimeout(function(e){r.panelLoading=!1},500)})},getValue:function(e){this.userForm.hasLockCar=e}},mounted:function(){this.componentName="allCheck",this.userForm.id=this.options.modifyData.id,null!=this.userForm.id?(this.getUserByID(this.userForm.id),this.isAccount=!0,this.tabDisabled=!1):this.isAccount=!1},watch:{allChecked:function(e){this.newAllChecked=e},"options.flag":function(e){e||(this.options.name="",this.options.isShow=!1,this.options.modifyData={})},roleCheckID:function(e){0==e.length?(this.allChecked=[],this.allModules=[],""==this.options.modifyData.id?this.getMenuByIdsT(this.userForm.enterpriseId):(this.userForm.roleIds="",this.getMenuByIdsT(this.userForm.enterpriseId,"",this.options.modifyData.id))):(this.allChecked=[],this.allModules=[],this.userForm.roleIds=e.join(","),null!=this.userForm.id?this.getMenuByIdsT(this.userForm.enterpriseId,this.userForm.roleIds,this.userForm.id):this.getMenuByIdsT(this.userForm.enterpriseId,this.userForm.roleIds)),0!=e.length?this.options.isShow=!0:this.options.isShow=!1},"userForm.enterpriseId":function(e,t){e?(this.getRoleByenterpriseId(this.userForm.enterpriseId),this.getFleetsByEnterpriseId(this.userForm.enterpriseId),null!=this.userForm.id?this.getMenuByIdsT(this.userForm.enterpriseId,this.userForm.roleIds,this.userForm.id):this.getMenuByIdsT(this.userForm.enterpriseId)):this.fleetTree=[],this.tabDisabled=!e},filterText:function(e){this._tree.filterNodes(e)}}}),o=(s("c72a"),s("2877")),n=Object(o.a)(i,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-row",{staticClass:"addUser-addModify"},[s("el-col",{attrs:{span:24}},[s("cv-tabs",{attrs:{titles:[e.$t("UserManage.basicInformation"),e.$t("UserManage.usePermission"),e.$t("UserManage.carsPermission")],forceRender:!1},model:{value:e.tabs.activeName,callback:function(t){e.$set(e.tabs,"activeName",t)},expression:"tabs.activeName"}},[s("el-form",{ref:"userForm",attrs:{model:e.userForm,rules:e.rules,"label-width":"100px"}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("UserManage.wellmadestarm"),prop:"enterpriseId"}},[s("cv-dropdown-tree",{ref:"dropTree",attrs:{disabled:e.isAccount,url:"/enterprise/getEnterpriseTreeList",treeLoaded:e.getEnterpriseList},model:{value:e.userForm.enterpriseId,callback:function(t){e.$set(e.userForm,"enterpriseId",t)},expression:"userForm.enterpriseId"}})],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("UserManage.role"),prop:"roleToUser"}},[s("el-select",{staticClass:"itemWidth",attrs:{disabled:e.disable,multiple:"",placeholder:e.$t("el.select.placeholder")},on:{change:e.selectRole},model:{value:e.roleCheckID,callback:function(t){e.roleCheckID=t},expression:"roleCheckID"}},e._l(e.roleList,function(e){return s("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})}),1)],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("UserManage.accountNumber"),prop:"account"}},[s("el-input",{attrs:{disabled:e.isAccount,placeholder:e.$t("companyManage.ph1")},model:{value:e.userForm.account,callback:function(t){e.$set(e.userForm,"account",t)},expression:"userForm.account"}})],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("UserManage.name"),prop:"username"}},[s("el-input",{attrs:{placeholder:e.$t("companyManage.ph1")},model:{value:e.userForm.username,callback:function(t){e.$set(e.userForm,"username",t)},expression:"userForm.username"}})],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("UserManage.userType"),prop:"accountType"}},[s("el-select",{staticClass:"itemWidth",attrs:{disabled:e.disable,placeholder:e.$t("el.select.placeholder")},on:{change:e.estimateUserType},model:{value:e.userForm.accountType,callback:function(t){e.$set(e.userForm,"accountType",t)},expression:"userForm.accountType"}},e._l(e.userType,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1)],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("UserManage.userDescribe"),prop:"remark"}},[s("el-input",{attrs:{placeholder:e.$t("companyManage.ph1")},model:{value:e.userForm.remark,callback:function(t){e.$set(e.userForm,"remark",t)},expression:"userForm.remark"}})],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("UserManage.gender"),prop:"sex"}},[s("el-select",{staticClass:"itemWidth",attrs:{placeholder:e.$t("el.select.placeholder")},model:{value:e.userForm.sex,callback:function(t){e.$set(e.userForm,"sex",t)},expression:"userForm.sex"}},e._l(e.sex,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("UserManage.dateOfBirth"),prop:"birthday"}},[s("el-date-picker",{staticClass:"itemWidth",attrs:{type:"date",placeholder:e.$t("placeholder.selectDate"),"picker-options":e.pickerOptions0,editable:!1},model:{value:e.userForm.userExt.birthday,callback:function(t){e.$set(e.userForm.userExt,"birthday",t)},expression:"userForm.userExt.birthday"}})],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("UserManage.postalcode"),prop:"zipCode"}},[s("el-input",{attrs:{placeholder:e.$t("companyManage.ph1")},model:{value:e.userForm.userExt.zipCode,callback:function(t){e.$set(e.userForm.userExt,"zipCode",t)},expression:"userForm.userExt.zipCode"}})],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("UserManage.telephone"),prop:"landline"}},[s("el-input",{attrs:{placeholder:e.$t("companyManage.ph1")},model:{value:e.userForm.landline,callback:function(t){e.$set(e.userForm,"landline",t)},expression:"userForm.landline"}})],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("UserManage.identityCard"),prop:"idcards"}},[s("el-input",{attrs:{placeholder:e.$t("companyManage.ph1")},model:{value:e.userForm.idcards,callback:function(t){e.$set(e.userForm,"idcards",t)},expression:"userForm.idcards"}})],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("UserManage.fax"),prop:"fox"}},[s("el-input",{attrs:{placeholder:e.$t("companyManage.ph1")},model:{value:e.userForm.userExt.fox,callback:function(t){e.$set(e.userForm.userExt,"fox",t)},expression:"userForm.userExt.fox"}})],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("UserManage.mailbox"),prop:"email"}},[s("el-input",{attrs:{placeholder:e.$t("companyManage.ph1")},model:{value:e.userForm.email,callback:function(t){e.$set(e.userForm,"email",t)},expression:"userForm.email"}})],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("UserManage.mobilePhone"),prop:"mobilephone"}},[s("el-input",{attrs:{placeholder:e.$t("companyManage.ph1")},model:{value:e.userForm.mobilephone,callback:function(t){e.$set(e.userForm,"mobilephone",t)},expression:"userForm.mobilephone"}})],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("UserManage.address"),prop:"address"}},[s("el-input",{attrs:{type:"textarea",placeholder:e.$t("companyManage.ph1")},model:{value:e.userForm.userExt.address,callback:function(t){e.$set(e.userForm.userExt,"address",t)},expression:"userForm.userExt.address"}})],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:e.$t("UserManage.userLevel")}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$t("el.select.placeholder")},model:{value:e.userForm.userLevel,callback:function(t){e.$set(e.userForm,"userLevel",e._n(t))},expression:"userForm.userLevel"}},e._l(e.userLevelList,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),s("div",{staticClass:"vlimit"},[s("label",{staticClass:"vLlabel"},[e._v(e._s(e.$t("UserManage.vehicleLimit")))]),s("el-switch",{attrs:{"on-color":"#13ce66","off-color":"#eee","active-value":"1","inactive-value":"0","active-text":e.$t("action.open"),"inactive-text":e.$t("action.closed")},on:{change:e.getValue},model:{value:e.userForm.hasLockCar,callback:function(t){e.$set(e.userForm,"hasLockCar",t)},expression:"userForm.hasLockCar"}})],1)],1),s("div",[e.allModules&&0==e.allModules.length?s("h2",{staticClass:"noMessage"},[e._v(e._s(e.$t("el.table.emptyText")))]):e._e(),s("el-collapse",{directives:[{name:"loading",rawName:"v-loading",value:e.panelLoading,expression:"panelLoading"}],staticStyle:{"min-height":"230px"},on:{change:e.collapseClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.allModules,function(t){return e.allModules&&0<e.allModules.length?s("el-collapse-item",{key:t._id,attrs:{title:t.name,name:t.id}},[s("cv-scrollbar",{staticStyle:{height:"230px"}},e._l(t.roleModules,function(t){return s(e.componentName,{key:t.index,tag:"component",attrs:{data:t,allChecked:e.allChecked,checkDisabled:e.options.isShow},on:{checked:e.checkedVal}})}),1)],1):e._e()}),1)],1),s("div",[s("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:e.$t("el.select.placeholder")},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),s("cv-scrollbar",{class:["tabs2"==e.tabs.activeName?"scrollW1":"scrollW2"]},[s("cv-tree",{ref:"vgTree",attrs:{treeLoaded:e.vgTreeReady,data:e.$store.getters.fleetTree?e.$store.getters.fleetTree:e.fleetTree,isCheck:!0},on:{"node-check":e.filterNode}})],1)],1)],1)],1),s("el-col",{staticClass:"dialog-footer",staticStyle:{"padding-top":"20px"},attrs:{span:24}},[s("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.submitForm("userForm")}}},[e._v(e._s(e.$t("action.save")))]),s("el-button",{on:{click:function(t){return e.resetForm("userForm")}}},[e._v(e._s(e.$t("action.cancel")))])],1)],1)},[],!1,null,null,null).exports,l=s("b0ad"),c={components:{add:n,resertPassword:s("69f9").a},mixins:[l.a],computed:{_table:function(){return this.$refs.table}},data:function(){return{Content:"",grid:{enterpriseId:"",account:""},dialog:{flag:!1,title:"--",size:"dialog-small",name:"add",modifyData:{},isModify:!1,account:""}}},methods:{HandleAccount:(r=Object(a.a)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$http({url:"/user/updateUserStatusManually",params:{userId:t.id,accountStatus:0==t.accountStatus?2:0}});case 2:e.sent,this.searchClick();case 4:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)}),searchClick:function(e){this._table.tableInitial(!0)},addUser:function(e){this.$service.mapParams(this.dialog,{flag:!0,title:e.title,size:"dialog-large",name:"add"}),this.dialog.isModify=!1},rowRender:function(e,t){switch(e.accountType){case 1:return this.$t("UserManage.userType1");case 2:return this.$t("UserManage.userType2");case 3:return this.$t("UserManage.userType3");case 4:return this.$t("UserManage.userType4");case 5:return this.$t("UserManage.userType5")}},modifyUser:function(e){this.$service.mapParams(this.dialog,{size:"dialog-large",name:"add",title:this.$t("power.modify"),flag:!0}),this.dialog.isModify=!0,this.dialog.modifyData=e.row},removeUser:function(e){var t=this;this.confirmPrompt().then(function(){t.$http({url:"/user/deleteUserById",params:{id:e.row.id}}).then(function(e){e.flag?(t._table.tableInitial(!0),t.$message.success(t.$t("UserManage.actionSuccess"))):t.$message.error(t.$t("UserManage.actionError"))})}).catch(function(){t.$message.info(t.$t("UserManage.cancelRemove"))})},resert:function(e){this.dialog.flag=!0,this.dialog.size="dialog-small",this.dialog.name="resertPassword",this.dialog.title=this.$t("power.sendResert"),this.dialog.UserId=e.id,this.dialog.account=e.account}}},d=(s("0778"),Object(o.a)(c,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"userManage"},[s("cv-operation",[s("el-form-item",[s("cv-dropdown-tree",{attrs:{url:"/enterprise/getEnterpriseTreeList",placeholder:e.$t("UserManage.selectByCompany"),"is-default":!0},model:{value:e.grid.enterpriseId,callback:function(t){e.$set(e.grid,"enterpriseId",t)},expression:"grid.enterpriseId"}})],1),s("el-form-item",[s("el-input",{attrs:{size:"small",placeholder:e.$t("UserManage.selectByCount")},model:{value:e.grid.account,callback:function(t){e.$set(e.grid,"account",t)},expression:"grid.account"}})],1),s("el-form-item",[s("cv-tool",{attrs:{name:e.$route.name,data:e.$store.getters.manageMenus,"is-remove":!1,"is-modify":!1,"is-export":!1},on:{add:e.addUser,search:e.searchClick}})],1)],1),s("cv-content",[s("cv-grid",{ref:"table",attrs:{params:e.grid,url:"/userrole/findUserAndRoleCondition"}},[s("el-table-column",{attrs:{label:e.$t("UserManage.account"),prop:"account"}}),s("el-table-column",{attrs:{label:e.$t("UserManage.username"),prop:"username"}}),s("el-table-column",{attrs:{label:e.$t("UserManage.roleNames"),prop:"roleNames"}}),s("el-table-column",{attrs:{label:e.$t("UserManage.wellmadestarm"),prop:"enterpriseName"}}),s("el-table-column",{attrs:{label:e.$t("UserManage.accountType"),prop:"accountType",formatter:e.rowRender}}),s("el-table-column",{attrs:{label:e.$t("UserManage.operation"),width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("cv-table-tool",{directives:[{name:"show",rawName:"v-show",value:4!=t.row.accountType,expression:"scope.row.accountType!=4"}],attrs:{name:e.$route.name,data:e.$store.getters.manageMenus,"is-remove":1==t.row.accountType||2==t.row.accountType},on:{modify:function(s){return e.modifyUser(t)},remove:function(s){return e.removeUser(t)},sendResert:function(s){return e.resert(t.row)}}}),s("cv-span",{attrs:{type:"success"},nativeOn:{click:function(s){return e.HandleAccount(t.row)}}},[e._v(e._s(t.row.accountStatus?e.$t("UserManage.enableAccounts"):e.$t("UserManage.disableAccounts")))])]}}])})],1)],1),s("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.dialog.flag,title:e.dialog.title,"custom-class":e.dialog.size},on:{"update:visible":function(t){return e.$set(e.dialog,"flag",t)}}},[s(e.dialog.name,{tag:"component",attrs:{options:e.dialog},on:{confirm:e.searchClick}})],1)],1)},[],!1,null,null,null).exports);d.install=function(e){e.component(d.name,d)},t.default=d},b0ad:function(e,t,s){"use strict";(function(e){s("7f7f"),t.a={methods:{confirmPrompt:function(e,t){var s=this,r=e||this.$t("action.confirmIsRemove");return new Promise(function(e,a){s.$confirm(r,s.$t("action.tip"),{confirmButtonText:s.$t("action.confirm"),cancelButtonText:s.$t("action.cancel"),type:"warning"}).then(function(){e()}).catch(function(){"function"==typeof t&&t()})})},timeLimitFunc:function(e,t,s){if(e&&t)return((new Date(t)-new Date(e))/864e5).toFixed(1)<=s||this.$message.error({message:this.$t("请选择时间范围在"+s+"天内")});this.$message.error({message:this.$t("请选择时间范围")})},addRemoveUnique:function(e,t,s){var r=e.length,a=t.length;return a<r?{name:"add",data:this.$service.isUnique(e,t,s)}:r<a?{name:"remove",data:this.$service.isUnique(t,e,s)}:r==a?{name:"equal",data:this.$service.isUnique(e,t,s)}:void 0},showTooltip:function(e,t){var s=e.target,r=this.$refs[t];r.referenceElm=s,r.$refs.popper.style.display="none",r.doDestroy(),r.setExpectedState(!0),r.handleShowPopper()},mouseenterShowTip:function(e,t,s){var r=e.target;if(r.scrollWidth>r.offsetWidth||s)return this.showTooltip(e,t),s?s.startTime+"~"+s.endTime:r.innerText},mouseenterShowToolTip:function(e,t,s){var r=e.target;return this.showTooltip(e,t),!s&&r.innerText},mouseoverHideTip:function(e){var t=this.$refs[e];t&&(t.setExpectedState(!1),t.handleClosePopper())},asyncDownloadScript:function(t,s){var r=this,a=0<arguments.length&&void 0!==t?t:"Baidu",i=1<arguments.length?s:void 0;return e[a]?e[a]._preloader?e[a]._preloader:Promise.resolve(e[a]):(e[a]={},e[a]._preloader=new Promise(function(t,s){var o=document.createElement("script");o.src=i,e.document.body.appendChild(o),r.$service.isIe()&&r.$service.IE_VERSION<11?o.onreadystatechange=function(){"loaded"!=o.readyState&&"complete"!=o.readyState||(t(e[a]),e[a]._preloader=null)}:o.onload=function(){t(e[a]),e[a]._preloader=null}}),e[a]._preloader)}}}}).call(this,s("c8ba"))},c72a:function(e,t,s){"use strict";var r=s("d183");s.n(r).a},d183:function(e,t,s){},dabc:function(e,t,s){}}]);
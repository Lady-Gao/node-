(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d0c82a1"],{"545a":function(e,t,r){"use strict";r.r(t),r("96cf");var a,i=r("3b8d"),n={computed:{_table1:function(){return this.$refs.table1},_table2:function(){return this.$refs.table2},_table3:function(){return this.$refs.table3},_table4:function(){return this.$refs.table4},_table5:function(){return this.$refs.table5},_table6:function(){return this.$refs.table6}},data:function(){return{label:{},fleetId:0,enterpriseId:0,searchParams:{enterpriseId:"",startTime:this.$filter.format(new Date,"yyyy-MM-dd start"),endTime:this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss")},searchParams2:{queryTime:this.$filter.format(new Date,"yyyy-MM-dd"),enterpriseId:0},searchParams3:{recordTime:this.$filter.format(new Date,"yyyy-MM-dd"),enterpriseId:0,fleetId:0},searchParams4:{enterpriseId:0,startTime:this.$filter.format(new Date,"yyyy-MM-dd start"),endTime:this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss"),fleetId:0},SEtime:[this.$filter.format(new Date,"yyyy-MM-dd start"),this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss")],searchTime:this.$filter.format(new Date,"yyyy-MM-dd"),activeName:"tabs0",tabs:{activeName:"tabs0"},pickerOption:{disabledDate:function(e){return e.getTime()>Date.now()}}}},methods:{tabSwitchouter:function(e){switch(e){case"tabs0":this._table1.tableInitial(!0);break;case"tabs1":this._table2.tableInitial(!0);break;case"tabs2":this._table3.tableInitial(!0)}},tabSwitchinside:function(e){switch(e){case"tabs0":this._table1.tableInitial(!0);break;case"tabs1":this._table4.tableInitial(!0);break;case"tabs2":this._table5.tableInitial(!0);break;case"tabs3":this._table6.tableInitial(!0)}},search:function(){if("tabs0"==this.activeName){if(!this.enterpriseId)return void this.$message.warning("请选择企业");this.tabSwitchinside(this.tabs.activeName)}else this.tabSwitchouter(this.activeName)},linkToCompany:function(e){this.enterpriseId=e.enterpriseId,this.searchParams.enterpriseId=e.enterpriseId,this.tabs.activeName="tabs1",this._table4.tableInitial(!0)},linkToFleet:function(e){var t=this;setTimeout(function(r){t.fleetId=e.fleetId},500),this.enterpriseId=e.enterpriseId,this.searchParams4.enterpriseId=e.enterpriseId,this.searchParams4.fleetId=e.fleetId,this.tabs.activeName="tabs3",this._table6.tableInitial(!0)},outPut:(a=Object(i.a)(regeneratorRuntime.mark(function e(){var t,r,a,i,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.SEtime){e.next=3;break}return this.$message.warning("请选择时间!"),e.abrupt("return",!1);case 3:e.t0=this.activeName,e.next="tabs0"===e.t0?6:"tabs1"===e.t0?30:"tabs2"===e.t0?34:38;break;case 6:e.t1=this.tabs.activeName,e.next="tabs0"===e.t1?9:"tabs1"===e.t1?14:"tabs2"===e.t1?19:"tabs3"===e.t1?24:29;break;case 9:return r={startTime:this.$filter.format(new Date(this.SEtime[0]),"yyyy-MM-dd HH:mm:ss"),endTime:this.$filter.format(new Date(this.SEtime[1]),"yyyy-MM-dd HH:mm:ss"),enterpriseId:this.searchParams.enterpriseId},e.next=12,this.$http({url:"/report/exportEnterpriseOnLineRate",params:r});case 12:return t=e.sent,e.abrupt("break",29);case 14:return a={startTime:this.$filter.format(new Date(this.SEtime[0]),"yyyy-MM-dd HH:mm:ss"),endTime:this.$filter.format(new Date(this.SEtime[1]),"yyyy-MM-dd HH:mm:ss"),enterpriseId:this.searchParams2.enterpriseId},e.next=17,this.$http({url:"/report/exportEnterpriseDetailsOnLineRate",params:a});case 17:return t=e.sent,e.abrupt("break",29);case 19:return i={startTime:this.$filter.format(new Date(this.SEtime[0]),"yyyy-MM-dd HH:mm:ss"),endTime:this.$filter.format(new Date(this.SEtime[1]),"yyyy-MM-dd HH:mm:ss"),enterpriseId:this.searchParams3.enterpriseId,fleetId:this.searchParams3.fleetId},e.next=22,this.$http({url:"/report/exportFleetOnLineRate",params:i});case 22:return t=e.sent,e.abrupt("break",29);case 24:return n={startTime:this.$filter.format(new Date(this.SEtime[0]),"yyyy-MM-dd HH:mm:ss"),endTime:this.$filter.format(new Date(this.SEtime[1]),"yyyy-MM-dd HH:mm:ss"),enterpriseId:this.searchParams4.enterpriseId,fleetId:this.searchParams4.fleetId},e.next=27,this.$http({url:"/report/exportFleetDetailsOnLineRate",params:n});case 27:return t=e.sent,e.abrupt("break",29);case 29:return e.abrupt("break",38);case 30:return e.next=32,this.$http({url:"/report/exportVehicleOnOffRateInfoList",params:{queryTime:this.searchTime,enterpriseId:this.enterpriseId}});case 32:return t=e.sent,e.abrupt("break",38);case 34:return e.next=36,this.$http({url:"/report/exportVehicleNolineList",params:{recordTime:this.searchTime,enterpriseId:this.enterpriseId}});case 36:return t=e.sent,e.abrupt("break",38);case 38:t.flag?this.$message.warning("导出任务已执行"):this.$message.error(this.$t("error."+t.errorCode));case 39:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},watch:{enterpriseId:function(e){this.searchParams.enterpriseId=e,this.searchParams2.enterpriseId=e,this.searchParams3.enterpriseId=e,this.searchParams4.enterpriseId=e},searchTime:function(e){this.searchParams2.queryTime=e,this.searchParams3.recordTime=e},SEtime:function(e){this.searchParams.startTime=e?e[0]:"",this.searchParams.endTime=e?e[1]:"",this.searchParams4.startTime=e?e[0]:"",this.searchParams4.endTime=e?e[1]:""},fleetId:function(e){this.searchParams3.fleetId=e,this.searchParams4.fleetId=e},activeName:function(e){}}},s=r("2877"),l=Object(s.a)(n,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"onlineRateCount"},[r("cv-operation",{attrs:{position:"left"}},[r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"tabs0"==e.activeName,expression:"activeName == 'tabs0'?true:false"}],attrs:{label:e.$t("reportForm.onlineRate.SEtime")}},[r("el-date-picker",{attrs:{editable:!1,clearable:!1,type:"datetimerange",placeholder:e.$t("reportForm.onlineRate.selectRange"),"value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOption},model:{value:e.SEtime,callback:function(t){e.SEtime=t},expression:"SEtime"}})],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"tabs0"!=e.activeName,expression:"activeName == 'tabs0'?false:true"}],attrs:{label:e.$t("reportForm.overSpeed.searchTime")}},[r("el-date-picker",{attrs:{clearable:!1,editable:!1,"value-format":"yyyy-MM-dd",type:"date",placeholder:e.$t("reportForm.onlineRate.selectTime")},model:{value:e.searchTime,callback:function(t){e.searchTime=t},expression:"searchTime"}})],1),r("el-form-item",{attrs:{label:e.$t("reportForm.onlineRate.enterpriseName")}},[r("cv-dropdown-tree",{attrs:{url:"/enterprise/findEnterpriseOrganizationTreeList ",readonly:!1,label:e.label},on:{"update:label":function(t){e.label=t}},model:{value:e.enterpriseId,callback:function(t){e.enterpriseId=t},expression:"enterpriseId"}})],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"tabs0"==e.activeName&&"tabs2"==e.tabs.activeName||"tabs0"==e.activeName&&"tabs3"==e.tabs.activeName,expression:"(activeName == 'tabs0' && tabs.activeName == 'tabs2' ||activeName == 'tabs0' && tabs.activeName == 'tabs3')?true:false"}],attrs:{label:e.$t("reportForm.onlineRate.fleetName")}},[r("cv-dropdown-tree",{attrs:{url:"/enterprise/findFleetTreeList",readonly:!1,"auto-params":{enterpriseId:e.label.enterpriseId,pId:e.label.id,type:e.label.type}},model:{value:e.fleetId,callback:function(t){e.fleetId=t},expression:"fleetId"}})],1),r("el-form-item",{staticStyle:{float:"right"}},[r("cv-tool",{staticClass:"cv-tool",staticStyle:{margin:"0"},attrs:{name:e.$route.name,data:e.$store.getters.monitorMenu,"is-remove":!1,"is-add":!1,"is-modify":!1},on:{search:e.search,export:e.outPut}})],1)],1),r("cv-content",{attrs:{fill:!0}},[r("cv-tabs",{attrs:{titles:["在线率统计","上线率统计","车辆不在线统计"],"force-render":!1},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("cv-tabs",{attrs:{titles:["公司在线率统计","公司在线率详细记录","分组在线率","分组在线率详细记录"],"force-render":!1},model:{value:e.tabs.activeName,callback:function(t){e.$set(e.tabs,"activeName",t)},expression:"tabs.activeName"}},[r("cv-grid",{ref:"table1",attrs:{params:e.searchParams,url:"/report/findEnterpriseOnLineRate"}},[r("el-table-column",{attrs:{align:"center","min-width":"100",label:e.$t("reportForm.onlineRate.enterpriseName"),prop:"enterpriseName"}}),r("el-table-column",{attrs:{align:"center","min-width":"150",label:e.$t("reportForm.onlineRate.sTime"),prop:"startTime"}}),r("el-table-column",{attrs:{align:"center","min-width":"150",label:e.$t("reportForm.onlineRate.eTime"),prop:"endTime"}}),r("el-table-column",{attrs:{align:"center","min-width":"80",label:e.$t("reportForm.onlineRate.oTimes"),prop:"onlineCarCount"}}),r("el-table-column",{attrs:{align:"center","min-width":"80",label:e.$t("reportForm.onlineRate.offTimes"),prop:"offLineCarCount"}}),r("el-table-column",{attrs:{align:"center","min-width":"80",label:e.$t("reportForm.onlineRate.onRate"),prop:"onLineRate"}}),r("el-table-column",{attrs:{align:"center","min-width":"80",label:e.$t("action.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.linkToCompany(t.row)}}},[e._v("查看")])]}}])})],1),r("cv-grid",{ref:"table4",attrs:{params:e.searchParams,url:"/report/findEnterpriseDetailsOnLineRate"}},[r("el-table-column",{attrs:{"min-width":"100",align:"center",label:e.$t("reportForm.onlineRate.enterpriseName"),prop:"enterpriseName"}}),r("el-table-column",{attrs:{"min-width":"150",align:"center",label:e.$t("reportForm.onlineRate.recordTime"),prop:"queryTime"}}),r("el-table-column",{attrs:{"min-width":"100",align:"center",label:e.$t("reportForm.onlineRate.allV"),prop:"vehicleCount"}}),r("el-table-column",{attrs:{"min-width":"100",align:"center",label:e.$t("reportForm.onlineRate.onV"),prop:"onlineCarCount"}}),r("el-table-column",{attrs:{"min-width":"100",align:"center",label:e.$t("reportForm.onlineRate.offV"),prop:"offLineCarCount"}}),r("el-table-column",{attrs:{"min-width":"100",align:"center",label:e.$t("reportForm.onlineRate.onRate"),prop:"onLineRate"}})],1),r("cv-grid",{ref:"table5",attrs:{params:e.searchParams4,url:"/report/findFleetOnLineRate"}},[r("el-table-column",{attrs:{"min-width":"120",align:"center",label:e.$t("reportForm.onlineRate.enterpriseName"),prop:"enterpriseName"}}),r("el-table-column",{attrs:{"min-width":"150",align:"center",label:e.$t("reportForm.onlineRate.fleetName"),prop:"fleetName"}}),r("el-table-column",{attrs:{"min-width":"180",align:"center",label:e.$t("reportForm.onlineRate.sTime"),prop:"startTime"}}),r("el-table-column",{attrs:{"min-width":"180",align:"center",label:e.$t("reportForm.onlineRate.eTime"),prop:"endTime"}}),r("el-table-column",{attrs:{"min-width":"100",align:"center",label:e.$t("reportForm.onlineRate.oTimes"),prop:"onlineCarCount"}}),r("el-table-column",{attrs:{"min-width":"100",align:"center",label:e.$t("reportForm.onlineRate.offTimes"),prop:"offLineCarCount"}}),r("el-table-column",{attrs:{"min-width":"120",align:"center",label:e.$t("reportForm.onlineRate.onRate"),prop:"onLineRate"}}),r("el-table-column",{attrs:{"min-width":"80",align:"center",label:e.$t("action.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.linkToFleet(t.row)}}},[e._v("\n                                查看")])]}}])})],1),r("cv-grid",{ref:"table6",attrs:{params:e.searchParams4,url:"/report/findFleetDetailsOnLineRate"}},[r("el-table-column",{attrs:{"min-width":"100",align:"center",label:e.$t("reportForm.onlineRate.enterpriseName"),prop:"enterpriseName"}}),r("el-table-column",{attrs:{"min-width":"150",align:"center",label:e.$t("reportForm.onlineRate.fleetName"),prop:"fleetName"}}),r("el-table-column",{attrs:{"min-width":"150",align:"center",label:e.$t("reportForm.onlineRate.recordTime"),prop:"queryTime"}}),r("el-table-column",{attrs:{"min-width":"100",align:"center",label:e.$t("reportForm.onlineRate.allV"),prop:"vehicleCount"}}),r("el-table-column",{attrs:{"min-width":"100",align:"center",label:e.$t("reportForm.onlineRate.onV"),prop:"onlineCarCount"}}),r("el-table-column",{attrs:{"min-width":"100",align:"center",label:e.$t("reportForm.onlineRate.offV"),prop:"offLineCarCount"}}),r("el-table-column",{attrs:{"min-width":"100",align:"center",label:e.$t("reportForm.onlineRate.onRate"),prop:"onLineRate"}})],1)],1),r("cv-grid",{ref:"table2",attrs:{params:e.searchParams2,url:"/report/findVehicleOnOffRateInfoList"}},[r("el-table-column",{attrs:{align:"center",label:e.$t("reportForm.onlineRate.enterpriseName"),prop:"enterpriseName"}}),r("el-table-column",{attrs:{align:"center",label:e.$t("reportForm.onlineRate.recordTime"),prop:"queryTime"}}),r("el-table-column",{attrs:{align:"center",label:e.$t("reportForm.onlineRate.onV"),prop:"onLineCount"}}),r("el-table-column",{attrs:{align:"center",label:e.$t("reportForm.onlineRate.offV1"),prop:"offCount"}})],1),r("cv-grid",{ref:"table3",attrs:{params:e.searchParams3,url:"/report/findVehicleNolineInfoList"}},[r("el-table-column",{attrs:{align:"center",label:e.$t("reportForm.onlineRate.enterpriseName"),prop:"enterpriseName"}}),r("el-table-column",{attrs:{align:"center",label:e.$t("reportForm.onlineRate.recordTime"),prop:"recordTime"}}),r("el-table-column",{attrs:{align:"center",label:e.$t("reportForm.onlineRate.offV"),prop:"nolineCount"}})],1)],1)],1)],1)},[],!1,null,null,null).exports;t.default=l}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-434d1a01"],{"266c":function(t,e,a){"use strict";a.r(e),a("386d");var i={data:function(){return{pickerOptions0:{disabledDate:function(t){return t.getTime()>Date.now()-864e5}},cityArray:[],search:{city:""},time:[this.$filter.format(new Date-864e5,"yyyy-MM-dd start"),this.$filter.format(new Date-864e5,"yyyy-MM-dd end")],table:{data:[],loading:!1},dataItem:[],loading:!1}},methods:{loadTable:function(){var t=this;this.getData()&&(this.table.loading=!0,this.loading=!0,this.$store.dispatch("findVehicleOnlineDistributionInfo",this.getData()).then(function(e){e.flag?(t.table.data=e.data,t.numberData(e.data)):(t.table.table=[],t.table.total=0,t.$message.error(t.$t("error."+e.errorCode))),t.table.loading=!1,t.loading=!1}).catch(function(){t.table.loading=!1,t.loading=!1,t.$message.error("服务器报错")}))},numberData:function(t){var e=[];for(var a in t){var i=new Object;i.value=t[a].number,i.name=t[a].provinceNmae+"("+t[a].number+")辆",e.push(i)}this.pie(e)},pie:function(t){var e={title:{text:"在线车辆分布",left:"center",top:"0px"},tooltip:{trigger:"item",formatter:"{b} - {d}%"},series:[{type:"pie",center:["50%","60%"],radius:[0,"55%"],data:t}]};this.dataItem=e},getData:function(){return this.time?{startTime:this.time[0],endTime:this.time[1],id:this.search.city?this.search.city:0}:(this.$message.warning("查询时间不能为空!"),!1)},findCity:function(){var t=this;this.$store.dispatch("findRegionInfoList").then(function(e){e.flag?t.cityArray=e.data:t.cityArray=[]})}},created:function(){this.findCity(),this.loadTable()}},n=(a("a42f"),a("2877")),r=Object(n.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vehicle-online"},[a("cv-operation",{attrs:{position:"left"}},[a("el-form-item",{attrs:{label:"查询时间"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",clearable:!1,"picker-options":t.pickerOptions0,editable:!1,type:"datetimerange",placeholder:"选择时间范围"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),a("el-form-item",{attrs:{label:"选择城市"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.search.city,callback:function(e){t.$set(t.search,"city",e)},expression:"search.city"}},t._l(t.cityArray,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),a("el-form-item",[a("cv-tool",{staticStyle:{margin:"0px"},attrs:{name:t.$route.name,data:t.$store.getters.monitorMenu,"is-modify":!1,"is-remove":!1,"is-export":!1,"is-add":!1},on:{search:t.loadTable}})],1)],1),a("el-row",{staticClass:"cv-content"},[a("el-col",{attrs:{span:8}},[a("cv-grid",{ref:"table",attrs:{data:t.table.data}},[a("el-table-column",{attrs:{label:"区域","min-width":"120",prop:"provinceNmae"}}),a("el-table-column",{attrs:{label:"数量","min-width":"100",prop:"number"}})],1)],1),a("el-col",{attrs:{span:16}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"el-tabs__content",staticStyle:{width:"100%"}},[a("cv-echart",{staticClass:"propChart",staticStyle:{width:"100%",height:"600px"},attrs:{name:"pie",data:t.dataItem}})],1)])],1)],1)},[],!1,null,null,null).exports;e.default=r},"687e":function(t,e,a){},a42f:function(t,e,a){"use strict";var i=a("687e");a.n(i).a}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-a9cce688"],{"4e71":function(e,t,a){},"5e50":function(e,t,a){"use strict";a.r(t),a("ac6a");var o=a("f7d9"),i=a("b0ad"),n={name:"eventManageChild",components:{eventDialog:o.a},mixins:[i.a],data:function(){return{model:{},list:{},dialog:{title:"指派",size:"dialog-small",flag:!1,name:"",id:""}}},methods:{returnMainPage:function(){this.$router.push("/monitor/eventManage")},getDetail:function(){var e=this;this.$store.dispatch("queryDetails",{eventId:this.$route.query.eventId}).then(function(t){t.flag?(e.model=t.data,t.data.urls&&t.data.urls.forEach(function(t,a){e.list["img"+a]=t.eventUrl})):e.$message.error("error."+t.errorCode)}).catch(function(){e.$message.error("请求异常")})},eventClose:function(e){var t=this;this.confirmPrompt("你确定要执行此操作吗？").then(function(){t.$store.dispatch("updateClose",{eventId:t.$route.query.eventId}).then(function(e){e.flag?t.$message.success("关闭成功"):t.$message.error(t.$t("error."+e.errorCode))}).catch(function(){t.$message.error("请求异常")})})},opendDialog:function(){this.dialog.flag=!0,this.dialog.size="dialog-tiny",this.dialog.name="eventDialog",this.dialog.id=this.$route.query.eventId}},created:function(){this.getDetail()}},s=(a("80bb"),a("2877")),l=Object(s.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"detail"},[a("cv-header"),a("cv-content",{attrs:{fill:!0}},[a("el-row",{staticStyle:{padding:"20px"}},[a("el-col",{attrs:{span:5}},[e._v(" ")]),a("el-col",{attrs:{span:14}},[a("el-form",{attrs:{"label-width":"100px",model:e.model}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"标题:"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1)],1),a("el-col",{staticClass:"margin60",attrs:{span:11}},[a("el-form-item",{attrs:{label:"状态:"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.model.statusName,callback:function(t){e.$set(e.model,"statusName",t)},expression:"model.statusName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"上报人:"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.model.submitPersonName,callback:function(t){e.$set(e.model,"submitPersonName",t)},expression:"model.submitPersonName"}})],1)],1),a("el-col",{staticClass:"margin60",attrs:{span:11}},[a("el-form-item",{attrs:{label:"处理人:"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.model.dulePersonName,callback:function(t){e.$set(e.model,"dulePersonName",t)},expression:"model.dulePersonName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"上报时间:"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.model.submitTime,callback:function(t){e.$set(e.model,"submitTime",t)},expression:"model.submitTime"}})],1)],1),a("el-col",{staticClass:"margin60",attrs:{span:11}},[a("el-form-item",{attrs:{label:"处理时间:"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.model.duleTime,callback:function(t){e.$set(e.model,"duleTime",t)},expression:"model.duleTime"}})],1)],1)],1),a("el-form-item",{attrs:{label:"地点:"}},[a("el-input",{attrs:{disabled:!0,type:"textarea"},model:{value:e.model.eventLocation,callback:function(t){e.$set(e.model,"eventLocation",t)},expression:"model.eventLocation"}})],1),a("el-form-item",{attrs:{label:"事件描述:"}},[a("el-input",{attrs:{disabled:!0,type:"textarea"},model:{value:e.model.remark,callback:function(t){e.$set(e.model,"remark",t)},expression:"model.remark"}})],1),a("el-form-item",{attrs:{label:"处理方法:"}},[a("el-input",{attrs:{disabled:!0,type:"textarea"},model:{value:e.model.eventDulemethod,callback:function(t){e.$set(e.model,"eventDulemethod",t)},expression:"model.eventDulemethod"}})],1),e.list.img0?a("el-form-item",{attrs:{label:"处理前:"}},[a("img",{staticClass:"image",attrs:{src:e.$COMMON.baseUrl+e.list.img0}})]):e._e(),e.list.img1?a("el-form-item",{attrs:{label:"处理后:"}},[a("img",{staticClass:"image",attrs:{src:e.$COMMON.baseUrl+e.list.img1}})]):e._e()],1)],1),a("el-col",{attrs:{span:5}},[e._v(" ")])],1),a("el-row",{staticStyle:{"text-align":"center"}},[e.model.status?a("el-button",{attrs:{type:"success"},on:{click:e.opendDialog}},[e._v(e._s(e.model.dulePersonName?"重新指派":"指派"))]):e._e(),e.model.status?a("el-button",{on:{click:e.eventClose}},[e._v("事件关闭")]):e._e(),a("el-button",{on:{click:e.returnMainPage}},[e._v("返回")])],1)],1),a("el-dialog",{attrs:{visible:e.dialog.flag,title:e.dialog.title,"custom-class":e.dialog.size},on:{"update:visible":function(t){return e.$set(e.dialog,"flag",t)}}},[a(e.dialog.name,{tag:"component",attrs:{options:e.dialog},on:{confirm:function(t){return e.tableLoad(!0)}}})],1)],1)},[],!1,null,"30a4567c",null).exports;t.default=l},"80bb":function(e,t,a){"use strict";var o=a("4e71");a.n(o).a},b0ad:function(e,t,a){"use strict";(function(e){a("7f7f"),t.a={methods:{confirmPrompt:function(e,t){var a=this,o=e||this.$t("action.confirmIsRemove");return new Promise(function(e,i){a.$confirm(o,a.$t("action.tip"),{confirmButtonText:a.$t("action.confirm"),cancelButtonText:a.$t("action.cancel"),type:"warning"}).then(function(){e()}).catch(function(){"function"==typeof t&&t()})})},timeLimitFunc:function(e,t,a){if(e&&t)return((new Date(t)-new Date(e))/864e5).toFixed(1)<=a||this.$message.error({message:this.$t("请选择时间范围在"+a+"天内")});this.$message.error({message:this.$t("请选择时间范围")})},addRemoveUnique:function(e,t,a){var o=e.length,i=t.length;return i<o?{name:"add",data:this.$service.isUnique(e,t,a)}:o<i?{name:"remove",data:this.$service.isUnique(t,e,a)}:o==i?{name:"equal",data:this.$service.isUnique(e,t,a)}:void 0},showTooltip:function(e,t){var a=e.target,o=this.$refs[t];o.referenceElm=a,o.$refs.popper.style.display="none",o.doDestroy(),o.setExpectedState(!0),o.handleShowPopper()},mouseenterShowTip:function(e,t,a){var o=e.target;if(o.scrollWidth>o.offsetWidth||a)return this.showTooltip(e,t),a?a.startTime+"~"+a.endTime:o.innerText},mouseenterShowToolTip:function(e,t,a){var o=e.target;return this.showTooltip(e,t),!a&&o.innerText},mouseoverHideTip:function(e){var t=this.$refs[e];t&&(t.setExpectedState(!1),t.handleClosePopper())},asyncDownloadScript:function(t,a){var o=this,i=0<arguments.length&&void 0!==t?t:"Baidu",n=1<arguments.length?a:void 0;return e[i]?e[i]._preloader?e[i]._preloader:Promise.resolve(e[i]):(e[i]={},e[i]._preloader=new Promise(function(t,a){var s=document.createElement("script");s.src=n,e.document.body.appendChild(s),o.$service.isIe()&&o.$service.IE_VERSION<11?s.onreadystatechange=function(){"loaded"!=s.readyState&&"complete"!=s.readyState||(t(e[i]),e[i]._preloader=null)}:s.onload=function(){t(e[i]),e[i]._preloader=null}}),e[i]._preloader)}}}}).call(this,a("c8ba"))},f7d9:function(e,t,a){"use strict";var o={props:{options:{}},data:function(){return{form:{list:[],dustmanId:"",loading:!1}}},methods:{getList:function(){var e=this;this.$store.dispatch("queryInspection","").then(function(t){t.flag?e.form.list=t.data:e.form.list=[]}).catch(function(){e.$message.error("请求异常")})},submitMan:function(){var e=this;this.form.dustmanId?(this.form.loading=!0,this.$store.dispatch("insertDustman",{dustmanId:this.form.dustmanId,eventId:this.options.id}).then(function(t){t.flag?(e.$emit("confirm"),e.$message.success("指派成功"),e.options.flag=!1):e.$message.error(e.$t("error."+t.errorCode)),e.form.loading=!1})):(this.$message.warning("请选择处理人"),this.form.loading=!1)}},watch:{"options.flag":function(e){e||(this.options.name="")}},mounted:function(){this.getList()}},i=a("2877"),n=Object(i.a)(o,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{overflow:"auto"}},[a("el-form",{ref:"form",attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"处理人"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.form.dustmanId,callback:function(t){e.$set(e.form,"dustmanId",t)},expression:"form.dustmanId"}},e._l(e.form.list,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),a("el-col",{staticClass:"dialog-footer",attrs:{span:24}},[a("el-button",{attrs:{loading:e.form.loading,type:"primary"},on:{click:e.submitMan}},[e._v(e._s(e.$t("action.confirm")))]),a("el-button",{on:{click:function(t){e.options.flag=!1}}},[e._v(e._s(e.$t("action.cancel")))])],1)],1)},[],!1,null,"13158c44",null);t.a=n.exports}}]);
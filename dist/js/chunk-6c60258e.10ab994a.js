(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6c60258e"],{"3ad1":function(e,t,a){"use strict";var r=a("44c1");a.n(r).a},"44c1":function(e,t,a){},b85b:function(e,t,a){"use strict";a.r(t),a("386d"),a("96cf");var r,s=a("3b8d"),i={data:function(){return{SEtime:[this.$filter.format(new Date-864e5,"yyyy-MM-dd start"),this.$filter.format(new Date-864e5,"yyyy-MM-dd end")],search:{plateCode:"",startDate:this.$filter.format(new Date-864e5,"yyyy-MM-dd start"),endDate:this.$filter.format(new Date-864e5,"yyyy-MM-dd end"),typeName:1},tabs:{activeName:"tabs0"},pickerOption:{disabledDate:function(e){return e.getTime()>Date.now()-864e5}}}},computed:{_cTable:function(){return this.$refs.tabs0},_dTable:function(){return this.$refs.tabs1}},methods:{searchTable:function(){switch(this.tabs.activeName){case"tabs0":this._cTable.tableInitial(!0);break;case"tabs1":this._dTable.tableInitial(!0)}},outPut:(r=Object(s.a)(regeneratorRuntime.mark(function e(){var t,a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.SEtime){e.next=3;break}return this.$message.warning("请选择时间"),e.abrupt("return",!1);case 3:if("tabs0"==this.tabs.activeName)return a={startDate:this.search.startDate,endDate:this.search.endDate,plateCode:this.search.plateCode,typeName:1},e.next=7,this.$http({url:"/report/exportFatigueStatistics",params:a});e.next=10;break;case 7:t=e.sent,e.next=15;break;case 10:if("tabs1"==this.tabs.activeName)return r={startDate:this.search.startDate,endDate:this.search.endDate,plateCode:this.search.plateCode,typeName:0},e.next=14,this.$http({url:"/report/exportFatigueStatistics",params:r});e.next=15;break;case 14:t=e.sent;case 15:t.flag?this.$message.warning("导出任务已执行"):this.$message.error(this.$t("error."+t.errorCode));case 16:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)}),handleSelectionChange:function(e){var t=this;this.tabs.activeName="tabs1",this.search.plateCode=e.plateCode,setTimeout(function(){t.searchTable()},0)}},watch:{"tabs.activeName":function(e){switch(e){case"tabs0":this.search.typeName=1;break;case"tabs1":this.search.typeName=0}},SEtime:function(e){this.search.startDate=this.$filter.format(new Date(e[0]),"yyyy-MM-dd start"),this.search.endDate=this.$filter.format(new Date(e[1]),"yyyy-MM-dd end")}}},n=(a("3ad1"),a("2877")),l=Object(n.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fatigueDriving"},[a("cv-operation",{attrs:{position:"left"}},[a("el-form-item",{attrs:{label:e.$t("起止时间")}},[a("el-date-picker",{attrs:{editable:!1,"value-format":"yyyy-MM-dd HH:mm:ss",clearable:!1,size:"small",type:"datetimerange",placeholder:e.$t("reportForm.onlineRate.selectRange"),"picker-options":e.pickerOption},model:{value:e.SEtime,callback:function(t){e.SEtime=t},expression:"SEtime"}})],1),a("el-form-item",{attrs:{label:e.$t("cE.carNumber")}},[a("el-input",{attrs:{size:"small",clearable:""},model:{value:e.search.plateCode,callback:function(t){e.$set(e.search,"plateCode",t)},expression:"search.plateCode"}})],1),a("el-form-item",{staticStyle:{float:"right"}},[a("cv-tool",{staticClass:"cv-tool",staticStyle:{margin:"0"},attrs:{name:e.$route.name,data:e.$store.getters.monitorMenu,"is-remove":!1,"is-add":!1,"is-modify":!1},on:{search:e.searchTable,export:e.outPut}})],1)],1),a("cv-content",{attrs:{fill:!0}},[a("cv-tabs",{staticClass:"tabClass",attrs:{titles:["统计信息","明细信息"]},model:{value:e.tabs.activeName,callback:function(t){e.$set(e.tabs,"activeName",t)},expression:"tabs.activeName"}},[a("cv-grid",{ref:"tabs0",attrs:{url:"/driver/fatigueStatistics",params:e.search,isInitial:!1},on:{"row-click":e.handleSelectionChange}},[a("el-table-column",{staticClass:"bule",attrs:{"header-align":"center",align:"center",label:e.$t("cE.carNumber"),prop:"plateCode"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",label:e.$t("cE.carColor"),prop:"plateColor"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",label:e.$t("common.enterprise.enterpriseName"),prop:"enterpriseName"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",label:e.$t("reportForm.osCount.fleetName"),prop:"fleetName"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",label:e.$t("发生次数"),prop:"fatigueCount"}})],1),a("cv-grid",{ref:"tabs1",attrs:{url:"/driver/fatigueStatistics",params:e.search,isInitial:!1}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",label:e.$t("cE.carNumber"),prop:"plateCode"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",label:e.$t("cE.carColor"),prop:"plateColor"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",label:e.$t("common.enterprise.enterpriseName"),prop:"enterpriseName"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",label:e.$t("reportForm.osCount.fleetName"),prop:"fleetName"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",label:e.$t("报警时间"),prop:"happendTime"}})],1)],1)],1)],1)},[],!1,null,null,null).exports;t.default=l}}]);
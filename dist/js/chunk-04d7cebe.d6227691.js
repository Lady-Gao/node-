(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-04d7cebe"],{"062d":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAeCAYAAAGwIrX+AAAABGdBTUEAALGPC/xhBQAABDtJREFUSA2tVk1sW0UQnt19z04Tp3F+S6mDGw6ItqBUhBRKnERIFMopIhwQAgkU6KFIvbQgoiKK4qRqAYEENwQS5dwiJDhyaIydpgUhckm4UInYHCrITwlJGvs9v2Vm413W7bNIpD7JmZ/95tvd2Z3ZAODHc85ZkoxnnQkJwTvKUH+yXJLk9Ic+IfizSmFZXiCFoaIgZBgYGerTo4wsbWwOUSyc4ei8Pt19Rfk+7vpISSkhHRoh+wPl1wzhEikLek+EYDzH3yVOG05UnJw9sR7jP7H7BFASnH079kEDb4CzyQlY9m9CPa8HzMyLVdvVYZtUNZamcmLShiH/uwezQ1z2GVzhmJ7Hlpi794JUoLYUmiobbOs0Pe2i8On9nyQc5kB2JQeZvzPwxu7j0Oa2wW+3rsPs+iw80/w0jOXTuP3lAmbQOSdlMGozRVkUirJou5TOGD9fWZLI4X777kBUOdiU7C+nzKbrpuqSxaD0exWmYkR5ZO9G38Y8mSZAA90pt9cPyj+S7XBxyOvzftJjd0g36/awrJjCRGyQJNsGGXaW4wGevLENiIGUqUCdrhpEJlMHBnSbUsm9mMSsDN42FmKyDNL/B/z6wUshIICTe06iXw7y0cQoNDvN0CJaIO7E4WDDQdgpdsKxe45BvncekpEktDmtioTTEfvSh+5YN6wH63AkfgRWyivwUP0B+PzGFzBfmodFf0mB1a0nJgLoL8IiUJIlbRrJsa6v2kAaCQMSblupqySbv2/mClEY8A/IbU4MD+ZPtNtDsH/hgXRUgZWR40U88ogJYLj8VBDVtlqGNtQAg7yyUdpAjdmyNGu2I9wr7iE/CD7E+zZg+0N1xn5wOH/Le8JTdWBjqsh5TlyQUr5iA7ajYwv5KkiVX9Uxityddh/zy+Xp0HrRyK1KrC9HiMPeYe8ac3Puo74sh5ZzrWtYax4b7zDRK+QIu9Tutnee33sOjmMPrOM7IF/Mw3f7v4Xx5DjERCNkVjJwOnEaRhNvQ1ddF8yszaiCGWodgjcTp6ARa+PCA1/CyK4RWPKXYW59DvCletjBQ3uEZqSgDrdDleMSVtV4YQJOYd2mC2n1zjQ6MVWNw63PIa4dCsU/lBz+9Xm1kT3Re+Gf8ipcXLi4uTHkxXvIJjujnaprL3gL8HLHS9AkmmBmdQaS0SSk7xuDgaYBOBo/CtTpF/1FkxUi09/lm5Pw+q7XYKhlqOJikyxyNbLf8/xZDbpb0nWdA7z0eGmOM/bC3SIlHuIjXnPPqaf7DG9NWPve6sx0DaXo9fq9n9UkOo4cg30DEWxi09q3LYnNj+I1McWaldtElWftMvoabH8NfQ2fvifDnr5Qck3iZJ2nyhB8g3ZM+yy5Khgf9lP+95Zv+2r8l3icZ8Vn+KTeIEn2VlhqrZwadD3+KC30owZNq9eNm54muuT0H8paRb+FsurJ+hesLX/BzPYj0QAAAABJRU5ErkJggg=="},"0801":function(t,e,a){"use strict";var i=a("fea6");a.n(i).a},"0985":function(t,e,a){},1811:function(t,e,a){var i=a("60e0");t.exports={fillColor:"#01C302",url:i}},"2e17":function(t,e,a){var i=a("2fc5");t.exports={fillColor:"#01C302",url:i}},"2fc5":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAeCAYAAADHJYVoAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjZFQzEyNUQwN0UzQTExRTY5MDQ3QTE3RjVCRDdEODJGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjZFQzEyNUQxN0UzQTExRTY5MDQ3QTE3RjVCRDdEODJGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NkVDMTI1Q0U3RTNBMTFFNjkwNDdBMTdGNUJEN0Q4MkYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NkVDMTI1Q0Y3RTNBMTFFNjkwNDdBMTdGNUJEN0Q4MkYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5/f0GxAAACH0lEQVR42qyWv0scQRTH3+5d0EKbExIOOy2tPA6iwYudVUQhClYGK4skRUggf0E0EEOChaVgYxOsLGz9Eb0T/NGmOSwtjqtyEZPc7fh9+vYYlpndWc8HH1mZN9958925t+N5Bz5ZwgMlMAuegn7wBPwGF+AQ/AAHQBkFLOLPwTdQoOQ4A+/AfnQgqpwBy2DXUZgkj/M/y/x2ZCMLrYN5Sh9s4UeQBwsgiFb+6Z7CevD8pajnY+KZR50Hv9xxftFh5StxwsFYK61FX0LPn8lRc4roQv7PjCmN9YpZOceJQvzMQrpYwo6mffHbGLqYpcK4mODKB9LMSOH/IIvnXERCW1LsIsfiddBnssQknCLq7Hm1Ewticqq+qeE8wFnn2GdbtsCHpEzdb8eFtli8As7BsGvFDv6zXiXsivxz3bSdDn6Oq9aw2IreuPjPia36lMFVF7mmsHFx/30d9uEOgue/MfXzMvjeoTjPP7J9Q7tksHBPO0bBX9s3lAdmQC2lMOe/1IVN4iTXhklw5SjMeVMyj5LEOY6lz/9LEObxOXlf5CpOqhTsUIte4LFhSWlgnHe4Hfe9C8kKGcG/feFrfoGGaAP/5bUDd0m/6JVaDE7l2LWEpqBwUJQu3AN6QTd4JNwtNuLlvPfeW3qMm1iN9tRXtUplVReh/8K1XPV4p013cdmFdnUItEqt4mFv4cQ/cpQyEUHPcO1QGlFb2k3oRoABAIVVs5Qx7DgzAAAAAElFTkSuQmCC"},3948:function(t,e,a){var i=a("893e");t.exports={fillColor:"#01C302",url:i}},"5c03":function(t,e,a){"use strict";var i=a("620b");a.n(i).a},6094:function(t,e,a){},"60e0":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjc5OEM4ODkyQkNFRjExRTY4OEE1QzMzMzNDRDg3OTBBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjc5OEM4ODkzQkNFRjExRTY4OEE1QzMzMzNDRDg3OTBBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Nzk4Qzg4OTBCQ0VGMTFFNjg4QTVDMzMzM0NEODc5MEEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Nzk4Qzg4OTFCQ0VGMTFFNjg4QTVDMzMzM0NEODc5MEEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7EKrlRAAAFGklEQVR42sRYb0xbVRQ/fbwCW+1altrO0KJmczOxGpkLYvbNMCuiH5QvM5tR/BdN0PhBZ9X5qWrY9IMazBKiIXEsDhL8QILIn+inxUncXFg12VSmFqI0KG2RbZTSes5997H3bt99LUjwJCfvvdt3f+fXc85793efA8ozh8VRHNOtYDgWLMZsTV0FEaMrwrVISPe8cA2liKklyIgkdK+QkBLJLPNjXiAnJaWWyIpIQnTFQAwMRHQyohvJWWZLLUFGD6xK3I5QTuLL/F49Yw4jKUWSIcVApBK9Cr0afTO6KxaLhScmJl6Ym5s7kc1mT+Xz+fPkdE5j9BvdQ/fyOdUco5JjVgh/RNozCp9QxcFq0APoIfQdvb29j6dSqbOFMo3upTk0l2MEOKaLx1BFYuJTJGaGvDocDnuGhobeDAaDrey++csAI98CfHMe4OcEwF8ZnIHT/FsxrB/gntsB7rsbwL2ZlXFqaqq/ubk5Fo/H03h9FT3LPWfoLdbwjlJlam1t3dbd3d3ldrvvgOwSwGejAD1DwEjZGZE5cD/Ao/sQqRLm5+cn2tranu3v7/+Tk1q0IiU+1kYymxoaGmrGxsZ6kEwY/pgFePlDgF+mYVW2vRbgvRcBbvARqXhTU9PB8fHxOfzlikDKREjPjtPYwJjqI7W1tY9AEuc//Taw41rMj23z8RvsOD09/TmW/lUcvWzI1JKeJUXWP9iMe5HMw6xM0Y/sydy7R3OZ0VzCWMwCYRK25IlzKIYe0slQliojkchLbPwk9syPl+TBarYAvHIA4NBB7VxmhHFyjMXi2JU8lk7KAQZmprdxZ2fnbR6P507ILAB8+oV9OYjM9xcBzl7Qzu3sOGIhJmFTDKs3vmKxVqnYeBEGQI/2P1fsS7X7VoB3T2i+e5d96QiLMNF4DPFtbyrZSh8FAoG72OjpuBzc69YycvQ4wFxG86M9pUvHMTHGHotFumjFZtcul+smNuunhByYAlOpvvru2hidlyodx8QYN1pJGcVKbqiq6mEjf2dsSrVLK5NoNFa/U146jsljFGkqxbYJnapNqXq0MolGY0SK7rErXRkCbUVc5XK5tNPp9IEP/8TvV4tLRYHeef7aWONTvD8+KX4CXz9mHtuqkaQYVmpStZKcCwsLv3q9Xh/UbUNCM2ZAMYBIQicns1tC7IAxfrOSuYqQHab0ZmZmzmjgYVh345jJZPKMuNLrPVQQlR4uqMNsFkmI6zatHxnCIky00dHRLw2Lat6YoSId3N7e/kM6nT4HW1BHPfbA+hEiLMQkbIphobVNJVvmjGnlzQ4PD7/Pxvc3oYQI/ncyJEMICzFHRkY+4LJjyaCHClZK0SQ/EolEB1OJU0mA544AzKbWRuZ6lB/HDgEE/UDqMRQKRe3kBwj7qJUsoVqMkagiIOh6TfuXa8lMV5SRISzCtMiO3kMsKyDbHqOYyk1OTn6NcqGxylfjhwdRxlRjAi/gE0s6qZSEffIhgMNt7GVKZJ5Bw3LNGpTikp2mlunqqvr6eu/AwMBhk8gfPq0tlCTyZ9MaCr1Id4S0RzvSaBL5mJm3ULqmOJlFmcgvdxtUp2+DMpnMuXK3QXRvX1/fE3wbVLeabRDYZMppcKbyOjo6dra0tOzDjO3FVftmfTGm5QDfwJcwI6cGBwdHo9HoRb0f+XFJ0jsFO0Kr2UpXSD42LJfYSpsa2Y7QRn5ssPwK4vifPscUZJ9jHBv8warklzRHma+3Dfuk968AAwCAQLVi7RkIGgAAAABJRU5ErkJggg=="},"620b":function(t,e,a){},"632ae":function(t,e,a){"use strict";var i=a("f993");a.n(i).a},"726c":function(t,e,a){"use strict";var i=a("ea98");a.n(i).a},"893e":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAeCAYAAAGwIrX+AAAABGdBTUEAALGPC/xhBQAABE5JREFUSA2tVV1oXEUU/s7cm93NbuyuSVNNLbYS9aFB0KZJCFpjVRClxZ+qVVBafNMHUUkTQW1RKnWToFAfBAviL4gK/jwJCokh0tQQ+2ANKBa0pVgaN93V3N2mu/eO58xmbnbDbk2xA/eemXO+882cmXNmAG7JIe9VkZRMe/sbFF7oWqtAxpL2tEglP2kOOXebTiqdPykdan/T02cLgM9A96+8MS79mNEQVLFZMym1VyXT+ePP9Lhov5zwzvYIog6gg+CVmh65wYTRW4baUtZmYxIEpYYLLwlnJVyoXFGubSLkixrZBeCD+yJ4HN5+E+/qOIxyy9UKvet4WaBHZYtMQMupVL2lGapw29itHjBkDCNMDRX2ah28HFoqOkRqX3ag0YRUc6sqsKZ7wxrCT2e0mV7Z03uy08Ud1yiz+VckgG8fi2L7dRIq8NmDMSNTQ/kTlBzKH4DWzxtNjV8qWt4rYyJ6zSyJPSe01jfXwIcqIvo+OxC/ZSnokcJ67Qe/h4iKDjlqQ7a/8Q9RhQ7W3jLidZV8/CBj10F3pj8xZW0iqxySI14n+XRQEzpJY1o7+ulcf2LaOoRgDjzgwMOxBYBI5wbi5nSNsVZihODFjhw98a6M8a70LTdWjts4J097+E5ZYN96MxOubSb0XFXuN7rAlQy8fYPiFeo+o33rnghmZgN8tTOKySdiOHIqwF3tCh/eH8Xp+aXUNeCz5zRmuWR//DPAHNewtLYmhRSffJJP1LYw65siwPx5q64tmZkmxfRfQMFd1NaVw1aUrj1xWauIhqQXnhgfzBket5bNVf9ZPpA1ognBMuAbia8CzaHaRudzg/FwP8rLWLSJgUAnZCiyEmjdVyyrlmG9Wl7Pd/tFDGvoW62unuQVjDsN2JN5Lm7qoBJXRZ5Ke+9yMuyqBFxMn8neyw4mdlsfQ94ynO8paRyuWS8WuVLJ9eUSejN74kdoddrbXASqynmlPJU4ud6//s3HR8d8o24Autwi0UFesVF0tim8z6DDJwNs5kdw31gRx7iaJnbHMM1FssB+Ha0KN75dgOKYx3fFkClolAIpHDLkdkLh5QrFJqs4tC2CU39rrOKE+TWj8dBGBzPjAf7hgtr2MaccN3kBH+lwsW4Vkx338eIox83tkx1h+pkx/zZJ1Y/Z0Y5PF5BjjrbLCC1x4NDREoKlcrcwIw9MFHF9s8IvTzXii4ejaGV8VWNeah5Z2Oj7pZ+rDJdg4Dhuh5rrj844inZeAr6QQviEN8xzueMR0NT/SkdOQyjdZd+GkFymvW1Uu0enCuM8QW+4jBV3aPKm7sYtY1upZF2qyK1SnjU/oFG+4fmBvnDjx9RzlN66/OkTr5rkli45fO5OCoLP+Y5psjor+U6ZV456YK4/9o3VLZcXJLfg1Bs6pYv5NDTu5eV8SQ3xweyzlLX2erIeuVzQkrmyLfJJhcjq7cUt79Q8f1JZ3mJfHrmq9+tfzOGHOkMqMngAAAAASUVORK5CYII="},"8d87":function(t,e,a){var i=a("c0f0");t.exports={fillColor:"#01C302",url:i}},"90a1":function(t,e,a){"use strict";a.r(e),a("c5f6"),a("ac6a"),a("96cf");var i,s=a("3b8d"),l=a("cebc"),n=a("2f62"),o={props:{selectedVehicle:{default:function(){return{plateCode:"",vehicleId:""}}},btnFlag:{default:function(){return{flag:!1}}},screenFullSize:{default:!1},topBarData:{}},data:function(){return{list:[{label:this.$t("historyTrack.pointtrajectory"),value:!1},{label:this.$t("historyTrack.Completetrajectory"),value:!0}],selectVal:!1,timeVal:[this.$filter.timeStamp(this.$filter.format(new Date,"yyyy-MM-dd start")),this.$filter.timeStamp(this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss"))],autoF:!1,pickerOption:{disabledDate:function(t){return t.getTime()>Date.now()}},timeRange:null!=this.$COMMON.timeRange?this.$COMMON.timeRange:7}},computed:Object(l.a)({},Object(n.e)("historyTrack",["isToggleHistoryTree"])),methods:Object(l.a)({},Object(n.b)("historyTrack",["isToggleHistoryTreeA","isTogglePanelListA"]),{screenFull:function(){this.$emit("isScreenFull")},selectVeh:function(){this.$emit("toggleTree")},search:function(){if(!this.selectedVehicle.id)return this.$message.warning(this.$t("action.checkCar")),!1;if(!this.timeVal)return this.$message.warning(this.$t("action.querytimemess")),!1;var t=this.$filter.format(this.timeVal[0],"yyyy-MM-dd HH:mm:ss"),e=this.$filter.format(this.timeVal[1],"yyyy-MM-dd HH:mm:ss");if(this.$filter.timeRange(t,e)>this.timeRange)return this.$message.warning(this.$t("action.searchDate")+" "+this.timeRange+" "+this.$t("action.day")),!1;var a={startTime:this.$filter.format(this.timeVal[0],"yyyy-MM-dd HH:mm:ss"),endTime:this.$filter.format(this.timeVal[1],"yyyy-MM-dd HH:mm:ss"),isAllLocations:this.selectVal};this.$emit("trackSearch",a)},toggleTree:function(){var t=this.isToggleHistoryTree;this.isToggleHistoryTreeA(!t),t||this.isTogglePanelListA(!0)}}),mounted:function(){if(this.$route.query.id){var t={startTime:this.$filter.format(this.timeVal[0],"yyyy-MM-dd HH:mm:ss"),endTime:this.$filter.format(this.timeVal[1],"yyyy-MM-dd HH:mm:ss"),isAllLocations:this.selectVal};this.$emit("childToFather",t)}}},r=(a("0801"),a("2877")),c=Object(r.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{staticClass:"history-topbar",attrs:{inline:""}},[a("el-form-item",[a("el-input",{staticStyle:{width:"150px","font-size":"14px"},attrs:{size:"small",placeholder:t.$t("terminal.placeholder"),readonly:""},nativeOn:{click:function(e){return t.selectVeh(e)}},model:{value:t.selectedVehicle.plateCode,callback:function(e){t.$set(t.selectedVehicle,"plateCode",e)},expression:"selectedVehicle.plateCode"}})],1),a("el-form-item",[a("el-date-picker",{attrs:{clearable:!1,editable:!1,size:"small",type:"datetimerange","picker-options":t.pickerOption},model:{value:t.timeVal,callback:function(e){t.timeVal=e},expression:"timeVal"}})],1),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{staticStyle:{"font-size":"14px"},attrs:{type:"primary",size:"small"},on:{click:t.screenFull}},[a("i",{class:["fullBtn",t.screenFullSize?"el-icon-tsp-fullscreen-exit":"el-icon-tsp-fullscreen"]})])],1),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{staticStyle:{"font-size":"14px"},attrs:{size:"small",type:"primary",loading:t.btnFlag.flag},on:{click:t.search}},[t._v(t._s(t.$t("power.search")))])],1)],1)},[],!1,null,null,null).exports,h=(a("7f7f"),a("456d"),a("60e0")),m=a.n(h),d=a("1811"),p={inject:["store"],props:{data:{},allPointArry:{},allAbillity:{},allCanDatas:{},bestViewPoint:{}},computed:Object(l.a)({},Object(n.e)("historyTrack",["mileageTotal","averageOil","averageSpeed","oilTotal","listST","listCounty","alarmListMap","trackLists"])),data:function(){return{bestViewPoints:null,allGpsPoint:null,allPoints:null,allAbillityIds:null,allCanData:[],lastItem:null,delIndex:null,isAllMess:!0,tabActive:"first",mileageTotalHP:"",averageOilHP:"",averageSpeedHP:"",oilTotalHP:"",selfPart:"--",selfMile:"--",selfOil:"--",selfAvgOil:"--",selfAvgSpeed:"--",listSTHP:[],listCountyHP:[],isShow:!0,alarmMap:[],markerCurrent:{},allData:null,num:0,curIndex:0,trackSpeed:null,addPoint:null,playFalg:!1,trackChage:!1,allLinePoint:[],alarmInfoPoint:null,alarmMarkerGroup:[],alarmPoints:[]}},watch:{data:function(t){this.listSTHP=[],this.listCountyHP=[],this.alarmMap=[],this.allGpsPoint=t,this.isAllMess=!0,this.markerCurrent={},0==t.length?this.isShow=!1:this.isShow=!0},allAbillity:function(t){this.allAbillityIds=t},allPointArry:function(t){this.allPoints=t},allCanDatas:function(t){this.allCanData=t},bestViewPoint:function(t){this.bestViewPoints=t},mileageTotal:function(t){this.mileageTotalHP=t},averageOil:function(t){this.averageOilHP=t},averageSpeed:function(t){this.averageSpeedHP=t},oilTotal:function(t){this.oilTotalHP=t},listST:function(t){this.listSTHP=t,this.selfPart=t.length},listCounty:function(t){this.listCountyHP=t},alarmListMap:function(t){this.alarmMap=t},lastItem:function(t,e){this.delIndex=e}},methods:Object(l.a)({},Object(n.b)("historyTrack",["addTrackLists","addTrackPoints","addTrackAbillity","addCanData","setTrakchanges"]),{filterLt:function(t){return""==t?"--":t+"L"},tabClick:function(t){var e=this;switch(t.index){case"0":this.selfPart=this.listST.length;break;case"1":this.selfPart=this.listCounty.length}for(var a in this.markerCurrent)this.store._mapMethods.removeOverlay(this.markerCurrent[a]),this.markerCurrent[a]=null;this.isAllMess=!0,this.addTrackLists(this.allGpsPoint),this.addTrackPoints(this.allPoints),this.addTrackAbillity(this.allAbillityIds),this.addCanData(this.allCanData),this.$refs.track&&this.$refs.track.forEach(function(t){e.$myJq.removeClass(t,"trackCurrent")}),this.$refs.country&&this.$refs.country.forEach(function(t){e.$myJq.removeClass(t,"trackCurrent")}),this.store._mapMethods.getBestView(this.bestViewPoints)},filterCharts:function(t,e,a){var i,s,l={},n=Object.keys(a);return a.times.forEach(function(a,l){a<=t&&(s=l),a<=e&&(i=l)}),n.forEach(function(t){l[t]=a[t].slice(s,i+1)}),l},filterPoints:function(t,e,a){var i,s;return a.forEach(function(a,l){a.gpsTime<=t&&(i=l),a.gpsTime<=e&&(s=l)}),a.slice(i,s+1)},lookTrack:function(t,e,a){var i=this;this.lastItem=t,this.selfMile=a.mileage,this.selfOil=a.oilConsumption,this.selfAvgOil=a.avgOilConsumption,this.selfAvgSpeed=a.avgGPSSpeed;var s=[],l=this.$refs[e][t],n=[],o=a.startTime,r=a.endTime,c=this.filterCharts(o,r,this.allCanData),h=this.filterPoints(o,r,this.allGpsPoint);if(this.$refs.track&&this.$refs.track.forEach(function(t){i.$myJq.removeClass(t,"trackCurrent")}),this.$refs.country&&this.$refs.country.forEach(function(t){i.$myJq.removeClass(t,"trackCurrent")}),this.$service.isArray(h)&&0<h.length)if(h.forEach(function(t){s.push({lng:t.mapLongitude,lat:t.mapLatitude})}),this.playFalg&&(this.trackChage=!0,this.setTrakchanges(this.trackChage)),this.markerCurrent[t])this.$myJq.removeClass(l,"trackCurrent"),this.store._mapMethods.removeOverlay(this.markerCurrent[t]),this.markerCurrent[t]=null,this.isAllMess=!0,this.addTrackLists(this.allGpsPoint),this.addTrackPoints(this.allPoints),this.addTrackAbillity(this.allAbillityIds),this.addCanData(this.allCanData),this.trackLists.forEach(function(t){n.push({lng:t.mapLongitude,lat:t.mapLatitude})}),this.store._mapMethods.getBestView(n);else{for(var m in this.markerCurrent)m!=t&&(this.markerCurrent[m]&&this.store._mapMethods.removeOverlay(this.markerCurrent[m]),this.markerCurrent[m]=null);this.$myJq.addClass(l,"trackCurrent"),this.markerCurrent[t]=this.store._mapMethods.mapAddline(s,{strokeWeight:6,strokeColor:"#35ca89"}),this.store._mapMethods.getBestView(this.markerCurrent[t]),this.addCanData(c),this.addTrackLists(h),this.addTrackPoints(h),this.isAllMess=!1}},showAlarmPoint:function(t,e,a){var i=this,s=this.$refs.alarm[t];this.alarmPoints=[],null!=this.alarmInfoPoint&&this.store._mapMethods.closeInfoWindow(this.alarmInfoPoint),0<this.alarmMarkerGroup.length&&(this.alarmMarkerGroup.forEach(function(t){i.store._mapMethods.removeOverlay(t)}),this.alarmMarkerGroup=[]),!this.$myJq.hasClass(s,"alarmCurrent")||a?(this.$refs.alarm.forEach(function(t){i.$myJq.removeClass(t,"alarmCurrent")}),this.$myJq.addClass(s,"alarmCurrent"),this.$service.isArray(e.locationList)&&0<e.locationList.length&&(e.locationList.forEach(function(t){i.makePoint({lng:t.longitude,lat:t.latitude,location:t.locationName,name:e.alarmName})}),this.playFalg&&(this.trackChage=!0,this.setTrakchanges(this.trackChage)),0<this.alarmPoints.length&&this.store._mapMethods.getBestView(this.alarmPoints))):this.$myJq.removeClass(s,"alarmCurrent")},getPointInfo:function(t){this.alarmInfoPoint=t},makePoint:function(t){var e=t.lng,a=t.lat,i=t.location,s=t.name,l=this.store._mapMethods.mapAddpoint({longitude:Number(e),latitude:Number(a)},"cvGoogleMap"==this.$store.getters.mapName?d:m.a,{width:36,height:36}),n='<div class="maptitle">'.concat(this.$t("common.alarm.alarmMsg"),'</div>\n        \t\t\t\t\t\t\t<div class="mapcontent">').concat(this.$t("common.alarm.alarmName"),":").concat(s,' </div>\n        \t\t\t\t\t\t\t<div class="mapcontent">').concat(this.$t("common.vehicle.location"),":").concat(""==i?this.$t("actions.noaccessMess"):i," </div>");this.alarmMarkerGroup.push(l),this.alarmPoints.push(l.point),this.store._mapMethods.addOverlay(l),this.store._mapMethods.overlayClickOpenInfoWindow(l,l.point,n,this.getPointInfo)}}),destroyed:function(){clearInterval(this.trackSpeed),this.curIndex=0,this.allData=null,this.allLinePoint=[]}},u=(a("632ae"),Object(r.a)(p,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"history-track"},[a("el-tabs",{staticClass:"tabs",on:{"tab-click":t.tabClick},model:{value:t.tabActive,callback:function(e){t.tabActive=e},expression:"tabActive"}},[a("el-tab-pane",{attrs:{name:"first",label:t.$t("historyTrack.Pressstroke")}},[a("cv-scrollbar",{staticClass:"messArea",style:{position:"absolute",top:"0px",left:"0",right:"0",bottom:0==t.alarmMap.length?"140px":"200px"}},[a("h2",{directives:[{name:"show",rawName:"v-show",value:0==t.listSTHP.length,expression:"listSTHP.length==0"}],staticClass:"emptyData"},[t._v(t._s(t.$t("historyTrack.DATAempty")))]),a("ul",{staticClass:"trackUl"},t._l(t.listSTHP,function(e,i){return a("li",{directives:[{name:"show",rawName:"v-show",value:0!==t.listSTHP.length,expression:"listSTHP.length!==0"}],key:e.id,ref:"track",refInFor:!0,staticClass:"trackItem",on:{click:function(a){return t.lookTrack(i,"track",e)}}},[a("div",{staticClass:"track-title"},[a("i",{staticClass:"el-icon-tsp-map-marker map-icon"}),a("span",{staticStyle:{"margin-left":"-5px"}},[t._v(t._s(t.$t("historyTrack.Trip"))+t._s(i+1))]),a("span",{staticClass:"timeword"},[t._v("\n                                    "+t._s(t._f("format")(e.startTime,"yyyy/MM/dd HH:mm"))+" ~\n                                    "+t._s(t._f("format")(e.endTime,"yyyy/MM/dd HH:mm"))+"\n                                ")])]),a("div",{staticClass:"track-num"},[a("i",{staticClass:"el-icon-tsp-circle circle-icon green"}),a("span",[t._v(t._s(t.$t("reportForm.vehicleOpt.averageOil"))+t._s(t._f("isValue")(e.avgOilConsumption,"L/100km")))]),a("span",{staticClass:"rightword"},[t._v(" "+t._s(t.$t("historyTrack.consumptioN"))+" "+t._s(e.hasOil?t.filterLt(e.oilConsumption):"/"))])]),a("div",{staticClass:"track-num"},[a("i",{staticClass:"el-icon-tsp-circle circle-icon red"}),a("span",[t._v(t._s(t.$t("historyTrack.altiTude"))+" "+t._s(e.minHigh)+"-"+t._s(e.maxHigh)+" m")]),a("span",{staticClass:"rightword"},[t._v(t._s(t.$t("historyTrack.mileage"))+" "+t._s(e.mileage)+"km")])])])}),0)])],1)],1),0!=t.alarmMap.length?a("cv-scrollbar",{staticClass:"alarmPoints"},[a("div",t._l(t.alarmMap,function(e,i){return a("li",{key:e.id,ref:"alarm",refInFor:!0,staticClass:"alarm-item",on:{click:function(a){return t.showAlarmPoint(i,e)}}},[a("div",{staticClass:"alarm-name"},[t._v(t._s(e.alarmName)+"("+t._s(e.alarmCount)+")")])])}),0)]):t._e(),a("cv-scrollbar",{staticClass:"detailMess"},[t.isShow?a("div",{staticClass:"container"},[t.isAllMess?a("span",[t._v(t._s(t.$t("historyTrack.through"))+t._s(t.selfPart)+t._s(t.$t("historyTrack.section")))]):t._e(),t.isAllMess?a("div",{staticClass:"row"},[a("span",[t._v(t._s(t.$t("historyTrack.Totalmileage"))+": "+t._s(t._f("isValue")(t.mileageTotal,"km"))+" ")]),a("span",[t._v(t._s(t.$t("historyTrack.oilConsumption"))+": "+t._s(t._f("isValue")(t.oilTotal,"L"))+" ")])]):t._e(),t.isAllMess?t._e():a("div",{staticClass:"row"},[a("span",[t._v(t._s(t.$t("historyTrack.MileageSection"))+": "+t._s(t._f("isValue")(t.selfMile,"km")))]),a("span",[t._v(t._s(t.$t("historyTrack.OilConsumptionSection"))+": "+t._s(t._f("isValue")(t.selfOil,"L")))])]),t.isAllMess?a("div",{staticClass:"row"},[a("span",[t._v(t._s(t.$t("historyTrack.Averagefuel"))+": "+t._s(t._f("isValue")(t._f("fixNumber")(t.averageOil,2),"L/100km")))]),a("span",[t._v(t._s(t.$t("historyTrack.Averagespeed"))+": "+t._s(t._f("isValue")(t._f("fixNumber")(t.averageSpeed,2),"km/h")))])]):t._e(),t.isAllMess?t._e():a("div",{staticClass:"row"},[a("span",[t._v(t._s(t.$t("historyTrack.Averagefuel"))+": "+t._s(t._f("isValue")(t._f("fixNumber")(t.selfAvgOil,2),"L/100km")))]),a("span",[t._v(t._s(t.$t("historyTrack.Averagespeed"))+": "+t._s(t._f("isValue")(t._f("fixNumber")(t.selfAvgSpeed,2),"km/h")))])])]):t._e()])],1)},[],!1,null,null,null).exports),g=(a("34ef"),a("28a5"),a("bd86")),f=a("3b6f"),v=a("cc81"),y={mixins:[f.a],data:function(){return{content:"",timer:null,pagination:0,currentDatas:[],currentId:""}},computed:Object(l.a)({_tooltip:function(){return this.$refs.tooltip}},Object(n.e)("historyTrack",["trackLists"])),methods:{setPagination:function(t){this.currentDatas=t},handlerMouseover:function(t){var e=Object(v.a)(t,"el-col");e&&(this.content=this.mixins_ellipsisShowTooltip(e,this._tooltip))},handlerMouseleave:function(){this.mixins_hideTooltip(this._tooltip)}},watch:{trackLists:function(t){this.pagination=0,this.currentDatas=[],this.setPagination(t)}},mounted:function(){this.setPagination(this.trackLists)}},k=(a("e033"),Object(r.a)(y,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("el-row",{staticClass:"history-bottom-header"},[a("el-col",{staticClass:"tab-item",attrs:{span:3}},[t._v(t._s(t.$t("common.mtindex.gpsSpeed")))]),a("el-col",{staticClass:"tab-item",attrs:{span:3}},[t._v(t._s(t.$t("common.mtindex.speed")))]),a("el-col",{staticClass:"tab-item",attrs:{span:2}},[t._v(t._s(t.$t("common.mtindex.gpstime")))]),a("el-col",{staticClass:"tab-item",attrs:{span:2}},[t._v(t._s(t.$t("common.mtindex.direction")))]),a("el-col",{staticClass:"tab-item",attrs:{span:2}},[t._v(t._s(t.$t("historyTrack.altitude")))]),a("el-col",{staticClass:"tab-item",attrs:{span:2}},[t._v(t._s(t.$t("historyTrack.consumption")))]),a("el-col",{staticClass:"tab-item",attrs:{span:2}},[t._v(t._s(t.$t("historyTrack.alarmCount")))]),a("el-col",{staticClass:"tab-item",attrs:{span:6}},[t._v(t._s(t.$t("common.vehicle.location")))]),a("el-col",{staticClass:"tab-item",attrs:{span:2}},[t._v(t._s(t.$t("common.alarm.HighPpositioning")))])],1),a("cv-inifinite-scroll",{staticStyle:{height:"170px"},attrs:{list:t.currentDatas},nativeOn:{mouseover:function(e){return t.handlerMouseover(e)}},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-col",{staticClass:"tab-item",attrs:{span:3},nativeOn:{mouseleave:function(e){return t.handlerMouseleave(e)}}},[t._v(t._s(t._f("isValue")(e.row.gpsSpeed)))]),a("el-col",{staticClass:"tab-item",attrs:{span:3},nativeOn:{mouseleave:function(e){return t.handlerMouseleave(e)}}},[t._v(t._s(t._f("isValue")(e.row.dspeed)))]),a("el-col",{staticClass:"tab-item",attrs:{span:2},nativeOn:{mouseleave:function(e){return t.handlerMouseleave(e)}}},[t._v(t._s(t._f("isValue")(t._f("format")(e.row.gpsTime,"yyyy-MM-dd HH:mm:ss"))))]),a("el-col",{staticClass:"tab-item",attrs:{span:2},nativeOn:{mouseleave:function(e){return t.handlerMouseleave(e)}}},[t._v(t._s(t._f("isValue")(t._f("direction")(e.row.direction))))]),a("el-col",{staticClass:"tab-item",attrs:{span:2},nativeOn:{mouseleave:function(e){return t.handlerMouseleave(e)}}},[t._v(t._s(t._f("isValue")(e.row.high)))]),a("el-col",{staticClass:"tab-item",attrs:{span:2},nativeOn:{mouseleave:function(e){return t.handlerMouseleave(e)}}},[t._v(t._s(t._f("isValue")(e.row.oilMass)))]),a("el-col",{staticClass:"tab-item",attrs:{span:2},nativeOn:{mouseleave:function(e){return t.handlerMouseleave(e)}}},[t._v(t._s(t._f("isValue")(e.row.alarmCount)))]),a("el-col",{staticClass:"tab-item",attrs:{span:6},nativeOn:{mouseleave:function(e){return t.handlerMouseleave(e)}}},[t._v(t._s(t._f("isValue")(e.row.locationDesc)))]),a("el-col",{staticClass:"tab-item",attrs:{span:2},nativeOn:{mouseleave:function(e){return t.handlerMouseleave(e)}}},[t._v(t._s(t._f("baseMode")(e.row.pattern,e.row.mode)))])]}}])}),a("el-tooltip",{ref:"tooltip",attrs:{content:t.content,placement:"top"}})],1)},[],!1,null,"55b91ea2",null).exports),b=a("8b11"),A={props:{data:{},points:{},mapName:"",allPoints:[],selectedVehicle:{default:function(){return{plateCode:"",vehicleId:""}}}},inject:["store"],data:function(){return{playFlag:!1,playVal:"1000",setStepPoint:0,showData:0,allData:[],playSpeed:"1000",trackSpeed:null,allLinePoint:[],curIndex:0,addPoint:null,changSpeedFlag:!1,infoWindowStatus:!0}},computed:Object(l.a)({},Object(n.c)(["multicar_storageAllVehicles"])),watch:{data:function(t){this.playFlag=!1,this.allData=t,this.showData=0,this.curIndex=0,this.runTrack()},points:function(t){this.allLinePoint=t},multicar_currentVehicle:function(t){}},methods:{trackPaly:function(){this.$store.dispatch("isToggleHistoryPanel",!1),0<this.allData.length&&(this.playFlag?this.playFlag=!1:(this.playFlag=!0,this.showData==this.allData.length-1&&(this.showData=0)),this.runTrack())},runTrack:function(t){var e=this;this.playFlag?(t&&(clearInterval(this.trackSpeed),this.changSpeedFlag=!1),this.trackChage=!1,this.trackSpeed=setInterval(function(){e.curIndex=++e.curIndex,e.showData=e.curIndex,e.showData!=e.allData.length-1&&0!=e.showData||(e.playFlag=!1),null!=e.addPoint&&e.store._mapMethods.moveToCenter([e.addPoint.point]),e.moveTrack()},parseInt(this.playSpeed))):clearInterval(this.trackSpeed)},moveTrack:function(){this.allLinePoint.length>this.curIndex?this.generatesPoint():(this.curIndex=0,clearInterval(this.trackSpeed))},generatesPoint:function(){var t=this;null!=this.addPoint&&this.store._mapMethods.removeOverlay(this.addPoint);var e=this,a={plateCode:this.selectedVehicle.plateCode,alarmCount:this.allData[this.curIndex].alarmCount,vehicleStatus:1,locationDesc:this.allData[this.curIndex].locationDesc,gpsSpeed:this.allData[this.curIndex].gpsSpeed,direction:this.$filter.direction(this.allData[this.curIndex].direction)};this.addPoint=this.store._mapMethods.mapAddpoint({longitude:Number(this.allData[this.curIndex].mapLongitude),latitude:Number(this.allData[this.curIndex].mapLatitude)},this.$filter.isOnline(a,!1,this.$store.getters.mapName,this.store.icon),{width:36,height:36}),this.store._mapMethods.setRotation(this.addPoint,this.allData[this.curIndex].direction),this.store._mapMethods.addOverlay(this.addPoint),this.store._mapMethods.addEventListener(this.addPoint,"click",function(a){e.infoWindowStatus=!0,e.openInfo(t.curIndex)}),this.openInfo(this.curIndex)},openInfo:function(t){var e=this,a=this.allData[t],i=this;if(this.infoWindowStatus){var s="<style>.BMap_pop{margin-left:5px;margin-top: 1px;visibility: visible !important;}.BMap_shadow{display:none}}</style><div style=\"margin-top: 0;margin-bottom: 0;width:360px;height:180px;overflow:hidden;font-family: 'simsun';font-size: 14px;font-weight: bold;color: #333;\">"+"<div><span style='color: #333;font-weight: bold;'>".concat(this.$t("cvtsp.plateCode"),":</span>").concat(this.selectedVehicle.plateCode,"</div>")+"<div><span style=\"display:inline-block;margin: 5px 10px 5px 0px;width: 185px;font-size: 12px;font-weight: normal;color: #666;\"><span class='titleName'>".concat(this.$t("historyTrack.gpsTime"),":</span>").concat(this.$filter.format(a.gpsTime,"yyyy-MM-dd HH:mm:ss"),"</span>")+"<span style=\"display:inline-block;margin: 5px 0px;width: 150px;font-size: 12px;font-weight: normal;color: #666;\"><span class='titleName'>".concat(this.$t("historyTrack.orientation"),":</span>").concat(this.$filter.direction(a.direction),"</span>")+"</div><div><span style=\"display:inline-block;margin: 5px 10px 5px 0px;width: 185px;font-size: 12px;font-weight: normal;color: #666;\"><span class='titleName'>".concat(this.$t("historyTrack.altiTude"),":</span>").concat(a.high,"(m)</span>")+"<span style=\"display:inline-block;margin: 5px 0px;width: 150px;font-size: 12px;font-weight: normal;color: #666;\"><span class='titleName'>".concat(this.$t("historyTrack.mileage"),":</span>").concat(a.mileage,"(km)</span>")+"</div><div><span style=\"display:inline-block;margin: 5px 10px 5px 0px;width: 185px;font-size: 12px;font-weight: normal;color: #666;\"><span class='titleName'>".concat(this.$t("historyTrack.speed"),":</span>").concat(a.dspeed,"(km/h)</span>")+"<span style=\"display:inline-block;margin: 5px 0px;width: 150px;font-size: 12px;font-weight: normal;color: #666;\"><span class='titleName'>".concat(this.$t("historyTrack.gpsSpeed"),":</span>").concat(a.gpsSpeed,"(km/h)</span>")+"</div><div><span style=\"display:inline-block;margin: 5px 10px 5px 0px;width: 185px;font-size: 12px;font-weight: normal;color: #666;\"><span class='titleName'>".concat(this.$t("historyTrack.longitude"),":</span>").concat(this.$filter.toFixed(a.mapLongitude,6),"</span>")+"<span style=\"display:inline-block;margin: 5px 0px;width: 130px;font-size: 12px;font-weight: normal;color: #666;\"><span class='titleName'>".concat(this.$t("historyTrack.latitude"),":</span>").concat(this.$filter.toFixed(a.mapLatitude,6),"</span></div>")+"<div style=\"margin-top: 6px;font-size: 12px;font-weight: normal;color: #666;\"><span class='titleName'>".concat(this.$t("historyTrack.location"),":</span>").concat(a.locationDesc," </div></div>");"cvGaodeMap"==this.$store.getters.mapName?this.infoMarker=this.store._mapMethods.infoWindow(s,this.addPoint,function(){i.infoWindowStatus=!1,i.store._mapMethods.closeInfoWindow(this.infoMarker)}):"cvGoogleMap"==this.$store.getters.mapName?(this.infoMarker&&i.store._mapMethods.closeInfoWindow(this.infoMarker),this.infoMarker=this.store._mapMethods.infoWindow(s,"",this.addPoint.point),this.store._mapMethods.addEventListener(this.infoMarker,"clickclose",function(t){e.infoWindowStatus=!1})):(this.infoMarker=this.store._mapMethods.infoWindow(s,this.addPoint),this.store._mapMethods.addEventListener(this.infoMarker,"clickclose",function(t){e.infoWindowStatus=!1})),this.store._mapMethods.cvOpenInfoWindow(this.infoMarker,this.addPoint.point)}},changTrackIndex:function(){0!=this.showData&&(this.curIndex=this.showData,this.moveTrack())},changLabel:function(){this.playSpeed=this.playVal,this.changSpeedFlag=!0,this.runTrack(this.changSpeedFlag)}},mounted:function(){$(".el-slider__runway").css("margin","9px 0px")},beforeDestroy:function(){clearInterval(this.trackSpeed)}},T=(a("5c03"),Object(r.a)(A,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"play",staticClass:"cv-play",attrs:{mapName:t.mapName}},[a("cv-icon",{ref:"playBtn",staticStyle:{cursor:"pointer"},attrs:{name:t.playFlag?"zanting":"bofang",size:"23",disabled:!(0<t.allData.length)},nativeOn:{click:function(e){return t.trackPaly(e)}}}),a("el-slider",{ref:"slider",staticClass:"slider",attrs:{"show-tooltip":!1,step:1,disabled:!(0<t.allData.length),max:0<t.allData.length?t.allData.length-1:100},on:{change:t.changTrackIndex},model:{value:t.showData,callback:function(e){t.showData=e},expression:"showData"}}),a("el-select",{ref:"playStep",attrs:{placeholder:"请选择",size:"mini",disabled:!(0<t.allData.length)},on:{change:t.changLabel},model:{value:t.playVal,callback:function(e){t.playVal=e},expression:"playVal"}},[a("el-option",{attrs:{label:"X1",value:"1000"}}),a("el-option",{attrs:{label:"X2",value:"750"}}),a("el-option",{attrs:{label:"X3",value:"500"}}),a("el-option",{attrs:{label:"X4",value:"250"}})],1)],1)},[],!1,null,null,null).exports),M={mixins:[b.a],components:{vehicleList:k,cvPlay:T},props:{data:{},current:{},all:{},currentId:{},isTree:{default:!1},plateCode:{default:function(){return{plateCode:"",vehicleId:""}}},titles:{default:function(){return[{name:this.$t("historyTrack.GPSpoint"),key:"list",color:"#f39d38",icon:"cheliangjiankong"},{name:this.$t("historyTrack.CANgraph"),key:"can",color:"#3992e4",icon:"vehicle-group"},{name:this.$t("historyTrack.Capacity"),key:"ability",color:"#66ab5b",icon:"tingzhi"}]}}},computed:Object(l.a)({},Object(n.e)("historyTrack",["trackLists","canData","abillity","isToggleHistoryTree","allTrackPoints","isTogglePanelList"])),data:function(){return{name:"vehicleList",show:!1,mapName:"map",cur:0,key:"list",pagination:0,isToggleTree:!1,isToggle:!1,timer:null,chartColorOptions:{},allDataInfo:[],allPoint:[],ability:{},can:{}}},methods:Object(l.a)({},Object(n.b)("historyTrack",["isTogglePanelListA"]),{tabChange:function(t,e){switch(this.isTogglePanelListA(!1),this.key=t,this.isToggle=!0,this.cur=e,t){case"list":this.name="vehicleList";break;case"ability":this.name="echart";break;case"can":this.ability={}}},toggleTree:function(){this.$emit("history-panel")},toggle:function(){this.isToggle=this.isTogglePanelList,this.isTogglePanelListA(!this.isToggle)},exportExcel:function(){switch(this.key){case"list":return this.listExport();case"can":return this.chartExport(this.$refs.canEchart.getEchart());case"ability":return this.chartExport(this.$refs.abilityEchart.getEchart())}},listExport:function(){var t=this,e=this.trackLists,a=[];e.forEach(function(e){var i;a.push((i={},Object(g.a)(i,t.$t("historyTrack.gpsSpeed"),e.gpsSpeed),Object(g.a)(i,t.$t("historyTrack.speed"),e.dspeed),Object(g.a)(i,t.$t("historyTrack.gpsTime"),t.$filter.format(e.gpsTime,"yyyy-MM-dd HH:mm:ss")),Object(g.a)(i,t.$t("historyTrack.orientation"),t.$filter.direction(e.direction)),Object(g.a)(i,t.$t("historyTrack.altitude"),e.high),Object(g.a)(i,t.$t("historyTrack.consumption"),e.oilMass),Object(g.a)(i,t.$t("historyTrack.alarmCount"),e.alarmCount),Object(g.a)(i,t.$t("historyTrack.location"),e.locationDesc),i))}),this.mixins_exportTable(a,this.$t("historyTrack.TrackDetails"))},chartExport:function(t){var e=t.getDataURL({type:"png"});if(this.$service.isIe()){for(var a=atob(e.split(",")[1]),i=a.length,s=new Uint8Array(i);i--;)s[i]=a.charCodeAt(i);var l=new Blob([s]);window.navigator.msSaveOrOpenBlob(l,"hello.png")}else{var n=document.createElement("a");n.href=e,n.download=name||"jiankong",n.target="_blank";var o=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});n.dispatchEvent(o)}}}),watch:{isToggleHistoryTree:function(t){t&&(this.isToggle=!1)},allTrackPoints:function(t){this.allPoint=t},trackLists:function(t){this.allDataInfo=t}}},C=(a("c3c0"),Object(r.a)(M,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cv-track-list",style:{bottom:t.isToggle?0:"-200px"}},[a("ul",{staticClass:"tab-header bg"},[t.isTree?a("li",{staticClass:"tab-head-item tab-header-icon"},[a("cv-icon",{attrs:{name:"zuzhi1",color:"#fff"},nativeOn:{click:function(e){return t.toggleTree(e)}}})],1):t._e(),t._l(t.titles,function(e,i){return a("li",{key:e.key,staticClass:"tab-head-item",class:[t.cur==i?"tab-item-on":""],on:{click:function(a){return t.tabChange(e.key,i)}}},[a("span",{staticClass:"tab-item-text"},[a("cv-icon",{attrs:{name:e.icon}}),t._v(t._s(e.name))],1),a("span",{staticClass:"tab-item-num",style:{color:e.color}},[t._v("\n                "+t._s(0==i?t.trackLists.length:"")+"\n            ")])])}),a("li",{staticClass:"tab-head-item"},[a("cv-play",{attrs:{data:t.allDataInfo,points:t.allPoint,selectedVehicle:t.plateCode,mapName:t.mapName}})],1),a("li",{staticClass:"tab-head-item toggle-style",on:{click:t.toggle}},[a("cv-icon",{staticStyle:{"vertical-align":"middle"},attrs:{color:"#969696",size:"24",name:t.isToggle?"xialajiantou":"shanglajiantou-copy"}})],1),a("li",{staticClass:"tab-head-item toggle-style"},[a("el-button",{attrs:{size:"small",type:"success",icon:"upload"},on:{click:t.exportExcel}},[t._v(t._s(t.$t("power.export")))])],1)],2),a("div",{staticClass:"tab-content-detail history-content-detail"},[a("vehicle-list",{staticClass:"every-detail",style:{top:"list"==t.key?0:"9999px"}}),a("cv-echart",{ref:"canEchart",staticClass:"every-detail",style:{top:"can"==t.key?0:"9999px"},attrs:{name:"line",data:t.canData}}),a("cv-echart",{ref:"abilityEchart",staticClass:"every-detail",style:{top:"ability"==t.key?0:"9999px"},attrs:{name:"line",data:t.abillity}})],1)])},[],!1,null,null,null).exports),w=a("7e2f"),I=a("2fc5"),P=a.n(I),D=a("c0f0"),O=a.n(D),x=a("062d"),N=a.n(x),S=a("893e"),L=a.n(S),V=a("2e17"),E=a("8d87"),R=a("c66c"),j=a("3948"),H={components:{topBar:c,historyPanel:u,scrollbarPagination:C},mixins:[w.a],computed:Object(l.a)({},Object(n.c)(["mapName","mapType","onlineList","isAttention","socketEnterprise","socketVehicle","vehicle_data"]),Object(n.e)("historyTrack",["isTogglePanelList","isToggleHistoryTree"])),provide:function(){return{store:this.store}},data:function(){return{store:{_mapMethods:null,icon:""},otherParam:{},treeActive:!1,panelActive:!1,language:"zh-CN",mapInitial:!1,bestViewPoint:null,allGpsPoint:null,allPoints:null,allAbillityIds:null,allCanData:null,fullPoster:null,mapFull:!1,loadComponents:{topBar:"",historyPanel:"historyPanel"},trackFlag:{flag:!1},selectVehicle:{},mileageTotal:"",listAll:[],listST:[],listCounty:[],alarmMap:[],isReturnData:!1,allLineOne:null,allLineTwo:null,startPoint:null,endPoint:null,allData:null,num:0,addPoint:null,plateCode:"",playFalg:!1,alarmMarkerGroup:[],trackResult:null}},created:function(){this.language=localStorage.getItem("language")},methods:Object(l.a)({},Object(n.b)("historyTrack",["addTrackLists","addTrackPoints","addTrackAbillity","getVehicleTrackByBigData","queryVehicleCan","addCanData","setMileageTotal","setAverageOil","setAverageSpeed","setOilTotal","setListCounty","setAlarmListMap","setListST","isToggleHistoryTreeA","isToggleHistoryPanelA","isTogglePanelListA"]),{handlerMonitor:function(t){this.selectVehicle=t?t.data[0]:{},this.store.icon=t.data[0].icon||t.data[0].vehicleicon},toggleTree:function(){this.isReturnData&&(this.panelActive=this.treeActive),this.treeActive=!this.treeActive,this.treeActive&&this.isToggleHistoryTreeA(!0)},screenF:function(){this.mapFull=!this.mapFull,this.mapFull?this.fullPoster.style.top="0px":this.fullPoster.style.top="90px"},trackS:(i=Object(s.a)(regeneratorRuntime.mark(function t(e){var a,i,s,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$refs.map.mapMethods&&this.$refs.map.mapMethods.clearOverlays(),this.addTrackLists([]),this.addTrackPoints([]),this.addTrackAbillity([]),a={vehicleId:this.selectVehicle.id,startTime:e.startTime,endTime:e.endTime,isCompress:!0,isAllLocations:e.isAllLocations,mapType:this.$store.getters.mapType,trackType:this.$store.getters.user.trackType,isPoi:null==this.$COMMON.isPoi||this.$COMMON.isPoi},this.allGpsPoint=[],this.allPoints=[],this.allAbillityIds=[],this.addCanData([]),this.allCanData=[],this.trackFlag.flag=!0,t.prev=11,t.next=14,this.getVehicleTrackByBigData(a);case 14:if(i=t.sent,s=i.vData,i.flag,!s){t.next=28;break}if(0==s.mileageTotal)return this.$message.warning(this.$t("cvtsp.noTrip")),this.trackFlag.flag=!1,t.abrupt("return",!1);t.next=22;break;case 22:l=s.charts,this.searchResultDetail(s),l.times.length?(this.addCanData(l),this.allCanData=l):(this.addCanData(l),this.allCanData=[]),this.trackFlag.flag=!1,t.next=34;break;case 28:this.$message.warning(this.$t("cvtsp.noTrip")),this.allGpsPoint=[],this.allPoints=[],this.allAbillityIds=[],this.addCanData([]),this.trackFlag.flag=!1;case 34:t.next=39;break;case 36:t.prev=36,t.t0=t.catch(11),this.trackFlag.flag=!1;case 39:case"end":return t.stop()}},t,this,[[11,36]])})),function(t){return i.apply(this,arguments)}),searchResultDetail:function(t){this.$refs.map.mapMethods.clearOverlays(),this.$service.isEmptyObject(t)||(this.isReturnData=!0,t.listST=t.listST?JSON.parse(t.listST):"",t.listCounty=t.listCounty?JSON.parse(t.listCounty):"",t.alarmMap=t.alarmMap?JSON.parse(t.alarmMap):"",t.listAll=t.listAll?JSON.parse(t.listAll):"",t.mileageTotal=t.mileageTotal?JSON.parse(t.mileageTotal):"",this.setMileageTotal(t.mileageTotal),this.setAverageOil(t.averageOil),this.setAverageSpeed(t.averageSpeed),this.setOilTotal(t.oilTotal),this.listST=this.$service.isArray(t.listST)?t.listST:[],this.setListST(this.listST),this.listCounty=this.$service.isArray(t.listCounty)?t.listCounty:[],this.setListCounty(this.listCounty),this.alarmMap=this.$service.isArray(t.alarmMap)?t.alarmMap:[],this.setAlarmListMap(this.alarmMap),this.listAll=this.$service.isArray(t.listAll)?t.listAll:[],this.showLines(t.listAll),this.addTrackLists(t.listAll),this.allGpsPoint=t.listAll,this.addTrackAbillity(t.abillityIds),this.allAbillityIds=t.abillityIds)},showLines:function(t){var e=[];this.$service.isArray(t)&&0<t.length&&(t.forEach(function(t){e.push({lng:Number(t.mapLongitude),lat:Number(t.mapLatitude)})}),this.bestViewPoint=e,this.allPoints=e,this.allLineTwo=this.$refs.map.mapMethods.mapAddline(e,{strokeWeight:3}),this.showStartEnd(t,e),this.treeActive=!1,this.panelActive=!0,this.$refs.map.mapMethods.getBestView(e))},showStartEnd:function(t,e){this.allData=t,this.addTrackPoints(e);var a,i,s=e.length-1,l=t.length-1,n=e[0],o=e[s],r=t[0],c=t[l];a='\n            \t\t\t\t<div class="mapcontent">'.concat(this.$t("common.vehicle.startLoc"),": ").concat(""==r.locationDesc?this.$t("common.vehicle.NoLocation"):r.locationDesc,"</div>"),this.startPoint=this.$refs.map.mapMethods.mapAddpoint({longitude:Number(n.lng),latitude:Number(n.lat)},"zh_CN"==this.language?"cvGoogleMap"==this.mapName?V:P.a:"cvGoogleMap"==this.mapName?R:N.a,{width:36,height:36}),this.$refs.map.mapMethods.overlayClickOpenInfoWindow(this.startPoint,this.startPoint.point,a),this.$refs.map.mapMethods.addOverlay(this.startPoint),i='\n        <div class="mapcontent">'.concat(this.$t("common.vehicle.endLoc"),": ").concat(""==c.locationDesc?this.$t("common.vehicle.NoLocation"):c.locationDesc,"</div>"),this.endPoint=this.$refs.map.mapMethods.mapAddpoint({longitude:Number(o.lng),latitude:Number(o.lat)},"zh_CN"==this.language?"cvGoogleMap"==this.mapName?E:O.a:"cvGoogleMap"==this.mapName?j:L.a,{width:36,height:36}),this.$refs.map.mapMethods.overlayClickOpenInfoWindow(this.endPoint,this.endPoint.point,i),this.$refs.map.mapMethods.addOverlay(this.endPoint)},single:function(t){this.selectVehicle=t},mapReady:function(){this.mapInitial=!0,this.store._mapMethods=this.$refs.map.mapMethods},cTof:function(t){var e=this;setTimeout(function(){e.trackS(t)},1e3)},togglePanel:function(){this.isReturnData&&(this.treeActive&&(this.treeActive=!this.treeActive),this.panelActive=!this.panelActive)}}),mounted:function(){var t=this;this.isToggleHistoryTreeA(!1),this.isToggleHistoryPanelA(!1),this.isTogglePanelListA(!0),setTimeout(function(){t.fullPoster=document.querySelector(".historyTrack")},500),this.$route.query&&(this.selectVehicle.id=this.$route.query.id,this.selectVehicle.plateCode=this.$route.query.plateCode)},beforeDestroy:function(){this.addTrackLists([]),this.addTrackPoints([]),this.addTrackAbillity([]),this.addCanData([]),this.fullPoster=null},watch:{isTogglePanelList:function(t){this.treeActive&&(this.treeActive=!1),t||(this.treeActive=!1,this.isToggleHistoryTreeA(!1))},isToggleHistoryTree:function(t){t?this.isToggleHistoryPanelA(!1):this.isReturnData&&this.isToggleHistoryPanelA(!0)}}},G=(a("726c"),Object(r.a)(H,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"historyTrack"},[a("cv-lazy-render",{attrs:{transition:"top",immediate:t.mapInitial}},[a("top-bar",{attrs:{selectedVehicle:t.selectVehicle,btnFlag:t.trackFlag,screenFullSize:t.mapFull},on:{trackSearch:t.trackS,isScreenFull:t.screenF,childToFather:t.cTof,toggleTree:t.toggleTree}})],1),a("cv-tabs-tree",{ref:"tabs",class:["multicar-monitor-tabs",!t.panelActive&&t.treeActive?"monitor-tabs__active":""],attrs:{"is-checked":!1,"tree-data":t.vehicle_data,"online-monitor":t.onlineList,"vehicle-monitor":t.socketVehicle,"attention-monitor":t.isAttention,"other-param":t.otherParam,"enterprise-fleet-monitor":t.socketEnterprise,"node-monitor":t.handlerMonitor}}),a(t.loadComponents.historyPanel,{tag:"component",class:["history-panel",t.panelActive&&!t.treeActive?"toggle-panel":""],attrs:{data:t.allGpsPoint,allPointArry:t.allPoints,allAbillity:t.allAbillityIds,allCanDatas:t.allCanData,bestViewPoint:t.bestViewPoint}}),a(t.mapName,{ref:"map",tag:"component",staticClass:"multiMap",attrs:{zooms:[4,18],mapLoaded:t.mapReady,language:t.language}}),a("cv-lazy-render",{attrs:{transition:"bottom",immediate:t.mapInitial}},[a("scrollbar-pagination",{staticClass:"track-list",attrs:{"is-tree":!0,plateCode:t.selectVehicle},on:{"history-panel":t.toggleTree}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:5==t.mapType,expression:"mapType==5 ?true :false"}],staticStyle:{height:"14px",width:"266px",position:"absolute",bottom:"40px",left:"0","z-index":"1",background:"#fff"}},[t._v("GS（2015）1336号")])],1)},[],!1,null,null,null).exports);e.default=G},c0f0:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAeCAYAAADHJYVoAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjA4M0UxNDRDN0UzQjExRTZBQTM5QTgyQjM3QzY1RUFFIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjA4M0UxNDREN0UzQjExRTZBQTM5QTgyQjM3QzY1RUFFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDgzRTE0NEE3RTNCMTFFNkFBMzlBODJCMzdDNjVFQUUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDgzRTE0NEI3RTNCMTFFNkFBMzlBODJCMzdDNjVFQUUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz55ESDOAAACOklEQVR42qyWO0hcQRSG5+7eQHyhrIWIRSAW1hFRELNYWSlE0IApIpaigjYK9vGVgIlgK9hoIWIVtLDwQSJKNG06CyEpZCEm6/ra3et/5MwyTGbuY80PH9zLnfPPmbNnz71O5eylsMgBL0EvaAF1oAb8BafgC1gD+8AzGljMk2AeNIpgnYAxsKc/iGn3cTANdkIaC15H62c4viBX22gJvBXRRSWcALVgAOT1zN8VaayK4qf0srTxzv9D49wIBfMPfLR/9Hu81PfeUqL3suat3GqhpW5QNZcxLSG/Jpf72GqiBpvuffQqxvX2NaZreS8N9Y0M6qDMnwcdXzWRGwQYk+op84TpCQWbDPQT+ChBmadAdZjSqKdQN7CcIkWz5RAXzWE7IsBQ1ZHLA6fZVBZbuUL+oHtU8/WgnlY7JELm63Lk0th8EdQpEUrznaalNO8DK1GHiE9p3oBVaU7l+aZnX6Qo6yYau3Jw0fwdknP4EaL4YdM8PwAfH2lO8V9tr7lJ/nGL0QnHW9+hN6AHnEc0Pue4Gz9zwZ8NXSAT0jjD60+D3v5ShzznbwOM6flrXi/CmouLibJNkc924jJtWZLGc8r4s9/7TuIycYY2dsoHtxvjz1qWhROrLUR5+V+5s+P+9GL7MbddjskyHv4/nmpcDirAU/CEedjMbehIlHR/GolV1iXzf37uXm2MLmR/bKXY6I655k89Omk2tLk8hcxbydbXXH5x0cJLbqW4ZugYPjs8Bb0sObnoXoABABvI3ROZF4JrAAAAAElFTkSuQmCC"},c3c0:function(t,e,a){"use strict";var i=a("0985");a.n(i).a},c66c:function(t,e,a){var i=a("062d");t.exports={fillColor:"#01C302",url:i}},e033:function(t,e,a){"use strict";var i=a("6094");a.n(i).a},ea98:function(t,e,a){},f993:function(t,e,a){},fea6:function(t,e,a){}}]);
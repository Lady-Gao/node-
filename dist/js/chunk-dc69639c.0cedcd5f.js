(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-dc69639c"],{"0116":function(e,t,a){},"062de":function(e,t,a){"use strict";var l=a("aea9");a.n(l).a},"0ba5":function(e,t,a){},"0dc9":function(e,t,a){"use strict";var l=a("197b");a.n(l).a},1116:function(e,t,a){},"18c5":function(e,t,a){"use strict";a("c5f6");var l={inject:["store"],props:{options:{}},mixins:[a("8369").a],data:function(){return{beforeGird:{vehicleId:this.store.currentV,enterpriseId:this.store.currentE,taskExecutionConditionStr:7,Channel:Number(this.store.downLoadParams.Channel),StartTime:this.store.downLoadParams.StartTime,EndTime:this.store.downLoadParams.EndTime,Alarm:Number(this.store.downLoadParams.Alarm),MediaType:Number(this.store.downLoadParams.MediaType),StreamType:Number(this.store.downLoadParams.StreamType),StorageType:Number(this.store.downLoadParams.StorageType),fileSource:Number(this.store.downLoadParams.fileSource)},goFlag:!1}},methods:{reloadGrid:function(){this.$refs.table.tableInitial()},cancel:function(e){var t=this;this.$http({url:"/sendVideoOrder/sendVedioFileUploadController",params:{UploadControl:2,SerialNumber:e.SerialNumber,vehicleId:this.store.currentV,enterpriseId:this.store.currentE,fid:e.id}}).then(function(e){e.flag&&setTimeout(function(){t.$message.warning("已取消"),t.reloadGrid()},1e3)})},pause:function(e){var t=this;this.$http({url:"/sendVideoOrder/sendVedioFileUploadController",params:{UploadControl:0,SerialNumber:e.SerialNumber,vehicleId:this.store.currentV,enterpriseId:this.store.currentE,fid:e.id}}).then(function(e){e.flag&&setTimeout(function(){t.$message.warning("已暂停"),t.reloadGrid()},1e3)})},goOn:function(e){var t=this;this.$http({url:"/sendVideoOrder/sendVedioFileUploadController",params:{UploadControl:1,SerialNumber:e.SerialNumber,vehicleId:this.store.currentV,enterpriseId:this.store.currentE,fid:e.id}}).then(function(e){e.flag&&setTimeout(function(){t.$message.warning("已继续"),t.reloadGrid()},1e3)})},realDownLoad:function(e){var t=this;this.$http({url:"/videoController/readVideoFtpFile",params:{id:e.id}}).then(function(e){e.flag&&t.$message.success("添加至离线下载!")})}},mounted:function(){var e=this;this.store.serverFlag&&this.$http({url:"/sendVideoOrder/sendVedioFileUploadSite",params:this.beforeGird}).then(function(t){t.flag&&e.reloadGrid()})}},i=a("2877"),s=Object(i.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"realtimeDown"},[a("el-button",{on:{click:e.reloadGrid}},[e._v("刷新")]),a("cv-grid",{ref:"table",attrs:{params:{},url:"/videoController/findVideaFileUploadSitePage",defaultHeight:300}},[a("el-table-column",{attrs:{label:"车牌号码",prop:"plateCode"}}),a("el-table-column",{attrs:{label:"通道",formatter:e.channelType,prop:"Channel"}}),a("el-table-column",{attrs:{label:"文件时间",prop:"TimeRange"}}),a("el-table-column",{attrs:{label:"请求时间",prop:"ReqTime"}}),a("el-table-column",{attrs:{label:"状态",formatter:e.statusType,prop:"Status"}}),a("el-table-column",{attrs:{label:"文件源",formatter:e.fileSource,prop:"fileSource"}}),a("el-table-column",{attrs:{label:e.$t("action.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cv-span",{directives:[{name:"show",rawName:"v-show",value:1==t.row.fileSource&&(0==t.row.Status||4==t.row.Status),expression:"scope.row.fileSource == 1 && (scope.row.Status == 0 || scope.row.Status == 4)"}],attrs:{type:"danger"},nativeOn:{click:function(a){return e.cancel(t.row)}}},[e._v("取消")]),a("cv-span",{directives:[{name:"show",rawName:"v-show",value:1==t.row.fileSource&&0==t.row.Status,expression:"scope.row.fileSource == 1 && scope.row.Status == 0"}],attrs:{type:"warning"},nativeOn:{click:function(a){return e.pause(t.row)}}},[e._v("暂停")]),a("cv-span",{directives:[{name:"show",rawName:"v-show",value:1==t.row.fileSource&&4==t.row.Status,expression:"scope.row.fileSource == 1 && scope.row.Status == 4"}],attrs:{type:"success"},nativeOn:{click:function(a){return e.goOn(t.row)}}},[e._v("继续")]),a("cv-span",{directives:[{name:"show",rawName:"v-show",value:1==t.row.Status,expression:"scope.row.Status == 1"}],attrs:{type:"success"},nativeOn:{click:function(a){return e.realDownLoad(t.row)}}},[e._v("下载")])]}}])})],1)],1)},[],!1,null,null,null);t.a=s.exports},"197b":function(e,t,a){},"1b25":function(e,t,a){},"1b27":function(e,t,a){"use strict";(function(e){a("28a5"),a("a481"),a("96cf");var l,i=a("3b8d"),s=(a("c5f6"),a("ac6a"),a("cebc")),n=a("5589"),r=a("2a18"),o=a("b1e2"),c=a("29ff"),u=a("7a3a"),m=a("58af"),d=a("8369"),p=a("e4d3"),h=a("ca5b"),v=a("3ec1"),f=a("27f7"),b=a("b62f"),y=a("d310"),g=a("18c5"),S=a("59c0"),C=a("b0ad"),x=a("2f62"),T=a("8bbf"),I=a.n(T);t.a={components:{realSet:h.a,operation:n.a,vehicleInfo:r.a,setting:o.a,vps:c.a,videoTree:u.a,replaySet:v.a,allReplay:f.a,replayCtrl:b.a,messBox:y.a,downLoad:g.a,downS:S.a},mixins:[m.a,d.a,p.a,C.a],data:function(){return{serverReplayList:[],serverRF:!1,searchPlateCode:"",searchStartTime:null,searchTimer:null,replaySubTitle:"",replayIndex:null,currentVehicle:null,replayCurrent:null,isOpen:!1,store:{realtimeSetParams:{dataSelect:"0",StreamType:"1",overTime:"5"},replayAll:{simCode:"",PlaybackMode:"0",Multiple:"0",DataSource:"1",Alarm:"",MediaType:"3",StreamType:"2",StorageType:"1",Channel:"",StartTime:"",EndTime:"",screen:"",channels:"",selectChannels:[1]},replaySetParams:{simCode:"",PlaybackMode:"0",Multiple:"0",DataSource:"1",Alarm:"",MediaType:"3",StreamType:"2",StorageType:"1",Channel:"",StartTime:"",EndTime:""},replayCtrlParams:{simCode:"",Channel:"",PlaybackControl:"1",Multiple:"0",DragPlaybackPosition:"0"},currentV:null,currentE:null,picCut:{base64:null,channel:null},downLoadParams:{Channel:"",StartTime:"",EndTime:"",Alarm:"",MediaType:"",StreamType:"",StorageType:"",fileSource:""},serverFlag:!1,subTitle:{x:10,y:60}},isSubtitle:!1,canPlay:!0,setFlag:!1,playFlag:!1,currentFile:null,currentParams:null,searchFlag:!1,rList:[],alarmNum:0,listData:"",listData1:"",activeTabs:"tabs0",hiddenOcx:!1,ocxModelInitial:!1,operation:{},vehicleInfo:{},tables:{bottomPanelTitles:[{name:"GPS监控"},{name:"报警信息"},{name:"媒体文件"},{name:"系统事件"}]},common:{vehicleId:null,enterpriseId:null,isFull:!1,timer:null,plateCode:null,mediaData:null,contentLoading:!1,nodeCheckChannel:null},dialog:{flag:!1,title:"--",size:"",name:"",sDialog:{flag:!1,title:"--",size:"",name:"",showBtns:!1,vInfo:{},isPopover:!1,editData:null}},videoPortHeight:0,videoPortWidth:0,videoPortHeightC:0,videoPortWidthC:0,vehicleVideoData:{ipAddress:"",port:"",simCode:"",channelCount:""},ocxInitPower:{replayPower:!1,picCutPower:!1,ytCtrlPower:!1,MTpowerPower:!1},portChanel:{},replaySearchParams:{MediaType:"0",MediaTypeList:[{label:"音视频",value:"0"},{label:"音频",value:"1"},{label:"视频",value:"2"},{label:"视频或音视频",value:"3"}],StreamType:"2",StreamTypeList:[{label:"所有码流",value:"0"},{label:"主码流",value:"1"},{label:"子码流",value:"2"}],StorageType:"1",StorageTypeList:[{label:"所有存储器",value:"0"},{label:"主存储器",value:"1"},{label:"灾备存储器",value:"2"}],DataSource:"1",DataSourceList:[{label:"终端",value:"1"},{label:"存储服务器",value:"2"}],Alarm:"",AlarmList:[]},screenss:1,screenssList:[{label:1,value:1},{label:4,value:4},{label:6,value:6},{label:9,value:9},{label:10,value:10},{label:16,value:16}],mapObj:{},openAllTimer:null,realtimeGPSInfo:null,openAllTimeout:null,replayGPSInfo:null,gpsType:"real",currentSearchParams:null}},methods:Object(s.a)({},Object(x.b)(["sendVideoRealTimeTransportByOcx","sendVedioQueryResouceStore","getTerminalUpVideofileDetailsLog","sendRemoteVideoPlayBackRequest","sendRemoteVideoPlayBackRequestByOcx","sendRemoteVideoPlayBackController","getAlarmTypeList","addOcxBeginAskStreamLog","addOcxEndAskStreamLog","queryVehicleGPSInfoLast","queryVehicleGPSInfo"]),{realtimeSetting:function(){this.hiddenOcx=!0,this.dialog.name="realSet",this.dialog.title="实时视频参数设置",this.dialog.size="dialog-tiny",this.dialog.flag=!0},alarmChange:function(e){var t=0;e.forEach(function(e){t+=Number(e)}),this.alarmNum=t},ocxActiveXInit:function(e){var t=document.getElementById(e),a=Object(s.a)({ipAddress:this.vehicleVideoData.ipAddress,port:this.vehicleVideoData.port,userLevel:this.$store.getters.user.userLevel},this.ocxInitPower);this.ocxInit(t,a)},showSubTitle:function(e,t){var a=this;return"single"==e?"real"==t?setInterval(function(){var e,t=a,l=a.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss");e=" 时间:".concat(l," \n 车牌号码:").concat(t.mapObj["screen"+window.selectedOcxIndex].gpsData.plateCode," \n 速度:").concat(t.mapObj["screen"+window.selectedOcxIndex].gpsData.speed," km/h \n 海拔:").concat(t.mapObj["screen"+window.selectedOcxIndex].gpsData.height," m \n 经度:").concat(t.mapObj["screen"+window.selectedOcxIndex].gpsData.longitude," 纬度:").concat(t.mapObj["screen"+window.selectedOcxIndex].gpsData.latitude),document.getElementById("realOcx").SetOperationIndex(window.selectedOcxIndex),document.getElementById("realOcx").SetSDLVideoText(e,20),t.mapObj["screen"+window.selectedOcxIndex].subTitle=e},1e3):setInterval(function(){var e=a,t="";a.replayGPSInfo[a.replayIndex]?(t=" 时间:".concat(a.replayGPSInfo[a.replayIndex].gpsTime," \n 车牌号码:").concat(a.replayGPSInfo[a.replayIndex].plateCode," \n 速度:").concat(a.replayGPSInfo[a.replayIndex].speed," km/h \n 海拔:").concat(a.replayGPSInfo[a.replayIndex].height," m \n 经度:").concat(a.replayGPSInfo[a.replayIndex].longitude," 纬度:").concat(a.replayGPSInfo[a.replayIndex].latitude),a.replaySubTitle=t):t=a.replaySubTitle,t="时间:".concat(a.replayGPSInfo[a.replayIndex].gpsTime," \n 车牌号码:").concat(a.replayGPSInfo[a.replayIndex].plateCode," \n 速度:").concat(a.replayGPSInfo[a.replayIndex].speed," km/h \n 海拔:").concat(a.replayGPSInfo[a.replayIndex].height," m \n 经度:").concat(a.replayGPSInfo[a.replayIndex].longitude," 纬度:").concat(a.replayGPSInfo[a.replayIndex].latitude),document.getElementById("realOcx").SetOperationIndex(window.selectedOcxIndex),document.getElementById("realOcx").SetSDLVideoText(t,20),e.mapObj["screen"+window.selectedOcxIndex].subTitle=t,a.replayIndex=a.replayIndex+1e3},1e3):"real"==t?setInterval(function(){for(var e=a,t=0;t<e.screenss;t++){var l;l=" 时间:"+a.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss")+"\n 车牌号码:"+a.realtimeGPSInfo.plateCode+" \n 速度:"+a.realtimeGPSInfo.speed+" km/h \n 海拔:"+a.realtimeGPSInfo.height+" m \n 经度:"+a.realtimeGPSInfo.longitude+" 纬度:"+a.realtimeGPSInfo.latitude,document.getElementById("realOcx").SetOperationIndex(t),document.getElementById("realOcx").SetSDLVideoText(l,20)}},1e3):setInterval(function(){for(var e=a,t=0;t<e.screenss;t++){var l;l=" 时间:".concat(a.replayGPSInfo[a.replayIndex].gpsTime," \n 车牌号码:").concat(a.replayGPSInfo[a.replayIndex].plateCode," \n 速度:").concat(a.replayGPSInfo[a.replayIndex].speed," km/h \n 海拔:").concat(a.replayGPSInfo[a.replayIndex].height," m \n 经度:").concat(a.replayGPSInfo[a.replayIndex].longitude," 纬度:").concat(a.replayGPSInfo[a.replayIndex].latitude),document.getElementById("realOcx").SetOperationIndex(t),document.getElementById("realOcx").SetSDLVideoText(l,20),a.replayIndex=a.replayIndex+1e3}},1e3)},getSubTitleInfo:function(e,t){var a=this;"real"==e?this.isSubtitle?this.queryVehicleGPSInfoLast({vehicleId:t.vehicleId}).then(function(e){e.flag&&(a.realtimeGPSInfo=e.data,a.mapObj["screen"+window.selectedOcxIndex].gpsData=e.data,a.openAllTimeout&&clearTimeout(a.openAllTimeout),a.openAllTimeout=setTimeout(function(){a.getSubTitleInfo("real",{vehicleId:t.vehicleId})},1300))}):this.openAllTimeout&&clearTimeout(this.openAllTimeout):this.queryVehicleGPSInfo({vehicleId:t.vehicleId,startTime:this.currentParams.StartTime,endTime:this.currentParams.EndTime,mapType:1}).then(function(e){e.flag&&(a.replayGPSInfo=e.data)})},openAllCamera:function(){if(this.currentVehicle=this.common.vehicleId,!this.ocxModelInitial)return this.message.warning("请选择车辆!"),!1;var e=document.getElementById("realOcx"),t=Object(s.a)({},this.store.realtimeSetParams,this.vehicleVideoData,this.ocxInitPower,{userLevel:this.$store.getters.user.userLevel});this.isactive=!1;for(var a=0;a<this.screenss;a++)e.SetOperationIndex(a),this.ocxInit(e,t),e.SetTimeout(Number(this.store.realtimeSetParams.overTime)),this.ocxRealtimePlayXY(e,{simCode:this.vehicleVideoData.simCode,channel:a+1,dataType:this.store.realtimeSetParams.dataSelect,StreamType:this.store.realtimeSetParams.StreamType}),this.mapObj["screen"+a]={vehicleId:this.common.vehicleId,simCode:this.vehicleVideoData.simCode,channel:a+1},this.addOcxBeginAskStreamLog({vehicleId:this.common.vehicleId,enterpriseId:this.common.enterpriseId,channel:Number(a+1),type:1,transType:this.store.realtimeSetParams.dataSelect});this.isSubtitle&&(this.getSubTitleInfo("real",{vehicleId:this.currentVehicle}),this.gpsType="real",this.openAllTimer=this.showSubTitle("openAll","real")),this.isOpen=!0},stopAllCamera:function(e){var t,a=document.getElementById("realOcx");this.openAllTimer&&clearInterval(this.openAllTimer);for(var l=0;l<this.screenss;l++)a.SetOperationIndex(l),this.ocxCloseVideo(a),t=a.GetReceiveBytesWithUnit(),this.addOcxEndAskStreamLog({vehicleId:this.common.vehicleId,channel:Number(l+1),type:e||(this.isactive?2:1),dataUsage:t});this.mapObj={},this.isOpen=!1},openSingleCamera:function(){this.currentVehicle=this.common.vehicleId;var e=document.getElementById("realOcx"),t=Object(s.a)({},this.store.realtimeSetParams,this.vehicleVideoData,this.ocxInitPower,{userLevel:this.$store.getters.user.userLevel});if(!this.ocxModelInitial)return this.$message.warning("请先选择车辆!"),!1;var a=null;e.SetOperationIndex(window.selectedOcxIndex),this.ocxInit(e,t),e.SetTimeout(Number(this.store.realtimeSetParams.overTime)),this.isactive=!1,this.ocxRealtimePlayXY(e,{simCode:this.vehicleVideoData.simCode,channel:this.common.nodeCheckChannel,dataType:this.store.realtimeSetParams.dataSelect,StreamType:this.store.realtimeSetParams.StreamType}),this.isSubtitle&&(this.getSubTitleInfo("real",{vehicleId:this.currentVehicle}),a=this.showSubTitle("single","real")),this.mapObj["screen"+window.selectedOcxIndex]={simCode:this.vehicleVideoData.simCode,channel:this.common.nodeCheckChannel,timer:a},this.addOcxBeginAskStreamLog({vehicleId:this.common.vehicleId,enterpriseId:this.common.enterpriseId,channel:this.common.nodeCheckChannel,type:1}),this.gpsType="real",this.isOpen=!0},stopSingleCamera:function(){var e,t=this,a=document.getElementById("realOcx");a.SetOperationIndex(window.selectedOcxIndex),a.SetSDLVideoText("",12),this.ocxCloseVideo(a),setTimeout(function(){t.isactive?(e=a.GetReceiveBytesWithUnit(),t.addOcxEndAskStreamLog({vehicleId:t.common.vehicleId,channel:window.selectedOcxIndex,type:2,dataUsage:e})):t.addOcxEndAskStreamLog({vehicleId:t.common.vehicleId,channel:t.portChanel[window.selectedOcxIndex],type:1,dataUsage:e}),t.isOpen=!1},1e3)},searchList:(l=Object(i.a)(regeneratorRuntime.mark(function e(){var t,a,l=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.searchStartTime=(new Date).getTime(),this.listData&&this.listData1){e.next=5;break}return this.$message.warning("请选择查询时间"),e.abrupt("return",!1);case 5:if(this.listData1>this.listData&&864e5<this.listData1-this.listData)return this.$message.warning("查询范围为一天,且开始时间不能大于结束时间!"),e.abrupt("return",!1);e.next=8;break;case 8:(t=document.getElementById("realOcx")).SetOperationIndex(window.selectedOcxIndex),this.searchFlag=!0,a={Channel:Number(-1==this.common.nodeCheckChannel?0:this.common.nodeCheckChannel),StartTime:this.listData/1e3,EndTime:this.listData1/1e3,Alarm:this.alarmNum,MediaType:Number(this.replaySearchParams.MediaType),StreamType:Number(this.replaySearchParams.StreamType),StorageType:Number(this.replaySearchParams.StorageType),vehicleId:this.common.vehicleId,enterpriseId:this.common.enterpriseId,DataSource:Number(this.replaySearchParams.DataSource)},this.currentSearchParams=a,t.SetRequestSequence(String(parseInt(1e6*Math.random()))),t.QueryVideoFiles(this.vehicleVideoData.simCode,a.Channel,a.StartTime,a.EndTime,a.Alarm,a.MediaType,a.StreamType,a.StorageType,a.DataSource),this.searchPlateCode=this.common.plateCode,this.searchTimer=setTimeout(function(){l.$message.warning("网络繁忙！"),l.searchFlag=!1,l.rList=[],clearTimeout(l.searchTimer)},3e4),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),this.searchFlag=!1;case 22:case"end":return e.stop()}},e,this,[[0,19]])})),function(){return l.apply(this,arguments)}),singleCar:function(e){var t=this;this.common.vehicleId=e.data[0].id,this.common.enterpriseId=e.data[0].enterpriseId,this.common.plateCode=e.data[0].plateCode,this.common.nodeCheckChannel=-1,this.$http({url:"/sendVideoOrder/getVideoSimCodeAndIp",params:{vehicleId:this.common.vehicleId}}).then(function(e){if(!e.flag)return t.$message.error({message:t.$t("error."+e.errorCode)}),!1;Object.assign(t.vehicleVideoData,e.data),t.ocxModelInitial=!0})},channelCheck:function(e){if(!this.ocxModelInitial)return this.$message.warning("请先选择车辆！"),!1;this.common.nodeCheckChannel=e.replace(/[^\d]/g,"")},nodeClick:function(e){if(5==e.type){if(!this.ocxModelInitial)return this.$message.warning("请先选择车辆！"),!1;this.common.nodeCheckChannel=e.text.replace(/[^\d]/g,"")}},setScreens:function(e){setTimeout(function(){document.getElementById("realOcx").SetOrResetVideos(Number(e||1))},500)},openSetting:function(){if(!this.common.vehicleId)return this.$message.warning("请选择车辆"),!1;"tabs0"==this.activeTabs&&(this.hiddenOcx=!0),this.dialog.flag=!0,this.dialog.name="setting",this.dialog.size="dialog-middle",this.dialog.title="系统设置",this.dialog.vid=this.common.vehicleId,this.dialog.eid=this.common.enterpriseId,this.dialog.channelCount=this.vehicleVideoData.channelCount},videoParams:function(e){this.dialog.sDialog.flag=!0,this.dialog.sDialog.name=c.a,this.dialog.sDialog.size="dialog-middle",this.dialog.sDialog.title="视频参数",this.dialog.sDialog.showBtns=!0,this.dialog.sDialog.vInfo={vehicleId:this.common.vehicleId,enterpriseId:this.common.enterpriseId},this.dialog.sDialog.isPopover=e.flag,this.dialog.sDialog.channel=e.channel,this.dialog.sDialog.editData=e.editData},getPowers:function(e){var t=this,a={};e.length&&(e.forEach(function(e){t.$service.isArray(e.child)&&0<e.child.length&&e.child.forEach(function(e){if(0==e.child.length){var l=t.$service.urlLastStr(e.url);a[l]=e.power.split(",")}else e.child.forEach(function(e){var l=t.$service.urlLastStr(e.url);a[l]=e.power?e.power.split(","):""})})}),this.checkPowers(a.realtimevideoNew))},checkPowers:function(e){var t=this;e.forEach(function(e){switch(e){case"replay":t.ocxInitPower.replayPower=!0;break;case"picCut":t.ocxInitPower.picCutPower=!0;break;case"ytCtrl":t.ocxInitPower.ytCtrlPower=!0;break;case"MTpower":t.ocxInitPower.MTpowerPower=!0}})},getVideoPortHeight:function(){this.videoPortHeight=window.innerHeight-document.getElementById("videoPort").getBoundingClientRect().top-80,this.videoPortWidth=document.getElementById("videoPort").getBoundingClientRect().width,window.cSharpH=this.videoPortHeight,window.cSharpW=this.videoPortWidth,this.videoPortHeightC=this.videoPortHeight,this.videoPortWidthC=this.videoPortWidth},playBackView:function(e){var t=this;this.isactive=!0,this.replayCurrent=this.common.vehicleId;var a={StartTime:this.$filter.timeStamp(e.StartTime.replace(/T/g," "))/1e3,EndTime:this.$filter.timeStamp(e.EndTime.replace(/T/g," "))/1e3,Channel:e.Channel,MediaType:Number(e.MediaType),StreamType:Number(e.StreamType),StorageType:Number(e.StorageType),PlaybackMode:0,Multiple:0,simCode:this.vehicleVideoData.simCode,DataSource:Number(this.currentSearchParams.DataSource)};this.activeTabs="tabs0",this.currentFile=e,this.currentParams=a,this.replayIndex=a.StartTime;var l=document.getElementById("realOcx");this.stopAllCamera(1),setTimeout(function(){l.SetOperationIndex(window.selectedOcxIndex),l.PlayBack_Utc(a.simCode,a.Channel,a.MediaType,a.StreamType,a.StorageType,a.PlaybackMode,a.Multiple,a.StartTime,a.EndTime,a.DataSource),t.addOcxBeginAskStreamLog({vehicleId:t.common.vehicleId,enterpriseId:t.common.enterpriseId,channel:a.Channel,type:2,transType:t.store.replaySetParams.MediaType})},1e3)},openPlayBackIssue:function(e){this.dialog.name="replaySet",this.dialog.title="回放指令下发",this.dialog.size="dialog-tiny",this.store.replaySetParams.Channel=e.Channel,this.store.replaySetParams.simCode=this.vehicleVideoData.simCode,this.dialog.flag=!0},openPlayBackCtrlIssue:function(e){this.dialog.name="replayCtrl",this.dialog.title="回放指令控制下发",this.dialog.size="dialog-tiny",this.store.replayCtrlParams.Channel=e.Channel,this.store.replayCtrlParams.simCode=this.vehicleVideoData.simCode,this.dialog.flag=!0},playBackIssue:function(){var e=this;this.dialog.flag=!1,this.activeTabs="tabs0";var t=document.getElementById("realOcx");setTimeout(function(){t.SetOperationIndex(window.selectedOcxIndex),t.PlayBack_Utc(e.store.replaySetParams.simCode,e.store.replaySetParams.Channel,e.store.replaySetParams.MediaType,e.store.replaySetParams.StreamType,e.store.replaySetParams.StorageType,e.store.replaySetParams.PlaybackMode,e.store.replaySetParams.Multiple/1e3,e.store.replaySetParams.StartTime/1e3,e.store.replaySetParams.EndTime,e.store.replaySetParams.DataSource)},1e3)},playBackCtrlIssue:function(){var e=this;this.dialog.flag=!1,this.activeTabs="tabs0";var t=document.getElementById("realOcx");setTimeout(function(){t.SetOperationIndex(window.selectedOcxIndex),t.PlaybackControl_Utc(e.store.replayCtrlParams.simCode,e.store.replayCtrlParams.Channel,e.store.replayCtrlParams.PlaybackControl,e.store.replayCtrlParams.Multiple,e.store.replayCtrlParams.DragPlaybackPosition)},1e3)},downLoadFile:function(e){var t=this;2==this.replaySearchParams.DataSource?this.confirmPrompt("是否确定下发下载指令").then(function(){t.store.serverFlag=!0,t.store.downLoadParams.Channel=e.Channel,t.store.downLoadParams.StartTime=e.StartTime.replace(/T/g," "),t.store.downLoadParams.EndTime=e.EndTime.replace(/T/g," "),t.store.downLoadParams.Alarm=e.Alarm,t.store.downLoadParams.MediaType=e.MediaType,t.store.downLoadParams.StreamType=e.StreamType,t.store.downLoadParams.StorageType=e.StorageType,t.store.downLoadParams.fileSource=t.currentSearchParams.DataSource,t.store.currentV=t.common.vehicleId,t.store.currentE=t.common.enterpriseId,t.dialog.name="downLoad",t.dialog.title="下载管理",t.dialog.flag=!0}):(this.dialog.name="downS",this.dialog.title="下载",this.dialog.size="dialog-tiny",this.dialog.flag=!0,this.store.downLoadParams.Channel=e.Channel,this.store.downLoadParams.StartTime=e.StartTime.replace(/T/g," "),this.store.downLoadParams.EndTime=e.EndTime.replace(/T/g," "),this.store.downLoadParams.Alarm=e.Alarm,this.store.downLoadParams.MediaType=e.MediaType,this.store.downLoadParams.StreamType=e.StreamType,this.store.downLoadParams.StorageType=e.StorageType,this.store.downLoadParams.fileSource=this.currentSearchParams.DataSource,this.store.currentV=this.common.vehicleId,this.store.currentE=this.common.enterpriseId)},allReplay:function(){if(!this.vehicleVideoData.simCode)return this.$message.warning("请选择车辆!"),!1;this.hiddenOcx=!0,this.dialog.name="allReplay",this.dialog.title="回放指令下发",this.dialog.size="dialog-tiny",this.store.replayAll.StartTime=this.$filter.timeStamp(this.$filter.format(new Date,"yyyy-MM-dd start")),this.store.replayAll.EndTime=this.$filter.timeStamp(this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss")),this.store.replayAll.simCode=this.vehicleVideoData.simCode,this.store.replayAll.screen=this.screenss,this.store.replayAll.channels=this.vehicleVideoData.channelCount,this.dialog.flag=!0},playBackAllV:function(){var e=this;this.dialog.flag=!1;var t=document.getElementById("realOcx"),a={StartTime:this.store.replayAll.StartTime/1e3,EndTime:this.store.replayAll.EndTime/1e3,MediaType:Number(this.store.replayAll.MediaType),StreamType:Number(this.store.replayAll.StreamType),StorageType:Number(this.store.replayAll.StorageType),PlaybackMode:Number(this.store.replayAll.PlaybackMode),Multiple:Number(this.store.replayAll.Multiple),simCode:this.vehicleVideoData.simCode,DataSource:Number(this.store.replayAll.DataSource)},l=Object(s.a)({},this.vehicleVideoData,this.ocxInitPower,{userLevel:this.$store.getters.user.userLevel});setTimeout(function(){e.store.replayAll.selectChannels.forEach(function(i,s){t.SetOperationIndex(s),e.ocxInit(t,l),t.PlayBack_Utc(a.simCode,i,a.MediaType,a.StreamType,a.StorageType,a.PlaybackMode,a.Multiple,a.StartTime,a.EndTime,a.DataSource)})},1e3)},allReplayStop:function(){for(var e=document.getElementById("realOcx"),t=0;t<this.screenss;t++)e.SetOperationIndex(t),e.StopAll();var a=document.getElementById("realOcx").GetReceiveBytesWithUnit();this.addOcxEndAskStreamLog({vehicleId:this.common.vehicleId,channel:1,type:2,dataUsage:a})},allWindow:function(){document.getElementById("videoPort").className="fullWindow";var e=document.getElementById("videoPort").getBoundingClientRect().width,t=document.getElementById("videoPort").getBoundingClientRect().height;this.videoPortHeightC=t,this.videoPortWidthC=e,document.getElementById("realOcx").ResizeControl(Number(e),Number(t)),window.fullW=e,window.fullH=t,window.clickFull=!0},openDownList:function(){this.dialog.name="downLoad",this.dialog.title="下载管理",this.dialog.size="dialog-middle",this.dialog.flag=!0},openList:function(){var e=this;setTimeout(function(){e.openDownList()},800)},handleSelectionChange:function(e){return 0==e.length?(this.serverRF=!1,!(this.serverReplayList=[])):16<e.length?(this.$message.warning("最多可以勾选16条信息回放！"),this.serverReplayList=[],this.serverRF=!1):(this.serverReplayList=e,void(this.serverRF=!0))},allServerReplay:function(){this.activeTabs="tabs0";var e=this.serverReplayList.length;return e<=4?(this.screenss=4,this.serverReplay(this.serverReplayList),!0):e<=6?(this.screenss=6,this.serverReplay(this.serverReplayList),!0):e<=9?(this.screenss=9,this.serverReplay(this.serverReplayList),!0):10==e?(this.screenss=10,this.serverReplay(this.serverReplayList),!0):e<=16?(this.screenss=16,this.serverReplay(this.serverReplayList),!0):void 0},serverReplay:function(e){var t=this,a=document.getElementById("realOcx"),l=Object(s.a)({},this.vehicleVideoData,this.ocxInitPower,{userLevel:this.$store.getters.user.userLevel});setTimeout(function(){e.forEach(function(e,i){var s={StartTime:t.$filter.timeStamp(e.StartTime.replace("T"," "))/1e3,EndTime:t.$filter.timeStamp(e.EndTime.replace("T"," "))/1e3,Channel:Number(e.Channel),MediaType:Number(e.MediaType),StreamType:Number(e.StreamType),StorageType:Number(e.StorageType),PlaybackMode:0,Multiple:0,simCode:t.vehicleVideoData.simCode,DataSource:2};a.SetOperationIndex(i),t.ocxInit(a,l),a.PlayBack_Utc(s.simCode,s.Channel,s.MediaType,s.StreamType,s.StorageType,s.PlaybackMode,s.Multiple,s.StartTime,s.EndTime,s.DataSource)})},1e3)}}),watch:{ocxModelInitial:function(e){var t=this;e&&setTimeout(function(){t.ocxActiveXInit("realOcx")},1e3)},screenss:function(e){this.setScreens(e),this.common.nodeCheckChannel=-1},isSubtitle:function(e){if(e&&this.isOpen)"real"==this.gpsType&&(-1==this.common.nodeCheckChannel?(this.getSubTitleInfo("real",{vehicleId:this.currentVehicle}),this.openAllTimer=this.showSubTitle("openAll","real")):(this.getSubTitleInfo("real",{vehicleId:this.currentVehicle}),this.mapObj["screen"+window.selectedOcxIndex].timer=this.showSubTitle("single","real")));else if(-1==this.common.nodeCheckChannel){this.openAllTimer&&clearInterval(this.openAllTimer);for(var t=0;t<this.screenss;t++)this.isOpen&&document.getElementById("realOcx").SetOperationIndex(t),this.isOpen&&document.getElementById("realOcx").SetSDLVideoText("",12)}else for(var a=0;a<this.screenss;a++)this.mapObj["screen"+a].timer&&clearInterval(this.mapObj["screen"+a].timer),this.isOpen&&document.getElementById("realOcx").SetOperationIndex(a),this.isOpen&&document.getElementById("realOcx").SetSDLVideoText("",12)},"$store.getters.Directive":function(e){var t=this;e.plateCode==this.common.plateCode&&1==e.sendFlag&&"WCF0x8801"==e.orderType&&setTimeout(function(){t.$store.dispatch("findRealTimeMediaInfo",{orderId:e.id}).then(function(e){e.data.records&&(t.common.mediaData=e.data.records)})},3e4)},"dialog.flag":function(e){e||("tabs0"==this.activeTabs&&(this.hiddenOcx=!1),this.dialog.name="",this.store.serverFlag=!1)},"$store.getters.monitorMenu":function(e){this.getPowers(e)}},created:function(){[{target:"realOcx",event:["OnAsyncRemoteVideoPlaybackEvent(id,json)","OnControlDoubleClickEvent(id,isFullScreen)","OnScreenshotCompletedEvent(id,fileLocation)","OnReloadControlScreenEvent()","OnScreenSelectEvent(id)","OnRealtimeVideoPriorityNotifyEvent(id,priority)","OnMulitiRealtimeVideoOuttimeEvent","OnMulitiEventTrigger(id,eventId)","OnMulitiStopAllRealtimeVideoScreenEvent"],inContext:["eventBus.$emit('videoList',json)","isFullScreen ? document.getElementById('videoPort').className=\"fullWindow\" : window.clickFull ? (document.getElementById('realOcx').ResizeControl(Number(window.fullW),Number(window.fullH))) : (document.getElementById('videoPort').className=\"videoPort\",document.getElementById('realOcx').ResizeControl(Number(window.cSharpW),Number(window.cSharpH)));","eventBus.$emit('picCut', fileLocation);","selectedOcxIndex = 0;","selectedOcxIndex = id;",'setTimeout(function(){alert("视频操作提示:视频服务器资源不足，请求已被终止!")},500);',"eventBus.$emit('longtimeNoAction',\"长时间无操作，倒计时30秒之后主动断开实时视频!\")","",'alert("已关闭所有实时视频!")']}].forEach(function(t){if("string"!=typeof t.event)for(var a=0;a<t.event.length;a++){var l=document.createElement("script");l.id="id"+a,l.setAttribute("for",t.target),l.event=t.event[a],l.textContent=t.inContext[a],e.document.body.appendChild(l)}})},beforeMount:function(){var e=this;this.getAlarmTypeList().then(function(t){for(var a in t.data)e.replaySearchParams.AlarmList.push({label:a,value:t.data[a]})}),window.onbeforeunload=function(){return e.stopAllCamera(),"退出"}},mounted:function(){var e=this,t=arguments;if(this.getVideoPortHeight(),this.getPowers(this.$store.getters.monitorMenu),this.setScreens(this.screenss),window.eventBus||(window.eventBus=new I.a),window.eventBus.$on("picCut",function(e){this.dialog.name="messBox",this.dialog.title="图片信息描述",this.dialog.size="dialog-tiny",this.store.picCut.base64=e,this.store.currentV=this.common.vehicleId,this.store.picCut.channel=this.mapObj["screen"+window.selectedOcxIndex].channel,this.hiddenOcx=!0,this.dialog.flag=!0}.bind(this)),window.eventBus.$on("videoList",function(t){if(3e4<(new Date).getTime()-e.searchStartTime)e.searchFlag=!1;else{var a=JSON.parse(t);window.localStorage.setItem("testList",t),a.FileList.forEach(function(t){t.plateCode=e.searchPlateCode}),e.rList=a.FileList,clearTimeout(e.searchTimer),e.searchFlag=!1}}),window.eventBus.$on("longtimeNoAction",function(t){e.$notify({title:"实时播放提示",type:"warning",message:t,duration:3e4})}),document.onkeydown=function(e){27==(e||window.event||t.callee.caller.arguments[0]).keyCode&&(window.clickFull=!1,document.getElementById("videoPort").className="videoPort",setTimeout(function(){document.getElementById("realOcx").ResizeControl(Number(window.cSharpW),Number(window.cSharpH))},500))},this.$route.query.vid){var a={data:[{id:this.$route.query.vid,enterpriseId:this.$route.query.eid,plateCode:this.$route.query.pcode}]};this.singleCar(a)}},beforeDestroy:function(){var t=this;["","moz","webkit","ms"].forEach(function(e){document.removeEventListener(e+"fullscreenchange",function(){t.common.isFull=t.isFullscreen()})}),window.eventBus=null;for(var a=0;a<9;a++)e.document.body.removeChild(document.getElementById("id"+a));document.onkeydown=null,window.onbeforeunload=null,this.stopAllCamera()}}}).call(this,a("c8ba"))},"232d":function(e,t,a){},"27f7":function(e,t,a){"use strict";var l={inject:["store"],props:{options:{}},data:function(){return{PlaybackModeList:[{value:"0",label:"正常回放"},{value:"1",label:"快进回放"},{value:"2",label:"关键帧快退回放"},{value:"3",label:"关键帧播放"},{value:"4",label:"单帧上传"}],DataSourceList:[{value:"1",label:"终端设备"},{value:"2",label:"存储服务器"}],MultipleList:[{value:"0",label:"无效"},{value:"1",label:"1倍"},{value:"2",label:"2倍"},{value:"3",label:"4倍"},{value:"4",label:"8倍"},{value:"5",label:"16倍"}],MediaTypeList:[{label:"音视频",value:"0"},{label:"音频",value:"1"},{label:"视频",value:"2"},{label:"视频或音视频",value:"3"}],StreamTypeList:[{label:"所有码流",value:"0"},{label:"主码流",value:"1"},{label:"子码流",value:"2"}],StorageTypeList:[{label:"所有存储器",value:"0"},{label:"主存储器",value:"1"},{label:"灾备存储器",value:"2"}],channelsList:[]}},methods:{confirm:function(){this.$emit("playBackAll")}},beforeMount:function(){this.channelsList=[];for(var e=0;e<this.store.replayAll.channels;e++)this.channelsList.push({label:"CH"+(e+1),value:e+1})}},i=a("2877"),s=Object(i.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{staticClass:"replaySet",attrs:{"label-width":"150px"}},[a("el-form-item",{attrs:{label:"开始时间"}},[a("el-date-picker",{staticStyle:{float:"left",width:"200px"},attrs:{editable:!1,clearable:!1,"value-format":"timestamp",type:"datetime",placeholder:"开始时间"},model:{value:e.store.replayAll.StartTime,callback:function(t){e.$set(e.store.replayAll,"StartTime",t)},expression:"store.replayAll.StartTime"}})],1),a("el-form-item",{attrs:{label:"结束时间"}},[a("el-date-picker",{staticStyle:{float:"left",width:"200px"},attrs:{editable:!1,clearable:!1,"value-format":"timestamp",type:"datetime",placeholder:"结束时间"},model:{value:e.store.replayAll.EndTime,callback:function(t){e.$set(e.store.replayAll,"EndTime",t)},expression:"store.replayAll.EndTime"}})],1),a("el-form-item",{attrs:{label:"回放方式"}},[a("el-select",{staticStyle:{width:"200px",float:"left"},model:{value:e.store.replayAll.PlaybackMode,callback:function(t){e.$set(e.store.replayAll,"PlaybackMode",t)},expression:"store.replayAll.PlaybackMode"}},e._l(e.PlaybackModeList,function(e){return a("el-option",{key:e._id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0!=e.store.replayAll.PlaybackMode,expression:"store.replayAll.PlaybackMode != 0"}],attrs:{label:"播放速度"}},[a("el-select",{staticStyle:{width:"200px",float:"left"},model:{value:e.store.replayAll.Multiple,callback:function(t){e.$set(e.store.replayAll,"Multiple",t)},expression:"store.replayAll.Multiple"}},e._l(e.MultipleList,function(e){return a("el-option",{key:e._id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"数据来源"}},[a("el-select",{staticStyle:{width:"200px",float:"left"},model:{value:e.store.replayAll.DataSource,callback:function(t){e.$set(e.store.replayAll,"DataSource",t)},expression:"store.replayAll.DataSource"}},e._l(e.DataSourceList,function(e){return a("el-option",{key:e._id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"音视频资源类型"}},[a("el-select",{staticStyle:{float:"left",width:"200px"},model:{value:e.store.replayAll.MediaType,callback:function(t){e.$set(e.store.replayAll,"MediaType",t)},expression:"store.replayAll.MediaType"}},e._l(e.MediaTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"码流类型"}},[a("el-select",{staticStyle:{float:"left",width:"200px"},model:{value:e.store.replayAll.StreamType,callback:function(t){e.$set(e.store.replayAll,"StreamType",t)},expression:"store.replayAll.StreamType"}},e._l(e.StreamTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"存储器类型"}},[a("el-select",{staticStyle:{float:"left",width:"200px"},model:{value:e.store.replayAll.StorageType,callback:function(t){e.$set(e.store.replayAll,"StorageType",t)},expression:"store.replayAll.StorageType"}},e._l(e.StorageTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-checkbox-group",{staticStyle:{"margin-bottom":"10px"},attrs:{min:1,max:e.store.replayAll.screen},model:{value:e.store.replayAll.selectChannels,callback:function(t){e.$set(e.store.replayAll,"selectChannels",t)},expression:"store.replayAll.selectChannels"}},e._l(e.channelsList,function(t){return a("el-checkbox",{key:t._id,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.confirm(t)}}},[e._v(e._s(e.$t("action.confirm")))]),a("el-button",{on:{click:function(t){e.options.flag=!1}}},[e._v(e._s(e.$t("action.cancel")))])],1)],1)},[],!1,null,null,null);t.a=s.exports},"29ff":function(e,t,a){"use strict";a("c5f6"),a("ac6a");var l={props:{options:{},showBtns:{},vInfo:{}},data:function(){return{audioShow:!0,formVS:{RTmodelOptions:[{label:"0:CBR(固定码率)",value:0},{label:"1:VBR(可变码率)",value:1},{label:"2:ABR(平均码率)",value:2},{label:"自定义",value:3}],RTmodel:0,resolutionOptions:[{label:"QCIF",value:0},{label:"CIF",value:1},{label:"WCIF",value:2},{label:"D1",value:3},{label:"WD1",value:4},{label:"720P",value:5},{label:"1080P",value:6},{label:"自定义",value:7}],resolution:0,frameOptions:[{label:1,value:1},{label:2,value:2},{label:3,value:3},{label:4,value:4},{label:5,value:5},{label:6,value:6},{label:7,value:7},{label:8,value:8},{label:9,value:9},{label:10,value:10},{label:11,value:11},{label:12,value:12},{label:13,value:13},{label:14,value:14},{label:15,value:15},{label:16,value:16},{label:17,value:17},{label:18,value:18},{label:19,value:19},{label:20,value:20},{label:21,value:21},{label:22,value:22},{label:23,value:23},{label:24,value:24},{label:25,value:25},{label:26,value:26},{label:27,value:27},{label:28,value:28},{label:29,value:29},{label:30,value:30},{label:31,value:31},{label:32,value:32},{label:33,value:33},{label:34,value:34},{label:35,value:35},{label:36,value:36},{label:37,value:37},{label:38,value:38},{label:39,value:39},{label:40,value:40},{label:41,value:41},{label:42,value:42},{label:43,value:43},{label:44,value:44},{label:45,value:45},{label:46,value:46},{label:47,value:47},{label:48,value:48},{label:49,value:49},{label:50,value:50},{label:51,value:51},{label:52,value:52},{label:53,value:53},{label:54,value:54},{label:55,value:55},{label:56,value:56},{label:57,value:57},{label:58,value:58},{label:59,value:59},{label:60,value:60},{label:61,value:61},{label:62,value:62},{label:63,value:63},{label:64,value:64},{label:65,value:65},{label:66,value:66},{label:67,value:67},{label:68,value:68},{label:69,value:69},{label:70,value:70},{label:71,value:71},{label:72,value:72},{label:73,value:73},{label:74,value:74},{label:75,value:75},{label:76,value:76},{label:77,value:77},{label:78,value:78},{label:79,value:79},{label:80,value:80},{label:81,value:81},{label:82,value:82},{label:83,value:83},{label:84,value:84},{label:85,value:85},{label:86,value:86},{label:87,value:87},{label:88,value:88},{label:89,value:89},{label:90,value:90},{label:91,value:91},{label:92,value:92},{label:93,value:93},{label:94,value:94},{label:95,value:95},{label:96,value:96},{label:97,value:97},{label:98,value:98},{label:99,value:99},{label:100,value:100},{label:101,value:101},{label:102,value:102},{label:103,value:103},{label:104,value:104},{label:105,value:105},{label:106,value:106},{label:107,value:107},{label:108,value:108},{label:109,value:109},{label:110,value:110},{label:111,value:111},{label:112,value:112},{label:113,value:113},{label:114,value:114},{label:115,value:115},{label:116,value:116},{label:117,value:117},{label:118,value:118},{label:119,value:119},{label:120,value:120}],frame:5,countF:!0,countNum:"",count1F:!0,count1Num:"",count2Num:"",count4Num:"",checkList:[],ckList:[{label:"日期和时间",value:1},{label:"车牌号码",value:2},{label:"逻辑通道号",value:4},{label:"经纬度",value:8},{label:"行驶记录速度",value:16},{label:"卫星定位速度",value:32},{label:"连续驾驶时间",value:64}]},formVC:{RTmodelOptions:[{label:"0:CBR(固定码率)",value:0},{label:"1:VBR(可变码率)",value:1},{label:"2:ABR(平均码率)",value:2},{label:"自定义",value:3}],RTmodel:0,resolutionOptions:[{label:"QCIF",value:0},{label:"CIF",value:1},{label:"WCIF",value:2},{label:"D1",value:3},{label:"WD1",value:4},{label:"720P",value:5},{label:"1080P",value:6},{label:"自定义",value:7}],resolution:0,frameOptions:[{label:1,value:1},{label:2,value:2},{label:3,value:3},{label:4,value:4},{label:5,value:5},{label:6,value:6},{label:7,value:7},{label:8,value:8},{label:9,value:9},{label:10,value:10},{label:11,value:11},{label:12,value:12},{label:13,value:13},{label:14,value:14},{label:15,value:15},{label:16,value:16},{label:17,value:17},{label:18,value:18},{label:19,value:19},{label:20,value:20},{label:21,value:21},{label:22,value:22},{label:23,value:23},{label:24,value:24},{label:25,value:25},{label:26,value:26},{label:27,value:27},{label:28,value:28},{label:29,value:29},{label:30,value:30},{label:31,value:31},{label:32,value:32},{label:33,value:33},{label:34,value:34},{label:35,value:35},{label:36,value:36},{label:37,value:37},{label:38,value:38},{label:39,value:39},{label:40,value:40},{label:41,value:41},{label:42,value:42},{label:43,value:43},{label:44,value:44},{label:45,value:45},{label:46,value:46},{label:47,value:47},{label:48,value:48},{label:49,value:49},{label:50,value:50},{label:51,value:51},{label:52,value:52},{label:53,value:53},{label:54,value:54},{label:55,value:55},{label:56,value:56},{label:57,value:57},{label:58,value:58},{label:59,value:59},{label:60,value:60},{label:61,value:61},{label:62,value:62},{label:63,value:63},{label:64,value:64},{label:65,value:65},{label:66,value:66},{label:67,value:67},{label:68,value:68},{label:69,value:69},{label:70,value:70},{label:71,value:71},{label:72,value:72},{label:73,value:73},{label:74,value:74},{label:75,value:75},{label:76,value:76},{label:77,value:77},{label:78,value:78},{label:79,value:79},{label:80,value:80},{label:81,value:81},{label:82,value:82},{label:83,value:83},{label:84,value:84},{label:85,value:85},{label:86,value:86},{label:87,value:87},{label:88,value:88},{label:89,value:89},{label:90,value:90},{label:91,value:91},{label:92,value:92},{label:93,value:93},{label:94,value:94},{label:95,value:95},{label:96,value:96},{label:97,value:97},{label:98,value:98},{label:99,value:99},{label:100,value:100},{label:101,value:101},{label:102,value:102},{label:103,value:103},{label:104,value:104},{label:105,value:105},{label:106,value:106},{label:107,value:107},{label:108,value:108},{label:109,value:109},{label:110,value:110},{label:111,value:111},{label:112,value:112},{label:113,value:113},{label:114,value:114},{label:115,value:115},{label:116,value:116},{label:117,value:117},{label:118,value:118},{label:119,value:119},{label:120,value:120}],frame:5,countF:!0,countNum:"",count1F:!0,count1Num:"",count2Num:"",count4Num:""},audio:!1}},methods:{RTchange:function(e){this.formVS.countF=3!=e},RRchange:function(e){this.formVS.count1F=7!=e},RTchange1:function(e){this.formVC.countF=3!=e},RRchange1:function(e){this.formVC.count1F=7!=e},saveVideoParams:function(){var e=this,t=0;0!=this.formVS.checkList.length&&this.formVS.checkList.forEach(function(e){t+=e});var a={vehicleId:this.vInfo.vehicleId,enterpriseId:this.vInfo.enterpriseId,RTSCodeType:this.formVS.countF?this.formVS.RTmodel:this.formVS.countNum,RTSResolution:this.formVS.count1F?this.formVS.resolution:this.formVS.count1Num,RTSKeyframeInterval:this.formVS.count2Num,RTSFramerate:this.formVS.frame,RTSCoderate:Number(this.formVS.count4Num),SSCodeType:this.formVC.countF?this.formVC.RTmodel:this.formVC.countNum,SSResolution:this.formVC.count1F?this.formVC.resolution:this.formVC.count1Num,SSKeyframeInterval:this.formVC.count2Num,SSFramerate:this.formVC.frame,SSCoderate:Number(this.formVC.count4Num),OSD:t,OpenAudioOut:this.audio?1:0,checkedlist:this.formVS.checkList};null!=this.options.isPopover&&this.options.isPopover?(this.$store.dispatch("saveVideoPSet",{params:a,channel:this.options.channel}),this.closeDialog()):this.$http({url:"/sendVideoOrder/sendVideoParameterSite",data:JSON.stringify(a)}).then(function(t){t.flag&&(e.closeDialog(),e.$message.success("指令发送成功"))})},closeDialog:function(){this.options.flag=!1},commonFun:function(e){100<=e.RTSCodeType?(this.formVS.RTmodel=3,this.formVS.countF=!1,this.formVS.countNum=e.RTSCodeType):this.formVS.RTmodel=e.RTSCodeType,100<=e.RTSResolution?(this.formVS.resolution=7,this.formVS.count1F=!1,this.formVS.count1Num=e.RTSResolution):this.formVS.resolution=e.RTSResolution,this.formVS.count2Num=e.RTSKeyframeInterval,this.formVS.frame=e.RTSFramerate+"",this.formVS.count4Num=e.RTSCoderate,100<=e.SSCodeType?(this.formVC.RTmodel=3,this.formVC.countF=!1,this.formVC.countNum=e.SSCodeType):this.formVC.RTmodel=e.SSCodeType,100<=e.SSResolution?(this.formVC.resolution=7,this.formVC.count1F=!1,this.formVC.count1Num=e.SSResolution):this.formVC.resolution=e.SSResolution,this.formVC.count2Num=e.SSKeyframeInterval,this.formVC.frame=e.SSFramerate+"",this.formVC.count4Num=e.SSCoderate,this.formVS.checkList=e.checkedlist,this.audio=0!=e.OpenAudioOut}},watch:{"options.flag":function(e){e||(this.options.isPopover=!1,this.options.name="")}},mounted:function(){var e=this;if(this.options.isPopover){if(this.$store.getters.videoPSet[this.options.channel]){var t=this.$store.getters.videoPSet[this.options.channel];this.commonFun(t)}this.audioShow=!1,this.options.editData&&this.commonFun(this.options.editData)}else this.$store.dispatch("getVideoMainParams",{vehicleId:this.vInfo.vehicleId,type:4}).then(function(t){t.flag&&e.commonFun(JSON.parse(t.data))})}},i=(a("9bb5"),a("2877")),s=Object(i.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"videoParamsSet"},[a("fieldset",{staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("实时流参数配置")]),a("el-form",{attrs:{"label-width":"150px"}},[a("el-form-item",{attrs:{label:"实时流编码模式"}},[a("el-select",{staticStyle:{width:"195px"},attrs:{placeholder:"请选择"},on:{change:e.RTchange},model:{value:e.formVS.RTmodel,callback:function(t){e.$set(e.formVS,"RTmodel",t)},expression:"formVS.RTmodel"}},e._l(e.formVS.RTmodelOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),a("el-input-number",{attrs:{size:"small",disabled:e.formVS.countF,min:100,max:127},model:{value:e.formVS.countNum,callback:function(t){e.$set(e.formVS,"countNum",t)},expression:"formVS.countNum"}})],1),a("el-form-item",{attrs:{label:"实时流分辨率"}},[a("el-select",{staticStyle:{width:"195px"},attrs:{size:"small",placeholder:"请选择"},on:{change:e.RRchange},model:{value:e.formVS.resolution,callback:function(t){e.$set(e.formVS,"resolution",t)},expression:"formVS.resolution"}},e._l(e.formVS.resolutionOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),a("el-input-number",{attrs:{size:"small",disabled:e.formVS.count1F,min:100,max:127},model:{value:e.formVS.count1Num,callback:function(t){e.$set(e.formVS,"count1Num",t)},expression:"formVS.count1Num"}})],1),a("el-form-item",{attrs:{label:"实时流关键帧间隔"}},[a("el-input-number",{staticStyle:{width:"195px"},attrs:{size:"small",min:1,max:1e3},model:{value:e.formVS.count2Num,callback:function(t){e.$set(e.formVS,"count2Num",t)},expression:"formVS.count2Num"}})],1),a("el-form-item",{attrs:{label:"实时流目标帧率"}},[a("el-select",{staticStyle:{width:"195px"},attrs:{size:"small",placeholder:"请选择"},model:{value:e.formVS.frame,callback:function(t){e.$set(e.formVS,"frame",t)},expression:"formVS.frame"}},e._l(e.formVS.frameOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"实时流目标码率"}},[a("el-input",{staticStyle:{width:"195px"},attrs:{size:"small"},model:{value:e.formVS.count4Num,callback:function(t){e.$set(e.formVS,"count4Num",t)},expression:"formVS.count4Num"}}),e._v("(kbps)\n            ")],1)],1)],1),a("fieldset",{staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("储存流参数配置")]),a("el-form",{attrs:{"label-width":"150px"}},[a("el-form-item",{attrs:{label:"储存流编码模式"}},[a("el-select",{staticStyle:{width:"195px"},attrs:{placeholder:"请选择",size:"small"},on:{change:e.RTchange1},model:{value:e.formVC.RTmodel,callback:function(t){e.$set(e.formVC,"RTmodel",t)},expression:"formVC.RTmodel"}},e._l(e.formVC.RTmodelOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),a("el-input-number",{attrs:{size:"small",disabled:e.formVC.countF,min:100,max:127},model:{value:e.formVC.countNum,callback:function(t){e.$set(e.formVC,"countNum",t)},expression:"formVC.countNum"}})],1),a("el-form-item",{attrs:{label:"储存流分辨率"}},[a("el-select",{staticStyle:{width:"195px"},attrs:{size:"small",placeholder:"请选择"},on:{change:e.RRchange1},model:{value:e.formVC.resolution,callback:function(t){e.$set(e.formVC,"resolution",t)},expression:"formVC.resolution"}},e._l(e.formVC.resolutionOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),a("el-input-number",{attrs:{size:"small",disabled:e.formVC.count1F,min:100,max:127},model:{value:e.formVC.count1Num,callback:function(t){e.$set(e.formVC,"count1Num",t)},expression:"formVC.count1Num"}})],1),a("el-form-item",{attrs:{label:"储存流关键帧间隔"}},[a("el-input-number",{staticStyle:{width:"195px"},attrs:{size:"small",min:1,max:1e3},model:{value:e.formVC.count2Num,callback:function(t){e.$set(e.formVC,"count2Num",t)},expression:"formVC.count2Num"}})],1),a("el-form-item",{attrs:{label:"储存流目标帧率"}},[a("el-select",{staticStyle:{width:"195px"},attrs:{size:"small",placeholder:"请选择"},model:{value:e.formVC.frame,callback:function(t){e.$set(e.formVC,"frame",t)},expression:"formVC.frame"}},e._l(e.formVC.frameOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"储存流目标码率"}},[a("el-input",{staticStyle:{width:"195px"},attrs:{size:"small"},model:{value:e.formVC.count4Num,callback:function(t){e.$set(e.formVC,"count4Num",t)},expression:"formVC.count4Num"}}),e._v("(kbps)\n            ")],1)],1)],1),a("fieldset",{staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("OSD字幕叠加设置")]),a("el-checkbox-group",{model:{value:e.formVS.checkList,callback:function(t){e.$set(e.formVS,"checkList",t)},expression:"formVS.checkList"}},e._l(e.formVS.ckList,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.value,value:t.value}},[e._v(e._s(t.label))])}),1)],1),a("fieldset",{directives:[{name:"show",rawName:"v-show",value:e.audioShow,expression:"audioShow"}],staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("音频输出")]),a("el-checkbox",{model:{value:e.audio,callback:function(t){e.audio=t},expression:"audio"}},[e._v("音频输出")])],1),e.showBtns?a("el-row",[a("el-col",{staticClass:"footer",attrs:{span:24}},[a("el-button",{nativeOn:{click:function(t){return e.saveVideoParams(t)}}},[e._v("保存")]),a("el-button",{nativeOn:{click:function(t){return e.closeDialog(t)}}},[e._v("关闭")])],1)],1):e._e()],1)},[],!1,null,null,null);t.a=s.exports},"2a18":function(e,t,a){"use strict";a("c5f6");var l=a("8369"),i={props:{vehicleId:{}},components:{},mixins:[l.a],data:function(){return{timer:null}},methods:{loadTable:function(e,t){var a=this,l={vehicleIds:t,mapType:this.$store.getters.mapType};this.tableLoading("/videoController/getVehicleVideoLastLocation",l,e),setTimeout(function(){a.$store.dispatch("setGpsInfo",a.table.data[0])},500)}},watch:{vehicleId:function(e){var t=this;clearInterval(this.timer),this.loadTable(!0,e),this.timer=setInterval(function(){t.loadTable(!0,e)},5e3)}},beforeDestroy:function(){clearInterval(this.timer),this.$store.dispatch("setGpsInfo",[])}},s=a("2877"),n=Object(s.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("cv-grid",{staticStyle:{"margin-top":"10px"},attrs:{data:[]}},[a("el-table-column",{attrs:{label:e.$t("common.vehicle.plateCode"),prop:"plateCode"}}),a("el-table-column",{attrs:{label:e.$t("common.mtindex.gpstime"),prop:"gpsTime",formatter:e.tableFilterFormat}}),a("el-table-column",{attrs:{label:e.$t("common.vehicle.location"),prop:"locationDesc"}}),a("el-table-column",{attrs:{label:e.$t("reportForm.overSpeed.speed1"),prop:"dspeed"}}),a("el-table-column",{attrs:{label:e.$t("common.alarm.alarm"),prop:"alarmData"}}),a("el-table-column",{attrs:{label:e.$t("common.order.orderContent"),prop:"accStatus",formatter:e.tableFilterAcc}}),a("el-table-column",{attrs:{label:e.$t("reportForm.vehicleOpt.meter"),prop:"mileage"}}),a("el-table-column",{attrs:{label:e.$t("common.vehicle.otherMess"),prop:""}})],1)},[],!1,null,null,null).exports,r={props:{vehicleId:{}},components:{},mixins:[l.a],data:function(){return{table:{options:{current:1,size:10,total:0,flag:!1},table:[],loading:!1}}},watch:{"$store.getters.alarm1077":function(e){"A"==e.msgType&&this.vehicleId==e.vehicleId&&this.table.table.length<=50&&(50==this.table.table.length&&this.table.table.shift(),this.table.table.push(e))}},beforeDestroy:function(){this.$store.dispatch("setAlarm",[])}},o=Object(s.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("el-button",{staticStyle:{margin:"10px 0"},attrs:{size:"small"},nativeOn:{click:function(t){return e.clear(t)}}},[e._v("清空")]),a("cv-grid",{attrs:{data:[]}},[a("el-table-column",{attrs:{label:e.$t("role.operation"),prop:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"}},[e._v("操作")])]}}])}),a("el-table-column",{attrs:{label:e.$t("common.alarm.alarmTypeName"),prop:"alarmTypeName"}}),a("el-table-column",{attrs:{label:e.$t("common.alarm.messageText"),prop:"messageText"}}),a("el-table-column",{attrs:{label:e.$t("common.alarm.time"),prop:"time"}})],1)],1)},[],!1,null,null,null).exports,c={props:{vehicleId:{},mediaData:{}},components:{},mixins:[l.a],data:function(){return{timer:null}},methods:{clear:function(){this.table.data=[]},loadTable:function(){var e={vehicleId:this.vehicleId};this.tableLoading("/videoController/findRealTimeMediaInfo",e,!0)},mediaType:function(e){return this.$filter.mediaType(e.mediaType)}},watch:{mediaData:function(e){this.$refs.mediaT.options.data=e}},beforeDestroy:function(){clearInterval(this.timer)}},u=(a("f29e"),Object(s.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mediaTable"},[a("el-button",{staticStyle:{margin:"10px 0"},attrs:{size:"small"},nativeOn:{click:function(t){return e.clear(t)}}},[e._v("清空")]),a("cv-grid",{ref:"mediaT",attrs:{data:[]}},[a("el-table-column",{attrs:{label:e.$t("action.operation"),prop:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"download",attrs:{download:t.row.mediaPath,href:t.row.mediaPath}},[e._v("下载")])]}}])}),a("el-table-column",{attrs:{label:e.$t("common.vehicle.terminal"),prop:"simCode"}}),a("el-table-column",{attrs:{label:e.$t("common.vehicle.fileType"),prop:"mediaType",formatter:e.mediaType}}),a("el-table-column",{attrs:{label:e.$t("mediaSingleUpload.channelId"),prop:"channel"}}),a("el-table-column",{attrs:{label:e.$t("common.vehicle.receive"),prop:"upTimeEndStr"}}),a("el-table-column",{attrs:{label:e.$t("common.vehicle.fileTime"),prop:"upTimeEndStr"}}),a("el-table-column",{attrs:{label:e.$t("common.order.orderContent"),prop:"status"}}),a("el-table-column",{attrs:{label:e.$t("common.alarm.alarmTypeName"),prop:""}}),a("el-table-column",{attrs:{label:e.$t("common.vehicle.fileLoc"),prop:"fileLocation"}}),a("el-table-column",{attrs:{label:e.$t("common.vehicle.filePath"),prop:"mediaDiskPath"}})],1)],1)},[],!1,null,null,null).exports),m={mixins:[l.a]},d={props:{data:{}},components:{gpstable:n,alarmtable:o,mediatable:u,systemtable:Object(s.a)(m,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("el-button",{staticStyle:{margin:"10px 0"},attrs:{size:"small"}},[e._v("清空")]),a("cv-grid",{attrs:{data:[]}},[a("el-table-column",{attrs:{label:e.$t("common.vehicle.terminal"),prop:""}}),a("el-table-column",{attrs:{label:e.$t("fenceManage.time"),prop:""}}),a("el-table-column",{attrs:{label:e.$t("mM.menuType"),prop:""}}),a("el-table-column",{attrs:{label:e.$t("common.order.orderContent"),prop:""}}),a("el-table-column",{attrs:{label:e.$t("common.vehicle.otherMess"),prop:""}})],1)],1)},[],!1,null,null,null).exports},mixins:[""],data:function(){return{tables:{activeName:"tabs0"}}}},p=(a("062de"),{props:{vehicleInfos:{}},data:function(){return{basicInfo:{},content:{activeName:"tabs0"}}},components:{bottomTables:Object(s.a)(d,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("cv-tabs",{staticClass:"tabClass realtimevideoTable",attrs:{titles:["GPS监控","报警信息","媒体文件","系统事件"],"force-render":!1},model:{value:e.tables.activeName,callback:function(t){e.$set(e.tables,"activeName",t)},expression:"tables.activeName"}},[a("gpstable",{attrs:{vehicleId:e.data.vehicleId,mediaData:e.data.mediaData}}),a("alarmtable",{attrs:{vehicleId:e.data.vehicleId,mediaData:e.data.mediaData}}),a("mediatable",{attrs:{vehicleId:e.data.vehicleId,mediaData:e.data.mediaData}}),a("systemtable",{attrs:{vehicleId:e.data.vehicleId,mediaData:e.data.mediaData}})],1)},[],!1,null,null,null).exports},watch:{"$store.getters.gpsInfo":function(e){if(e){this.basicInfo=e,this.$refs.map.mapMethods&&this.$refs.map.mapMethods.clearOverlays();var t=this.$refs.map.mapMethods.point({latitude:e.mapLatitude,longitude:e.mapLongitude}),a=this.$refs.map.mapMethods.mapAddpoint({longitude:Number(e.mapLongitude),latitude:Number(e.mapLatitude)},this.$filter.isOnline(e,!1,this.$store.getters.mapName),{width:32,height:32});this.$refs.map.mapMethods.addOverlay(a),this.$refs.map.mapMethods.moveToCenter(t,17)}else this.basicInfo={plateColor:""}}}}),h=(a("7492"),Object(s.a)(p,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vehicleInfo-video"},[a("cv-tabs",{attrs:{top:50,"force-render":!1,titles:["车辆信息","位置信息"]},model:{value:e.content.activeName,callback:function(t){e.$set(e.content,"activeName",t)},expression:"content.activeName"}},[a("div",[a("div",{staticClass:"status"},[a("h3",[e._v("状态")]),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[e._v("服务器名称:"+e._s("/"))]),a("el-col",{attrs:{span:16}},[e._v("终端ID:"+e._s(e._f("isValue")(e.basicInfo.terminalId)))])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[e._v("所属公司:"+e._s(e._f("isValue")(e.basicInfo.enterpriseName)))]),a("el-col",{attrs:{span:16}},[e._v("车队:"+e._s(e._f("isValue")(e.basicInfo.fleetName)))])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[e._v("状态:"+e._s("/"))])],1),a("div",{staticClass:"plateCode"},[a("div",{staticClass:"pColor",style:{borderColor:this.$filter.plateCodeColor1(e.basicInfo.plateColor)}},[a("div",{staticClass:"inColor",style:{backgroundColor:this.$filter.plateCodeColor1(e.basicInfo.plateColor),color:4==e.basicInfo.plateColor?"black":"#fff"}},[e._v("\r\n                            "+e._s(e.basicInfo.plateCode||"--")+"\r\n                        ")])])])],1),a("div",{staticClass:"basicInfo"},[a("h3",[e._v("基本信息")]),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[e._v("上报时间:"+e._s(e._f("isValue")(e._f("format")(e.basicInfo.gpsTime,"yyyy-MM-dd HH:mm:ss"))))]),a("el-col",{attrs:{span:8}},[e._v("速度:"),a("span",{style:{color:1==e.basicInfo.locateStatus?"#000":"red"}},[e._v(e._s(e._f("isValue")("0.0"==e.basicInfo.dspeed?"0.0"==e.basicInfo.gpsSpeed?"":e.basicInfo.gpsSpeed:e.basicInfo.dspeed,"km/h")))])]),a("el-col",{attrs:{span:8}},[e._v("总里程:"+e._s(e._f("isValue")(e.basicInfo.mileage,"km")))])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[e._v("方向:"+e._s(e._f("isValue")(e._f("direction")(e.basicInfo.directionText))))]),a("el-col",{attrs:{span:8}},[e._v("海拔:"+e._s(e._f("isValue")(e.basicInfo.height,"m")))]),a("el-col",{attrs:{span:8}},[e._v("当前报警:"+e._s(e._f("isValue")(e.basicInfo.alarmCount)))])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[e._v("经度:"+e._s(e._f("isValue")(e._f("toFixed")(e.basicInfo.mapLongitude,6))))]),a("el-col",{attrs:{span:8}},[e._v("纬度:"+e._s(e._f("isValue")(e._f("toFixed")(e.basicInfo.mapLatitude,6))))]),a("el-col",{attrs:{span:8}},[e._v("报警信息:"+e._s(e._f("isValue")(e.basicInfo.alarmShortInfo)))])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[e._v("地理位置:"+e._s(e._f("isValue")(e.basicInfo.locationDesc)))])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[e._v("ACC状态:"+e._s(e._f("isValue")(e._f("accStatus")(e.basicInfo.accStatus))))])],1)],1),a("div",{staticClass:"operation"},[a("h3",[e._v("操作")]),a("el-button-group",{staticStyle:{"margin-top":"5px"}},[a("el-button",{attrs:{size:"small"}},[e._v("预览所有")]),a("el-button",{directives:[{name:"instruction",rawName:"v-instruction",value:{title:"文本下发",id:this.vehicleInfos.vehicleId?this.vehicleInfos.vehicleId:"",enterpriseId:this.vehicleInfos.enterpriseId?this.vehicleInfos.enterpriseId:"",size:"dialog-middle",name:"textIssue",params:{vehicleId:this.vehicleInfos.vehicleId?this.vehicleInfos.vehicleId:"",enterpriseId:this.vehicleInfos.enterpriseId?this.vehicleInfos.enterpriseId:""}},expression:"{\r\n                            title: '文本下发',\r\n                            id: this.vehicleInfos.vehicleId?this.vehicleInfos.vehicleId:'',\r\n                            enterpriseId: this.vehicleInfos.enterpriseId?this.vehicleInfos.enterpriseId:'',\r\n                            size: 'dialog-middle',\r\n                            name: 'textIssue', \r\n                            params:{vehicleId:this.vehicleInfos.vehicleId?this.vehicleInfos.vehicleId:'',enterpriseId:this.vehicleInfos.enterpriseId?this.vehicleInfos.enterpriseId:''}}"}],attrs:{size:"small"}},[e._v("文本下发")]),a("el-button",{attrs:{size:"small"}},[e._v("电话回拨")]),a("el-button",{directives:[{name:"instruction",rawName:"v-instruction",value:{title:"拍照",id:this.vehicleInfos.vehicleId?this.vehicleInfos.vehicleId:"",enterpriseId:this.vehicleInfos.enterpriseId?this.vehicleInfos.enterpriseId:"",size:"dialog-middle",name:"photo",params:{vehicleId:this.vehicleInfos.vehicleId?this.vehicleInfos.vehicleId:"",enterpriseId:this.vehicleInfos.enterpriseId?this.vehicleInfos.enterpriseId:""}},expression:"{\r\n                            title: '拍照',\r\n                            id: this.vehicleInfos.vehicleId?this.vehicleInfos.vehicleId:'',\r\n                            enterpriseId: this.vehicleInfos.enterpriseId?this.vehicleInfos.enterpriseId:'',\r\n                            size: 'dialog-middle',\r\n                            name: 'photo', \r\n                            params:{vehicleId:this.vehicleInfos.vehicleId?this.vehicleInfos.vehicleId:'',enterpriseId:this.vehicleInfos.enterpriseId?this.vehicleInfos.enterpriseId:''}}"}],attrs:{size:"small"}},[e._v("拍照")])],1)],1)]),a("div",[a(e.$store.getters.mapName,{ref:"map",tag:"component",staticStyle:{height:"360px"}})],1)]),"tabs0"==e.content.activeName?a("bottom-tables",{attrs:{data:e.vehicleInfos}}):e._e()],1)},[],!1,null,null,null));t.a=h.exports},"2c0cf":function(e,t,a){},"386b":function(e,t,a){function l(e,t,a,l){var i=String(n(e)),s="<"+t;return""!==a&&(s+=" "+a+'="'+String(l).replace(r,"&quot;")+'"'),s+">"+i+"</"+t+">"}var i=a("5ca1"),s=a("79e5"),n=a("be13"),r=/"/g;e.exports=function(e,t){var a={};a[e]=t(l),i(i.P+i.F*s(function(){var t=""[e]('"');return t!==t.toLowerCase()||3<t.split('"').length}),"String",a)}},3937:function(e,t,a){"use strict";a.r(t);var l=a("1b27").a,i=(a("6d0d"),a("2877")),s=Object(i.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"realtimevideoNew"},[a("cv-operation",{attrs:{position:"left"}},[a("el-form-item",{attrs:{label:"分屏"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:e.screenss,callback:function(t){e.screenss=t},expression:"screenss"}},e._l(e.screenssList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",[a("cv-icon",{attrs:{name:"xitong9"},nativeOn:{click:function(t){return e.realtimeSetting(t)}}},[e._v("实时视频参数设置")])],1),a("el-form-item",[a("operation",{on:{setting:e.openSetting}})],1),a("el-form-item",{attrs:{label:"当前选中车辆:"}},[a("span",[e._v(e._s(e.common.plateCode||"--"))])]),a("el-form-item",{attrs:{label:"当前选中通道:"}},[a("span",[e._v(e._s(e._f("channelFilter")(e.common.nodeCheckChannel)))])]),a("el-form-item",{attrs:{label:"实时字幕:"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.isSubtitle,callback:function(t){e.isSubtitle=t},expression:"isSubtitle"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:1==e.screenss},on:{click:e.openAllCamera}},[e._v("打开所有")]),a("el-button",{attrs:{type:"primary",disabled:1==e.screenss},on:{click:e.stopAllCamera}},[e._v("关闭所有")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.openSingleCamera}},[e._v("打开单通道")]),a("el-button",{attrs:{type:"primary"},on:{click:e.stopSingleCamera}},[e._v("关闭单通道")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:1==e.screenss},on:{click:e.allReplay}},[e._v("多路回放")]),e.serverRF?a("el-button",{attrs:{type:"primary"},on:{click:e.allServerReplay}},[e._v("多路缓存回放")]):e._e(),a("el-button",{attrs:{type:"primary",disabled:1==e.screenss},on:{click:e.allReplayStop}},[e._v("关闭所有回放")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.hiddenOcx=!e.hiddenOcx}}},[e._v("视频控件显隐")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.allWindow(t)}}},[e._v("全屏")])],1)],1),a("cv-content",[a("div",{staticStyle:{width:"100%",height:"99.5%"},attrs:{slot:"aside"},slot:"aside"},[a("video-tree",{staticClass:"widthF",attrs:{"node-monitor":e.singleCar},on:{"node-click":e.nodeClick,confirm:e.channelCheck}})],1),a("cv-tabs",{attrs:{titles:["播放窗口","回放查询","其他信息"],"force-render":!1},model:{value:e.activeTabs,callback:function(t){e.activeTabs=t},expression:"activeTabs"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!this.hiddenOcx,expression:"!this.hiddenOcx"}],staticClass:"videoPort",attrs:{id:"videoPort"}},[a("object",{staticStyle:{background:"#ccc"},attrs:{width:e.videoPortWidthC,height:e.videoPortHeightC,id:"realOcx",codebase:e.$COMMON.ocxLib,classid:"clsid:f3943464-829d-4bb8-8b05-10516831ceed"}})]),a("div",{staticStyle:{position:"relative",right:"10px"},attrs:{id:"replaySearch"}},[a("div",{staticClass:"leftPanel",staticStyle:{position:"absolute",left:"0",top:"0",width:"330px"}},[a("el-form",{staticStyle:{"margin-bottom":"0px"}},[a("el-form-item",[a("el-date-picker",{staticStyle:{float:"left","margin-left":"10px"},attrs:{editable:!1,clearable:!1,"value-format":"timestamp",type:"datetime",placeholder:"开始时间"},model:{value:e.listData,callback:function(t){e.listData=t},expression:"listData"}})],1),a("el-form-item",[a("el-date-picker",{staticStyle:{float:"left","margin-left":"10px"},attrs:{editable:!1,clearable:!1,"value-format":"timestamp",type:"datetime",placeholder:"结束时间"},model:{value:e.listData1,callback:function(t){e.listData1=t},expression:"listData1"}})],1),a("el-form-item",[a("el-select",{staticStyle:{float:"left","margin-left":"10px",width:"220px"},attrs:{multiple:"","collapse-tags":"",placeholder:"报警类型选择"},on:{change:e.alarmChange},model:{value:e.replaySearchParams.Alarm,callback:function(t){e.$set(e.replaySearchParams,"Alarm",t)},expression:"replaySearchParams.Alarm"}},e._l(e.replaySearchParams.AlarmList,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",[a("el-select",{staticStyle:{float:"left","margin-left":"10px",width:"220px"},attrs:{placeholder:"音视频资源类型选择"},model:{value:e.replaySearchParams.MediaType,callback:function(t){e.$set(e.replaySearchParams,"MediaType",t)},expression:"replaySearchParams.MediaType"}},e._l(e.replaySearchParams.MediaTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",[a("el-select",{staticStyle:{float:"left","margin-left":"10px",width:"220px"},attrs:{placeholder:"码流类型选择"},model:{value:e.replaySearchParams.StreamType,callback:function(t){e.$set(e.replaySearchParams,"StreamType",t)},expression:"replaySearchParams.StreamType"}},e._l(e.replaySearchParams.StreamTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",[a("el-select",{staticStyle:{float:"left","margin-left":"10px",width:"220px"},attrs:{placeholder:"存储器类型选择"},model:{value:e.replaySearchParams.StorageType,callback:function(t){e.$set(e.replaySearchParams,"StorageType",t)},expression:"replaySearchParams.StorageType"}},e._l(e.replaySearchParams.StorageTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",[a("el-select",{staticStyle:{float:"left","margin-left":"10px",width:"220px"},attrs:{placeholder:"数据类型选择"},model:{value:e.replaySearchParams.DataSource,callback:function(t){e.$set(e.replaySearchParams,"DataSource",t)},expression:"replaySearchParams.DataSource"}},e._l(e.replaySearchParams.DataSourceList,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",[a("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{disabled:e.PBM,loading:e.searchFlag},on:{click:e.searchList}},[e._v("查询")]),a("el-button",{staticStyle:{float:"left","margin-left":"10px"},on:{click:e.openDownList}},[e._v("打开下载列表")])],1)],1)],1),a("div",{staticClass:"tableList",staticStyle:{"margin-left":"330px"}},[a("cv-grid",{attrs:{data:e.rList,defaultHeight:500},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{label:"车牌号码",prop:"plateCode"}}),a("el-table-column",{attrs:{label:"时间",width:"200",formatter:e.SEtime,prop:"StartTime"}}),a("el-table-column",{attrs:{label:"报警标志",formatter:e.AlarmFilter,prop:"Alarm"}}),a("el-table-column",{attrs:{label:"音视频资源类型",width:"120",formatter:e.MediaTypeFilter,prop:"MediaType"}}),a("el-table-column",{attrs:{label:"码流类型",formatter:e.StreamTypeFilter,prop:"StreamType"}}),a("el-table-column",{attrs:{label:"存储器类型",formatter:e.StorageTypeFilter,prop:"StorageType"}}),a("el-table-column",{attrs:{label:"通道",formatter:e.channelType,prop:"Channel"}}),a("el-table-column",{attrs:{label:"大小(MB)",formatter:e.FileSize,prop:"FileSize"}}),a("el-table-column",{attrs:{label:e.$t("action.operation"),width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cv-span",{attrs:{type:"success"},nativeOn:{click:function(a){return e.playBackView(t.row)}}},[e._v("回放")]),a("cv-span",{attrs:{type:"warning"},nativeOn:{click:function(a){return e.openPlayBackCtrlIssue(t.row)}}},[e._v("回放控制指令下发")]),a("cv-span",{attrs:{type:"primary"},nativeOn:{click:function(a){return e.downLoadFile(t.row)}}},[e._v("下载")])]}}])})],1)],1)]),a("div",{attrs:{id:"otherInfos"}},[a("vehicle-info",{attrs:{vehicleInfos:e.common}})],1)])],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.dialog.flag,title:e.dialog.title,"custom-class":e.dialog.size},on:{"update:visible":function(t){return e.$set(e.dialog,"flag",t)}}},[a(e.dialog.name,{tag:"component",attrs:{options:e.dialog},on:{videoParams:e.videoParams,playBackIssue:e.playBackIssue,playBackCtrlIssue:e.playBackCtrlIssue,playBackAll:e.playBackAllV,opList:e.openList}})],1),a("el-dialog",{attrs:{visible:e.dialog.sDialog.flag,title:e.dialog.sDialog.title,"custom-class":e.dialog.sDialog.size},on:{"update:visible":function(t){return e.$set(e.dialog.sDialog,"flag",t)}}},[a(e.dialog.sDialog.name,{tag:"component",attrs:{options:e.dialog.sDialog,showBtns:e.dialog.sDialog.showBtns,vInfo:e.dialog.sDialog.vInfo}})],1)],1)},[],!1,null,null,null).exports;t.default=s},"3ec1":function(e,t,a){"use strict";var l={inject:["store"],props:{options:{}},data:function(){return{PlaybackModeList:[{value:"0",label:"正常回放"},{value:"1",label:"快进回放"},{value:"2",label:"关键帧快退回放"},{value:"3",label:"关键帧播放"},{value:"4",label:"单帧上传"}],DataSourceList:[{value:"1",label:"终端设备"},{value:"2",label:"存储服务器"}],MultipleList:[{value:"0",label:"无效"},{value:"1",label:"1倍"},{value:"2",label:"2倍"},{value:"3",label:"4倍"},{value:"4",label:"8倍"},{value:"5",label:"16倍"}],MediaTypeList:[{label:"音视频",value:"0"},{label:"音频",value:"1"},{label:"视频",value:"2"},{label:"视频或音视频",value:"3"}],StreamTypeList:[{label:"所有码流",value:"0"},{label:"主码流",value:"1"},{label:"子码流",value:"2"}],StorageTypeList:[{label:"所有存储器",value:"0"},{label:"主存储器",value:"1"},{label:"灾备存储器",value:"2"}]}},methods:{confirm:function(){this.$emit("playBackIssue")}}},i=a("2877"),s=Object(i.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{staticClass:"replaySet",attrs:{"label-width":"150px"}},[a("el-form-item",{attrs:{label:"开始时间"}},[a("el-date-picker",{staticStyle:{float:"left",width:"200px"},attrs:{editable:!1,clearable:!1,"value-format":"timestamp",type:"datetime",placeholder:"开始时间"},model:{value:e.store.replaySetParams.StartTime,callback:function(t){e.$set(e.store.replaySetParams,"StartTime",t)},expression:"store.replaySetParams.StartTime"}})],1),a("el-form-item",{attrs:{label:"结束时间"}},[a("el-date-picker",{staticStyle:{float:"left",width:"200px"},attrs:{editable:!1,clearable:!1,"value-format":"timestamp",type:"datetime",placeholder:"结束时间"},model:{value:e.store.replaySetParams.EndTime,callback:function(t){e.$set(e.store.replaySetParams,"EndTime",t)},expression:"store.replaySetParams.EndTime"}})],1),a("el-form-item",{attrs:{label:"回放方式"}},[a("el-select",{staticStyle:{width:"200px",float:"left"},model:{value:e.store.replaySetParams.PlaybackMode,callback:function(t){e.$set(e.store.replaySetParams,"PlaybackMode",t)},expression:"store.replaySetParams.PlaybackMode"}},e._l(e.PlaybackModeList,function(e){return a("el-option",{key:e._id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0!=e.store.replaySetParams.PlaybackMode,expression:"store.replaySetParams.PlaybackMode != 0"}],attrs:{label:"播放速度"}},[a("el-select",{staticStyle:{width:"200px",float:"left"},model:{value:e.store.replaySetParams.Multiple,callback:function(t){e.$set(e.store.replaySetParams,"Multiple",t)},expression:"store.replaySetParams.Multiple"}},e._l(e.MultipleList,function(e){return a("el-option",{key:e._id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"数据来源"}},[a("el-select",{staticStyle:{width:"200px",float:"left"},model:{value:e.store.replaySetParams.DataSource,callback:function(t){e.$set(e.store.replaySetParams,"DataSource",t)},expression:"store.replaySetParams.DataSource"}},e._l(e.DataSourceList,function(e){return a("el-option",{key:e._id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"音视频资源类型"}},[a("el-select",{staticStyle:{float:"left",width:"200px"},model:{value:e.store.replaySetParams.MediaType,callback:function(t){e.$set(e.store.replaySetParams,"MediaType",t)},expression:"store.replaySetParams.MediaType"}},e._l(e.MediaTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"码流类型"}},[a("el-select",{staticStyle:{float:"left",width:"200px"},model:{value:e.store.replaySetParams.StreamType,callback:function(t){e.$set(e.store.replaySetParams,"StreamType",t)},expression:"store.replaySetParams.StreamType"}},e._l(e.StreamTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"存储器类型"}},[a("el-select",{staticStyle:{float:"left",width:"200px"},model:{value:e.store.replaySetParams.StorageType,callback:function(t){e.$set(e.store.replaySetParams,"StorageType",t)},expression:"store.replaySetParams.StorageType"}},e._l(e.StorageTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.confirm(t)}}},[e._v(e._s(e.$t("action.confirm")))]),a("el-button",{on:{click:function(t){e.options.flag=!1}}},[e._v(e._s(e.$t("action.cancel")))])],1)],1)},[],!1,null,null,null);t.a=s.exports},"4cb8":function(e,t,a){"use strict";var l=a("232d");a.n(l).a},5589:function(e,t,a){"use strict";var l={methods:{setting:function(){this.$emit("setting")}}},i=a("2877"),s=Object(i.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cv-video-operation"},[a("ul",[a("cv-icon",{attrs:{name:"xitong9"},nativeOn:{click:function(t){return e.setting(t)}}},[e._v("设置")])],1)])},[],!1,null,null,null);t.a=s.exports},"58af":function(e,t,a){"use strict";t.a={methods:{ocxInit:function(e,t){e.SetServerInfo(t.ipAddress,t.port,t.userLevel,t.replayPower,t.picCutPower,t.ytCtrlPower,t.MTpowerPower)},ocxRealtimePlay:function(e,t){e.StartRealTimeVideo(t.simCode,t.channel,t.StreamType,t.hasAudio)},ocxRealtimePlayXY:function(e,t){e.StartRealTimeVideoProtocolStandard(t.simCode,t.channel,t.dataType,t.StreamType)},ocxReplay:function(e,t){e.PlayBack_Utc(t.simCode,t.channel,t.MediaType,t.StreamType,t.StorageType,t.PlaybackMode,t.Multiple,t.StartTime,t.EndTime,t.DataSource)},ocxCloseVideo:function(e){e.StopAll()},ocxSpeaking:function(e,t){e.StartRTSpeaking(t.simCode.options.channel,t.StreamType)},ocxStopSpeaking:function(e){e.StopRTSpeaking()},ocxMonitor:function(e,t){e.StartMonitorVoice(t.simCode.options.channel,t.StreamType)},ocxStopMonitor:function(e){e.StopMonitorVoice()}}}},"59c0":function(e,t,a){"use strict";a("c5f6");var l={inject:["store"],props:{options:{}},data:function(){return{confirmFlag:!1,beforeGird:{vehicleId:this.store.currentV,enterpriseId:this.store.currentE,taskExecutionConditionStr:"7",Channel:Number(this.store.downLoadParams.Channel),StartTime:this.store.downLoadParams.StartTime,EndTime:this.store.downLoadParams.EndTime,Alarm:Number(this.store.downLoadParams.Alarm),MediaType:Number(this.store.downLoadParams.MediaType),StreamType:Number(this.store.downLoadParams.StreamType),StorageType:Number(this.store.downLoadParams.StorageType),fileSource:Number(this.store.downLoadParams.fileSource)},optionsList:[{value:"1",label:"WIFI"},{value:"2",label:"LAN"},{value:"4",label:"3G/4G"}],value5:["1","2","4"]}},methods:{schange:function(e){this.beforeGird.taskExecutionConditionStr=e.join(",")},confirm:function(){var e=this;if(this.confirmFlag=!0,0==this.value5.length)return this.$message.warning("请选择下载环境!"),this.confirmFlag=!1;this.$http({url:"/sendVideoOrder/sendVedioFileUploadSite",params:this.beforeGird}).then(function(t){t.flag&&(e.options.flag=!1,e.confirmFlag=!1,e.$emit("opList")),t.flag||(e.$message.error({message:e.$t("error."+t.errorCode)}),e.options.flag=!1,e.confirmFlag=!1)})}}},i=a("2877"),s=Object(i.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{staticClass:"dSelect"},[a("el-form-item",{attrs:{label:"下载环境"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},on:{change:e.schange},model:{value:e.value5,callback:function(t){e.value5=t},expression:"value5"}},e._l(e.optionsList,function(e){return a("el-option",{key:e._id,attrs:{label:e.label,value:e.value}})}),1)],1),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",loading:e.confirmFlag},on:{click:e.confirm}},[e._v(e._s(e.$t("action.confirm")))]),a("el-button",{on:{click:function(t){e.options.flag=!1}}},[e._v(e._s(e.$t("action.cancel")))])],1)],1)},[],!1,null,null,null);t.a=s.exports},"671b":function(e,t,a){"use strict";var l=a("1b25");a.n(l).a},"6d0d":function(e,t,a){"use strict";var l=a("79d2");a.n(l).a},7492:function(e,t,a){"use strict";var l=a("ceec");a.n(l).a},"79d2":function(e,t,a){},"7a3a":function(e,t,a){"use strict";a("c5f6");var l=a("9add"),i=a("3b6f"),s=a("cd33"),n={mixins:[l.a,s.a,i.a],props:{flashTree:{default:function(){return!1}}},data:function(){return{videoTreeData:null,treeReady:!0,popover:{alias:"",id:""},listCH:[]}},computed:{_popoverMethods:function(){return this.$refs.popover},_listsMethods:function(){return this.$refs.lists}},methods:{nodeClick:function(e){this.listCH.enterpriseId=e.enterpriseId,this.listCH.plateCode=e.plateCode,this.listCH.id=e.pId,"C"==e.text.charAt(0)&&"H"==e.text.charAt(1)&&this.chClick(e.text)},playAll:function(){var e,t=this;e=this.listCH.channelInfos.map(function(e){return{params:{F_VEHICLE_ID:t.listCH.id,F_ENTERPRISE_ID:t.listCH.enterpriseId,Channel:Number(e.channelName.substring(2))},message:{text:e.channelName,pId:t.listCH.id,plateCode:t.listCH.plateCode,enterpriseId:t.listCH.enterpriseId},isRest:!1,index:Number(e.channelName.substring(2))-1}}),this.$store.dispatch("playAllVideo",e),this.handlerCollectionDestory()},playAllsingle:function(e){var t;t=e.map(function(e){return{params:{F_VEHICLE_ID:e.id,F_ENTERPRISE_ID:e.enterpriseId,Channel:Number(e.channelName.substring(2))},message:{text:e.channelName,pId:e.id,plateCode:e.plateCode,enterpriseId:e.enterpriseId},isRest:!1,index:Number(e.channelName.substring(2))-1}}),this.$store.dispatch("playAllVideo",t),this.handlerCollectionDestory()},chClick:function(e){var t={text:e,pId:this.listCH.id,plateCode:this.listCH.plateCode,enterpriseId:this.listCH.enterpriseId};this.$store.dispatch("ptSinglePass",t),this.handlerCollectionDestory(),this.widthF=!1,this.$emit("confirm",e)},treeOperation:function(e){var t="",a=this,l=e.type,i=e.isAttention;return 4==l&&(t=1==i?'<i id="tree-collection" class="cv-icon-font el-icon-tsp-shoucang" style="color:#f3aa4e"></i>':'<i id="tree-collection" class="cv-icon-font el-icon-tsp-shoucang1"></i>'),{template:t,methods:function(){var t=document.getElementById("tree-collection");t&&(t.onclick=function(t){a.handlerCollection(t,e)})}}},handlerCollectionDestory:function(){this.mixins_hidePopover(this._popoverMethods)},attentionEditHandler:function(e,t){e.stopPropagation(),this.listCH=t,this.widthF=!0,this.mixins_showPopover(this._popoverMethods,e.target)}},mounted:function(){var e=this;this.$http({url:"/monitor/findVehicleTreeInfoList",params:{flag:!0}}).then(function(t){t.flag&&(e.videoTreeData=t.data,e.treeReady=!1)})}},r=(a("e4de"),a("2877")),o=Object(r.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cv-tabs-vehiclelists"},[a("cv-tabs",{directives:[{name:"loading",rawName:"v-loading",value:e.treeReady,expression:"treeReady"}],staticClass:"cv-tabs-tree",attrs:{titles:["车辆选择","车辆列表"],isScrollbar:"",type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("cv-tree-search",{ref:"tree",attrs:{data:e.videoTreeData,"other-param":{flag:!0},lazy:e.vehilceApi,"icons-filter":e.treeIconsFilter,"node-filter":e.nodeFilter,operation:e.isOperation&&e.treeOperation,"limit-check":e.handlerLimitCheck},on:{"node-click":e.nodeClick}}),a("cv-tree-lists",{ref:"lists",attrs:{"search-api":e.listsApi,"is-check":!1},on:{"node-click":e.handlerListsClick},scopedSlots:e._u([{key:"label",fn:function(t){return[a("cv-icon",{staticClass:"tabicongao",attrs:{name:(t.row.icon||"icon1")+"cheliang",color:"1"==t.row.onlineStatus?"#1bca22":""}}),a("span",[e._v(e._s(t.row.plateCodeAlias||t.row.text))])]}},{key:"operation",fn:function(t){return[0<t.row.channelInfos.length?a("cv-icon",{attrs:{name:"shipinyuan",color:"1"==t.row.onlineStatus?"#1bca22":""},on:{click:function(a){return e.attentionEditHandler(a,t.row)}}}):e._e()]}}])},[a("template",{slot:"checkbox"},[a("el-checkbox",{attrs:{label:"1"}},[e._v("在线")]),a("el-checkbox",{attrs:{label:"0"}},[e._v("离线")])],1)],2)],1),a("el-popover",{ref:"popover",attrs:{placement:"bottom",width:"160"}},[a("cv-scrollbar",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handlerCollectionDestory,expression:"handlerCollectionDestory"}],class:[e.widthF?"wF":"w"],staticStyle:{"max-height":"500px"}},[e.flashTree?a("li",{staticStyle:{padding:"5px",cursor:"pointer"},on:{click:e.playAll}},[e._v("全部播放")]):e._e(),e._l(e.listCH.channelInfos,function(t){return a("li",{key:t.id,staticStyle:{padding:"5px",cursor:"pointer"},on:{click:function(a){return e.chClick(t.channelName)}}},[e._v(e._s(t.channelName))])})],2)],1)],1)},[],!1,null,null,null);t.a=o.exports},8369:function(e,t,a){"use strict";var l=a("cebc");t.a={data:function(){return{table:{size:10,total:0,current:1,flag:!1,loading:!1,data:[]}}},methods:{tableLoading:function(e,t,a,i){var s=this;a?(this.table.flag=!0,this.table.current=1):this.table.flag=!1,this.table.loading=!0;var n=Object(l.a)({current:this.table.current,size:this.table.size},t);this.$http(i?{url:e,data:n}:{url:e,params:n}).then(function(e){var t=e.data;e.flag&&0!=t.length?(s.table.data=t.records,s.table.total=t.total,s.table.current=t.current):(s.table.data=[],s.table.total=0),s.table.loading=!1}).catch(function(e){s.table.loading=!1})},tableFilterColor:function(e){return this.$filter.plateCodeColor(e.plateColor)},tableFilterIcType:function(e){return this.$filter.icType(e.state)},tableFilterIcResult:function(e){return this.$filter.icResult(e.readerresult)},tableFilterTiredAlarm:function(e){return this.$filter.tiredAlarmType(e.alarm)},tableFilterTiredAdas:function(e){return this.$filter.tiredAdasType(e.alarm)},tableFilterOrderTypeS:function(e){return this.$filter.orderTypeS(e.sendFlag)},tableFilterFormat:function(e){return this.$filter.format(e.orderTime||e.gpsTime)},tableFilterFormats:function(e){return this.$filter.format(e.backTime)},tableBusLineType:function(e){return this.$filter.lineType(e.lineType)},tableFilterAcc:function(e){return this.$filter.accStatus(e.accStatus)},tableSplitMobile:function(e){return e.mobileCode?e.mobileCode.slice(1,e.mobileCode.length):""},tableConfirm:function(e){return this.$filter.isConfirm(e.isnotarize)},tableUpkeep:function(e){return this.$filter.isConfirm(e.type)},tableRenewal:function(e){return this.$filter.renewal(e.state)},tableReMot:function(e){return this.$filter.reMot(e.state)},tableOil:function(e){return this.$filter.fixNumber(e.total,2)},tableSex:function(e){return this.$filter.sex(e.sex)},plateCodeF:function(e){return e.plateCode?e.plateCode:"--"},plateCodeAndColor:function(e){return e.plateCode+"("+this.$filter.plateCodeColor(e.plateColor)+")"},driverStuas:function(e){return this.$filter.alarmStatus(e.fatigueDrive)},overStuas:function(e){return this.$filter.alarmStatus(e.tOversSpeed)},overHStuas:function(e){return this.$filter.alarmStatus(e.tOverSpeedH)},filterAlStuas:function(e){return this.$filter.alarmStatus(e.overSpeed)},filteralarmStuas:function(e){return this.$filter.alarmStatus(e.overSpeedH)},filterLStuas:function(e){return this.$filter.alarmStatus(e.forbid)},applyFlag:function(e){return this.$filter.applyFlag(e.applyFlag)},SEtime:function(e){return this.$filter.SEtime(e.StartTime,e.EndTime)},channelType:function(e){return this.$filter.channelType(e.Channel)},FileSize:function(e){return this.$filter.FileSize(e.fileSize||e.FileSize||0)},AlarmFilter:function(e){return this.$filter.AlarmFilter(e.Alarm)},MediaTypeFilter:function(e){return this.$filter.MediaTypeFilter(e.MediaType)},StreamTypeFilter:function(e){return this.$filter.StreamTypeFilter(e.StreamType)},StorageTypeFilter:function(e){return this.$filter.StorageTypeFilter(e.StorageType)},statusType:function(e){return this.$filter.statusType(e.Status)},fileSource:function(e){return this.$filter.fileSource(e.fileSource)}}}},"8a6f":function(e,t,a){"use strict";var l=a("1116");a.n(l).a},"8c23":function(e,t,a){},"9bb5":function(e,t,a){"use strict";var l=a("8c23");a.n(l).a},a1a2:function(e,t,a){},a714:function(e,t,a){"use strict";var l=a("0116");a.n(l).a},aea9:function(e,t,a){},b0ad:function(e,t,a){"use strict";(function(e){a("7f7f"),t.a={methods:{confirmPrompt:function(e,t){var a=this,l=e||this.$t("action.confirmIsRemove");return new Promise(function(e,i){a.$confirm(l,a.$t("action.tip"),{confirmButtonText:a.$t("action.confirm"),cancelButtonText:a.$t("action.cancel"),type:"warning"}).then(function(){e()}).catch(function(){"function"==typeof t&&t()})})},timeLimitFunc:function(e,t,a){if(e&&t)return((new Date(t)-new Date(e))/864e5).toFixed(1)<=a||this.$message.error({message:this.$t("请选择时间范围在"+a+"天内")});this.$message.error({message:this.$t("请选择时间范围")})},addRemoveUnique:function(e,t,a){var l=e.length,i=t.length;return i<l?{name:"add",data:this.$service.isUnique(e,t,a)}:l<i?{name:"remove",data:this.$service.isUnique(t,e,a)}:l==i?{name:"equal",data:this.$service.isUnique(e,t,a)}:void 0},showTooltip:function(e,t){var a=e.target,l=this.$refs[t];l.referenceElm=a,l.$refs.popper.style.display="none",l.doDestroy(),l.setExpectedState(!0),l.handleShowPopper()},mouseenterShowTip:function(e,t,a){var l=e.target;if(l.scrollWidth>l.offsetWidth||a)return this.showTooltip(e,t),a?a.startTime+"~"+a.endTime:l.innerText},mouseenterShowToolTip:function(e,t,a){var l=e.target;return this.showTooltip(e,t),!a&&l.innerText},mouseoverHideTip:function(e){var t=this.$refs[e];t&&(t.setExpectedState(!1),t.handleClosePopper())},asyncDownloadScript:function(t,a){var l=this,i=0<arguments.length&&void 0!==t?t:"Baidu",s=1<arguments.length?a:void 0;return e[i]?e[i]._preloader?e[i]._preloader:Promise.resolve(e[i]):(e[i]={},e[i]._preloader=new Promise(function(t,a){var n=document.createElement("script");n.src=s,e.document.body.appendChild(n),l.$service.isIe()&&l.$service.IE_VERSION<11?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(t(e[i]),e[i]._preloader=null)}:n.onload=function(){t(e[i]),e[i]._preloader=null}}),e[i]._preloader)}}}}).call(this,a("c8ba"))},b1e2:function(e,t,a){"use strict";var l=a("29ff"),i=(a("a481"),a("b54a"),a("ac6a"),{props:{options:{},showBtns:{},vInfo:{}},data:function(){return{area1:{first:0},area2:{second:0},area3:{third:0},common:{selectOptions:[],itemOptions1:[],itemOptions2:[{physicsNum:1,logicNum:33,link:0,disabled:!0},{physicsNum:2,logicNum:36,link:0,disabled:!0},{physicsNum:3,logicNum:37,link:0,disabled:!0}],itemOptions3:[]},LstAVArr:[]}},methods:{selectChange:function(e,t){0==e?this.common[t].forEach(function(e){e.disabled=!0}):this.common[t].forEach(function(t,a){a-0+1<=e&&(t.disabled=!1),e<a-0+1&&(t.disabled=!0)})},judgeArr:function(e){return/(\\x0f[^\\x0f]+)\\x0f[\s\S]*\1/.test(""+e.join("")+"")},saveVideoParams:function(){var e=this,t=[],a=[],l=[],i=[],s=["itemOptions1","itemOptions2","itemOptions3"];if(s.forEach(function(a){var l,i;switch(a){case"itemOptions1":l=e.area1.first,i=0;break;case"itemOptions2":l=e.area2.second,i=1;break;case"itemOptions3":l=e.area3.third,i=2}e.common[a].forEach(function(a,s){s<l&&(t.push({PhysicalChannelNum:a.physicsNum,LogicalChannelNum:a.logicNum,ChannelType:i,ConnectPTZ:a.link}),e.LstAVArr.push({PhysicalChannelNum:a.physicsNum,LogicalChannelNum:a.logicNum,ChannelType:i,ConnectPTZ:a.link}))})}),this.common[s[0]].length&&this.common[s[0]].forEach(function(e){e.disabled||a.push(e.physicsNum)}),this.common[s[1]].length&&this.common[s[1]].forEach(function(e){e.disabled||l.push(e.physicsNum)}),this.common[s[2]].length&&this.common[s[2]].forEach(function(e){e.disabled||i.push(e.physicsNum)}),this.judgeArr(a))return this.$message.warning("音视频通道配置物理通道号重复!"),!1;if(this.judgeArr(l))return this.$message.warning("音频通道配置物理通道号重复!"),!1;if(this.judgeArr(i))return this.$message.warning("视频通道配置物理通道号重复!"),!1;var n={AVChannelNums:this.area1.first,AudioChannelNums:this.area2.second,VideoChannelNums:this.area3.third,LstAVChannel:t},r={vehicleId:this.options.vid,enterpriseId:this.options.eid,params:JSON.stringify(n)};this.$store.dispatch("sendVideoChannelListSite",r).then(function(t){t.flag?e.$message.success("指令发送成功!"):e.$message.error("指令发送失败!"),e.closeDialog()})},assignment:function(e){var t=this,a=[],l=[],i=[];e.forEach(function(e){switch(e.ChannelType){case 0:a.push(e);break;case 1:l.push(e);break;case 2:i.push(e)}}),a.forEach(function(e,l){t.area1.first=a.length,t.common.itemOptions1[l].physicsNum=e.PhysicalChannelNum,t.common.itemOptions1[l].logicNum=e.LogicalChannelNum,t.common.itemOptions1[l].link=e.ConnectPTZ,t.common.itemOptions1[l].disabled=!1}),l.forEach(function(e,a){t.area2.second=l.length,t.common.itemOptions2[a].physicsNum=e.PhysicalChannelNum,t.common.itemOptions2[a].logicNum=e.LogicalChannelNum,t.common.itemOptions2[a].link=e.ConnectPTZ,t.common.itemOptions2[a].disabled=!1}),i.forEach(function(e,a){t.area3.third=i.length,t.common.itemOptions3[a].physicsNum=e.PhysicalChannelNum,t.common.itemOptions3[a].logicNum=e.LogicalChannelNum,t.common.itemOptions3[a].link=e.ConnectPTZ,t.common.itemOptions3[a].disabled=!1})},closeDialog:function(){this.options.flag=!1}},created:function(){for(var e=0;e<this.vInfo.count;e++)this.common.itemOptions1.push({physicsNum:e+1,logicNum:e+1,link:0,disabled:!0}),this.common.itemOptions3.push({physicsNum:e+1,logicNum:e+1,link:0,disabled:!0});for(var t=0;t<=this.vInfo.count;t++)this.common.selectOptions.push({value:t,label:t})},mounted:function(){var e=this;this.$store.dispatch("getVideoMainParams",{vehicleId:this.vInfo.vehicleId,type:1}).then(function(t){if(t.flag){var a=JSON.parse(t.data).params.replace(/\+/," ");e.assignment(JSON.parse(a).LstAVChannel)}})}}),s=(a("fe7c"),a("2877")),n=Object(s.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"channelList"},[a("fieldset",{staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("音视频通道参数配置")]),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",[e._v("音视频通道总数:")]),a("el-select",{staticClass:"channelAll",attrs:{size:"small",placeholder:"请选择"},on:{change:function(t){return e.selectChange(e.area1.first,"itemOptions1")}},model:{value:e.area1.first,callback:function(t){e.$set(e.area1,"first",t)},expression:"area1.first"}},e._l(e.common.selectOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._l(e.common.itemOptions1,function(t){return a("el-row",{key:t._id,staticClass:"list-item"},[a("el-col",{attrs:{span:8}},[a("span",[e._v("物理通道号:")]),a("el-input",{staticStyle:{width:"80px"},attrs:{size:"small",disabled:t.disabled,maxlength:2},model:{value:t.physicsNum,callback:function(a){e.$set(t,"physicsNum",e._n(a))},expression:"item.physicsNum"}})],1),a("el-col",{attrs:{span:8}},[a("span",[e._v("逻辑通道号:"+e._s(t.logicNum))])]),a("el-col",{attrs:{span:8}},[a("el-checkbox",{attrs:{disabled:t.disabled,"true-label":1,"false-label":0},model:{value:t.link,callback:function(a){e.$set(t,"link",a)},expression:"item.link"}},[e._v("连接云台")])],1)],1)})],2),a("fieldset",{staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("音频通道参数配置")]),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",[e._v("音频通道总数:")]),a("el-select",{staticClass:"channelAll",attrs:{size:"small",placeholder:"请选择"},on:{change:function(t){return e.selectChange(e.area2.second,"itemOptions2")}},model:{value:e.area2.second,callback:function(t){e.$set(e.area2,"second",t)},expression:"area2.second"}},e._l(e.common.selectOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._l(e.common.itemOptions2,function(t){return a("el-row",{key:t._id,staticClass:"list-item"},[a("el-col",{attrs:{span:8}},[a("span",[e._v("物理通道号:")]),a("el-input",{staticStyle:{width:"80px"},attrs:{size:"small",disabled:t.disabled,maxlength:2},model:{value:t.physicsNum,callback:function(a){e.$set(t,"physicsNum",e._n(a))},expression:"item.physicsNum"}})],1),a("el-col",{attrs:{span:8}},[a("span",[e._v("逻辑通道号:"+e._s(t.logicNum))])]),a("el-col",{attrs:{span:8}},[a("el-checkbox",{attrs:{disabled:t.disabled,"true-label":1,"false-label":0},model:{value:t.link,callback:function(a){e.$set(t,"link",a)},expression:"item.link"}},[e._v("连接云台")])],1)],1)})],2),a("fieldset",{staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("视频通道参数配置")]),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",[e._v("视频通道总数:")]),a("el-select",{staticClass:"channelAll",attrs:{size:"small",placeholder:"请选择"},on:{change:function(t){return e.selectChange(e.area3.third,"itemOptions3")}},model:{value:e.area3.third,callback:function(t){e.$set(e.area3,"third",t)},expression:"area3.third"}},e._l(e.common.selectOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._l(e.common.itemOptions3,function(t){return a("el-row",{key:t._id,staticClass:"list-item"},[a("el-col",{attrs:{span:8}},[a("span",[e._v("物理通道号:")]),a("el-input",{staticStyle:{width:"80px"},attrs:{size:"small",disabled:t.disabled,maxlength:2},model:{value:t.physicsNum,callback:function(a){e.$set(t,"physicsNum",e._n(a))},expression:"item.physicsNum"}})],1),a("el-col",{attrs:{span:8}},[a("span",[e._v("逻辑通道号:"+e._s(t.logicNum))])]),a("el-col",{attrs:{span:8}},[a("el-checkbox",{attrs:{disabled:t.disabled,"true-label":1,"false-label":0},model:{value:t.link,callback:function(a){e.$set(t,"link",a)},expression:"item.link"}},[e._v("连接云台")])],1)],1)})],2),e.showBtns?a("el-row",[a("el-col",{staticClass:"footer",attrs:{span:24}},[a("el-button",{nativeOn:{click:function(t){return e.saveVideoParams(t)}}},[e._v("保存")]),a("el-button",{nativeOn:{click:function(t){return e.closeDialog(t)}}},[e._v("关闭")])],1)],1):e._e(),a("div",{staticStyle:{opacity:"0"}},[e._v("placeholder")])],1)},[],!1,null,null,null).exports,r=(a("456d"),{props:{options:{},showBtns:{},vInfo:{}},data:function(){return{area1:{first:0,selectOptions:[],itemOptions1:[]},area2:{num1:20,num2:5,num3:1}}},methods:{selectChange:function(e){0==e?this.area1.itemOptions1.forEach(function(e){e.disabled=!0}):this.area1.itemOptions1.forEach(function(t,a){a-0+1<=e&&(t.disabled=!1),e<a-0+1&&(t.disabled=!0)})},videoParams:function(e){this.$emit("videoParams",{flag:!0,channel:e-0+1,editData:this.area1.itemOptions1[e].vehicleId?this.area1.itemOptions1[e]:null})},closeDialog:function(){this.options.flag=!1},saveVideoParams:function(){for(var e=this,t=this.$store.getters.videoPSet,a=Object.keys(t).length,l=[],i=0;i<a;i++)t[i+1].LogicalChannel=this.area1.itemOptions1[i].logicNum,l.push(t[i+1]);var s={StorageThreshold:this.area2.num1,Duration:this.area2.num2,MarkStartTime:this.area2.num3},n={ChannleNums:this.area1.first,LstVideoChannel:l},r={vehicleId:this.options.vid,enterpriseId:this.options.eid,param1:JSON.stringify(n),param2:JSON.stringify(s)};this.$store.dispatch("sendSingleVideoChannelAndSpecialAlarmVideoSite",r).then(function(t){t.flag?e.$message.success("指令发送成功！"):e.$message.error("指令发送失败！"),e.closeDialog()})},assignment:function(e){var t=JSON.parse(e.param1),a=JSON.parse(e.param2);this.area1.first=t.ChannleNums,this.area2.num1=a.StorageThreshold,this.area2.num2=a.Duration,this.area2.num3=a.MarkStartTime;for(var l=0;l<t.LstVideoChannel.length;l++)this.area1.itemOptions1[l]=t.LstVideoChannel[l]}},created:function(){for(var e=0;e<this.vInfo.count;e++)this.area1.itemOptions1.push({physicsNum:e+1,logicNum:e+1,link:0,disabled:!0});for(var t=0;t<=this.vInfo.count;t++)this.area1.selectOptions.push({value:t,label:t})},mounted:function(){var e=this;this.$store.dispatch("getVideoMainParams",{vehicleId:this.vInfo.vehicleId,type:2}).then(function(t){t.flag&&e.assignment(JSON.parse(t.data))})}}),o=(a("dfd6"),Object(s.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"othersParams"},[a("fieldset",{staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("单独视频通道参数设置")]),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",[e._v("视频通道总数:")]),a("el-select",{staticStyle:{width:"100px"},attrs:{size:"small",placeholder:"请选择"},on:{change:e.selectChange},model:{value:e.area1.first,callback:function(t){e.$set(e.area1,"first",e._n(t))},expression:"area1.first"}},e._l(e.area1.selectOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._l(e.area1.itemOptions1,function(t,l){return a("el-row",{key:t._id,staticClass:"list-item"},[a("el-col",{attrs:{span:12}},[a("span",[e._v("逻辑通道号:")]),a("el-input",{staticStyle:{width:"80px"},attrs:{size:"small",disabled:t.disabled,maxlength:2},model:{value:t.logicNum,callback:function(a){e.$set(t,"logicNum",a)},expression:"item.logicNum"}})],1),a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{size:"small",disabled:t.disabled},nativeOn:{click:function(t){return e.videoParams(l)}}},[e._v("视频参数")])],1)],1)})],2),a("fieldset",{staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("特殊报警录像占用主存储器存储阈值百分比")]),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",[e._v("存储阈值")]),a("el-input",{staticStyle:{width:"60px"},attrs:{size:"small"},model:{value:e.area2.num1,callback:function(t){e.$set(e.area2,"num1",e._n(t))},expression:"area2.num1"}}),a("span",[e._v("特殊报警录像占用主存储器存储阈值百分比，取值1～99，默认值为20")])],1),a("el-col",{attrs:{span:24}},[a("span",[e._v("持续时间")]),a("el-input",{staticStyle:{width:"60px"},attrs:{size:"small"},model:{value:e.area2.num2,callback:function(t){e.$set(e.area2,"num2",e._n(t))},expression:"area2.num2"}}),a("span",[e._v("(0～255)特殊报警录像的最长持续时间，单位为分钟(min)，默认值为 5")])],1),a("el-col",{attrs:{span:24}},[a("span",[e._v("起始时间")]),a("el-input",{staticStyle:{width:"60px"},attrs:{size:"small"},model:{value:e.area2.num3,callback:function(t){e.$set(e.area2,"num3",e._n(t))},expression:"area2.num3"}}),a("span",[e._v("(0～255)特殊报警发生前进行标记的录像时间，单位为分钟(min)，默认值为 1")])],1)],1)],1),e.showBtns?a("el-row",[a("el-col",{staticClass:"footer",attrs:{span:24}},[a("el-button",{nativeOn:{click:function(t){return e.saveVideoParams(t)}}},[e._v("保存")]),a("el-button",{nativeOn:{click:function(t){return e.closeDialog(t)}}},[e._v("关闭")])],1)],1):e._e()],1)},[],!1,null,null,null).exports),c=(a("55dd"),a("c5f6"),a("28a5"),{props:{options:{},showBtns:{},vInfo:{}},data:function(){return{area1:{shield:0,checkList:[],alarmList:[{label:"视频信号丢失报警",value:1},{label:"视频信号遮挡报警",value:2},{label:"存储单元故障报警",value:4},{label:"其他视频设备故障报警",value:8},{label:"客车超员报警",value:16},{label:"异常驾驶行为报警",value:32},{label:"特殊报警录像达到存储阈值报警",value:64}],visible2:!1},area2:{people:20,tired:50},area3:{condition:0,conditionList:[{name:"紧急报警",value:1},{name:"碰撞侧翻报警",value:2},{name:"车辆开门",value:4}],conditionchecked:[],timing:0,timinglist:[{name:"周一",value:1},{name:"周二",value:2},{name:"周三",value:4},{name:"周四",value:8},{name:"周五",value:16},{name:"周六",value:32},{name:"周日",value:64}],timingchecked:[],isIndeterminate:!1,everyday:!1,time1:0,time2:0,time3:0,time4:0,time1value:[new Date(2018,1,1,0,0),new Date(2018,1,1,0,0)],time2value:[new Date(2018,1,1,0,0),new Date(2018,1,1,0,0)],time3value:[new Date(2018,1,1,0,0),new Date(2018,1,1,0,0)],time4value:[new Date(2018,1,1,0,0),new Date(2018,1,1,0,0)],hand:0}}},methods:{closeDialog:function(){this.options.flag=!1},sumNum:function(){this.area1.visible2=!1;var e=0;this.area1.checkList.forEach(function(t){e+=t-0}),this.area1.shield=0==e?"":e},cancel:function(){this.area1.visible2=!1,this.area1.checkList=[]},handleCheckAllChange:function(e){this.area3.timingchecked=e?[1,2,4,8,16,32,64]:[]},handleCheckedTimeChange:function(e){var t=e.length;this.area3.everyday=t===this.area3.timinglist.length,this.isIndeterminate=0<t&&t<this.area3.timinglist.length},saveVideoParams:function(){var e=this;if(this.area2.people&&"number"!=typeof this.area2.people||this.area2.tired&&"number"!=typeof this.area2.tired)return this.$message.warning("请填写正确的图像分析报警参数"),!1;var t=0;this.area3.conditionchecked.forEach(function(e){t+=e-0});var a=0;this.area3.timingchecked.forEach(function(e){a+=e-0});var l={AwakenMode:this.area3.condition+this.area3.timing+this.area3.hand,AwakenConditionType:t,TimeingAwaken:a,hand:this.area3.hand,DailyAwakencheckt:[this.area3.time1?this.area3.time1:"",this.area3.time2?this.area3.time2:"",this.area3.time3?this.area3.time3:"",this.area3.time4?this.area3.time4:""],DailyAwakenParameters:{EnableTimeingAwaken:this.area3.time1+this.area3.time2+this.area3.time3+this.area3.time4,AwakenTime1:this.area3.time1?this.$filter.format(this.area3.time1value[0],"HH:mm:ss"):"00:00:00",CloseTime1:this.area3.time1?this.$filter.format(this.area3.time1value[1],"HH:mm:ss"):"00:00:00",AwakenTime2:this.area3.time2?this.$filter.format(this.area3.time2value[0],"HH:mm:ss"):"00:00:00",CloseTime2:this.area3.time2?this.$filter.format(this.area3.time2value[1],"HH:mm:ss"):"00:00:00",AwakenTime3:this.area3.time3?this.$filter.format(this.area3.time3value[0],"HH:mm:ss"):"00:00:00",CloseTime3:this.area3.time3?this.$filter.format(this.area3.time3value[1],"HH:mm:ss"):"00:00:00",AwakenTime4:this.area3.time4?this.$filter.format(this.area3.time4value[0],"HH:mm:ss"):"00:00:00",CloseTime4:this.area3.time4?this.$filter.format(this.area3.time4value[1],"HH:mm:ss"):"00:00:00"}},i={SeatingCapacity:this.area2.people,FatigueThreshold:this.area2.tired},s={vehicleId:this.options.vid,enterpriseId:this.options.eid,param1:JSON.stringify(l),param2:JSON.stringify(i),param3:this.area1.shield};this.$store.dispatch("sendWakeUpVideoSite",s).then(function(t){t.flag?e.$message.success("指令发送成功！"):e.$message.error("指令发送失败！"),e.closeDialog()})},assignment:function(e){var t=this,a=JSON.parse(e.param1),l=JSON.parse(e.param2);this.area2.people=l.SeatingCapacity,this.area2.tired=l.FatigueThreshold,this.area1.shield=e.param3,this.area3.hand=a.hand;var i=[];this.area1.alarmList.forEach(function(e){i.push(e.value)}),(i=this.getCombBySum(i,this.area1.shield)).length&&i.join(",").split(",").forEach(function(e){t.area1.checkList.push(Number(e))}),this.area3.hand=a.hand;var s=[];this.area3.conditionList.forEach(function(e){s.push(e.value)}),(s=this.getCombBySum(s,a.AwakenConditionType)).length&&(this.area3.condition=!0,s.join(",").split(",").forEach(function(e){t.area3.conditionchecked.push(Number(e))}));var n=[];if(this.area3.timinglist.forEach(function(e){n.push(e.value)}),(n=this.getCombBySum(n,a.TimeingAwaken)).length){var r=n.join(",").split(",");this.area3.timing=2,r.forEach(function(e){t.area3.timingchecked.push(Number(e))})}7==this.area3.timingchecked.length&&(this.area3.everyday=!0),a.DailyAwakencheckt.forEach(function(e,a){t.area3["time"+(a+1)]=e||0});var o=Object.assign({},a.DailyAwakenParameters);for(var c in delete o.EnableTimeingAwaken,o)if("00:00:00"!=o[c]&&"23:59:00"!=o[c]){var u=c.substr(-1,1);this.area3.timing=!0;var m=new Date(this.$filter.format(new Date,"yyyy-MM-dd")+" "+o["AwakenTime"+u]),d=new Date(this.$filter.format(new Date,"yyyy-MM-dd")+" "+o["CloseTime"+u]);this.area3["time"+u+"value"]=[m,d]}},getCombBySum:function(e,t){var a,l=function(e,t){var a=[];return function e(t,l,i){if(0==i)return a.push(t);for(var s=0,n=l.length;s<=n-i;s++)e(t.concat(l[s]),l.slice(s+1),i-1)}([],e,t),a},i=function(e){var t=0,a=[];for(t=0;t<e.length;t++)a.push(t);return a},s={init:function(e,t){var a=e.concat(),l=[],i=0;for(a.sort(function(e,t){return e-t}),i=0;i<a.length&&a[i]<=t;i++)l.push(a[i]);return l},core:function(e,t,a,i,n){var c,u=0,m=0,d=0,p=[],h=[];if(i!=o){for(c=l(a,i),u=0;u<c.length;u++){for(p=c[u],h=[],m=d=0;m<p.length;m++)d+=e[p[m]],h.push(e[p[m]]);Math.abs(d-t)<=r&&n.push(h)}s.core(e,t,a,i-1,n)}}},n=[],r=0,o=0;return a=s.init(e,t),s.core(a,t,i(a),a.length,n),n}},mounted:function(){var e=this;this.$store.dispatch("getVideoMainParams",{vehicleId:this.vInfo.vehicleId,type:3}).then(function(t){if(t.flag){var a=JSON.parse(t.data.replace(/\+/," "));e.assignment(a)}})},watch:{"area3.condition":function(e){0==e&&(this.area3.conditionchecked=[])},"area3.timing":function(e){0==e&&(this.area3.time1=0,this.area3.time2=0,this.area3.time3=0,this.area3.time4=0,this.area3.timingchecked=[])},"area3.time1":function(e){0==e&&(this.area3.time2value=[new Date(2018,1,1,0,0),new Date(2018,1,1,23,59)])},"area3.time2":function(e){0==e&&(this.area3.time2value=[new Date(2018,1,1,0,0),new Date(2018,1,1,23,59)])},"area3.time3":function(e){0==e&&(this.area3.time3value=[new Date(2018,1,1,0,0),new Date(2018,1,1,23,59)])},"area3.time4":function(e){0==e&&(this.area3.time4value=[new Date(2018,1,1,0,0),new Date(2018,1,1,23,59)])}}}),u=(a("0dc9"),Object(s.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rv-set-clockset"},[a("fieldset",{staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("视频相关报警屏蔽数字")]),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",[e._v("屏蔽字标志位")]),a("el-input",{staticStyle:{width:"60px"},attrs:{size:"mini",readonly:""},model:{value:e.area1.shield,callback:function(t){e.$set(e.area1,"shield",t)},expression:"area1.shield"}}),a("el-popover",{ref:"popover5",attrs:{placement:"right",width:"240"},model:{value:e.area1.visible2,callback:function(t){e.$set(e.area1,"visible2",t)},expression:"area1.visible2"}},[a("div",[a("el-checkbox-group",{model:{value:e.area1.checkList,callback:function(t){e.$set(e.area1,"checkList",t)},expression:"area1.checkList"}},e._l(e.area1.alarmList,function(t){return a("el-checkbox",{key:t.id,staticStyle:{"margin-left":"0px"},attrs:{label:t.value,value:t.value}},[e._v(e._s(t.label))])}),1)],1),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:e.cancel}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.sumNum}},[e._v("确定")])],1)]),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popover5",arg:"popover5"}],attrs:{size:"mini"}},[e._v("...")])],1)],1)],1),a("fieldset",{staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("图像分析报警参数设置")]),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",[e._v("车辆核载人数")]),a("el-input",{staticStyle:{width:"60px"},attrs:{size:"mini",placeholder:"20",maxlength:2},model:{value:e.area2.people,callback:function(t){e.$set(e.area2,"people",e._n(t))},expression:"area2.people"}}),a("span",[e._v("客运车辆核定载客人数，视频分析结果超过时产生报警")])],1),a("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:24}},[a("span",[e._v("疲劳程度阈值")]),a("el-input",{staticStyle:{width:"60px"},attrs:{size:"mini",placeholder:"50",maxlength:3},model:{value:e.area2.tired,callback:function(t){e.$set(e.area2,"tired",e._n(t))},expression:"area2.tired"}}),a("span",[e._v("视频分析疲劳驾驶报警阈值，超过时产生报警")])],1)],1)],1),a("fieldset",{staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("终端休眠唤醒模式设置")]),a("el-row",[a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.area3.condition,callback:function(t){e.$set(e.area3,"condition",e._n(t))},expression:"area3.condition"}},[e._v("条件唤醒")]),a("div",{staticStyle:{"margin-left":"23px"}},[a("el-checkbox-group",{attrs:{disabled:!e.area3.condition},model:{value:e.area3.conditionchecked,callback:function(t){e.$set(e.area3,"conditionchecked",t)},expression:"area3.conditionchecked"}},e._l(e.area3.conditionList,function(t,l){return a("el-checkbox",{key:l,attrs:{label:t.value,value:t.value}},[e._v(e._s(t.name))])}),1)],1)],1),a("el-row",[a("el-checkbox",{attrs:{"true-label":2,"false-label":0},model:{value:e.area3.timing,callback:function(t){e.$set(e.area3,"timing",e._n(t))},expression:"area3.timing"}},[e._v("定时唤醒")]),a("el-row",{staticStyle:{"margin-left":"23px"}},[a("el-checkbox",{attrs:{indeterminate:e.area3.isIndeterminate,disabled:!e.area3.timing},on:{change:e.handleCheckAllChange},model:{value:e.area3.everyday,callback:function(t){e.$set(e.area3,"everyday",t)},expression:"area3.everyday"}},[e._v("每一天")]),a("el-checkbox-group",{attrs:{disabled:!e.area3.timing},on:{change:e.handleCheckedTimeChange},model:{value:e.area3.timingchecked,callback:function(t){e.$set(e.area3,"timingchecked",t)},expression:"area3.timingchecked"}},e._l(e.area3.timinglist,function(t,l){return a("el-checkbox",{key:l,attrs:{label:t.value,value:t.value}},[e._v(e._s(t.name))])}),1)],1),a("el-row",{staticStyle:{"margin-left":"23px"}},[a("el-checkbox",{attrs:{disabled:!e.area3.timing,"true-label":1,"false-label":0},model:{value:e.area3.time1,callback:function(t){e.$set(e.area3,"time1",e._n(t))},expression:"area3.time1"}},[e._v("时间段1唤醒/关闭时间启用")]),a("el-time-picker",{attrs:{disabled:!e.area3.timing||!e.area3.time1,"is-range":"",size:"mini",editable:!1,"picker-options":{format:"HH:mm"}},model:{value:e.area3.time1value,callback:function(t){e.$set(e.area3,"time1value",t)},expression:"area3.time1value"}})],1),a("el-row",{staticStyle:{"margin-left":"23px"}},[a("el-checkbox",{attrs:{disabled:!e.area3.timing,"true-label":2,"false-label":0},model:{value:e.area3.time2,callback:function(t){e.$set(e.area3,"time2",e._n(t))},expression:"area3.time2"}},[e._v("时间段2唤醒/关闭时间启用")]),a("el-time-picker",{attrs:{disabled:!e.area3.timing||!e.area3.time2,"is-range":"",size:"mini",editable:!1,"picker-options":{format:"HH:mm"}},model:{value:e.area3.time2value,callback:function(t){e.$set(e.area3,"time2value",t)},expression:"area3.time2value"}})],1),a("el-row",{staticStyle:{"margin-left":"23px"}},[a("el-checkbox",{attrs:{disabled:!e.area3.timing,"true-label":4,"false-label":0},model:{value:e.area3.time3,callback:function(t){e.$set(e.area3,"time3",e._n(t))},expression:"area3.time3"}},[e._v("时间段3唤醒/关闭时间启用")]),a("el-time-picker",{attrs:{disabled:!e.area3.timing||!e.area3.time3,"is-range":"",size:"mini",editable:!1,"picker-options":{format:"HH:mm"}},model:{value:e.area3.time3value,callback:function(t){e.$set(e.area3,"time3value",t)},expression:"area3.time3value"}})],1),a("el-row",{staticStyle:{"margin-left":"23px"}},[a("el-checkbox",{attrs:{disabled:!e.area3.timing,"true-label":8,"false-label":0},model:{value:e.area3.time4,callback:function(t){e.$set(e.area3,"time4",e._n(t))},expression:"area3.time4"}},[e._v("时间段4唤醒时间启用")]),a("el-time-picker",{attrs:{disabled:!e.area3.timing||!e.area3.time4,"is-range":"",size:"mini",editable:!1,"picker-options":{format:"HH:mm"}},model:{value:e.area3.time4value,callback:function(t){e.$set(e.area3,"time4value",t)},expression:"area3.time4value"}})],1)],1),a("el-row",[a("el-checkbox",{attrs:{"true-label":4,"false-label":0},model:{value:e.area3.hand,callback:function(t){e.$set(e.area3,"hand",e._n(t))},expression:"area3.hand"}},[e._v("手动唤醒")])],1)],1),e.showBtns?a("el-row",[a("el-col",{staticClass:"footer",attrs:{span:24}},[a("el-button",{nativeOn:{click:function(t){return e.saveVideoParams(t)}}},[e._v("保存")]),a("el-button",{nativeOn:{click:function(t){return e.closeDialog(t)}}},[e._v("关闭")])],1)],1):e._e()],1)},[],!1,null,null,null).exports),m={props:{options:{},showBtns:{},vInfo:{}},data:function(){return{formV:{videoOptions:[{label:"子码流",value:1},{label:"主码流",value:2}],video:1,timeMOptions:[{label:"不自动关闭",value:0},{label:"1分钟后关闭",value:1},{label:"2分钟后关闭",value:2},{label:"3分钟后关闭",value:3},{label:"4分钟后关闭",value:4},{label:"5分钟后关闭",value:5},{label:"6分钟后关闭",value:6},{label:"7分钟后关闭",value:7},{label:"8分钟后关闭",value:8},{label:"9分钟后关闭",value:9},{label:"10分钟后关闭",value:10},{label:"15分钟后关闭",value:15},{label:"30分钟后关闭",value:30},{label:"45分钟后关闭",value:45},{label:"60分钟后关闭",value:60}],closeTimeM:5,timeVOptions:[{label:"不自动关闭",value:0},{label:"1分钟后关闭",value:1},{label:"2分钟后关闭",value:2},{label:"3分钟后关闭",value:3},{label:"4分钟后关闭",value:4},{label:"5分钟后关闭",value:5},{label:"6分钟后关闭",value:6},{label:"7分钟后关闭",value:7},{label:"8分钟后关闭",value:8},{label:"9分钟后关闭",value:9},{label:"10分钟后关闭",value:10},{label:"15分钟后关闭",value:15},{label:"30分钟后关闭",value:30},{label:"45分钟后关闭",value:45},{label:"60分钟后关闭",value:60}],closeTimeV:5,screenOptions:[{label:"显示16画面",value:16},{label:"显示25画面",value:25},{label:"显示36画面",value:36}],screen:16}}},methods:{closeDialog:function(){this.options.flag=!1},saveVideoParams:function(){this.$emit("closeDialog")}}},d=(a("8a6f"),Object(s.a)(m,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rv-set-videoset"},[a("el-form",{attrs:{"label-width":"150px",model:e.formV}},[a("el-form-item",{attrs:{label:"默认请求视频"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.formV.video,callback:function(t){e.$set(e.formV,"video",t)},expression:"formV.video"}},e._l(e.formV.videoOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"自动关闭对讲和监听"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.formV.closeTimeM,callback:function(t){e.$set(e.formV,"closeTimeM",t)},expression:"formV.closeTimeM"}},e._l(e.formV.timeMOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"自动关闭视频"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.formV.closeTimeV,callback:function(t){e.$set(e.formV,"closeTimeV",t)},expression:"formV.closeTimeV"}},e._l(e.formV.timeVOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"显示最高画面"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.formV.screen,callback:function(t){e.$set(e.formV,"screen",t)},expression:"formV.screen"}},e._l(e.formV.screenOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e.showBtns?a("el-row",[a("el-col",{staticClass:"footer",attrs:{span:24}},[a("el-button",{nativeOn:{click:function(t){return e.saveVideoParams(t)}}},[e._v("保存")]),a("el-button",{nativeOn:{click:function(t){return e.closeDialog(t)}}},[e._v("关闭")])],1)],1):e._e()],1)},[],!1,null,null,null).exports),p={props:{options:{}},data:function(){return{formP:{quilityList:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3}],quility:"",params1:"",params2:"",params3:"",params4:""}}},methods:{closeDialog:function(){this.options.flag=!1},saveVideoParams:function(){}}},h=(a("4cb8"),Object(s.a)(p,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rv-set-picset"},[a("fieldset",{staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("图片参数配置")]),a("el-form",{attrs:{"label-width":"150px"}},[a("el-form-item",{attrs:{label:"图像/视频质量"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",size:"small"},model:{value:e.formP.quility,callback:function(t){e.$set(e.formP,"quility",t)},expression:"formP.quility"}},e._l(e.formP.quilityList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"亮度"}},[a("el-input-number",{staticStyle:{width:"200px"},attrs:{size:"small",min:0,max:255},model:{value:e.formP.params1,callback:function(t){e.$set(e.formP,"params1",t)},expression:"formP.params1"}})],1),a("el-form-item",{attrs:{label:"对比度"}},[a("el-input-number",{staticStyle:{width:"200px"},attrs:{size:"small",min:0,max:127},model:{value:e.formP.params2,callback:function(t){e.$set(e.formP,"params2",t)},expression:"formP.params2"}})],1),a("el-form-item",{attrs:{label:"饱和度"}},[a("el-input-number",{staticStyle:{width:"200px"},attrs:{size:"small",min:0,max:127},model:{value:e.formP.params3,callback:function(t){e.$set(e.formP,"params3",t)},expression:"formP.params3"}})],1),a("el-form-item",{attrs:{label:"色度"}},[a("el-input-number",{staticStyle:{width:"200px"},attrs:{size:"small",min:0,max:255},model:{value:e.formP.params4,callback:function(t){e.$set(e.formP,"params4",t)},expression:"formP.params4"}})],1)],1)],1),a("el-row",[a("el-col",{staticClass:"footer",attrs:{span:24}},[a("el-button",{nativeOn:{click:function(t){return e.saveVideoParams(t)}}},[e._v("保存")]),a("el-button",{nativeOn:{click:function(t){return e.closeDialog(t)}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null).exports),v=a("cebc"),f=a("8369"),b=a("2f62"),y={props:{options:{},showBtns:{},vInfo:{}},mixins:[f.a],data:function(){return{grid:{enterpriseId:this.vInfo.enterpriseId},selections:[]}},mounted:function(){var e=this;this.getVehicleLinkageInfo({vehicleId:this.vInfo.vehicleId}).then(function(t){if(t.flag){var a=t.data.split(",");setTimeout(function(){e.$refs.linkageTable.table.data.forEach(function(t){a.forEach(function(a){a==t.id&&e.$refs.linkageTable.table.toggleRowSelection(t,!0)})})},1500)}})},methods:Object(v.a)({},Object(b.b)(["getVehicleLinkageInfo","insertVehicleAlarmAutoLinkage"]),{closeDialog:function(){this.options.flag=!1},saveVideoParams:function(){var e=this,t=[];this.selections.forEach(function(e){t.push(e.id)}),this.insertVehicleAlarmAutoLinkage({vehicleId:this.vInfo.vehicleId,linkageIds:t.join(",")}).then(function(t){t.flag&&(e.options.flag=!1,e.$message.success("操作成功")),t.flag||(e.options.flag=!1,e.$message.error({message:e.$t("error."+t.errorCode)}))})},tableChange:function(e){this.selections=e}})},g=(a("a714"),Object(s.a)(y,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"linkage"},[a("cv-grid",{ref:"linkageTable",attrs:{params:e.grid,url:"/videoController/getAlarmAutoLinkage",defaultHeight:300},on:{"selection-change":e.tableChange}},[a("el-table-column",{attrs:{type:"selection",width:"60"}}),a("el-table-column",{attrs:{label:e.$t("报警类型"),prop:"alarmName"}}),a("el-table-column",{attrs:{label:e.$t("关联指令"),prop:"orderNames"}})],1),e.showBtns?a("el-row",[a("el-col",{staticClass:"footer",attrs:{span:24}},[a("el-button",{nativeOn:{click:function(t){return e.saveVideoParams(t)}}},[e._v("保存")]),a("el-button",{nativeOn:{click:function(t){return e.closeDialog(t)}}},[e._v("关闭")])],1)],1):e._e()],1)},[],!1,null,null,null).exports),S={props:{vInfo:{}},data:function(){return{AudioChannels:"",AudioCodeType:"",AudioFrameLength:"",AudioMaxChannels:"",AudioOut:"",AudioSamplingDigit:"",AudioSamplingRate:"",VideoCodeType:"",VideoMaxChannels:""}},computed:Object(v.a)({},Object(b.e)({audioCode:function(e){return e.realtimevideo.audioCode},audioSampleRate:function(e){return e.realtimevideo.audioSampleRate},audioSampleBit:function(e){return e.realtimevideo.audioSampleBit},videoCode:function(e){return e.realtimevideo.videoCode}})),mounted:function(){var e=this;this.getAVParameters(this.vInfo.vehicleId).then(function(t){Object.assign(e,t.data)})},methods:Object(v.a)({},Object(b.b)(["getAVParameters"]))},C=Object(s.a)(S,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{attrs:{"label-position":"right","label-width":"150px"}},[a("el-form-item",{attrs:{label:"音频编码:"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!0},model:{value:e.AudioCodeType,callback:function(t){e.AudioCodeType=t},expression:"AudioCodeType"}},e._l(e.audioCode,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"音频声道数:"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.AudioChannels,callback:function(t){e.AudioChannels=t},expression:"AudioChannels"}})],1),a("el-form-item",{attrs:{label:"音频采样率:"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!0},model:{value:e.AudioSamplingRate,callback:function(t){e.AudioSamplingRate=t},expression:"AudioSamplingRate"}},e._l(e.audioSampleRate,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"音频采样位数:"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!0},model:{value:e.AudioSamplingDigit,callback:function(t){e.AudioSamplingDigit=t},expression:"AudioSamplingDigit"}},e._l(e.audioSampleBit,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"音频帧长度:"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.AudioFrameLength,callback:function(t){e.AudioFrameLength=t},expression:"AudioFrameLength"}})],1),a("el-form-item",{attrs:{label:"是否支持音频输出:"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!0},model:{value:e.AudioOut,callback:function(t){e.AudioOut=t},expression:"AudioOut"}},[a("el-option",{attrs:{value:"0",label:"不支持"}}),a("el-option",{attrs:{value:"1",label:"支持"}})],1)],1),a("el-form-item",{attrs:{label:"视频编码方式:"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!0},model:{value:e.VideoCodeType,callback:function(t){e.VideoCodeType=t},expression:"VideoCodeType"}},e._l(e.videoCode,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"终端支持最大音频物理通道数："}},[a("el-input",{attrs:{disabled:!0},model:{value:e.AudioMaxChannels,callback:function(t){e.AudioMaxChannels=t},expression:"AudioMaxChannels"}})],1),a("el-form-item",{attrs:{label:"终端支持最大视频物理通道数："}},[a("el-input",{attrs:{disabled:!0},model:{value:e.VideoMaxChannels,callback:function(t){e.VideoMaxChannels=t},expression:"VideoMaxChannels"}})],1)],1)},[],!1,null,null,null).exports,x={props:{menus:{default:function(){return[]}},options:{}},components:{vps:l.a,channelList:n,oParams:o,clockSet:u,videoSet:d,picSet:h,linkAge:g,VideoTerminal:C},data:function(){return{operations:{items:[{label:"音视频参数设置",component:"vps",showBtns:!0,vInfo:{vehicleId:this.options.vid,enterpriseId:this.options.eid}},{label:"音视频通道列表",component:"channelList",showBtns:!0,vInfo:{vehicleId:this.options.vid,enterpriseId:this.options.eid,count:this.options.channelCount}},{label:"其他参数",component:"oParams",showBtns:!0,vInfo:{vehicleId:this.options.vid,enterpriseId:this.options.eid,count:this.options.channelCount}},{label:"唤醒设置",component:"clockSet",showBtns:!0,vInfo:{vehicleId:this.options.vid,enterpriseId:this.options.eid}},{label:"终端上传音频",component:"VideoTerminal",showBtns:!0,vInfo:{vehicleId:this.options.vid,enterpriseId:this.options.eid}},{label:"报警联动",component:"linkAge",showBtns:!0,vInfo:{vehicleId:this.options.vid,enterpriseId:this.options.eid}}]}}},methods:{select:function(e){this.active=e},closeDialog:function(){this.options.flag=!1},videoParams:function(e){this.$emit("videoParams",e)}},watch:{"options.flag":function(e){e||(this.options.name="",this.$store.dispatch("saveVideoPSet",{}))}},mounted:function(){}},T=(a("671b"),Object(s.a)(x,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"realtimevideo-setting"},[a("el-tabs",{staticStyle:{height:"400px"},attrs:{"tab-position":"left"}},e._l(e.operations.items,function(t,l){return a("el-tab-pane",{key:l,attrs:{label:t.label,lazy:!0}},[a("cv-scrollbar",{staticClass:"cHeight"},[a(t.component,{tag:"component",attrs:{options:e.options,showBtns:t.showBtns,vInfo:t.vInfo},on:{closeDialog:e.closeDialog,videoParams:e.videoParams}})],1)],1)}),1)],1)},[],!1,null,null,null));t.a=T.exports},b54a:function(e,t,a){"use strict";a("386b")("link",function(e){return function(t){return e(this,"a","href",t)}})},b5e9:function(e,t,a){},b62f:function(e,t,a){"use strict";var l={inject:["store"],data:function(){return{MultipleList:[{value:"0",label:"无效"},{value:"1",label:"1倍"},{value:"2",label:"2倍"},{value:"3",label:"4倍"},{value:"4",label:"8倍"},{value:"5",label:"16倍"}],PlaybackControlList:[{label:"开始回放",value:"0"},{label:"暂停回放",value:"1"},{label:"结束回放",value:"2"},{label:"快进回放",value:"3"},{label:"关键帧快退回放",value:"4"},{label:"拖动回放",value:"5"},{label:"关键帧播放",value:"6"}]}},methods:{confirm:function(){this.$emit("playBackCtrlIssue")}}},i=a("2877"),s=Object(i.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{staticClass:"replayCtrl",attrs:{"label-width":"150px"}},[a("el-form-item",{attrs:{label:"回放控制"}},[a("el-select",{staticStyle:{width:"200px",float:"left"},model:{value:e.store.replayCtrlParams.PlaybackControl,callback:function(t){e.$set(e.store.replayCtrlParams,"PlaybackControl",t)},expression:"store.replayCtrlParams.PlaybackControl"}},e._l(e.PlaybackControlList,function(e){return a("el-option",{key:e._id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3==e.store.replayCtrlParams.PlaybackControl||4==e.store.replayCtrlParams.PlaybackControl,expression:"(store.replayCtrlParams.PlaybackControl == 3 ||store.replayCtrlParams.PlaybackControl == 4)"}],attrs:{label:"快进或快退倍数"}},[a("el-select",{staticStyle:{width:"200px",float:"left"},model:{value:e.store.replayCtrlParams.Multiple,callback:function(t){e.$set(e.store.replayCtrlParams,"Multiple",t)},expression:"store.replayCtrlParams.Multiple"}},e._l(e.MultipleList,function(e){return a("el-option",{key:e._id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",[a("el-time-picker",{directives:[{name:"show",rawName:"v-show",value:5==e.store.replayCtrlParams.PlaybackControl,expression:"store.replayCtrlParams.PlaybackControl == 5"}],staticStyle:{width:"200px"},attrs:{"value-format":"HH:mm:ss",placeholder:"选择时间点"},model:{value:e.store.replayCtrlParams.DragPlaybackPosition,callback:function(t){e.$set(e.store.replayCtrlParams,"DragPlaybackPosition",t)},expression:"store.replayCtrlParams.DragPlaybackPosition"}})],1),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.confirm(t)}}},[e._v(e._s(e.$t("action.confirm")))]),a("el-button",{on:{click:function(t){e.options.flag=!1}}},[e._v(e._s(e.$t("action.cancel")))])],1)],1)},[],!1,null,null,null);t.a=s.exports},c7f8:function(e,t,a){},ca5b:function(e,t,a){"use strict";var l={inject:["store"],props:{options:{}},data:function(){return{vdataType:[{value:"0",label:"音视频"},{value:"1",label:"视频"},{value:"2",label:"双向对讲"},{value:"3",label:"监听"},{label:"中心广播",value:"4"},{label:"透传",value:"5"}],MType:[{value:"0",label:"主码流"},{value:"1",label:"子码流"}]}}},i=(a("f50e"),a("2877")),s=Object(i.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{staticClass:"realSet",attrs:{"label-position":"right","label-width":"100px"}},[a("el-form-item",{attrs:{label:"数据类型"}},[a("el-select",{staticStyle:{width:"200px",float:"left"},model:{value:e.store.realtimeSetParams.dataSelect,callback:function(t){e.$set(e.store.realtimeSetParams,"dataSelect",t)},expression:"store.realtimeSetParams.dataSelect"}},e._l(e.vdataType,function(e){return a("el-option",{key:e._id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"码流类型"}},[a("el-select",{staticStyle:{width:"200px",float:"left"},model:{value:e.store.realtimeSetParams.StreamType,callback:function(t){e.$set(e.store.realtimeSetParams,"StreamType",t)},expression:"store.realtimeSetParams.StreamType"}},e._l(e.MType,function(e){return a("el-option",{key:e._id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"自动超时关闭"}},[a("el-input-number",{staticStyle:{width:"200px",float:"left"},attrs:{"controls-position":"right",min:1},model:{value:e.store.realtimeSetParams.overTime,callback:function(t){e.$set(e.store.realtimeSetParams,"overTime",t)},expression:"store.realtimeSetParams.overTime"}}),e._v("(min)\n        ")],1),a("el-form-item",{attrs:{label:"字幕上边距"}},[a("el-input",{staticStyle:{width:"200px",float:"left"},model:{value:e.store.subTitle.y,callback:function(t){e.$set(e.store.subTitle,"y",e._n(t))},expression:"store.subTitle.y"}}),e._v("(单位:像素)\n        ")],1),a("el-form-item",{attrs:{label:"字幕左边距"}},[a("el-input",{staticStyle:{width:"200px",float:"left"},model:{value:e.store.subTitle.x,callback:function(t){e.$set(e.store.subTitle,"x",e._n(t))},expression:"store.subTitle.x"}}),e._v("(单位:像素)\n        ")],1),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.options.flag=!1}}},[e._v(e._s(e.$t("action.confirm")))]),a("el-button",{on:{click:function(t){e.options.flag=!1}}},[e._v(e._s(e.$t("action.cancel")))])],1)],1)},[],!1,null,null,null);t.a=s.exports},ceec:function(e,t,a){},d310:function(e,t,a){"use strict";var l={inject:["store"],props:{options:{}},data:function(){return{describe:""}},methods:{confirm:function(){var e=this;this.$http({url:"/screenshot/insertScreenShotInfo",mehtod:"POST",data:{vehicleId:this.store.currentV,imgDescribe:this.describe,imgStr:this.store.picCut.base64,channel:this.store.picCut.channel}}).then(function(t){t.flag&&(e.options.flag=!1,e.$message.success("描述成功！")),t.flag||(e.options.flag=!1,e.$message.error({message:e.$t("error."+t.errorCode)}))})}}},i=a("2877"),s=Object(i.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"realtimevideoMessbox"},[a("el-input",{attrs:{type:"textarea"},model:{value:e.describe,callback:function(t){e.describe=t},expression:"describe"}}),a("el-button",{staticStyle:{margin:"10px 0 0 160px"},attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确定")])],1)},[],!1,null,null,null);t.a=s.exports},dfd6:function(e,t,a){"use strict";var l=a("2c0cf");a.n(l).a},e4d3:function(e,t,a){"use strict";t.a={data:function(){return{store:{company_tree:[]}}},provide:function(){return{store:this.store}},methods:{staticTree:function(){var e=this;this.$http({url:"/enterprise/findEnterpriseOrganizationTreeList"}).then(function(t){var a=t.data,l=t.flag;e.store.company_tree=l?a:[]})},staticTreeOld:function(){var e=this;this.$http({url:"/enterprise/getEnterpriseTreeList"}).then(function(t){var a=t.data,l=t.flag;e.store.company_tree=l?a:[]})}}}},e4de:function(e,t,a){"use strict";var l=a("c7f8");a.n(l).a},f29e:function(e,t,a){"use strict";var l=a("a1a2");a.n(l).a},f50e:function(e,t,a){"use strict";var l=a("0ba5");a.n(l).a},fe7c:function(e,t,a){"use strict";var l=a("b5e9");a.n(l).a}}]);
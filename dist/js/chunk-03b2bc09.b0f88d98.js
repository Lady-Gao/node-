(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-03b2bc09"],{"00e4":function(e,l,a){"use strict";var t=a("a9ee");a.n(t).a},"2c88":function(e,l,a){"use strict";var t=a("39ec");a.n(t).a},"37b4":function(e,l,a){"use strict";var t=a("88d8");a.n(t).a},"386b":function(e,l,a){function t(e,l,a,t){var i=String(n(e)),s="<"+l;return""!==a&&(s+=" "+a+'="'+String(t).replace(o,"&quot;")+'"'),s+">"+i+"</"+l+">"}var i=a("5ca1"),s=a("79e5"),n=a("be13"),o=/"/g;e.exports=function(e,l){var a={};a[e]=l(t),i(i.P+i.F*s(function(){var l=""[e]('"');return l!==l.toLowerCase()||3<l.split('"').length}),"String",a)}},"39ec":function(e,l,a){},"3f3e":function(e,l,a){"use strict";var t=a("c19d");a.n(t).a},"42c0":function(e,l,a){},"42f6":function(e,l,a){},"492c":function(e,l,a){"use strict";var t=a("a4bc");a.n(t).a},"50fc":function(e,l,a){"use strict";var t=a("d0ff");a.n(t).a},6386:function(e,l,a){},"66a0":function(e,l,a){},"88d8":function(e,l,a){},"950c":function(e,l,a){"use strict";var t=a("66a0");a.n(t).a},"99fb":function(e,l,a){"use strict";var t=a("dc1b");a.n(t).a},a4bc:function(e,l,a){},a9ee:function(e,l,a){},ad65:function(e,l,a){},b54a:function(e,l,a){"use strict";a("386b")("link",function(e){return function(l){return e(this,"a","href",l)}})},c19d:function(e,l,a){},d0ff:function(e,l,a){},d5a5:function(e,l,a){"use strict";var t=a("ad65");a.n(t).a},d765:function(e,l,a){"use strict";var t=a("42f6");a.n(t).a},dc1b:function(e,l,a){},ded7:function(e,l,a){"use strict";a.r(l),a("c5f6"),a("28a5"),a("ac6a");var t={components:{videos:a("dc0b").a},props:{data:{default:function(){return{}}},num:{}},data:function(){return{src:null,current:0}},methods:{currentVideo:function(e){this.$store.dispatch("changeVideoCurrent",e)}}},i=(a("492c"),a("2877")),s=Object(i.a)(t,function(){var e=this,l=e.$createElement,a=e._self._c||l;return a("ul",{ref:"videoArea",staticClass:"cv-video-area"},e._l(e.data.array,function(l,t){return a("li",{key:t,class:[e.$store.getters.videoCurrent==t?"currentVideo":"","videoArea-item","col-xs-"+e.data.ruler]},[a("videos",{ref:"video",refInFor:!0,attrs:{src:l.url,title:l.title,ratio:e.data.ratio,type:"rtmp/flv"},on:{"video-click":function(l){return e.currentVideo(t)}}})],1)}),0)},[],!1,null,"d32d2bc4",null).exports,n={methods:{videoNumber:function(e,l){var a=1<arguments.length&&void 0!==l?l:"1",t=this.$store.getters.videoMess.array;t.length<e?this.$store.dispatch("addVideo",{num:e-t.length,regular:a}):t.length>e&&this.$store.dispatch("removeVideo",{num:e,regular:a})},aspectRatio:function(e){this.$store.dispatch("aspectRatio",e)},fullscreen:function(){this.$emit("fullscreen")},setting:function(){this.$emit("setting")}}},o=Object(i.a)(n,function(){var e=this,l=e.$createElement,a=e._self._c||l;return a("div",{staticClass:"cv-video-operation"},[a("ul",[a("cv-icon",{attrs:{name:"xitong9"},nativeOn:{click:function(l){return e.setting(l)}}},[e._v("设置")])],1)])},[],!1,null,null,null).exports,r={props:{vehicleInfos:{}},components:{},mixins:[""],data:function(){return{basicInfo:{},content:{activeName:"tabs0"}}},watch:{"$store.getters.gpsInfo":function(e){if(e){this.basicInfo=e,this.$refs.map.mapMethods.clearOverlays();var l=this.$refs.map.mapMethods.point({latitude:e.mapLatitude,longitude:e.mapLongitude}),a=this.$refs.map.mapMethods.mapAddpoint({longitude:Number(e.mapLongitude),latitude:Number(e.mapLatitude)},this.$filter.isOnline(e,!1,this.$store.getters.mapName),{width:32,height:32});this.$refs.map.mapMethods.addOverlay(a),this.$refs.map.mapMethods.moveToCenter(l,17)}else this.basicInfo={plateColor:""}}}},c=(a("00e4"),Object(i.a)(r,function(){var e=this,l=e.$createElement,a=e._self._c||l;return a("div",{staticClass:"vehicleInfo-video"},[a("cv-tabs",{attrs:{top:50,"force-render":!1,titles:["车辆信息","位置信息"]},model:{value:e.content.activeName,callback:function(l){e.$set(e.content,"activeName",l)},expression:"content.activeName"}},[a("div",[a("div",{staticClass:"status"},[a("h3",[e._v("状态")]),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[e._v("服务器名称:")]),a("el-col",{attrs:{span:14}},[e._v("\n                        "+e._s("/")+"\n                    ")])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[e._v("终端ID:")]),a("el-col",{attrs:{span:14}},[e._v("\n                        "+e._s(e._f("isValue")(e.basicInfo.terminalId))+"\n                    ")])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[e._v("所属公司:")]),a("el-col",{attrs:{span:14}},[e._v("\n                        "+e._s(e._f("isValue")(e.basicInfo.enterpriseName))+"\n                    ")])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[e._v("车队:")]),a("el-col",{attrs:{span:14}},[e._v("\n                        "+e._s(e._f("isValue")(e.basicInfo.fleetName))+"\n                    ")])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[e._v("状态:")]),a("el-col",{attrs:{span:14}},[e._v("\n                        "+e._s("/")+"\n                    ")])],1),a("div",{staticClass:"plateCode"},[a("div",{staticClass:"pColor",style:{borderColor:this.$filter.plateCodeColor1(e.basicInfo.plateColor)}},[a("div",{staticClass:"inColor",style:{backgroundColor:this.$filter.plateCodeColor1(e.basicInfo.plateColor),color:4==e.basicInfo.plateColor?"black":"#fff"}},[e._v("\n                            "+e._s(e.basicInfo.plateCode||"--")+"\n                        ")])])])],1),a("div",{staticClass:"basicInfo"},[a("h3",[e._v("基本信息")]),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[e._v("上报时间:")]),a("el-col",{attrs:{span:17}},[e._v("\n                        "+e._s(e._f("isValue")(e._f("format")(e.basicInfo.gpsTime,"yyyy-MM-dd HH:mm:ss")))+"\n                    ")])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[e._v("速度:")]),a("el-col",{style:{color:1==e.basicInfo.locateStatus?"#000":"red"},attrs:{span:5}},[e._v(e._s(e._f("isValue")("0.0"==e.basicInfo.dspeed?"0.0"==e.basicInfo.gpsSpeed?"":e.basicInfo.gpsSpeed:e.basicInfo.dspeed,"km/h")))]),a("el-col",{attrs:{span:5}},[e._v("总里程:")]),a("el-col",{attrs:{span:5}},[e._v(e._s(e._f("isValue")(e.basicInfo.mileage,"km")))])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[e._v("方向:")]),a("el-col",{attrs:{span:5}},[e._v(e._s(e._f("isValue")(e._f("direction")(e.basicInfo.directionText))))]),a("el-col",{attrs:{span:5}},[e._v("海拔:")]),a("el-col",{attrs:{span:5}},[e._v(e._s(e._f("isValue")(e.basicInfo.height,"m")))])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[e._v("经度:")]),a("el-col",{attrs:{span:5}},[e._v(e._s(e._f("isValue")(e._f("toFixed")(e.basicInfo.mapLongitude,6))))]),a("el-col",{attrs:{span:5}},[e._v("纬度:")]),a("el-col",{attrs:{span:5}},[e._v(e._s(e._f("isValue")(e._f("toFixed")(e.basicInfo.mapLatitude,6))))])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[e._v("当前报警:")]),a("el-col",{attrs:{span:14}},[e._v(e._s(e._f("isValue")(e.basicInfo.alarmCount)))])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[e._v("报警信息:")]),a("el-col",{attrs:{span:17}},[e._v(e._s(e._f("isValue")(e.basicInfo.alarmShortInfo)))])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[e._v("地理位置:")]),a("el-col",{attrs:{span:17}},[e._v(e._s(e._f("isValue")(e.basicInfo.locationDesc)))])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[e._v("ACC状态:")]),a("el-col",{attrs:{span:17}},[e._v(e._s(e._f("isValue")(e._f("accStatus")(e.basicInfo.accStatus))))])],1)],1),a("div",{staticClass:"operation"},[a("h3",[e._v("操作")]),a("el-button-group",{staticStyle:{"margin-top":"5px"}},[a("el-button",{attrs:{size:"small"}},[e._v("预览所有")]),a("el-button",{directives:[{name:"instruction",rawName:"v-instruction",value:{title:"文本下发",id:this.vehicleInfos.vehicleId?this.vehicleInfos.vehicleId:"",enterpriseId:this.vehicleInfos.enterpriseId?this.vehicleInfos.enterpriseId:"",size:"dialog-middle",name:"textIssue",params:{vehicleId:this.vehicleInfos.vehicleId?this.vehicleInfos.vehicleId:"",enterpriseId:this.vehicleInfos.enterpriseId?this.vehicleInfos.enterpriseId:""}},expression:"{\n                            title: '文本下发',\n                            id: this.vehicleInfos.vehicleId?this.vehicleInfos.vehicleId:'',\n                            enterpriseId: this.vehicleInfos.enterpriseId?this.vehicleInfos.enterpriseId:'',\n                            size: 'dialog-middle',\n                            name: 'textIssue', \n                            params:{vehicleId:this.vehicleInfos.vehicleId?this.vehicleInfos.vehicleId:'',enterpriseId:this.vehicleInfos.enterpriseId?this.vehicleInfos.enterpriseId:''}}"}],attrs:{size:"small"}},[e._v("文本下发")]),a("el-button",{attrs:{size:"small"}},[e._v("电话回拨")]),a("el-button",{directives:[{name:"instruction",rawName:"v-instruction",value:{title:"拍照",id:this.vehicleInfos.vehicleId?this.vehicleInfos.vehicleId:"",enterpriseId:this.vehicleInfos.enterpriseId?this.vehicleInfos.enterpriseId:"",size:"dialog-middle",name:"photo",params:{vehicleId:this.vehicleInfos.vehicleId?this.vehicleInfos.vehicleId:"",enterpriseId:this.vehicleInfos.enterpriseId?this.vehicleInfos.enterpriseId:""}},expression:"{\n                            title: '拍照',\n                            id: this.vehicleInfos.vehicleId?this.vehicleInfos.vehicleId:'',\n                            enterpriseId: this.vehicleInfos.enterpriseId?this.vehicleInfos.enterpriseId:'',\n                            size: 'dialog-middle',\n                            name: 'photo', \n                            params:{vehicleId:this.vehicleInfos.vehicleId?this.vehicleInfos.vehicleId:'',enterpriseId:this.vehicleInfos.enterpriseId?this.vehicleInfos.enterpriseId:''}}"}],attrs:{size:"small"}},[e._v("拍照")])],1)],1)]),a("div",[a(e.$store.getters.mapName,{ref:"map",tag:"component",staticStyle:{height:"360px"}})],1)])],1)},[],!1,null,null,null).exports),u={props:{options:{},showBtns:{},vInfo:{}},data:function(){return{formVS:{RTmodelOptions:[{label:"0:CBR(固定码率)",value:0},{label:"1:VBR(可变码率)",value:1},{label:"2:ABR(平均码率)",value:2},{label:"自定义",value:3}],RTmodel:0,resolutionOptions:[{label:"QCIF",value:0},{label:"CIF",value:1},{label:"WCIF",value:2},{label:"D1",value:3},{label:"WD1",value:4},{label:"720P",value:5},{label:"1080P",value:6},{label:"自定义",value:7}],resolution:0,frameOptions:[{label:1,value:1},{label:2,value:2},{label:3,value:3},{label:4,value:4},{label:5,value:5},{label:6,value:6},{label:7,value:7},{label:8,value:8},{label:9,value:9},{label:10,value:10},{label:11,value:11},{label:12,value:12},{label:13,value:13},{label:14,value:14},{label:15,value:15},{label:16,value:16},{label:17,value:17},{label:18,value:18},{label:19,value:19},{label:20,value:20},{label:21,value:21},{label:22,value:22},{label:23,value:23},{label:24,value:24},{label:25,value:25},{label:26,value:26},{label:27,value:27},{label:28,value:28},{label:29,value:29},{label:30,value:30},{label:31,value:31},{label:32,value:32},{label:33,value:33},{label:34,value:34},{label:35,value:35},{label:36,value:36},{label:37,value:37},{label:38,value:38},{label:39,value:39},{label:40,value:40},{label:41,value:41},{label:42,value:42},{label:43,value:43},{label:44,value:44},{label:45,value:45},{label:46,value:46},{label:47,value:47},{label:48,value:48},{label:49,value:49},{label:50,value:50},{label:51,value:51},{label:52,value:52},{label:53,value:53},{label:54,value:54},{label:55,value:55},{label:56,value:56},{label:57,value:57},{label:58,value:58},{label:59,value:59},{label:60,value:60},{label:61,value:61},{label:62,value:62},{label:63,value:63},{label:64,value:64},{label:65,value:65},{label:66,value:66},{label:67,value:67},{label:68,value:68},{label:69,value:69},{label:70,value:70},{label:71,value:71},{label:72,value:72},{label:73,value:73},{label:74,value:74},{label:75,value:75},{label:76,value:76},{label:77,value:77},{label:78,value:78},{label:79,value:79},{label:80,value:80},{label:81,value:81},{label:82,value:82},{label:83,value:83},{label:84,value:84},{label:85,value:85},{label:86,value:86},{label:87,value:87},{label:88,value:88},{label:89,value:89},{label:90,value:90},{label:91,value:91},{label:92,value:92},{label:93,value:93},{label:94,value:94},{label:95,value:95},{label:96,value:96},{label:97,value:97},{label:98,value:98},{label:99,value:99},{label:100,value:100},{label:101,value:101},{label:102,value:102},{label:103,value:103},{label:104,value:104},{label:105,value:105},{label:106,value:106},{label:107,value:107},{label:108,value:108},{label:109,value:109},{label:110,value:110},{label:111,value:111},{label:112,value:112},{label:113,value:113},{label:114,value:114},{label:115,value:115},{label:116,value:116},{label:117,value:117},{label:118,value:118},{label:119,value:119},{label:120,value:120}],frame:5,countF:!0,countNum:"",count1F:!0,count1Num:"",count2Num:"",count4Num:"",checkList:[],ckList:[{label:"日期和时间",value:1},{label:"车牌号码",value:2},{label:"逻辑通道号",value:4},{label:"经纬度",value:8},{label:"行驶记录速度",value:16},{label:"卫星定位速度",value:32},{label:"连续驾驶时间",value:64}]},formVC:{RTmodelOptions:[{label:"0:CBR(固定码率)",value:0},{label:"1:VBR(可变码率)",value:1},{label:"2:ABR(平均码率)",value:2},{label:"自定义",value:3}],RTmodel:0,resolutionOptions:[{label:"QCIF",value:0},{label:"CIF",value:1},{label:"WCIF",value:2},{label:"D1",value:3},{label:"WD1",value:4},{label:"720P",value:5},{label:"1080P",value:6},{label:"自定义",value:7}],resolution:0,frameOptions:[{label:1,value:1},{label:2,value:2},{label:3,value:3},{label:4,value:4},{label:5,value:5},{label:6,value:6},{label:7,value:7},{label:8,value:8},{label:9,value:9},{label:10,value:10},{label:11,value:11},{label:12,value:12},{label:13,value:13},{label:14,value:14},{label:15,value:15},{label:16,value:16},{label:17,value:17},{label:18,value:18},{label:19,value:19},{label:20,value:20},{label:21,value:21},{label:22,value:22},{label:23,value:23},{label:24,value:24},{label:25,value:25},{label:26,value:26},{label:27,value:27},{label:28,value:28},{label:29,value:29},{label:30,value:30},{label:31,value:31},{label:32,value:32},{label:33,value:33},{label:34,value:34},{label:35,value:35},{label:36,value:36},{label:37,value:37},{label:38,value:38},{label:39,value:39},{label:40,value:40},{label:41,value:41},{label:42,value:42},{label:43,value:43},{label:44,value:44},{label:45,value:45},{label:46,value:46},{label:47,value:47},{label:48,value:48},{label:49,value:49},{label:50,value:50},{label:51,value:51},{label:52,value:52},{label:53,value:53},{label:54,value:54},{label:55,value:55},{label:56,value:56},{label:57,value:57},{label:58,value:58},{label:59,value:59},{label:60,value:60},{label:61,value:61},{label:62,value:62},{label:63,value:63},{label:64,value:64},{label:65,value:65},{label:66,value:66},{label:67,value:67},{label:68,value:68},{label:69,value:69},{label:70,value:70},{label:71,value:71},{label:72,value:72},{label:73,value:73},{label:74,value:74},{label:75,value:75},{label:76,value:76},{label:77,value:77},{label:78,value:78},{label:79,value:79},{label:80,value:80},{label:81,value:81},{label:82,value:82},{label:83,value:83},{label:84,value:84},{label:85,value:85},{label:86,value:86},{label:87,value:87},{label:88,value:88},{label:89,value:89},{label:90,value:90},{label:91,value:91},{label:92,value:92},{label:93,value:93},{label:94,value:94},{label:95,value:95},{label:96,value:96},{label:97,value:97},{label:98,value:98},{label:99,value:99},{label:100,value:100},{label:101,value:101},{label:102,value:102},{label:103,value:103},{label:104,value:104},{label:105,value:105},{label:106,value:106},{label:107,value:107},{label:108,value:108},{label:109,value:109},{label:110,value:110},{label:111,value:111},{label:112,value:112},{label:113,value:113},{label:114,value:114},{label:115,value:115},{label:116,value:116},{label:117,value:117},{label:118,value:118},{label:119,value:119},{label:120,value:120}],frame:5,countF:!0,countNum:"",count1F:!0,count1Num:"",count2Num:"",count4Num:""},audio:!1}},methods:{RTchange:function(e){this.formVS.countF=3!=e},RRchange:function(e){this.formVS.count1F=7!=e},RTchange1:function(e){this.formVC.countF=3!=e},RRchange1:function(e){this.formVC.count1F=7!=e},saveVideoParams:function(){var e=this,l=0;0!=this.formVS.checkList.length&&this.formVS.checkList.forEach(function(e){l+=e});var a={vehicleId:this.vInfo.vehicleId,enterpriseId:this.vInfo.enterpriseId,RTSCodeType:this.formVS.countF?this.formVS.RTmodel:this.formVS.countNum,RTSResolution:this.formVS.count1F?this.formVS.resolution:this.formVS.count1Num,RTSKeyframeInterval:this.formVS.count2Num,RTSFramerate:this.formVS.frame,RTSCoderate:Number(this.formVS.count4Num),SSCodeType:this.formVC.countF?this.formVC.RTmodel:this.formVC.countNum,SSResolution:this.formVC.count1F?this.formVC.resolution:this.formVC.count1Num,SSKeyframeInterval:this.formVC.count2Num,SSFramerate:this.formVC.frame,SSCoderate:Number(this.formVC.count4Num),OSD:l,OpenAudioOut:this.audio?1:0};null!=this.options.isPopover&&this.options.isPopover?(a.checkedlist=this.formVS.checkList,this.$store.dispatch("saveVideoPSet",{params:a,channel:this.options.channel}),this.closeDialog()):this.$http({url:"/sendVideoOrder/sendVideoParameterSite",params:a}).then(function(l){l.flag&&(e.closeDialog(),e.$message.success("指令发送成功"))})},closeDialog:function(){this.options.flag=!1}},watch:{"options.flag":function(e){e||(this.options.isPopover=!1,this.options.name="")}},mounted:function(){if(this.options.isPopover&&this.$store.getters.videoPSet[this.options.channel]){var e=this.$store.getters.videoPSet[this.options.channel];100<=e.RTSCodeType?(this.formVS.RTmodel=3,this.formVS.countF=!1,this.formVS.countNum=e.RTSCodeType):this.formVS.RTmodel=e.RTSCodeType,100<=e.RTSResolution?(this.formVS.resolution=7,this.formVS.count1F=!1,this.formVS.count1Num=e.RTSResolution):this.formVS.resolution=e.RTSResolution,this.formVS.count2Num=e.RTSKeyframeInterval,this.formVS.frame=e.RTSFramerate+"",this.formVS.count4Num=e.RTSCoderate,100<=e.SSCodeType?(this.formVC.RTmodel=3,this.formVC.countF=!1,this.formVC.countNum=e.SSCodeType):this.formVC.RTmodel=e.SSCodeType,100<=e.SSResolution?(this.formVC.resolution=7,this.formVC.count1F=!1,this.formVC.count1Num=e.SSResolution):this.formVC.resolution=e.SSResolution,this.formVC.count2Num=e.SSKeyframeInterval,this.formVC.frame=e.SSFramerate+"",this.formVC.count4Num=e.SSCoderate,this.formVS.checkList=e.checkedlist,this.audio=0!=e.OpenAudioOut}}},m=(a("f7a4"),Object(i.a)(u,function(){var e=this,l=e.$createElement,a=e._self._c||l;return a("div",{staticClass:"videoParamsSet"},[a("fieldset",{staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("实时流参数配置")]),a("el-form",{attrs:{"label-width":"150px"}},[a("el-form-item",{attrs:{label:"实时流编码模式"}},[a("el-select",{staticStyle:{width:"195px"},attrs:{placeholder:"请选择"},on:{change:e.RTchange},model:{value:e.formVS.RTmodel,callback:function(l){e.$set(e.formVS,"RTmodel",l)},expression:"formVS.RTmodel"}},e._l(e.formVS.RTmodelOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),a("el-input-number",{attrs:{size:"small",disabled:e.formVS.countF,min:100,max:127},model:{value:e.formVS.countNum,callback:function(l){e.$set(e.formVS,"countNum",l)},expression:"formVS.countNum"}})],1),a("el-form-item",{attrs:{label:"实时流分辨率"}},[a("el-select",{staticStyle:{width:"195px"},attrs:{size:"small",placeholder:"请选择"},on:{change:e.RRchange},model:{value:e.formVS.resolution,callback:function(l){e.$set(e.formVS,"resolution",l)},expression:"formVS.resolution"}},e._l(e.formVS.resolutionOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),a("el-input-number",{attrs:{size:"small",disabled:e.formVS.count1F,min:100,max:127},model:{value:e.formVS.count1Num,callback:function(l){e.$set(e.formVS,"count1Num",l)},expression:"formVS.count1Num"}})],1),a("el-form-item",{attrs:{label:"实时流关键帧间隔"}},[a("el-input-number",{staticStyle:{width:"195px"},attrs:{size:"small",min:1,max:1e3},model:{value:e.formVS.count2Num,callback:function(l){e.$set(e.formVS,"count2Num",l)},expression:"formVS.count2Num"}})],1),a("el-form-item",{attrs:{label:"实时流目标帧率"}},[a("el-select",{staticStyle:{width:"195px"},attrs:{size:"small",placeholder:"请选择"},model:{value:e.formVS.frame,callback:function(l){e.$set(e.formVS,"frame",l)},expression:"formVS.frame"}},e._l(e.formVS.frameOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"实时流目标码率"}},[a("el-input",{staticStyle:{width:"195px"},attrs:{size:"small"},model:{value:e.formVS.count4Num,callback:function(l){e.$set(e.formVS,"count4Num",l)},expression:"formVS.count4Num"}}),e._v("(kbps)\n            ")],1)],1)],1),a("fieldset",{staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("储存流参数配置")]),a("el-form",{attrs:{"label-width":"150px"}},[a("el-form-item",{attrs:{label:"储存流编码模式"}},[a("el-select",{staticStyle:{width:"195px"},attrs:{placeholder:"请选择",size:"small"},on:{change:e.RTchange1},model:{value:e.formVC.RTmodel,callback:function(l){e.$set(e.formVC,"RTmodel",l)},expression:"formVC.RTmodel"}},e._l(e.formVC.RTmodelOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),a("el-input-number",{attrs:{size:"small",disabled:e.formVC.countF,min:100,max:127},model:{value:e.formVC.countNum,callback:function(l){e.$set(e.formVC,"countNum",l)},expression:"formVC.countNum"}})],1),a("el-form-item",{attrs:{label:"储存流分辨率"}},[a("el-select",{staticStyle:{width:"195px"},attrs:{size:"small",placeholder:"请选择"},on:{change:e.RRchange1},model:{value:e.formVC.resolution,callback:function(l){e.$set(e.formVC,"resolution",l)},expression:"formVC.resolution"}},e._l(e.formVC.resolutionOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),a("el-input-number",{attrs:{size:"small",disabled:e.formVC.count1F,min:100,max:127},model:{value:e.formVC.count1Num,callback:function(l){e.$set(e.formVC,"count1Num",l)},expression:"formVC.count1Num"}})],1),a("el-form-item",{attrs:{label:"储存流关键帧间隔"}},[a("el-input-number",{staticStyle:{width:"195px"},attrs:{size:"small",min:1,max:1e3},model:{value:e.formVC.count2Num,callback:function(l){e.$set(e.formVC,"count2Num",l)},expression:"formVC.count2Num"}})],1),a("el-form-item",{attrs:{label:"储存流目标帧率"}},[a("el-select",{staticStyle:{width:"195px"},attrs:{size:"small",placeholder:"请选择"},model:{value:e.formVC.frame,callback:function(l){e.$set(e.formVC,"frame",l)},expression:"formVC.frame"}},e._l(e.formVC.frameOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"储存流目标码率"}},[a("el-input",{staticStyle:{width:"195px"},attrs:{size:"small"},model:{value:e.formVC.count4Num,callback:function(l){e.$set(e.formVC,"count4Num",l)},expression:"formVC.count4Num"}}),e._v("(kbps)\n            ")],1)],1)],1),a("fieldset",{staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("OSD字幕叠加设置")]),a("el-checkbox-group",{model:{value:e.formVS.checkList,callback:function(l){e.$set(e.formVS,"checkList",l)},expression:"formVS.checkList"}},e._l(e.formVS.ckList,function(l){return a("el-checkbox",{key:l.id,attrs:{label:l.value,value:l.value}},[e._v(e._s(l.label))])}),1)],1),a("fieldset",{staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("音频输出")]),a("el-checkbox",{model:{value:e.audio,callback:function(l){e.audio=l},expression:"audio"}},[e._v("音频输出")])],1),e.showBtns?a("el-row",[a("el-col",{staticClass:"footer",attrs:{span:24}},[a("el-button",{nativeOn:{click:function(l){return e.saveVideoParams(l)}}},[e._v("保存")]),a("el-button",{nativeOn:{click:function(l){return e.closeDialog(l)}}},[e._v("关闭")])],1)],1):e._e()],1)},[],!1,null,null,null).exports),v=(a("b54a"),{props:{options:{},showBtns:{},vInfo:{}},data:function(){return{area1:{first:0},area2:{second:0},area3:{third:0},common:{selectOptions:[{label:0,value:0},{label:1,value:1},{label:2,value:2},{label:3,value:3},{label:4,value:4},{label:5,value:5},{label:6,value:6},{label:7,value:7},{label:8,value:8}],itemOptions1:[{physicsNum:1,logicNum:0,link:0,disabled:!0},{physicsNum:2,logicNum:0,link:0,disabled:!0},{physicsNum:3,logicNum:0,link:0,disabled:!0},{physicsNum:4,logicNum:0,link:0,disabled:!0},{physicsNum:5,logicNum:0,link:0,disabled:!0},{physicsNum:6,logicNum:0,link:0,disabled:!0},{physicsNum:7,logicNum:0,link:0,disabled:!0},{physicsNum:8,logicNum:0,link:0,disabled:!0}],itemOptions2:[{physicsNum:1,logicNum:0,link:0,disabled:!0},{physicsNum:2,logicNum:0,link:0,disabled:!0},{physicsNum:3,logicNum:0,link:0,disabled:!0},{physicsNum:4,logicNum:0,link:0,disabled:!0},{physicsNum:5,logicNum:0,link:0,disabled:!0},{physicsNum:6,logicNum:0,link:0,disabled:!0},{physicsNum:7,logicNum:0,link:0,disabled:!0},{physicsNum:8,logicNum:0,link:0,disabled:!0}],itemOptions3:[{physicsNum:1,logicNum:0,link:0,disabled:!0},{physicsNum:2,logicNum:0,link:0,disabled:!0},{physicsNum:3,logicNum:0,link:0,disabled:!0},{physicsNum:4,logicNum:0,link:0,disabled:!0},{physicsNum:5,logicNum:0,link:0,disabled:!0},{physicsNum:6,logicNum:0,link:0,disabled:!0},{physicsNum:7,logicNum:0,link:0,disabled:!0},{physicsNum:8,logicNum:0,link:0,disabled:!0}]}}},mounted:function(){},methods:{selectChange:function(e,l){0==e?this.common[l].forEach(function(e){e.disabled=!0}):this.common[l].forEach(function(l,a){a-0+1<=e&&(l.disabled=!1),e<a-0+1&&(l.disabled=!0)})},saveVideoParams:function(){var e=this,l=[];["itemOptions1","itemOptions2","itemOptions3"].forEach(function(a){var t,i;switch(a){case"itemOptions1":t=e.area1.first,i=0;break;case"itemOptions2":t=e.area2.second,i=1;break;case"itemOptions3":t=e.area3.third,i=2}e.common[a].forEach(function(e,a){a<t&&l.push({PhysicalChannelNum:e.physicsNum,LogicalChannelNum:e.logicNum,ChannelType:i,ConnectPTZ:e.link})})});var a={AVChannelNums:this.area1.first,AudioChannelNums:this.area2.second,VideoChannelNums:this.area3.third,LstAVChannel:l},t={vehicleId:this.options.vid,enterpriseId:this.options.eid,params:JSON.stringify(a)};this.$store.dispatch("sendVideoChannelListSite",t).then(function(l){l.flag?e.$message.success("指令发送成功!"):e.$message.error("指令发送失败!"),e.closeDialog()})},closeDialog:function(){this.options.flag=!1}}}),d=(a("2c88"),Object(i.a)(v,function(){var e=this,l=e.$createElement,a=e._self._c||l;return a("div",{staticClass:"channelList"},[a("fieldset",{staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("音视频通道参数配置")]),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",[e._v("音视频通道总数:")]),a("el-select",{staticClass:"channelAll",attrs:{size:"small",placeholder:"请选择"},on:{change:function(l){return e.selectChange(e.area1.first,"itemOptions1")}},model:{value:e.area1.first,callback:function(l){e.$set(e.area1,"first",l)},expression:"area1.first"}},e._l(e.common.selectOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._l(e.common.itemOptions1,function(l){return a("el-row",{key:l._id,staticClass:"list-item"},[a("el-col",{attrs:{span:8}},[a("span",[e._v("物理通道号:"+e._s(l.physicsNum))])]),a("el-col",{attrs:{span:8}},[a("span",[e._v("逻辑通道号:")]),a("el-input",{staticStyle:{width:"80px"},attrs:{size:"small",disabled:l.disabled,maxlength:2},model:{value:l.logicNum,callback:function(a){e.$set(l,"logicNum",e._n(a))},expression:"item.logicNum"}})],1),a("el-col",{attrs:{span:8}},[a("el-checkbox",{attrs:{disabled:l.disabled,"true-label":1,"false-label":0},model:{value:l.link,callback:function(a){e.$set(l,"link",a)},expression:"item.link"}},[e._v("连接云台")])],1)],1)})],2),a("fieldset",{staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("音频通道参数配置")]),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",[e._v("音频通道总数:")]),a("el-select",{staticClass:"channelAll",attrs:{size:"small",placeholder:"请选择"},on:{change:function(l){return e.selectChange(e.area2.second,"itemOptions2")}},model:{value:e.area2.second,callback:function(l){e.$set(e.area2,"second",l)},expression:"area2.second"}},e._l(e.common.selectOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._l(e.common.itemOptions2,function(l){return a("el-row",{key:l._id,staticClass:"list-item"},[a("el-col",{attrs:{span:8}},[a("span",[e._v("物理通道号:"+e._s(l.physicsNum))])]),a("el-col",{attrs:{span:8}},[a("span",[e._v("逻辑通道号:")]),a("el-input",{staticStyle:{width:"80px"},attrs:{size:"small",disabled:l.disabled,maxlength:2},model:{value:l.logicNum,callback:function(a){e.$set(l,"logicNum",e._n(a))},expression:"item.logicNum"}})],1),a("el-col",{attrs:{span:8}},[a("el-checkbox",{attrs:{disabled:l.disabled,"true-label":1,"false-label":0},model:{value:l.link,callback:function(a){e.$set(l,"link",a)},expression:"item.link"}},[e._v("连接云台")])],1)],1)})],2),a("fieldset",{staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("视频通道参数配置")]),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",[e._v("视频通道总数:")]),a("el-select",{staticClass:"channelAll",attrs:{size:"small",placeholder:"请选择"},on:{change:function(l){return e.selectChange(e.area3.third,"itemOptions3")}},model:{value:e.area3.third,callback:function(l){e.$set(e.area3,"third",l)},expression:"area3.third"}},e._l(e.common.selectOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._l(e.common.itemOptions3,function(l){return a("el-row",{key:l._id,staticClass:"list-item"},[a("el-col",{attrs:{span:8}},[a("span",[e._v("物理通道号:"+e._s(l.physicsNum))])]),a("el-col",{attrs:{span:8}},[a("span",[e._v("逻辑通道号:")]),a("el-input",{staticStyle:{width:"80px"},attrs:{size:"small",disabled:l.disabled,maxlength:2},model:{value:l.logicNum,callback:function(a){e.$set(l,"logicNum",e._n(a))},expression:"item.logicNum"}})],1),a("el-col",{attrs:{span:8}},[a("el-checkbox",{attrs:{disabled:l.disabled,"true-label":1,"false-label":0},model:{value:l.link,callback:function(a){e.$set(l,"link",a)},expression:"item.link"}},[e._v("连接云台")])],1)],1)})],2),e.showBtns?a("el-row",[a("el-col",{staticClass:"footer",attrs:{span:24}},[a("el-button",{nativeOn:{click:function(l){return e.saveVideoParams(l)}}},[e._v("保存")]),a("el-button",{nativeOn:{click:function(l){return e.closeDialog(l)}}},[e._v("关闭")])],1)],1):e._e(),a("div",{staticStyle:{opacity:"0"}},[e._v("placeholder")])],1)},[],!1,null,null,null).exports),p=(a("456d"),{props:{options:{},showBtns:{},vInfo:{}},data:function(){return{area1:{first:0,selectOptions:[{label:0,value:0},{label:1,value:1},{label:2,value:2},{label:3,value:3},{label:4,value:4},{label:5,value:5},{label:6,value:6},{label:7,value:7},{label:8,value:8}],itemOptions1:[{physicsNum:1,logicNum:1,link:!1,disabled:!0},{physicsNum:2,logicNum:2,link:!1,disabled:!0},{physicsNum:3,logicNum:3,link:!1,disabled:!0},{physicsNum:4,logicNum:4,link:!1,disabled:!0},{physicsNum:5,logicNum:5,link:!1,disabled:!0},{physicsNum:6,logicNum:6,link:!1,disabled:!0},{physicsNum:7,logicNum:7,link:!1,disabled:!0},{physicsNum:8,logicNum:8,link:!1,disabled:!0}]},area2:{num1:20,num2:5,num3:1}}},methods:{selectChange:function(e){0==e?this.area1.itemOptions1.forEach(function(e){e.disabled=!0}):this.area1.itemOptions1.forEach(function(l,a){a-0+1<=e&&(l.disabled=!1),e<a-0+1&&(l.disabled=!0)})},videoParams:function(e){this.$emit("videoParams",{flag:!0,channel:e-0+1})},closeDialog:function(){this.options.flag=!1},saveVideoParams:function(){for(var e=this,l=this.$store.getters.videoPSet,a=Object.keys(l).length,t=[],i=0;i<a;i++)l[i+1].LogicalChannel=this.area1.itemOptions1[i].logicNum,t.push(l[i+1]);var s={StorageThreshold:this.area2.num1,Duration:this.area2.num2,MarkStartTime:this.area2.num3},n={ChannleNums:a,LstVideoChannel:t},o={vehicleId:this.options.vid,enterpriseId:this.options.eid,param1:JSON.stringify(n),param2:JSON.stringify(s)};this.$store.dispatch("sendSingleVideoChannelAndSpecialAlarmVideoSite",o).then(function(l){l.flag?e.$message.success("指令发送成功！"):e.$message.error("指令发送失败！"),e.closeDialog()})}}}),b=(a("99fb"),Object(i.a)(p,function(){var e=this,l=e.$createElement,a=e._self._c||l;return a("div",{staticClass:"othersParams"},[a("fieldset",{staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("单独视频通道参数设置")]),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",[e._v("视频通道总数:")]),a("el-select",{staticStyle:{width:"100px"},attrs:{size:"small",placeholder:"请选择"},on:{change:e.selectChange},model:{value:e.area1.first,callback:function(l){e.$set(e.area1,"first",e._n(l))},expression:"area1.first"}},e._l(e.area1.selectOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._l(e.area1.itemOptions1,function(l,t){return a("el-row",{key:l._id,staticClass:"list-item"},[a("el-col",{attrs:{span:12}},[a("span",[e._v("逻辑通道号:")]),a("el-input",{staticStyle:{width:"80px"},attrs:{size:"small",disabled:l.disabled,maxlength:2},model:{value:l.logicNum,callback:function(a){e.$set(l,"logicNum",a)},expression:"item.logicNum"}})],1),a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{size:"small",disabled:l.disabled},nativeOn:{click:function(l){return e.videoParams(t)}}},[e._v("视频参数")])],1)],1)})],2),a("fieldset",{staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("特殊报警录像占用主存储器存储阈值百分比")]),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",[e._v("存储阈值")]),a("el-input",{staticStyle:{width:"60px"},attrs:{size:"small"},model:{value:e.area2.num1,callback:function(l){e.$set(e.area2,"num1",e._n(l))},expression:"area2.num1"}}),a("span",[e._v("特殊报警录像占用主存储器存储阈值百分比，取值1～99，默认值为20")])],1),a("el-col",{attrs:{span:24}},[a("span",[e._v("持续时间")]),a("el-input",{staticStyle:{width:"60px"},attrs:{size:"small"},model:{value:e.area2.num2,callback:function(l){e.$set(e.area2,"num2",e._n(l))},expression:"area2.num2"}}),a("span",[e._v("(0～255)特殊报警录像的最长持续时间，单位为分钟(min)，默认值为 5")])],1),a("el-col",{attrs:{span:24}},[a("span",[e._v("起始时间")]),a("el-input",{staticStyle:{width:"60px"},attrs:{size:"small"},model:{value:e.area2.num3,callback:function(l){e.$set(e.area2,"num3",e._n(l))},expression:"area2.num3"}}),a("span",[e._v("(0～255)特殊报警发生前进行标记的录像时间，单位为分钟(min)，默认值为 1")])],1)],1)],1),e.showBtns?a("el-row",[a("el-col",{staticClass:"footer",attrs:{span:24}},[a("el-button",{nativeOn:{click:function(l){return e.saveVideoParams(l)}}},[e._v("保存")]),a("el-button",{nativeOn:{click:function(l){return e.closeDialog(l)}}},[e._v("关闭")])],1)],1):e._e()],1)},[],!1,null,null,null).exports),h={props:{options:{},showBtns:{},vInfo:{}},data:function(){return{area1:{shield:0,checkList:[],alarmList:[{label:"视频信号丢失报警",value:1},{label:"视频信号遮挡报警",value:2},{label:"存储单元故障报警",value:4},{label:"其他视频设备故障报警",value:8},{label:"客车超员报警",value:16},{label:"异常驾驶行为报警",value:32},{label:"特殊报警录像达到存储阈值报警",value:64}],visible2:!1},area2:{people:"",tired:""},area3:{condition:0,conditionList:[{name:"紧急报警",value:1},{name:"碰撞侧翻报警",value:2},{name:"车辆开门",value:4}],conditionchecked:[],timing:0,timinglist:[{name:"周一",value:1},{name:"周二",value:2},{name:"周三",value:4},{name:"周四",value:8},{name:"周五",value:16},{name:"周六",value:32},{name:"周日",value:64}],timingchecked:[],isIndeterminate:!1,everyday:!1,time1:0,time2:0,time3:0,time4:0,time1value:[new Date(2018,1,1,0,0),new Date(2018,1,1,23,59)],time2value:[new Date(2018,1,1,0,0),new Date(2018,1,1,23,59)],time3value:[new Date(2018,1,1,0,0),new Date(2018,1,1,23,59)],time4value:[new Date(2018,1,1,0,0),new Date(2018,1,1,23,59)],hand:0}}},methods:{closeDialog:function(){this.options.flag=!1},sumNum:function(){this.area1.visible2=!1;var e=0;this.area1.checkList.forEach(function(l){e+=l-0}),this.area1.shield=0==e?"":e},cancel:function(){this.area1.visible2=!1,this.area1.checkList=[]},handleCheckAllChange:function(e){this.area3.timingchecked=e?[1,2,4,8,16,32,64]:[]},handleCheckedTimeChange:function(e){var l=e.length;this.area3.everyday=l===this.area3.timinglist.length,this.isIndeterminate=0<l&&l<this.area3.timinglist.length},saveVideoParams:function(){var e=this;if("number"!=typeof this.area2.people||"number"!=typeof this.area2.tired)return this.$message.warning("请填写正确的图像分析报警参数"),!1;var l=0;this.area3.conditionchecked.forEach(function(e){l+=e-0});var a=0;this.area3.timingchecked.forEach(function(e){a+=e-0});var t={AwakenMode:this.area3.condition+this.area3.timing+this.area3.hand,AwakenConditionType:l,TimeingAwaken:a,DailyAwakenParameters:{EnableTimeingAwaken:this.area3.time1+this.area3.time2+this.area3.time3+this.area3.time4,AwakenTime1:this.$filter.format(this.area3.time1value[0],"HH:mm"),CloseTime1:this.$filter.format(this.area3.time1value[1],"HH:mm"),AwakenTime2:this.$filter.format(this.area3.time2value[0],"HH:mm"),CloseTime2:this.$filter.format(this.area3.time2value[1],"HH:mm"),AwakenTime3:this.$filter.format(this.area3.time3value[0],"HH:mm"),CloseTime3:this.$filter.format(this.area3.time3value[1],"HH:mm"),AwakenTime4:this.$filter.format(this.area3.time4value[0],"HH:mm"),CloseTime4:this.$filter.format(this.area3.time4value[1],"HH:mm")}},i={SeatingCapacity:this.area2.people,FatigueThreshold:this.area2.tired},s={vehicleId:this.options.vid,enterpriseId:this.options.eid,param1:JSON.stringify(t),param2:JSON.stringify(i),param3:this.area1.shield};this.$store.dispatch("sendWakeUpVideoSite",s).then(function(l){l.flag?e.$message.success("指令发送成功！"):e.$message.error("指令发送失败！"),e.closeDialog()})}}},f=(a("ea27"),Object(i.a)(h,function(){var e=this,l=e.$createElement,a=e._self._c||l;return a("div",{staticClass:"rv-set-clockset"},[a("fieldset",{staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("视频相关报警屏蔽数字")]),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",[e._v("屏蔽字标志位")]),a("el-input",{staticStyle:{width:"60px"},attrs:{size:"mini",readonly:""},model:{value:e.area1.shield,callback:function(l){e.$set(e.area1,"shield",l)},expression:"area1.shield"}}),a("el-popover",{ref:"popover5",attrs:{placement:"right",width:"240"},model:{value:e.area1.visible2,callback:function(l){e.$set(e.area1,"visible2",l)},expression:"area1.visible2"}},[a("div",[a("el-checkbox-group",{model:{value:e.area1.checkList,callback:function(l){e.$set(e.area1,"checkList",l)},expression:"area1.checkList"}},e._l(e.area1.alarmList,function(l){return a("el-checkbox",{key:l.id,staticStyle:{"margin-left":"0px"},attrs:{label:l.value,value:l.value}},[e._v(e._s(l.label))])}),1)],1),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:e.cancel}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.sumNum}},[e._v("确定")])],1)]),a("el-button",{directives:[{name:"popover",rawName:"v-popover:popover5",arg:"popover5"}],attrs:{size:"mini"}},[e._v("...")])],1)],1)],1),a("fieldset",{staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("图像分析报警参数设置")]),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",[e._v("车辆核载人数")]),a("el-input",{staticStyle:{width:"60px"},attrs:{size:"mini",placeholder:"20",maxlength:2},model:{value:e.area2.people,callback:function(l){e.$set(e.area2,"people",e._n(l))},expression:"area2.people"}}),a("span",[e._v("客运车辆核定载客人数，视频分析结果超过时产生报警")])],1),a("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:24}},[a("span",[e._v("疲劳程度阈值")]),a("el-input",{staticStyle:{width:"60px"},attrs:{size:"mini",placeholder:"50",maxlength:3},model:{value:e.area2.tired,callback:function(l){e.$set(e.area2,"tired",e._n(l))},expression:"area2.tired"}}),a("span",[e._v("视频分析疲劳驾驶报警阈值，超过时产生报警")])],1)],1)],1),a("fieldset",{staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("终端休眠唤醒模式设置")]),a("el-row",[a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.area3.condition,callback:function(l){e.$set(e.area3,"condition",e._n(l))},expression:"area3.condition"}},[e._v("条件唤醒")]),a("div",{staticStyle:{"margin-left":"23px"}},[a("el-checkbox-group",{attrs:{disabled:!e.area3.condition},model:{value:e.area3.conditionchecked,callback:function(l){e.$set(e.area3,"conditionchecked",l)},expression:"area3.conditionchecked"}},e._l(e.area3.conditionList,function(l,t){return a("el-checkbox",{key:t,attrs:{label:l.value,value:l.value}},[e._v(e._s(l.name))])}),1)],1)],1),a("el-row",[a("el-checkbox",{attrs:{"true-label":2,"false-label":0},model:{value:e.area3.timing,callback:function(l){e.$set(e.area3,"timing",e._n(l))},expression:"area3.timing"}},[e._v("定时唤醒")]),a("el-row",{staticStyle:{"margin-left":"23px"}},[a("el-checkbox",{attrs:{indeterminate:e.area3.isIndeterminate,disabled:!e.area3.timing},on:{change:e.handleCheckAllChange},model:{value:e.area3.everyday,callback:function(l){e.$set(e.area3,"everyday",l)},expression:"area3.everyday"}},[e._v("每一天")]),a("el-checkbox-group",{attrs:{disabled:!e.area3.timing},on:{change:e.handleCheckedTimeChange},model:{value:e.area3.timingchecked,callback:function(l){e.$set(e.area3,"timingchecked",l)},expression:"area3.timingchecked"}},e._l(e.area3.timinglist,function(l,t){return a("el-checkbox",{key:t,attrs:{label:l.value,value:l.value}},[e._v(e._s(l.name))])}),1)],1),a("el-row",{staticStyle:{"margin-left":"23px"}},[a("el-checkbox",{attrs:{disabled:!e.area3.timing,"true-label":1,"false-label":0},model:{value:e.area3.time1,callback:function(l){e.$set(e.area3,"time1",e._n(l))},expression:"area3.time1"}},[e._v("时间段1唤醒时间启用")]),a("el-time-picker",{attrs:{disabled:!e.area3.timing||!e.area3.time1,"is-range":"",size:"mini",editable:!1,"picker-options":{format:"HH:mm"}},model:{value:e.area3.time1value,callback:function(l){e.$set(e.area3,"time1value",l)},expression:"area3.time1value"}})],1),a("el-row",{staticStyle:{"margin-left":"23px"}},[a("el-checkbox",{attrs:{disabled:!e.area3.timing,"true-label":2,"false-label":0},model:{value:e.area3.time2,callback:function(l){e.$set(e.area3,"time2",e._n(l))},expression:"area3.time2"}},[e._v("时间段2唤醒时间启用")]),a("el-time-picker",{attrs:{disabled:!e.area3.timing||!e.area3.time2,"is-range":"",size:"mini",editable:!1,"picker-options":{format:"HH:mm"}},model:{value:e.area3.time2value,callback:function(l){e.$set(e.area3,"time2value",l)},expression:"area3.time2value"}})],1),a("el-row",{staticStyle:{"margin-left":"23px"}},[a("el-checkbox",{attrs:{disabled:!e.area3.timing,"true-label":4,"false-label":0},model:{value:e.area3.time3,callback:function(l){e.$set(e.area3,"time3",e._n(l))},expression:"area3.time3"}},[e._v("时间段3唤醒时间启用")]),a("el-time-picker",{attrs:{disabled:!e.area3.timing||!e.area3.time3,"is-range":"",size:"mini",editable:!1,"picker-options":{format:"HH:mm"}},model:{value:e.area3.time3value,callback:function(l){e.$set(e.area3,"time3value",l)},expression:"area3.time3value"}})],1),a("el-row",{staticStyle:{"margin-left":"23px"}},[a("el-checkbox",{attrs:{disabled:!e.area3.timing,"true-label":8,"false-label":0},model:{value:e.area3.time4,callback:function(l){e.$set(e.area3,"time4",e._n(l))},expression:"area3.time4"}},[e._v("时间段4唤醒时间启用")]),a("el-time-picker",{attrs:{disabled:!e.area3.timing||!e.area3.time4,"is-range":"",size:"mini",editable:!1,"picker-options":{format:"HH:mm"}},model:{value:e.area3.time4value,callback:function(l){e.$set(e.area3,"time4value",l)},expression:"area3.time4value"}})],1)],1),a("el-row",[a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.area3.hand,callback:function(l){e.$set(e.area3,"hand",e._n(l))},expression:"area3.hand"}},[e._v("手动唤醒")])],1)],1),e.showBtns?a("el-row",[a("el-col",{staticClass:"footer",attrs:{span:24}},[a("el-button",{nativeOn:{click:function(l){return e.saveVideoParams(l)}}},[e._v("保存")]),a("el-button",{nativeOn:{click:function(l){return e.closeDialog(l)}}},[e._v("关闭")])],1)],1):e._e()],1)},[],!1,null,null,null).exports),g={props:{options:{},showBtns:{},vInfo:{}},data:function(){return{formV:{videoOptions:[{label:"子码流",value:1},{label:"主码流",value:2}],video:1,timeMOptions:[{label:"不自动关闭",value:0},{label:"1分钟后关闭",value:1},{label:"2分钟后关闭",value:2},{label:"3分钟后关闭",value:3},{label:"4分钟后关闭",value:4},{label:"5分钟后关闭",value:5},{label:"6分钟后关闭",value:6},{label:"7分钟后关闭",value:7},{label:"8分钟后关闭",value:8},{label:"9分钟后关闭",value:9},{label:"10分钟后关闭",value:10},{label:"15分钟后关闭",value:15},{label:"30分钟后关闭",value:30},{label:"45分钟后关闭",value:45},{label:"60分钟后关闭",value:60}],closeTimeM:5,timeVOptions:[{label:"不自动关闭",value:0},{label:"1分钟后关闭",value:1},{label:"2分钟后关闭",value:2},{label:"3分钟后关闭",value:3},{label:"4分钟后关闭",value:4},{label:"5分钟后关闭",value:5},{label:"6分钟后关闭",value:6},{label:"7分钟后关闭",value:7},{label:"8分钟后关闭",value:8},{label:"9分钟后关闭",value:9},{label:"10分钟后关闭",value:10},{label:"15分钟后关闭",value:15},{label:"30分钟后关闭",value:30},{label:"45分钟后关闭",value:45},{label:"60分钟后关闭",value:60}],closeTimeV:5,screenOptions:[{label:"显示16画面",value:16},{label:"显示25画面",value:25},{label:"显示36画面",value:36}],screen:16}}},methods:{closeDialog:function(){this.options.flag=!1},saveVideoParams:function(){this.$emit("closeDialog")}}},k=(a("3f3e"),Object(i.a)(g,function(){var e=this,l=e.$createElement,a=e._self._c||l;return a("div",{staticClass:"rv-set-videoset"},[a("el-form",{attrs:{"label-width":"150px",model:e.formV}},[a("el-form-item",{attrs:{label:"默认请求视频"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.formV.video,callback:function(l){e.$set(e.formV,"video",l)},expression:"formV.video"}},e._l(e.formV.videoOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"自动关闭对讲和监听"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.formV.closeTimeM,callback:function(l){e.$set(e.formV,"closeTimeM",l)},expression:"formV.closeTimeM"}},e._l(e.formV.timeMOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"自动关闭视频"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.formV.closeTimeV,callback:function(l){e.$set(e.formV,"closeTimeV",l)},expression:"formV.closeTimeV"}},e._l(e.formV.timeVOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"显示最高画面"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.formV.screen,callback:function(l){e.$set(e.formV,"screen",l)},expression:"formV.screen"}},e._l(e.formV.screenOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e.showBtns?a("el-row",[a("el-col",{staticClass:"footer",attrs:{span:24}},[a("el-button",{nativeOn:{click:function(l){return e.saveVideoParams(l)}}},[e._v("保存")]),a("el-button",{nativeOn:{click:function(l){return e.closeDialog(l)}}},[e._v("关闭")])],1)],1):e._e()],1)},[],!1,null,null,null).exports),I={props:{options:{}},data:function(){return{formP:{quilityList:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3}],quility:"",params1:"",params2:"",params3:"",params4:""}}},methods:{closeDialog:function(){this.options.flag=!1}}},_=(a("50fc"),Object(i.a)(I,function(){var e=this,l=e.$createElement,a=e._self._c||l;return a("div",{staticClass:"rv-set-picset"},[a("fieldset",{staticClass:"vs-1"},[a("legend",{staticClass:"vs-2"},[e._v("图片参数配置")]),a("el-form",{attrs:{"label-width":"150px"}},[a("el-form-item",{attrs:{label:"图像/视频质量"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",size:"small"},model:{value:e.formP.quility,callback:function(l){e.$set(e.formP,"quility",l)},expression:"formP.quility"}},e._l(e.formP.quilityList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"亮度"}},[a("el-input-number",{staticStyle:{width:"200px"},attrs:{size:"small",min:0,max:255},model:{value:e.formP.params1,callback:function(l){e.$set(e.formP,"params1",l)},expression:"formP.params1"}})],1),a("el-form-item",{attrs:{label:"对比度"}},[a("el-input-number",{staticStyle:{width:"200px"},attrs:{size:"small",min:0,max:127},model:{value:e.formP.params2,callback:function(l){e.$set(e.formP,"params2",l)},expression:"formP.params2"}})],1),a("el-form-item",{attrs:{label:"饱和度"}},[a("el-input-number",{staticStyle:{width:"200px"},attrs:{size:"small",min:0,max:127},model:{value:e.formP.params3,callback:function(l){e.$set(e.formP,"params3",l)},expression:"formP.params3"}})],1),a("el-form-item",{attrs:{label:"色度"}},[a("el-input-number",{staticStyle:{width:"200px"},attrs:{size:"small",min:0,max:255},model:{value:e.formP.params4,callback:function(l){e.$set(e.formP,"params4",l)},expression:"formP.params4"}})],1)],1)],1),a("el-row",[a("el-col",{staticClass:"footer",attrs:{span:24}},[a("el-button",{nativeOn:{click:function(l){return e.saveVideoParams(l)}}},[e._v("保存")]),a("el-button",{nativeOn:{click:function(l){return e.closeDialog(l)}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null).exports),C=a("cebc"),S=a("8369"),y=a("2f62"),x={props:{options:{},showBtns:{},vInfo:{}},mixins:[S.a],data:function(){return{grid:{enterpriseId:this.vInfo.enterpriseId},selections:[]}},mounted:function(){var e=this;this.getVehicleLinkageInfo({vehicleId:this.vInfo.vehicleId}).then(function(l){if(l.flag){var a=l.data.split(",");setTimeout(function(){e.$refs.linkageTable.table.data.forEach(function(l){a.forEach(function(a){a==l.id&&e.$refs.linkageTable.table.toggleRowSelection(l,!0)})})},1500)}})},methods:Object(C.a)({},Object(y.b)(["getVehicleLinkageInfo","insertVehicleAlarmAutoLinkage"]),{closeDialog:function(){this.options.flag=!1},saveVideoParams:function(){var e=this,l=[];this.selections.forEach(function(e){l.push(e.id)}),this.insertVehicleAlarmAutoLinkage({vehicleId:this.vInfo.vehicleId,linkageIds:l.join(",")}).then(function(l){l.flag&&(e.options.flag=!1,e.$message.success("操作成功")),l.flag||(e.options.flag=!1,e.$message.error({message:e.$t("error."+l.errorCode)}))})},tableChange:function(e){this.selections=e}})},V=(a("d5a5"),Object(i.a)(x,function(){var e=this,l=e.$createElement,a=e._self._c||l;return a("div",{staticClass:"linkage"},[a("cv-grid",{ref:"linkageTable",attrs:{params:e.grid,url:"/videoController/getAlarmAutoLinkage",defaultHeight:300},on:{"selection-change":e.tableChange}},[a("el-table-column",{attrs:{type:"selection",width:"60"}}),a("el-table-column",{attrs:{label:e.$t("报警类型"),prop:"alarmName"}}),a("el-table-column",{attrs:{label:e.$t("关联指令"),prop:"orderNames"}})],1),e.showBtns?a("el-row",[a("el-col",{staticClass:"footer",attrs:{span:24}},[a("el-button",{nativeOn:{click:function(l){return e.saveVideoParams(l)}}},[e._v("保存")]),a("el-button",{nativeOn:{click:function(l){return e.closeDialog(l)}}},[e._v("关闭")])],1)],1):e._e()],1)},[],!1,null,null,null).exports),$={props:{menus:{default:function(){return[]}},options:{}},components:{vps:m,channelList:d,oParams:b,clockSet:f,videoSet:k,picSet:_,linkAge:V},mixins:[""],data:function(){return{operations:{items:[{label:"视频参数设置",component:"vps",showBtns:!0,vInfo:{vehicleId:this.options.vid,enterpriseId:this.options.eid}},{label:"音视频通道列表",component:"channelList",showBtns:!0,vInfo:{vehicleId:this.options.vid,enterpriseId:this.options.eid}},{label:"其他参数",component:"oParams",showBtns:!0,vInfo:{vehicleId:this.options.vid,enterpriseId:this.options.eid}},{label:"唤醒设置",component:"clockSet",showBtns:!0,vInfo:{vehicleId:this.options.vid,enterpriseId:this.options.eid}},{label:"报警联动",component:"linkAge",showBtns:!0,vInfo:{vehicleId:this.options.vid,enterpriseId:this.options.eid}}]}}},methods:{select:function(e){this.active=e},closeDialog:function(){this.options.flag=!1},videoParams:function(e){this.$emit("videoParams",e)}},watch:{"options.flag":function(e){e||(this.options.name="",this.$store.dispatch("saveVideoPSet",{}))}}},N=(a("37b4"),Object(i.a)($,function(){var e=this,l=e.$createElement,a=e._self._c||l;return a("div",{staticClass:"realtimevideo-setting"},[a("el-tabs",{staticStyle:{height:"400px"},attrs:{"tab-position":"left"}},e._l(e.operations.items,function(l,t){return a("el-tab-pane",{key:t,attrs:{label:l.label,lazy:!0}},[a("cv-scrollbar",{staticClass:"cHeight"},[a(l.component,{tag:"component",attrs:{options:e.options,showBtns:l.showBtns,vInfo:l.vInfo},on:{closeDialog:e.closeDialog,videoParams:e.videoParams}})],1)],1)}),1)],1)},[],!1,null,null,null).exports),w={props:{vehicleId:{}},components:{},mixins:[S.a],data:function(){return{timer:null}},methods:{loadTable:function(e,l){var a=this,t={vehicleIds:l,mapType:this.$store.getters.mapType};this.tableLoading("/videoController/getVehicleVideoLastLocation",t,e),setTimeout(function(){a.$store.dispatch("setGpsInfo",a.table.data[0])},500)}},watch:{vehicleId:function(e){var l=this;clearInterval(this.timer),this.loadTable(!0,e),this.timer=setInterval(function(){l.loadTable(!0,e)},5e3)}},beforeDestroy:function(){clearInterval(this.timer),this.$store.dispatch("setGpsInfo",[])}},T=Object(i.a)(w,function(){var e=this,l=e.$createElement,a=e._self._c||l;return a("cv-grid",{staticStyle:{"margin-top":"10px"},attrs:{data:[]}},[a("el-table-column",{attrs:{label:e.$t("common.vehicle.plateCode"),prop:"plateCode"}}),a("el-table-column",{attrs:{label:e.$t("common.mtindex.gpstime"),prop:"gpsTime",formatter:e.tableFilterFormat}}),a("el-table-column",{attrs:{label:e.$t("common.vehicle.location"),prop:"locationDesc"}}),a("el-table-column",{attrs:{label:e.$t("reportForm.overSpeed.speed1"),prop:"dspeed"}}),a("el-table-column",{attrs:{label:e.$t("common.alarm.alarm"),prop:"alarmData"}}),a("el-table-column",{attrs:{label:e.$t("common.order.orderContent"),prop:"accStatus",formatter:e.tableFilterAcc}}),a("el-table-column",{attrs:{label:e.$t("reportForm.vehicleOpt.meter"),prop:"mileage"}}),a("el-table-column",{attrs:{label:e.$t("common.vehicle.otherMess"),prop:""}})],1)},[],!1,null,null,null).exports,O={props:{vehicleId:{}},components:{},mixins:[S.a],data:function(){return{table:{options:{current:1,size:10,total:0,flag:!1},table:[],loading:!1}}},watch:{"$store.getters.alarm1077":function(e){"A"==e.msgType&&this.vehicleId==e.vehicleId&&this.table.table.length<=50&&(50==this.table.table.length&&this.table.table.shift(),this.table.table.push(e))}},beforeDestroy:function(){this.$store.dispatch("setAlarm",[])}},D=Object(i.a)(O,function(){var e=this,l=e.$createElement,a=e._self._c||l;return a("div",{},[a("el-button",{staticStyle:{margin:"10px 0"},attrs:{size:"small"},nativeOn:{click:function(l){return e.clear(l)}}},[e._v("清空")]),a("cv-grid",{attrs:{data:[]}},[a("el-table-column",{attrs:{label:e.$t("role.operation"),prop:""},scopedSlots:e._u([{key:"default",fn:function(l){return[a("el-button",{attrs:{type:"text"}},[e._v("操作")])]}}])}),a("el-table-column",{attrs:{label:e.$t("common.alarm.alarmTypeName"),prop:"alarmTypeName"}}),a("el-table-column",{attrs:{label:e.$t("common.alarm.messageText"),prop:"messageText"}}),a("el-table-column",{attrs:{label:e.$t("common.alarm.time"),prop:"time"}})],1)],1)},[],!1,null,null,null).exports,P={props:{vehicleId:{},mediaData:{}},components:{},mixins:[S.a],data:function(){return{timer:null}},methods:{clear:function(){this.table.data=[]},loadTable:function(){var e={vehicleId:this.vehicleId};this.tableLoading("/videoController/findRealTimeMediaInfo",e,!0)},mediaType:function(e){return this.$filter.mediaType(e.mediaType)}},watch:{mediaData:function(e){this.$refs.mediaT.options.data=e}},beforeDestroy:function(){clearInterval(this.timer)}},R=(a("d765"),Object(i.a)(P,function(){var e=this,l=e.$createElement,a=e._self._c||l;return a("div",{staticClass:"mediaTable"},[a("el-button",{staticStyle:{margin:"10px 0"},attrs:{size:"small"},nativeOn:{click:function(l){return e.clear(l)}}},[e._v("清空")]),a("cv-grid",{ref:"mediaT",attrs:{data:[]}},[a("el-table-column",{attrs:{label:e.$t("action.operation"),prop:""},scopedSlots:e._u([{key:"default",fn:function(l){return[a("a",{staticClass:"download",attrs:{download:l.row.mediaPath,href:l.row.mediaPath}},[e._v("下载")])]}}])}),a("el-table-column",{attrs:{label:e.$t("common.vehicle.terminal"),prop:"simCode"}}),a("el-table-column",{attrs:{label:e.$t("common.vehicle.fileType"),prop:"mediaType",formatter:e.mediaType}}),a("el-table-column",{attrs:{label:e.$t("mediaSingleUpload.channelId"),prop:"channel"}}),a("el-table-column",{attrs:{label:e.$t("common.vehicle.receive"),prop:"upTimeEndStr"}}),a("el-table-column",{attrs:{label:e.$t("common.vehicle.fileTime"),prop:"upTimeEndStr"}}),a("el-table-column",{attrs:{label:e.$t("common.order.orderContent"),prop:"status"}}),a("el-table-column",{attrs:{label:e.$t("common.alarm.alarmTypeName"),prop:""}}),a("el-table-column",{attrs:{label:e.$t("common.vehicle.fileLoc"),prop:"fileLocation"}}),a("el-table-column",{attrs:{label:e.$t("common.vehicle.filePath"),prop:"mediaDiskPath"}})],1)],1)},[],!1,null,null,null).exports),z={mixins:[S.a]},L={props:{data:{}},components:{gpstable:T,alarmtable:D,mediatable:R,systemtable:Object(i.a)(z,function(){var e=this,l=e.$createElement,a=e._self._c||l;return a("div",{},[a("el-button",{staticStyle:{margin:"10px 0"},attrs:{size:"small"}},[e._v("清空")]),a("cv-grid",{attrs:{data:[]}},[a("el-table-column",{attrs:{label:e.$t("common.vehicle.terminal"),prop:""}}),a("el-table-column",{attrs:{label:e.$t("fenceManage.time"),prop:""}}),a("el-table-column",{attrs:{label:e.$t("mM.menuType"),prop:""}}),a("el-table-column",{attrs:{label:e.$t("common.order.orderContent"),prop:""}}),a("el-table-column",{attrs:{label:e.$t("common.vehicle.otherMess"),prop:""}})],1)],1)},[],!1,null,null,null).exports},mixins:[""],data:function(){return{tables:{activeName:"tabs0"}}}},F=Object(i.a)(L,function(){var e=this,l=e.$createElement,a=e._self._c||l;return a("cv-tabs",{staticClass:"tabClass",attrs:{titles:["GPS监控","报警信息","媒体文件","系统事件"],"force-render":!1},model:{value:e.tables.activeName,callback:function(l){e.$set(e.tables,"activeName",l)},expression:"tables.activeName"}},[a("gpstable",{attrs:{vehicleId:e.data.vehicleId,mediaData:e.data.mediaData}}),a("alarmtable",{attrs:{vehicleId:e.data.vehicleId,mediaData:e.data.mediaData}}),a("mediatable",{attrs:{vehicleId:e.data.vehicleId,mediaData:e.data.mediaData}}),a("systemtable",{attrs:{vehicleId:e.data.vehicleId,mediaData:e.data.mediaData}})],1)},[],!1,null,null,null).exports,E=a("7a3a"),A={components:{videoGroup:s,operation:o,vehicleInfo:c,setting:N,vps:m,bottomTables:F,videoTree:E.a},mixins:[],data:function(){return{treeLoaded:!1,tree:{treeChecked:!1},video:{videonumber:[0]},operation:{},vehicleInfo:{},tables:{bottomPanelTitles:[{name:"GPS监控"},{name:"报警信息"},{name:"媒体文件"},{name:"系统事件"}]},common:{vehicleId:null,enterpriseId:null,isFull:!1,timer:null,plateCode:null,mediaData:null,contentLoading:!1},dialog:{flag:!1,title:"--",size:"",name:"",sDialog:{flag:!1,title:"--",size:"",name:"",showBtns:!1,vInfo:{},isPopover:!1}}}},methods:{handlerVehicleMonitor:function(e){var l=this;this.common.vehicleId=e.data[0].id,this.common.enterpriseId=e.data[0].enterpriseId,this.common.plateCode=e.data[0].plateCode,this.$http({url:"/vehicle/queryVehicleDVRInfo",params:{vehicleId:this.common.vehicleId}}).then(function(a){if(!a.flag)return l.$message.warning({message:l.$t("error."+a.errorCode)}),!1;if(l.$service.isIe()){localStorage.setItem("ocxVideo",JSON.stringify({vehicleId:e.data[0].id,enterpriseId:e.data[0].enterpriseId}));var t=l.$service.winParams("/realOcx",{v:e.data[0].id,e:e.data[0].enterpriseId});l.$service.winOpen(t)}})},fullscreen:function(){this.$service.requestFullScreen(this.$refs.videoGroup.$el)},openSetting:function(){if(!this.common.vehicleId)return this.$message.warning("请选择车辆"),!1;this.dialog.flag=!0,this.dialog.name="setting",this.dialog.size="dialog-middle",this.dialog.title="系统设置",this.dialog.vid=this.common.vehicleId,this.dialog.eid=this.common.enterpriseId},videoParams:function(e){this.dialog.sDialog.flag=!0,this.dialog.sDialog.name=m,this.dialog.sDialog.size="dialog-middle",this.dialog.sDialog.title="视频参数",this.dialog.sDialog.showBtns=!0,this.dialog.sDialog.vInfo={vehicleId:this.common.vehicleId,enterpriseId:this.common.enterpriseId},this.dialog.sDialog.isPopover=e.flag,this.dialog.sDialog.channel=e.channel},isFullscreen:function(){return document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||!1},closeVideo:function(e,l){var a={vehicleId:e,enterpriseId:l,Channel:0,ControlCommand:0,TurnOffMediaType:0,SwitchStreamType:1};this.$http({url:"/sendVideoOrder/sendVideoRealTimeTransportController",params:a})},getPowers:function(e){var l=this,a={};e.forEach(function(e){l.$service.isArray(e.child)&&0<e.child.length&&e.child.forEach(function(e){if(0==e.child.length){var t=l.$service.urlLastStr(e.url);a[t]=e.power.split(",")}else e.child.forEach(function(e){var t=l.$service.urlLastStr(e.url);a[t]=e.power?e.power.split(","):""})})}),localStorage.setItem("powers",JSON.stringify(a.realtimevideo))},treeOk:function(e){var l=this;setTimeout(function(){l.treeLoaded=e},2e3)}},beforeDestroy:function(){var e=this;["","moz","webkit","ms"].forEach(function(l){document.removeEventListener(l+"fullscreenchange",function(){e.common.isFull=e.isFullscreen()})})},mounted:function(){var e=this;this.getPowers(this.$store.getters.monitorMenu),["","moz","webkit","ms"].forEach(function(l){document.addEventListener(l+"fullscreenchange",function(){e.common.isFull=e.isFullscreen()})})},watch:{"$store.getters.ptSinglePass":function(e,l){var a=this,t=0<arguments.length&&void 0!==e?e:{},i=1<arguments.length&&void 0!==l?l:{};t.pId!=i.pId&&null!=i.pId&&this.closeVideo(i.pId,i.enterpriseId),clearTimeout(this.common.timer),this.common.vehicleId=t.pId,this.common.enterpriseId=t.enterpriseId;var s=Number(t.text.substring(2)),n={vehicleId:t.pId,enterpriseId:t.enterpriseId,Channel:s,DataType:1,StreamType:1};t.pId!=i.pId?this.$store.dispatch("sendVideoRealTimeTransport",{params:n,message:t,isRest:!0,index:s-1}):this.$store.dispatch("sendVideoRealTimeTransport",{params:n,message:t,isRest:!1,index:s-1}),this.common.timer=setTimeout(function(){a.closeVideo(t.pId,t.enterpriseId)},3e5)},"$store.getters.Directive":function(e){var l=this;e.plateCode==this.common.plateCode&&1==e.sendFlag&&"WCF0x8801"==e.orderType&&setTimeout(function(){l.$store.dispatch("findRealTimeMediaInfo",{orderId:e.id}).then(function(e){e.data.records&&(l.common.mediaData=e.data.records)})},3e4)}},destoryed:function(){this.tree.treeChecked=!0,this.closeVideo(this.common.vehicleId,this.common.enterpriseId)}},B=(a("950c"),Object(i.a)(A,function(){var e=this,l=e.$createElement,a=e._self._c||l;return a("div",{staticClass:"realtimevideo"},[a("cv-operation",{attrs:{position:"left"}},[a("el-form-item",[a("operation",{on:{setting:e.openSetting,fullscreen:e.fullscreen}})],1)],1),a("cv-content",[a("div",{class:[e.treeLoaded?"widthF":"widthH"],attrs:{slot:"aside"},slot:"aside"},[a("video-tree",{staticClass:"widthF",attrs:{"node-monitor":e.handlerVehicleMonitor},on:{treeReady:e.treeOk}})],1),a("div",{class:["inContent",e.common.isFull?"inContent-full":""]},[a("div",{staticClass:"videoProt"},[e.$service.isIe()?e._e():a("div",{staticStyle:{height:"430px","line-height":"430px","text-align":"center","font-size":"24px"}},[e._v("该视频播放只支持IE浏览器，请用IE浏览器打开!")]),e.$service.isIe()?a("div",{staticStyle:{height:"430px","line-height":"430px","text-align":"center","font-size":"24px"}},[e._v("请先选择车辆!")]):e._e()]),a("div",{staticClass:"rightTab"},[a("vehicle-info",{attrs:{vehicleInfos:e.common}})],1),a("div",{staticClass:"bottomPanel"},[a("bottom-tables",{attrs:{data:e.common}})],1)])]),a("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.dialog.flag,title:e.dialog.title,"custom-class":e.dialog.size},on:{"update:visible":function(l){return e.$set(e.dialog,"flag",l)}}},[a(e.dialog.name,{tag:"component",attrs:{options:e.dialog},on:{videoParams:e.videoParams}})],1),a("el-dialog",{attrs:{visible:e.dialog.sDialog.flag,title:e.dialog.sDialog.title,"custom-class":e.dialog.sDialog.size},on:{"update:visible":function(l){return e.$set(e.dialog.sDialog,"flag",l)}}},[a(e.dialog.sDialog.name,{tag:"component",attrs:{options:e.dialog.sDialog,showBtns:e.dialog.sDialog.showBtns,vInfo:e.dialog.sDialog.vInfo}})],1)],1)},[],!1,null,null,null).exports);l.default=B},ea27:function(e,l,a){"use strict";var t=a("6386");a.n(t).a},f7a4:function(e,l,a){"use strict";var t=a("42c0");a.n(t).a}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2a6c187f"],{"05c0":function(e,t,i){"use strict";i("7f7f"),i("20d6"),i("ac6a");var n=i("cebc"),o=i("3f4e"),r=i("2f62"),a={name:"CvPublictreeContent",components:{CvContent:o.a},props:{model:String,vehicleMonitor:Function,loading:Boolean,noresize:{default:!1,type:Boolean}},data:function(){return{entryList:[],condition:""}},computed:Object(n.a)({},Object(r.c)(["onlineList","isAttention","socketEnterprise","socketVehicle","vehicle_data","vehicleCondition"]),{isCheck:function(){switch(this.model){case"multi":return!0;case"single":default:return!1}},_treeMethods:function(){return this.$refs.tabs},_contentMethods:function(){return this.$refs.content}}),beforeDestroy:function(){var e=this._treeMethods.getAllNodes;this.setStoreVehicleSearchCondition(this.condition),this.setStoreVehicleData(e())},mounted:function(){var e=this._treeMethods.$refs.tree.reference().ztreeApi;e()&&e().checkAllNodes(!1)},methods:Object(n.a)({},Object(r.b)(["setStoreVehicleData","setStoreVehicleSearchCondition"]),{handlerVehicleSearch:function(e){this.condition=e},vehicle_Monitor:function(e){var t=e.data;if(e.name,"function"==typeof this.vehicleMonitor)switch(this.model){case"multi":return this.vehicle_Monitor_multi(e);case"single":return this.vehicleMonitor(t[0])}},vehicle_Monitor_multi:function(e){var t=this,i=e.data;switch(e.name){case"check":this.entryList=this.entryList.concat(i);break;case"cancel":i.forEach(function(e){var i=t.entryList.findIndex(function(t){return t.id==e.id});0<=i&&t.entryList.splice(i,1)})}this.vehicleMonitor(this.entryList)}})},l=(i("45d7"),i("2877")),s=Object(l.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("cv-content",{ref:"content",attrs:{loading:e.loading,noresize:e.noresize}},[e.model?i("cv-tabs-tree",{ref:"tabs",staticClass:"vehiclemaster-tree",attrs:{slot:"aside","vehicle-search":e.vehicleCondition,"is-checked":e.isCheck,"tree-data":e.vehicle_data,"online-monitor":e.onlineList,"vehicle-monitor":e.socketVehicle,"attention-monitor":e.isAttention,"enterprise-fleet-monitor":e.socketEnterprise,"node-monitor":e.vehicle_Monitor},on:{"vehicle-choose-search":e.handlerVehicleSearch},slot:"aside"}):e._e(),e._t("default")],2)},[],!1,null,"2dfdf41b",null).exports;s.install=function(e){e.component(s.name,s)},t.a=s},"45d7":function(e,t,i){"use strict";var n=i("6e18");i.n(n).a},"6e18":function(e,t,i){},f001:function(e,t,i){"use strict";i.r(t),i("7f7f");var n={props:{options:{}},components:{},mixins:[],data:function(){return{search:{orderId:this.options.orderId}}},watch:{"options.flag":function(e){e||(this.options.name="")}}},o=i("2877"),r={components:{showDetail:Object(o.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"driverIdCollection-details"},[i("cv-grid",{ref:"table",attrs:{params:e.search,url:"/driverRecord/collectGBDriverRecord"}},[i("el-table-column",{attrs:{label:e.$t("事件类型"),prop:"typeText"}}),i("el-table-column",{attrs:{label:e.$t("事件发生时间"),prop:"recordTime"}})],1)],1)},[],!1,null,null,null).exports,CvPublictreeContent:i("05c0").a},mixins:[],data:function(){return{search:{vehicleId:"",plateCode:""},SEtime:[this.$filter.timeStamp(this.$filter.format(new Date,"yyyy-MM-dd start")),this.$filter.timeStamp(this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss"))],pickerOption:{disabledDate:function(e){return e.getTime()>Date.now()}},loading:!1,grid:{},showDetail:{flag:!1,title:"--",size:"dialog-middle",name:"showDetail",orderId:""},arrD:[1,2,3,4,5,5,5,5,5]}},computed:{_table:function(){return this.$refs.table}},methods:{handlerVehicleMonitor:function(e){this.grid.vehicleId=e.id,this._table.tableInitial()},load:function(){this.grid.startTime=this.$filter.format(this.SEtime[0],"yyyy-MM-dd HH:mm:ss"),this.grid.endTime=this.$filter.format(this.SEtime[1],"yyyy-MM-dd HH:mm:ss"),this._table.tableInitial()},lookDetail:function(e){this.showDetail.flag=!0,this.showDetail.orderId=e.orderId,this.showDetail.name="showDetail",this.showDetail.title="详细信息"},down:function(){if(this.SEtime)if(this.grid.vehicleId){this.grid.startTime=this.$filter.format(this.SEtime[0],"yyyy-MM-dd HH:mm:ss"),this.grid.endTime=this.$filter.format(this.SEtime[1],"yyyy-MM-dd HH:mm:ss");var e=this.$service.winParams(this.$COMMON.baseUrl+"/driverRecord/exportGBDriverRecordExcel",this.grid);window.location.href=e}else this.$message.warning("请选择车辆");else this.$message.warning("请选择时间范围")}}},a=Object(o.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"driverIdCollection"},[i("cv-operation",{attrs:{position:"left"}},[i("el-form-item",{attrs:{label:e.$t("reportForm.driverIdCollection.SEtime")}},[i("el-date-picker",{attrs:{editable:!1,clearable:!1,size:"small",type:"datetimerange","picker-options":e.pickerOption},model:{value:e.SEtime,callback:function(t){e.SEtime=t},expression:"SEtime"}})],1),i("el-form-item",{staticStyle:{float:"right"}},[i("cv-tool",{staticStyle:{margin:"0px"},attrs:{name:e.$route.name,data:e.$store.getters.monitorMenu,"is-modify":!1,"is-remove":!1,"is-add":!1},on:{export:e.down,search:function(t){return e.load(!0)}}})],1)],1),i("cv-publictree-content",{ref:"tabs",attrs:{model:"single","vehicle-monitor":e.handlerVehicleMonitor,loading:!1}},[i("cv-grid",{ref:"table",attrs:{params:e.grid,url:"/driverRecord/collectDriverRecord"}},[i("el-table-column",{attrs:{"header-align":"center",align:"center",label:e.$t("reportForm.driverIdCollection.plateCode"),"min-width":"100",prop:"plateCode"}}),i("el-table-column",{attrs:{"header-align":"center",align:"center",label:e.$t("reportForm.driverIdCollection.enterpriseName"),"min-width":"100",prop:"enterpriseName"}}),i("el-table-column",{attrs:{"header-align":"center",align:"center",label:e.$t("reportForm.driverIdCollection.collectionTime"),"min-width":"130",prop:"recordTime"}}),i("el-table-column",{attrs:{"header-align":"center",align:"center",label:e.$t("action.operation"),"min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.lookDetail(t.row)}}},[e._v("查看")])]}}])})],1)],1),i("el-dialog",{attrs:{visible:e.showDetail.flag,title:e.showDetail.title,"custom-class":e.showDetail.size},on:{"update:visible":function(t){return e.$set(e.showDetail,"flag",t)}}},[i(e.showDetail.name,{tag:"component",attrs:{options:e.showDetail},on:{confirm:e.load}})],1)],1)},[],!1,null,null,null).exports;a.install=function(e){e.component(a.name,a)},t.default=a}}]);
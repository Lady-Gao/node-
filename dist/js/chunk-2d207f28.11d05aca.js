(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d207f28"],{a366:function(e,t,r){"use strict";r.r(t),r("386d");var a={props:{search:{},refresh:{}},computed:{_table:function(){return this.$refs.etable}},watch:{refresh:function(e){e&&(this._table.tableInitial(!0),this.$emit("update:refresh",!1))}}},l=r("2877"),s=Object(l.a)(a,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("cv-grid",{ref:"etable",attrs:{params:e.search,url:"/videoController/getVideoOperationLogCount"}},[r("el-table-column",{attrs:{prop:"plateCode",label:"车牌号码"}}),r("el-table-column",{attrs:{prop:"account",label:"用户"}}),r("el-table-column",{attrs:{prop:"enterpriseName",label:"公司"}}),r("el-table-column",{attrs:{prop:"content",label:"内容"}}),r("el-table-column",{attrs:{prop:"num",label:"频次"}}),r("el-table-column",{attrs:{prop:"channel",label:"通道"}})],1)},[],!1,null,null,null).exports,n={props:{search:{},refresh:{}},computed:{_table:function(){return this.$refs.dtable}},watch:{refresh:function(e){e&&(this._table.tableInitial(!0),this.$emit("update:refresh",!1))}}},o={components:{dischange:Object(l.a)(n,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("cv-grid",{ref:"dtable",attrs:{params:e.search,url:"/videoController/getVideoOperationLog"}},[r("el-table-column",{attrs:{prop:"plateCode",label:"车牌号码"}}),r("el-table-column",{attrs:{prop:"account",label:"用户"}}),r("el-table-column",{attrs:{prop:"enterpriseName",label:"公司"}}),r("el-table-column",{attrs:{prop:"content",label:"内容"}}),r("el-table-column",{attrs:{prop:"dataUsage",label:"流量"}}),r("el-table-column",{attrs:{prop:"beginTime",label:"开始时间"}}),r("el-table-column",{attrs:{prop:"endTime",label:"结束时间"}}),r("el-table-column",{attrs:{prop:"channel",label:"通道"}}),r("el-table-column",{attrs:{prop:"durationTime",label:"时长"}})],1)},[],!1,null,null,null).exports,equency:s},data:function(){return{type:"tabs0",SEtime:[this.$filter.format(new Date,"yyyy-MM-dd start"),this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss")],label:"",search:{enterpriseId:"",fleetId:"",plateCode:"",dataType:"",beginTime:this.$filter.format(new Date,"yyyy-MM-dd start"),endTime:this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss"),account:""},refresh1:!1,refresh2:!1}},methods:{load:function(){switch(this.type){case"tabs0":this.refresh1=!0;break;case"tabs1":this.refresh2=!0}},down:function(){if(""==this.search.enterpriseId)return this.$message.warning("请选择公司");if("tabs0"==this.type){var e=this.$service.winParams(this.$COMMON.baseUrl+"/videoController/exportVideoOperationLog",this.search);window.location.href=e}else if("tabs1"==this.type){var t=this.$service.winParams(this.$COMMON.baseUrl+"/videoController/exportVideoOperationLogCount",this.search);window.location.href=t}}},watch:{"search.enterpriseId":function(e){null==e&&(this.search.enterpriseId="")},"search.fleetId":function(e){null==e&&(this.search.fleetId="")},SEtime:function(e){this.search.beginTime=this.$filter.format(e[0],"yyyy-MM-dd start"),this.search.endTime=this.$filter.format(e[1],"yyyy-MM-dd start")}}},i=Object(l.a)(o,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"videoflux"},[r("cv-operation",{attrs:{position:"left"}},[r("el-form-item",[r("cv-dropdown-tree",{attrs:{placeholder:"请选择公司/机构搜索",url:"/enterprise/findEnterpriseOrganizationTreeList",label:e.label},on:{"update:label":function(t){e.label=t}},model:{value:e.search.enterpriseId,callback:function(t){e.$set(e.search,"enterpriseId",t)},expression:"search.enterpriseId"}})],1),r("el-form-item",[r("cv-dropdown-tree",{staticStyle:{width:"260px"},attrs:{placeholder:"请选择车组搜索",url:"/enterprise/findFleetTreeList","un-node-filter":["type",null],"is-initial":!1,"auto-params":{enterpriseId:e.label.enterpriseId,pId:e.label.id,type:e.label.type}},model:{value:e.search.fleetId,callback:function(t){e.$set(e.search,"fleetId",t)},expression:"search.fleetId"}})],1),r("el-form-item",[r("el-input",{attrs:{clearable:"",placeholder:"请输入用户搜索"},model:{value:e.search.account,callback:function(t){e.$set(e.search,"account",t)},expression:"search.account"}})],1),r("el-form-item",[r("el-input",{attrs:{clearable:"",placeholder:"请输入车牌号码搜索"},model:{value:e.search.plateCode,callback:function(t){e.$set(e.search,"plateCode",t)},expression:"search.plateCode"}})],1),r("el-form-item",[r("el-date-picker",{attrs:{"start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1,type:"datetimerange"},model:{value:e.SEtime,callback:function(t){e.SEtime=t},expression:"SEtime"}})],1),r("el-form-item",[r("cv-tool",{staticStyle:{margin:"0px"},attrs:{name:e.$route.name,data:e.$store.getters.monitorMenu,"is-modify":!1,"is-remove":!1,"is-add":!1},on:{export:e.down,search:e.load}})],1)],1),r("cv-content",{attrs:{fill:!0}},[r("cv-tabs",{attrs:{titles:["实时流量统计","频次统计"],"force-render":!1},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[r("dischange",{ref:"tabs0",attrs:{search:e.search,refresh:e.refresh1},on:{"update:search":function(t){e.search=t},"update:refresh":function(t){e.refresh1=t}}}),r("equency",{ref:"tabs1",attrs:{search:e.search,refresh:e.refresh2},on:{"update:search":function(t){e.search=t},"update:refresh":function(t){e.refresh2=t}}})],1)],1)],1)},[],!1,null,null,null).exports;t.default=i}}]);
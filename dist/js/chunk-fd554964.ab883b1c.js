(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-fd554964"],{"2edd":function(e,t,a){},"3a92":function(e,t,a){"use strict";a.r(t),a("7f7f"),a("386d");var i,r,n=a("cebc"),s=a("bd86"),o=a("8369"),l=(a("96cf"),a("3b8d")),c={name:"tip",props:{modify:{type:[Object]},options:{}},inject:["store"],data:function(){return{isInsert:!1,timeChange:!0,isChassis:!1,isCar:!0,isType:!1,vehicleArry:[],label:"",addData:{chassisRunningKm:"",chassisRunningKmInAdvance:"",chassisRunningTime:"",workTimeHour:"",workTimeDay:""},formData:{enterpriseName:"",fleetName:"",fleetId:"",plateCode:"",maintenanceTime:null,vehicleId:"",upkeeporderNo:"",maintenanceItems:"",maintenanceSite:"",maintenancePerson:"",maintenanceFee:"",maintenanceBill:"",remarks:"",enterpriseId:"",personPhone:"",carMileage:"",overTime:"",overMileage:"",type:1,maintenanceType:2},loading:!1,rules:{enterpriseId:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],fleetId:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],maintenanceTime:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],maintenanceItems:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],vehicleId:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],carMileage:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},{pattern:/^[0-9]*$/,message:this.$t("filter.type2")}],upkeeporderNo:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},{pattern:/^[0-9]*$/,message:this.$t("filter.type2")}],maintenancePerson:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],maintenanceFee:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},{pattern:/^[0-9]*$/,message:this.$t("filter.type2")}],maintenanceBill:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},{pattern:/^[0-9]*$/,message:this.$t("filter.type2")}],overMileage:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},{pattern:/^[0-9]*$/,message:this.$t("filter.type2")}],maintenanceSite:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],personPhone:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},{pattern:/^(1[3|4|5|7|8][0-9]{9})$/,message:this.$t("filter.type10")}]}}},methods:{change:function(){switch(this.modify.activeName){case 1:this.formData.carMileage&&(this.formData.overMileage=parseFloat(this.formData.carMileage)+(this.addData.chassisRunningKm&&parseFloat(this.addData.chassisRunningKm)));break;case 2:this.formData.carMileage&&(this.formData.overMileage=parseFloat(this.formData.carMileage)+(this.addData.workTimeHour&&parseFloat(this.addData.workTimeHour)));break;case 3:this.formData.carMileage&&(this.formData.overMileage=parseFloat(this.formData.carMileage)+(this.addData.chassisRunningKm&&parseFloat(this.addData.chassisRunningKm)));break;case 4:this.formData.carMileage&&(this.formData.overMileage=parseFloat(this.formData.carMileage)+(this.addData.workTimeHour&&parseFloat(this.addData.workTimeHour)));break;case 5:this.formData.carMileage&&(this.formData.overMileage=parseFloat(this.formData.carMileage)+(this.addData.chassisRunningKm&&parseFloat(this.addData.chassisRunningKm)));break;case 6:this.formData.carMileage&&(this.formData.overMileage=parseFloat(this.formData.carMileage)+(this.addData.workTimeHour&&parseFloat(this.addData.workTimeHour)))}},changeTime:function(){this.timeChange=!1;var e=new Date(this.formData.maintenanceTime),t="",a=this;switch(a.modify.activeName){case 1:t=e.getTime()+3600*a.addData.chassisRunningTime*24*1e3,a.formData.overTime=a.$filter.format(a.$filter.timeStamp(a.$filter.format(t,"yyyy-MM-dd")));break;case 2:t=e.getTime()+3600*a.addData.workTimeDay*24*1e3,a.formData.overTime=a.$filter.format(a.$filter.timeStamp(a.$filter.format(t,"yyyy-MM-dd")));break;case 3:t=e.getTime()+3600*a.addData.chassisRunningTime*24*1e3,a.formData.overTime=a.$filter.format(a.$filter.timeStamp(a.$filter.format(t,"yyyy-MM-dd")));break;case 4:t=e.getTime()+3600*a.addData.workTimeDay*24*1e3,a.formData.overTime=a.$filter.format(a.$filter.timeStamp(a.$filter.format(t,"yyyy-MM-dd")));break;case 5:t=e.getTime()+3600*a.addData.chassisRunningTime*24*1e3,a.formData.overTime=a.$filter.format(a.$filter.timeStamp(a.$filter.format(t,"yyyy-MM-dd")));break;case 6:t=e.getTime()+3600*a.addData.workTimeDay*24*1e3,a.formData.overTime=a.$filter.format(a.$filter.timeStamp(a.$filter.format(t,"yyyy-MM-dd")))}},cancelDialog:function(){this.$emit("update:visible",!1)},keepTAction:(r=Object(l.a)(regeneratorRuntime.mark(function e(t,a){var i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,this.$store,e.next=4,this.$http({url:t,params:a}).then(function(e){e.flag?(i.$emit("confirm"),i.$emit("update:visible",!1),i.$message.success(i.$t("UserManage.actionSuccess"))):i.$message.error({message:i.$t("error."+e.errorCode)}),i.loading=!1}).catch(function(){i.loading=!1});case 4:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)}),defaultData:(i=Object(l.a)(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={enterpriseId:JSON.parse(localStorage.getItem("user")).enterpriseId},e.next=3,this.$http({url:"/MaintenanceSetting/queryMaintenanceSettingInfo",params:t}).then(function(e){a.addData=e.data});case 3:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)}),confirm:function(){var e=this;this.$refs.tip.validate(function(t){if(t){var a={vehicleId:e.formData.vehicleId,upkeeporderNo:e.formData.upkeeporderNo,maintenanceItems:e.formData.maintenanceItems,maintenanceSite:e.formData.maintenanceSite,maintenancePerson:e.formData.maintenancePerson,maintenanceBill:e.formData.maintenanceBill,maintenanceFee:e.formData.maintenanceFee,remarks:e.formData.remarks,enterpriseId:e.formData.enterpriseId,personPhone:e.formData.personPhone,carMileage:e.formData.carMileage,overTime:e.formData.overTime,overMileage:e.formData.overMileage,type:1,maintenanceType:e.isType?1:2};switch(a.maintenanceTime=e.formData.maintenanceTime,e.isInsert&&(a.id=e.formData.id),e.modify.activeName){case 1:case 2:e.keepTAction("/maintenance/insertMaintenanceInfo",a);break;case 3:case 4:e.keepTAction("/maintenance/updateMaintenanceInfo",a);break;default:e.keepTAction("/maintenance/insertMaintenanceInfo",a)}}})}},mounted:function(){switch(this.defaultData(),this.modify.activeName){case 1:this.isInsert=!1,this.isChassis=!0,this.isType=!0,this.formData.plateCode=this.modify.plateCode+"",this.formData.vehicleId=this.modify.vehicleId,this.formData.enterpriseId=this.modify.enterpriseId;break;case 2:this.isInsert=!1,this.isChassis=!1,this.isType=!1,this.formData.plateCode=this.modify.plateCode+"",this.formData.vehicleId=this.modify.vehicleId,this.formData.enterpriseId=this.modify.enterpriseId;break;case 3:this.isInsert=!0,this.isChassis=!0,this.isType=!0,this.formData.id=this.modify.id,this.formData.personPhone=this.modify.personPhone,this.formData.plateCode=this.modify.plateCode,this.formData.maintenanceTime=this.modify.maintenanceTime,this.formData.vehicleId=this.modify.vehicleId,this.formData.upkeeporderNo=this.modify.upkeeporderNo,this.formData.maintenanceItems=this.modify.maintenanceItems,this.formData.maintenanceSite=this.modify.maintenanceSite,this.formData.maintenancePerson=this.modify.maintenancePerson,this.formData.maintenanceFee=this.modify.maintenanceFee,this.formData.maintenanceBill=this.modify.maintenanceBill,this.formData.remarks=this.modify.remarks,this.formData.enterpriseId=this.modify.enterpriseId,this.formData.personPhone=this.modify.personPhone,this.formData.carMileage=this.modify.carMileage,this.formData.overTime=this.modify.overTime,this.formData.overMileage=this.modify.overMileage;break;case 4:this.isInsert=!0,this.isChassis=!1,this.isType=!1,this.formData.id=this.modify.id,this.formData.personPhone=this.modify.personPhone,this.formData.plateCode=this.modify.plateCode,this.formData.maintenanceTime=this.modify.maintenanceTime,this.formData.vehicleId=this.modify.vehicleId,this.formData.upkeeporderNo=this.modify.upkeeporderNo,this.formData.maintenanceItems=this.modify.maintenanceItems,this.formData.maintenanceSite=this.modify.maintenanceSite,this.formData.maintenancePerson=this.modify.maintenancePerson,this.formData.maintenanceFee=this.modify.maintenanceFee,this.formData.maintenanceBill=this.modify.maintenanceBill,this.formData.remarks=this.modify.remarks,this.formData.enterpriseId=this.modify.enterpriseId,this.formData.personPhone=this.modify.personPhone,this.formData.carMileage=this.modify.carMileage,this.formData.overTime=this.modify.overTime,this.formData.overMileage=this.modify.overMileage;break;case 5:this.isInsert=!1,this.isChassis=!0,this.isType=!0,this.isCar=!1;break;case 6:this.isInsert=!1,this.isChassis=!1,this.isType=!1,this.isCar=!1}},watch:{"formData.fleetId":function(e){var t=this;if(this.formData.vehicleId="",this.vehicleArry=[],e){var a={fleetIds:e};this.$store.dispatch("queryVehicleByFleetId",a).then(function(e){t.vehicleArry=e.data})}}}},m=(a("a6b2"),a("2877")),d=Object(m.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"oilUp"},[a("el-form",{ref:"tip",attrs:{model:e.formData,rules:e.rules}},[a("el-row",{attrs:{gutter:10}},[e.isCar?e._e():a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("UserManage.wellmadestarm"),prop:"enterpriseId"}},[a("cv-dropdown-tree",{staticStyle:{width:"100%"},attrs:{data:e.store.company_tree,"is-default":!1,label:e.label},on:{"update:label":function(t){e.label=t}},model:{value:e.formData.enterpriseId,callback:function(t){e.$set(e.formData,"enterpriseId",t)},expression:"formData.enterpriseId"}})],1)],1),e.isCar?e._e():a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属车队",prop:"fleetId"}},[a("cv-dropdown-tree",{staticStyle:{width:"100%"},attrs:{url:"/enterprise/findFleetTreeList","is-initial":!1,"auto-params":{enterpriseId:e.label.enterpriseId,pId:e.label.id,type:e.label.type}},model:{value:e.formData.fleetId,callback:function(t){e.$set(e.formData,"fleetId",t)},expression:"formData.fleetId"}})],1)],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"车牌号码",prop:"vehicleId"}},[e.isCar?e._e():a("el-select",{staticStyle:{width:"345px"},attrs:{filterable:"",placeholder:e.$t("terminal.placeholder")},model:{value:e.formData.vehicleId,callback:function(t){e.$set(e.formData,"vehicleId",t)},expression:"formData.vehicleId"}},e._l(e.vehicleArry,function(e){return a("el-option",{key:e.id+"",attrs:{label:e.plateCode,value:e.id+""}})}),1),e.isCar?a("el-input",{attrs:{placeholder:"",disabled:!0},model:{value:e.formData.plateCode,callback:function(t){e.$set(e.formData,"plateCode",t)},expression:"formData.plateCode"}}):e._e()],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"保养单日期",prop:"maintenanceTime"}},[a("el-date-picker",{staticStyle:{width:"345px"},attrs:{type:"date",placeholder:"选择时间范围",clearable:!1,"value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:e.changeTime},model:{value:e.formData.maintenanceTime,callback:function(t){e.$set(e.formData,"maintenanceTime",t)},expression:"formData.maintenanceTime"}})],1)],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"保养单编号",prop:"upkeeporderNo"}},[a("el-input",{model:{value:e.formData.upkeeporderNo,callback:function(t){e.$set(e.formData,"upkeeporderNo","string"==typeof t?t.trim():t)},expression:"formData.upkeeporderNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"下次保养日期",prop:"overTime"}},[a("el-date-picker",{staticStyle:{width:"345px"},attrs:{type:"date",placeholder:"选择时间范围",clearable:!1,readonly:!0},model:{value:e.formData.overTime,callback:function(t){e.$set(e.formData,"overTime",t)},expression:"formData.overTime"}})],1)],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"保养项目",prop:"maintenanceItems"}},[a("el-input",{model:{value:e.formData.maintenanceItems,callback:function(t){e.$set(e.formData,"maintenanceItems","string"==typeof t?t.trim():t)},expression:"formData.maintenanceItems"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"保养金额(元)",prop:"maintenanceFee"}},[a("el-input",{model:{value:e.formData.maintenanceFee,callback:function(t){e.$set(e.formData,"maintenanceFee","string"==typeof t?t.trim():t)},expression:"formData.maintenanceFee"}})],1)],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"送保人员",prop:"maintenancePerson"}},[a("el-input",{model:{value:e.formData.maintenancePerson,callback:function(t){e.$set(e.formData,"maintenancePerson","string"==typeof t?t.trim():t)},expression:"formData.maintenancePerson"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"保养地点",prop:"maintenanceSite"}},[a("el-input",{model:{value:e.formData.maintenanceSite,callback:function(t){e.$set(e.formData,"maintenanceSite","string"==typeof t?t.trim():t)},expression:"formData.maintenanceSite"}})],1)],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"增值税发票编号",prop:"maintenanceBill"}},[a("el-input",{model:{value:e.formData.maintenanceBill,callback:function(t){e.$set(e.formData,"maintenanceBill","string"==typeof t?t.trim():t)},expression:"formData.maintenanceBill"}})],1)],1),a("el-col",{attrs:{span:12}},[e.isChassis?e._e():a("el-form-item",{attrs:{label:"本次保养作业时长",prop:"carMileage"}},[a("el-input",{attrs:{maxlength:"17"},on:{blur:e.change},model:{value:e.formData.carMileage,callback:function(t){e.$set(e.formData,"carMileage","string"==typeof t?t.trim():t)},expression:"formData.carMileage"}})],1),e.isChassis?a("el-form-item",{attrs:{label:"本次保养公里数",prop:"carMileage"}},[a("el-input",{attrs:{maxlength:"17"},on:{blur:e.change},model:{value:e.formData.carMileage,callback:function(t){e.$set(e.formData,"carMileage","string"==typeof t?t.trim():t)},expression:"formData.carMileage"}})],1):e._e()],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手机号码",prop:"personPhone"}},[a("el-input",{model:{value:e.formData.personPhone,callback:function(t){e.$set(e.formData,"personPhone","string"==typeof t?t.trim():t)},expression:"formData.personPhone"}})],1)],1),a("el-col",{attrs:{span:12}},[e.isChassis?e._e():a("el-form-item",{attrs:{label:"下次保养作业时长",prop:"overMileage"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.formData.overMileage,callback:function(t){e.$set(e.formData,"overMileage","string"==typeof t?t.trim():t)},expression:"formData.overMileage"}})],1),e.isChassis?a("el-form-item",{attrs:{label:"下次保养公里数",prop:"overMileage"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.formData.overMileage,callback:function(t){e.$set(e.formData,"overMileage","string"==typeof t?t.trim():t)},expression:"formData.overMileage"}})],1):e._e()],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{placeholder:"",type:"textarea"},model:{value:e.formData.remarks,callback:function(t){e.$set(e.formData,"remarks",t)},expression:"formData.remarks"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.confirm}},[e._v(e._s(e.$t("action.confirm")))]),a("el-button",{on:{click:e.cancelDialog}},[e._v(e._s(e.$t("action.cancel")))])],1)],1)},[],!1,null,"c04714a0",null).exports,f=a("b0ad"),p={props:{options:{},flagPage:{type:Boolean,default:!1}},name:"chasis",components:{tip:d},mixins:[o.a,f.a],computed:{_table:function(){return this.$refs.chasisTable}},data:function(){var e;return{param:{type:1,maintenanceType:1},dialog:{flag:!1,loading:!1,modify:(e={maintenancePerson:"",maintenanceFee:"",carMileage:"",plateCode:"",remarks:"",type:"",upkeeporderNo:"",maintenanceTime:"",overMileage:"",maintenanceItems:"",maintenanceBill:"",personPhone:"",maintenanceSite:"",enterpriseId:"",vehicleId:"",fleetName:""},Object(s.a)(e,"plateCode",""),Object(s.a)(e,"id",""),Object(s.a)(e,"overTime",""),Object(s.a)(e,"activeName",""),e)}}},methods:{refresh:function(){this._table.tableInitial()},chasisT:function(e){this.$emit("update:setChasis",{plateCode:e.row.plateCode})},defaultConfig:function(){this.$emit("defaultChasis")},chisas:function(e){this.dialog.flag=!0,this.dialog.title="底盘保养登记",this.dialog.size="dialog-middle",this.dialog.name="tip",this.dialog.modify=e.row,this.dialog.modify.activeName=1}},watch:{"dialog.flag":function(e){e||(this.dialog.name="")}}},u=Object(m.a)(p,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chasis"},[a("div",{staticStyle:{"text-align":"right","margin-bottom":"13px"}},[a("el-button",{attrs:{type:""},on:{click:e.refresh}},[e._v("刷新")]),a("el-button",{on:{click:e.defaultConfig}},[e._v("默认保养配置")])],1),a("cv-grid",{ref:"chasisTable",attrs:{params:e.param,url:"/maintenance/queryChassisUpkeepRemindInfoList"}},[a("el-table-column",{attrs:{label:e.$t("cE.carNumber"),prop:"plateCode"}}),e._v(">\n            "),a("el-table-column",{attrs:{label:e.$t("Upkeep.company"),prop:"enterpriseName"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.lastMile"),prop:"carMileage"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.chaisiDate"),prop:"maintenanceTime"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.nowMileage"),prop:"nowMileage"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.toMile"),prop:"overMileage"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.toDate"),prop:"overTime"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.lastPerson"),prop:"maintenancePerson"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.tel"),prop:"personPhone"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.isRenewal"),prop:"type",formatter:e.tableUpkeep}}),a("el-table-column",{attrs:{label:e.$t("action.operation"),width:"120",prop:"operate"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cv-span",{attrs:{type:"primary"},nativeOn:{click:function(a){return e.chasisT(t)}}},[e._v("保养记录")]),a("cv-span",{attrs:{type:"primary"},nativeOn:{click:function(a){return e.chisas(t)}}},[e._v("登记")])]}}])})],1),a("el-dialog",{attrs:{visible:e.dialog.flag,title:e.dialog.title,"custom-class":e.dialog.size},on:{"update:visible":function(t){return e.$set(e.dialog,"flag",t)}}},[a(e.dialog.name,{tag:"component",attrs:{modify:e.dialog.modify,visible:e.dialog.flag},on:{confirm:e.tableload,"update:visible":function(t){return e.$set(e.dialog,"flag",t)}}})],1)],1)},[],!1,null,null,null).exports,h={props:{options:{},flagPage:{type:Boolean,default:!1}},name:"Jacket",components:{tip:d},computed:{_table2:function(){return this.$refs.jacketTable}},mixins:[o.a],data:function(){var e;return{dialog:{flag:!1,loading:!1,modify:(e={enterpriseId:"",maintenancePerson:"",maintenanceFee:"",carMileage:"",plateCode:"",remarks:"",type:"",overMileage:"",upkeeporderNo:"",maintenanceTime:"",overTime:"",maintenanceItems:"",maintenanceBill:"",personPhone:"",vehicleId:"",fleetName:"",maintenanceSite:""},Object(s.a)(e,"plateCode",""),Object(s.a)(e,"enterpriseName",""),Object(s.a)(e,"id",""),Object(s.a)(e,"activeName",""),e)},param:{type:1,maintenanceType:2}}},methods:{setRecord:function(e){this.$emit("update:setJacket",{plateCode:e.row.plateCode})},defaultConfig:function(){this.$emit("defaultJacket")},jacket:function(e){this.dialog.flag=!0,this.dialog.title="上装保养登记",this.dialog.size="dialog-middle",this.dialog.name="tip",this.dialog.modify=e.row,this.dialog.modify.activeName=2},refresh:function(){this._table2.tableInitial()}},watch:{"dialog.flag":function(e){e||(this.dialog.name="")}}},g=Object(m.a)(h,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Jacket"},[a("div",{staticStyle:{"text-align":"right","margin-bottom":"13px"}},[a("el-button",{attrs:{type:""},on:{click:e.refresh}},[e._v("刷新")]),a("el-button",{on:{click:e.defaultConfig}},[e._v("默认保养配置")])],1),a("cv-grid",{ref:"jacketTable",attrs:{params:e.param,url:"/maintenance/queryChassisUpkeepRemindInfoList"}},[a("el-table-column",{attrs:{label:e.$t("cE.carNumber"),prop:"plateCode"}}),e._v(">\n            "),a("el-table-column",{attrs:{label:e.$t("Upkeep.company"),prop:"enterpriseName"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.chasisTime"),prop:"carMileage"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.lastMaintenanceTime"),prop:"maintenanceTime"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.lastoverMileage"),prop:"overMileage"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.toDate"),prop:"overTime"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.lastPerson"),prop:"maintenancePerson"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.tel"),prop:"personPhone"}}),a("el-table-column",{attrs:{label:e.$t("action.operation"),prop:"operate",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cv-span",{attrs:{type:"primary"},nativeOn:{click:function(a){return e.setRecord(t)}}},[e._v("保养记录")]),a("cv-span",{attrs:{type:"primary"},nativeOn:{click:function(a){return e.jacket(t)}}},[e._v("登记")])]}}])})],1),a("el-dialog",{attrs:{visible:e.dialog.flag,title:e.dialog.title,"custom-class":e.dialog.size},on:{"update:visible":function(t){return e.$set(e.dialog,"flag",t)}}},[a(e.dialog.name,{tag:"component",attrs:{modify:e.dialog.modify,visible:e.dialog.flag},on:{confirm:e.tableload,"update:visible":function(t){return e.$set(e.dialog,"flag",t)}}})],1)],1)},[],!1,null,null,null).exports,b={name:"chasisHistory",components:{tip:d},props:{options:{},flagPage:{type:Boolean,default:!1},initialLoad:{},searchParams:{},refresh:{}},computed:{_table:function(){return this.$refs.chasisHistoryTable}},data:function(){var e;return{dialog:{flag:!1,loading:!1,isMod:!1,modify:(e={maintenancePerson:"",maintenanceFee:"",carMileage:"",overMileage:"",plateCode:"",remarks:"",type:"",upkeeporderNo:"",maintenanceTime:"",overTime:"",maintenanceItems:"",maintenanceBill:"",personPhone:"",vehicleId:"",maintenanceSite:"",fleetName:""},Object(s.a)(e,"plateCode",""),Object(s.a)(e,"enterpriseName",""),Object(s.a)(e,"id",""),Object(s.a)(e,"activeName",""),e)}}},mixins:[o.a,f.a],methods:{remove:function(e){var t=this;this.confirmPrompt().then(function(){t.$http({url:"/maintenance/deleteMaintenanceInfo",params:{ids:e.row.id}}).then(function(e){e.flag?t.tableload():t.$message.error(t.$t("error."+e.errorCode))})})},tableload:function(){this._table.tableInitial()},search:function(){this.$emit("searchHistory")},addRecord:function(){this.$emit("addRecordChasis")},modify:function(e){this.dialog.flag=!0,this.dialog.title="底盘保养登记",this.dialog.size="dialog-middle",this.dialog.name="tip",this.dialog.modify=e.row,this.dialog.modify.activeName=3}},watch:{"dialog.flag":function(e){e||(this.dialog.name="")},refresh:function(e){e&&(this._table.tableInitial(),this.$emit("update:refresh",!1))},initialLoad:function(e){var t=this;e||setTimeout(function(){t._table.tableInitial()},0)}}},y=Object(m.a)(b,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{"text-align":"right","margin-bottom":"13px"}},[a("cv-tool",{staticClass:"cv-tool",staticStyle:{display:"inline-block"},attrs:{name:e.$route.name,data:e.$store.getters.manageMenus,"is-remove":!1,"is-modify":!1,"is-export":!1,"is-add":!1},on:{search:e.search}}),a("el-button",{on:{click:e.addRecord}},[e._v("添加保养记录")])],1),a("cv-grid",{ref:"chasisHistoryTable",attrs:{params:e.searchParams,url:"/maintenance/queryMaintenanceInfoPage"}},[a("el-table-column",{attrs:{label:e.$t("cE.carNumber"),prop:"plateCode"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.company"),prop:"enterpriseName"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.mile"),prop:"carMileage"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.date"),prop:"maintenanceTime"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.free"),prop:"maintenanceFee"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.person"),prop:"maintenancePerson"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.nextMile"),prop:"overMileage"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.nextDate"),prop:"overTime"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.tel"),prop:"personPhone"}}),a("el-table-column",{attrs:{label:e.$t("action.operation"),prop:"operate"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cv-span",{attrs:{type:"primary"},nativeOn:{click:function(a){return e.modify(t)}}},[e._v("修改")]),a("cv-span",{attrs:{type:"danger"},nativeOn:{click:function(a){return e.remove(t)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{visible:e.dialog.flag,title:e.dialog.title,"custom-class":e.dialog.size},on:{"update:visible":function(t){return e.$set(e.dialog,"flag",t)}}},[a(e.dialog.name,{tag:"component",attrs:{modify:e.dialog.modify,visible:e.dialog.flag},on:{confirm:e.tableload,"update:visible":function(t){return e.$set(e.dialog,"flag",t)}}})],1)],1)},[],!1,null,null,null).exports,v={name:"JacketHistory",mixins:[o.a,f.a],components:{tip:d},props:{options:{},flagPage:{type:Boolean,default:!1},initialLoad:{},searchParams:{},refresh:{}},computed:{_table:function(){return this.$refs.jacketHistoryTable}},data:function(){var e;return{dialog:{flag:!1,loading:!1,isMod:!1,modify:(e={maintenancePerson:"",maintenanceFee:"",carMileage:"",plateCode:"",overMileage:"",remarks:"",type:"",upkeeporderNo:"",maintenanceTime:"",overTime:"",maintenanceItems:"",maintenanceBill:"",personPhone:"",vehicleId:"",fleetName:"",maintenanceSite:""},Object(s.a)(e,"plateCode",""),Object(s.a)(e,"enterpriseName",""),Object(s.a)(e,"id",""),Object(s.a)(e,"activeName",""),e)}}},methods:{search:function(){this.$emit("searchJacket")},modify:function(e){this.dialog.flag=!0,this.dialog.title="底盘保养登记",this.dialog.size="dialog-middle",this.dialog.name="tip",this.dialog.modify=e.row,this.dialog.modify.activeName=4},addRecord:function(){this.$emit("addRecordJacket")},remove:function(e){var t=this;this.confirmPrompt().then(function(){t.$http({url:"/maintenance/deleteMaintenanceInfo",params:{ids:e.row.id}}).then(function(e){e.flag?t.tableload():t.$message.error(t.$t("error."+e.errorCode))})})},tableload:function(){this._table.tableInitial()}},watch:{"dialog.flag":function(e){e||(this.dialog.name="")},refresh:function(e){e&&(this._table.tableInitial(),this.$emit("update:refresh",!1))},initialLoad:function(e){var t=this;e||setTimeout(function(){t._table.tableInitial()},0)}}},$=Object(m.a)(v,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"jacket"},[a("div",{staticStyle:{"text-align":"right","margin-bottom":"13px"}},[a("cv-tool",{staticClass:"cv-tool",staticStyle:{display:"inline-block"},attrs:{name:e.$route.name,data:e.$store.getters.manageMenus,"is-remove":!1,"is-modify":!1,"is-export":!1,"is-add":!1},on:{search:e.search}}),a("el-button",{on:{click:e.addRecord}},[e._v("添加保养记录")])],1),a("cv-grid",{ref:"jacketHistoryTable",attrs:{params:e.searchParams,url:"/maintenance/queryMaintenanceInfoPage"}},[a("el-table-column",{attrs:{label:e.$t("cE.carNumber"),prop:"plateCode"}}),e._v(">\n            "),a("el-table-column",{attrs:{label:e.$t("Upkeep.company"),prop:"enterpriseName"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.carMileage"),prop:"carMileage"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.date"),prop:"maintenanceTime"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.free"),prop:"maintenanceFee"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.person"),prop:"maintenancePerson"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.overMileage"),prop:"overMileage"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.nextDate"),prop:"overTime"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.tel"),prop:"personPhone"}}),a("el-table-column",{attrs:{label:e.$t("action.operation"),prop:"operate"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cv-span",{attrs:{type:"primary"},nativeOn:{click:function(a){return e.modify(t)}}},[e._v("修改")]),a("cv-span",{attrs:{type:"danger"},nativeOn:{click:function(a){return e.remove(t)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{visible:e.dialog.flag,title:e.dialog.title,"custom-class":e.dialog.size},on:{"update:visible":function(t){return e.$set(e.dialog,"flag",t)}}},[a(e.dialog.name,{tag:"component",attrs:{modify:e.dialog.modify,visible:e.dialog.flag},on:{confirm:e.tableload,"update:visible":function(t){return e.$set(e.dialog,"flag",t)}}})],1)],1)},[],!1,null,null,null).exports,D=(a("ed08"),{name:"addDefault",props:{modify:{}},inject:["store"],data:function(){return{isKil:!1,isOil:!1,vehicleArry:[],fleetId:"",label:"",formData:{enterpriseName:"",enterpriseId:JSON.parse(localStorage.getItem("user")).enterpriseId,chassisRunningKm:"",chassisRunningTime:"",workTimeHour:"",workTimeDay:"",chassisRunningKmInAdvance:"",chassisRunningTimeInAdvance:"",workTimeHourInAdvance:"",workTimeDayInDdvance:""},loading:!1,rules:{enterpriseName:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],chassisRunningKm:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],chassisRunningTime:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],workTimeHour:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],workTimeDay:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],chassisRunningKmInAdvance:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],chassisRunningTimeInAdvance:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],workTimeHourInAdvance:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],workTimeDayInDdvance:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}]}}},methods:{oilAction:function(e,t){var a=this;this.$store.dispatch(e,t).then(function(e){!e.flag&&e.errorCode?a.$message.error({message:a.$t("error."+e.errorCode)}):(a.$emit("update:visible",!1),a.$message.success(a.$t("UserManage.actionSuccess"))),a.loading=!1}).catch(function(){a.loading=!1})},default:function(){var e=this,t={enterpriseId:this.formData.enterpriseId};this.$http({url:"/MaintenanceSetting/queryMaintenanceSettingInfo",params:t}).then(function(t){e.formData=t.data})},cancelDialog:function(){this.$emit("update:visible",!1)},confirm:function(){var e=this;this.$refs.addDefault.validate(function(t){if(t){var a={chassisRunningKm:e.formData.chassisRunningKm,chassisRunningKmInAdvance:e.formData.chassisRunningKmInAdvance,chassisRunningTime:e.formData.chassisRunningTime,chassisRunningTimeInAdvance:e.formData.chassisRunningTimeInAdvance,workTimeHour:e.formData.workTimeHour,workTimeHourInAdvance:e.formData.workTimeHourInAdvance,workTimeDay:e.formData.workTimeDay,workTimeDayInDdvance:e.formData.workTimeDayInDdvance,enterpriseId:e.formData.enterpriseId};e.$http({url:"/MaintenanceSetting/updateOrInsertMaintenanceSettingInfo",params:a}).then(function(t){t.flag?e.$message.success(e.$t("UserManage.actionSuccess")):e.$message.error({message:e.$t("error."+t.errorCode)}),e.$emit("update:visible",!1)})}})}},mounted:function(){this.default()},watch:{"formData.enterpriseId":function(e){e&&this.default()}}}),k=(a("7e32"),Object(m.a)(D,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"oilUp"},[a("el-form",{ref:"addDefault",attrs:{model:e.formData,rules:e.rules}},[a("div",{staticClass:"header"},[a("el-form-item",{attrs:{label:e.$t("UserManage.wellmadestarm"),prop:"enterpriseName"}},[e.isOil?e._e():a("cv-dropdown-tree",{staticStyle:{width:"270px"},attrs:{data:e.store.company_tree,label:e.label,text:e.formData.enterpriseName},on:{"update:label":function(t){e.label=t},"update:text":function(t){return e.$set(e.formData,"enterpriseName",t)}},model:{value:e.formData.enterpriseId,callback:function(t){e.$set(e.formData,"enterpriseId",t)},expression:"formData.enterpriseId"}})],1)],1),a("div",{staticClass:"left"},[a("el-form-item",{attrs:{label:"底盘运行(公里)",prop:"chassisRunningKm"}},[a("el-input",{attrs:{placeholder:"需要进行保养"},model:{value:e.formData.chassisRunningKm,callback:function(t){e.$set(e.formData,"chassisRunningKm","string"==typeof t?t.trim():t)},expression:"formData.chassisRunningKm"}})],1),a("el-form-item",{attrs:{label:"底盘运行(天)",prop:"chassisRunningTime"}},[a("el-input",{attrs:{placeholder:"需要进行保养"},model:{value:e.formData.chassisRunningTime,callback:function(t){e.$set(e.formData,"chassisRunningTime","string"==typeof t?t.trim():t)},expression:"formData.chassisRunningTime"}})],1),a("el-form-item",{attrs:{label:"上装作业(小时)",prop:"workTimeHour"}},[a("el-input",{attrs:{placeholder:"需要进行保养"},model:{value:e.formData.workTimeHour,callback:function(t){e.$set(e.formData,"workTimeHour","string"==typeof t?t.trim():t)},expression:"formData.workTimeHour"}})],1),a("el-form-item",{attrs:{label:"上装作业(天)",prop:"workTimeDay"}},[a("el-input",{attrs:{placeholder:"需要进行保养"},model:{value:e.formData.workTimeDay,callback:function(t){e.$set(e.formData,"workTimeDay","string"==typeof t?t.trim():t)},expression:"formData.workTimeDay"}})],1)],1),a("div",{staticClass:"right"},[a("el-form-item",{attrs:{label:"提前(公里)",prop:"chassisRunningKmInAdvance"}},[a("el-input",{attrs:{placeholder:"进入保养提醒列表"},model:{value:e.formData.chassisRunningKmInAdvance,callback:function(t){e.$set(e.formData,"chassisRunningKmInAdvance","string"==typeof t?t.trim():t)},expression:"formData.chassisRunningKmInAdvance"}})],1),a("el-form-item",{attrs:{label:"提前(天)",prop:"chassisRunningTimeInAdvance"}},[a("el-input",{attrs:{placeholder:"进入保养提醒列表"},model:{value:e.formData.chassisRunningTimeInAdvance,callback:function(t){e.$set(e.formData,"chassisRunningTimeInAdvance","string"==typeof t?t.trim():t)},expression:"formData.chassisRunningTimeInAdvance"}})],1),a("el-form-item",{attrs:{label:"提前(小时)",prop:"workTimeHourInAdvance"}},[a("el-input",{attrs:{placeholder:"进入保养提醒列表"},model:{value:e.formData.workTimeHourInAdvance,callback:function(t){e.$set(e.formData,"workTimeHourInAdvance","string"==typeof t?t.trim():t)},expression:"formData.workTimeHourInAdvance"}})],1),a("el-form-item",{attrs:{label:"提前(天)",prop:"workTimeDayInDdvance"}},[a("el-input",{attrs:{placeholder:"进入保养提醒列表"},model:{value:e.formData.workTimeDayInDdvance,callback:function(t){e.$set(e.formData,"workTimeDayInDdvance","string"==typeof t?t.trim():t)},expression:"formData.workTimeDayInDdvance"}})],1)],1)]),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.confirm}},[e._v(e._s(e.$t("action.confirm")))]),a("el-button",{on:{click:e.cancelDialog}},[e._v(e._s(e.$t("action.cancel")))])],1)],1)},[],!1,null,"3ba37887",null).exports),T={props:{modify:{}},data:function(){return{}},methods:{cancelDialog:function(){this.modify.flag=!1},confirm:function(){this.$emit("confirm")}}},I=(a("3c32"),Object(m.a)(T,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"searchKeep"},[a("el-form",{ref:"searchT",attrs:{data:e.modify.search,"label-position":"top","label-width":"80px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("UserManage.wellmadestarm")}},[a("el-input",{attrs:{size:"small"},model:{value:e.modify.search.enterpriseName,callback:function(t){e.$set(e.modify.search,"enterpriseName",t)},expression:"modify.search.enterpriseName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"车牌号:"}},[a("el-input",{attrs:{size:"small"},model:{value:e.modify.search.plateCode,callback:function(t){e.$set(e.modify.search,"plateCode",t)},expression:"modify.search.plateCode"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"保养开始日期:"}},[a("el-date-picker",{staticStyle:{width:"270px"},attrs:{editable:!1,clearable:!1,"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"选择时间范围"},model:{value:e.modify.search.mtStartTime,callback:function(t){e.$set(e.modify.search,"mtStartTime",t)},expression:"modify.search.mtStartTime"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"保养结束日期:"}},[a("el-date-picker",{staticStyle:{width:"270px"},attrs:{editable:!1,clearable:!1,"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"选择时间范围"},model:{value:e.modify.search.mtEndTime,callback:function(t){e.$set(e.modify.search,"mtEndTime",t)},expression:"modify.search.mtEndTime"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"下次保养开始日期:"}},[a("el-date-picker",{staticStyle:{width:"270px"},attrs:{editable:!1,clearable:!1,"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"选择时间范围"},model:{value:e.modify.search.otStartTime,callback:function(t){e.$set(e.modify.search,"otStartTime",t)},expression:"modify.search.otStartTime"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"下次保养结束日期:"}},[a("el-date-picker",{staticStyle:{width:"270px"},attrs:{editable:!1,clearable:!1,type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择时间范围"},model:{value:e.modify.search.otEndTime,callback:function(t){e.$set(e.modify.search,"otEndTime",t)},expression:"modify.search.otEndTime"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"送保人:"}},[a("el-input",{model:{value:e.modify.search.maintenancePerson,callback:function(t){e.$set(e.modify.search,"maintenancePerson",t)},expression:"modify.search.maintenancePerson"}})],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v(e._s(e.$t("action.confirm")))]),a("el-button",{on:{click:e.cancelDialog}},[e._v(e._s(e.$t("action.cancel")))])],1)])],1)],1)},[],!1,null,"3e855687",null).exports),w=a("2f62"),S={name:"Upkeep",components:{chasis:u,Jacket:g,chasisHistory:y,JacketHistory:$,tip:d,addDefault:k,searchKeep:I},mixins:[f.a,o.a],computed:{tabs_0:function(){return this.$refs.chasis},tabs_1:function(){return this.$refs.Jacket},tabs_2:function(){return this.$refs.chasisHistory},tabs_3:function(){return this.$refs.JacketHistory}},provide:function(){return{store:this.store}},data:function(){return{linkTo:!0,refresh1:!1,refresh2:!1,changTab:{},JacketTab:{},isBet:!0,pickerOption:{disabledDate:function(e){return e.getTime()>Date.now()-864e5}},tab:0,isJactet:!1,tabs:{activeName:"tabs0",titles:["底盘保养提醒","上装保养提醒","底盘保养记录","上装保养记录"]},dialog:{activeName:0,flag:!1,loading:!1,search:{plateCode:"",mtStartTime:"",mtEndTime:"",otStartTime:"",otEndTime:"",maintenancePerson:""},formData:{enterpriseName:"",chassisRunningKm:"",chassisRunningTime:"",workTimeHour:"",workTimeDay:"",chassisRunningKmInAdvance:"",chassisRunningTimeInAdvance:"",workTimeHourInAdvance:"",workTimeDayInDdvance:""},addDefault:{chassisRunningKm:"",chassisRunningKmInAdvance:"",chassisRunningTime:"",chassisRunningTimeInAdvance:"",workTimeHour:"",workTimeHourInAdvance:"",workTimeDay:"",workTimeDayInDdvance:"",enterpriseId:""}},chSearch:{type:1,maintenanceType:1,plateCode:"",mtStartTime:"",mtEndTime:"",otStartTime:"",otEndTime:"",maintenancePerson:""},jaSearch:{type:1,maintenanceType:2,plateCode:"",mtStartTime:"",mtEndTime:"",otStartTime:"",otEndTime:"",maintenancePerson:""},store:{company_tree:[]}}},methods:Object(n.a)({},Object(w.b)(["queryCompanyInfoList"]),{addRecord:function(){this.dialog.flag=!0,this.dialog.title="添加保养记录",this.dialog.size="dialog-middle",this.dialog.name="tip","tabs2"==this.tabs.activeName?this.dialog.activeName=5:"tabs3"==this.tabs.activeName&&(this.dialog.activeName=6)},defaultConfig:function(){this.dialog.flag=!0,this.dialog.title="默认保养配置",this.dialog.size="dialog-large",this.dialog.name="addDefault"},search:function(){this.dialog.flag=!0,this.dialog.title="搜索",this.dialog.size="dialog-small",this.dialog.name="searchKeep"},keepList:function(){switch(this.tabs.activeName){case"tabs2":this.$service.mapParams(this.chSearch,this.dialog.search),this.refresh1=!0;break;case"tabs3":this.$service.mapParams(this.jaSearch,this.dialog.search),this.refresh2=!0}this.dialog.flag=!1}}),mounted:function(){var e=this;if(this.$route.query)switch(this.tabs.activeName=this.$route.query.activeName,this.dialog.search.plateCode=this.$route.query.plateCode,this.chSearch.plateCode=this.$route.query.plateCode,this.jaSearch.plateCode=this.$route.query.plateCode,this.$route.query.activeName){case"tabs2":this.refresh1=!0,this.linkTo=!1;break;case"tabs3":this.refresh2=!0,this.linkTo=!1}this.queryCompanyInfoList().then(function(t){var a=t.data,i=t.flag;e.store.company_tree=i?a:[]})},watch:{"tabs.activeName":function(e){switch(this.activeName=e){case"tabs2":this.isJactet=!0;break;case"tabs3":this.isJactet=!1}},"dialog.flag":function(e){e||(this.dialog.name="")},changTab:function(e){e.plateCode&&(this.tabs.activeName="tabs2",this.chSearch.plateCode=e.plateCode,this.refresh1=!0,this.changTab={})},JacketTab:function(e){e.plateCode&&(this.tabs.activeName="tabs3",this.jaSearch.plateCode=e.plateCode,this.refresh2=!0,this.JacketTab={})}}},C=Object(m.a)(S,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vehicleInsuranceManage"},[a("cv-content",[a("cv-tabs",{attrs:{titles:e.tabs.titles,forceRender:!1},model:{value:e.tabs.activeName,callback:function(t){e.$set(e.tabs,"activeName",t)},expression:"tabs.activeName"}},[a("chasis",{ref:"chasis",attrs:{setChasis:e.changTab},on:{"update:setChasis":function(t){e.changTab=t},"update:set-chasis":function(t){e.changTab=t},defaultChasis:e.defaultConfig}}),a("Jacket",{ref:"Jacket",attrs:{setJacket:e.JacketTab},on:{"update:setJacket":function(t){e.JacketTab=t},"update:set-jacket":function(t){e.JacketTab=t},defaultJacket:e.defaultConfig}}),a("chasisHistory",{ref:"chasisHistory",attrs:{searchParams:e.chSearch,refresh:e.refresh1,"initial-load":e.linkTo},on:{searchHistory:e.search,"update:searchParams":function(t){e.chSearch=t},"update:search-params":function(t){e.chSearch=t},"update:refresh":function(t){e.refresh1=t},addRecordChasis:e.addRecord}}),a("JacketHistory",{ref:"JacketHistory",attrs:{searchParams:e.jaSearch,refresh:e.refresh2,"initial-load":e.linkTo},on:{searchJacket:e.search,"update:searchParams":function(t){e.jaSearch=t},"update:search-params":function(t){e.jaSearch=t},"update:refresh":function(t){e.refresh2=t},addRecordJacket:e.addRecord}})],1)],1),a("el-dialog",{attrs:{visible:e.dialog.flag,title:e.dialog.title,"custom-class":e.dialog.size},on:{"update:visible":function(t){return e.$set(e.dialog,"flag",t)}}},[a(e.dialog.name,{tag:"component",attrs:{modify:e.dialog},on:{confirm:e.keepList}})],1)],1)},[],!1,null,null,null).exports;C.install=function(e){e.component(C.name,C)},t.default=C},"3c32":function(e,t,a){"use strict";var i=a("6e5f");a.n(i).a},"587c":function(e,t,a){},"6e5f":function(e,t,a){},"7e32":function(e,t,a){"use strict";var i=a("2edd");a.n(i).a},8369:function(e,t,a){"use strict";var i=a("cebc");t.a={data:function(){return{table:{size:10,total:0,current:1,flag:!1,loading:!1,data:[]}}},methods:{tableLoading:function(e,t,a,r){var n=this;a?(this.table.flag=!0,this.table.current=1):this.table.flag=!1,this.table.loading=!0;var s=Object(i.a)({current:this.table.current,size:this.table.size},t);this.$http(r?{url:e,data:s}:{url:e,params:s}).then(function(e){var t=e.data;e.flag&&0!=t.length?(n.table.data=t.records,n.table.total=t.total,n.table.current=t.current):(n.table.data=[],n.table.total=0),n.table.loading=!1}).catch(function(e){n.table.loading=!1})},tableFilterColor:function(e){return this.$filter.plateCodeColor(e.plateColor)},tableFilterIcType:function(e){return this.$filter.icType(e.state)},tableFilterIcResult:function(e){return this.$filter.icResult(e.readerresult)},tableFilterTiredAlarm:function(e){return this.$filter.tiredAlarmType(e.alarm)},tableFilterTiredAdas:function(e){return this.$filter.tiredAdasType(e.alarm)},tableFilterOrderTypeS:function(e){return this.$filter.orderTypeS(e.sendFlag)},tableFilterFormat:function(e){return this.$filter.format(e.orderTime||e.gpsTime)},tableFilterFormats:function(e){return this.$filter.format(e.backTime)},tableBusLineType:function(e){return this.$filter.lineType(e.lineType)},tableFilterAcc:function(e){return this.$filter.accStatus(e.accStatus)},tableSplitMobile:function(e){return e.mobileCode?e.mobileCode.slice(1,e.mobileCode.length):""},tableConfirm:function(e){return this.$filter.isConfirm(e.isnotarize)},tableUpkeep:function(e){return this.$filter.isConfirm(e.type)},tableRenewal:function(e){return this.$filter.renewal(e.state)},tableReMot:function(e){return this.$filter.reMot(e.state)},tableOil:function(e){return this.$filter.fixNumber(e.total,2)},tableSex:function(e){return this.$filter.sex(e.sex)},plateCodeF:function(e){return e.plateCode?e.plateCode:"--"},plateCodeAndColor:function(e){return e.plateCode+"("+this.$filter.plateCodeColor(e.plateColor)+")"},driverStuas:function(e){return this.$filter.alarmStatus(e.fatigueDrive)},overStuas:function(e){return this.$filter.alarmStatus(e.tOversSpeed)},overHStuas:function(e){return this.$filter.alarmStatus(e.tOverSpeedH)},filterAlStuas:function(e){return this.$filter.alarmStatus(e.overSpeed)},filteralarmStuas:function(e){return this.$filter.alarmStatus(e.overSpeedH)},filterLStuas:function(e){return this.$filter.alarmStatus(e.forbid)},applyFlag:function(e){return this.$filter.applyFlag(e.applyFlag)},SEtime:function(e){return this.$filter.SEtime(e.StartTime,e.EndTime)},channelType:function(e){return this.$filter.channelType(e.Channel)},FileSize:function(e){return this.$filter.FileSize(e.fileSize||e.FileSize||0)},AlarmFilter:function(e){return this.$filter.AlarmFilter(e.Alarm)},MediaTypeFilter:function(e){return this.$filter.MediaTypeFilter(e.MediaType)},StreamTypeFilter:function(e){return this.$filter.StreamTypeFilter(e.StreamType)},StorageTypeFilter:function(e){return this.$filter.StorageTypeFilter(e.StorageType)},statusType:function(e){return this.$filter.statusType(e.Status)},fileSource:function(e){return this.$filter.fileSource(e.fileSource)}}}},a6b2:function(e,t,a){"use strict";var i=a("587c");a.n(i).a},b0ad:function(e,t,a){"use strict";(function(e){a("7f7f"),t.a={methods:{confirmPrompt:function(e,t){var a=this,i=e||this.$t("action.confirmIsRemove");return new Promise(function(e,r){a.$confirm(i,a.$t("action.tip"),{confirmButtonText:a.$t("action.confirm"),cancelButtonText:a.$t("action.cancel"),type:"warning"}).then(function(){e()}).catch(function(){"function"==typeof t&&t()})})},timeLimitFunc:function(e,t,a){if(e&&t)return((new Date(t)-new Date(e))/864e5).toFixed(1)<=a||this.$message.error({message:this.$t("请选择时间范围在"+a+"天内")});this.$message.error({message:this.$t("请选择时间范围")})},addRemoveUnique:function(e,t,a){var i=e.length,r=t.length;return r<i?{name:"add",data:this.$service.isUnique(e,t,a)}:i<r?{name:"remove",data:this.$service.isUnique(t,e,a)}:i==r?{name:"equal",data:this.$service.isUnique(e,t,a)}:void 0},showTooltip:function(e,t){var a=e.target,i=this.$refs[t];i.referenceElm=a,i.$refs.popper.style.display="none",i.doDestroy(),i.setExpectedState(!0),i.handleShowPopper()},mouseenterShowTip:function(e,t,a){var i=e.target;if(i.scrollWidth>i.offsetWidth||a)return this.showTooltip(e,t),a?a.startTime+"~"+a.endTime:i.innerText},mouseenterShowToolTip:function(e,t,a){var i=e.target;return this.showTooltip(e,t),!a&&i.innerText},mouseoverHideTip:function(e){var t=this.$refs[e];t&&(t.setExpectedState(!1),t.handleClosePopper())},asyncDownloadScript:function(t,a){var i=this,r=0<arguments.length&&void 0!==t?t:"Baidu",n=1<arguments.length?a:void 0;return e[r]?e[r]._preloader?e[r]._preloader:Promise.resolve(e[r]):(e[r]={},e[r]._preloader=new Promise(function(t,a){var s=document.createElement("script");s.src=n,e.document.body.appendChild(s),i.$service.isIe()&&i.$service.IE_VERSION<11?s.onreadystatechange=function(){"loaded"!=s.readyState&&"complete"!=s.readyState||(t(e[r]),e[r]._preloader=null)}:s.onload=function(){t(e[r]),e[r]._preloader=null}}),e[r]._preloader)}}}}).call(this,a("c8ba"))}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5641447a"],{"2d14":function(t,a,e){},"5cd5":function(t,a,e){"use strict";e("7f7f"),e("ac6a");var i={props:{data:{}},data:function(){return{dataItem:{},defualt:[{value:0,name:"暂"},{value:0,name:"无"},{value:0,name:"数"},{value:0,name:"据"}]}},computed:{myPie:function(){return this.$refs.echartpie},getchart:function(){return this.$refs.echartpie.getEchart()}},methods:{load:function(t){this.$emit("getPie",t)},getLegendData:function(){var t=[];return this.data.seriesData.forEach(function(a){t.push(a.name)}),t},setOpstion:function(){var t=this,a={title:{text:this.data.title?this.data.title:"",x:"center"},tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)",position:["50%","50%"]},series:[{type:"pie",radius:[0,"40%"],left:"center",data:this.data.seriesData?this.data.seriesData:this.defualt,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}],color:this.setColor()};this.dataItem=a,setTimeout(function(){t.$refs.echartpie&&t.getchart.on("click",t.load)},2e3)},getColor:function(){var t=Math.floor(256*Math.random()),a=Math.floor(256*Math.random()),e=Math.floor(150*Math.random());return t==a==255&&(e=Math.floor(150*Math.random())),"rgba(".concat(t,",").concat(a,",").concat(e,",0.6)")},setColor:function(){var t=this;return this.data.seriesData?this.data.seriesData.map(function(a){return t.getColor()}):["#ffae8b","#ffdb5c","#36a2da","#fb7193","#9fe6b7"]}},watch:{data:function(t){this.setOpstion()}}},s=e("2877"),o=Object(s.a)(i,function(){var t=this,a=t.$createElement;return(t._self._c||a)("cv-echart",{ref:"echartpie",staticStyle:{"min-height":"300px"},attrs:{name:"pie",data:t.dataItem}})},[],!1,null,null,null);a.a=o.exports},d4b7:function(t,a,e){"use strict";var i=e("2d14");e.n(i).a},f97f:function(t,a,e){"use strict";e.r(a),e("7f7f");var i=e("5cd5"),s={props:{options:{}},data:function(){return{result:{},loadFlag:!0}},inject:["store"],methods:{echartData:function(t,a){var e={legend:{data:"里程",x:"left"},grid:{left:"3%",bottom:"3%",containLabel:!0},tooltip:{formatter:"时间:{b}<br/>里程:{c}"},xAxis:{type:"category",name:"时间",boundaryGap:!1,data:t||["暂","无","数","据"]},yAxis:[{name:"里程",type:"value"}],series:[{name:"里程",type:"line",smooth:!0,itemStyle:{normal:{color:"red"}},symbolSize:8,lineStyle:{normal:{width:3}},data:a||[0,0,0,0,0]}]};this.result=e,this.loadFlag=!1},getData:function(){var t=this;this.$store.dispatch("queryRoadGradeDistributionDetail",{enterpriseId:this.store.operation.enterpriseId,dateType:this.store.operation.dateType,searchTime:this.store.operation.searchTime,roadLevel:this.options.value}).then(function(a){t.echartData(a.echartData.hours,a.echartData.mileageSum)})}},mounted:function(){this.getData()},watch:{"options.flag":function(t){t||(this.options.name="")}}},o=e("2877"),n=Object(o.a)(s,function(){var t=this.$createElement,a=this._self._c||t;return a("el-row",[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:this.loadFlag,expression:"loadFlag"}],attrs:{span:24}},[a("cv-echart",{attrs:{name:"line",data:this.result}})],1)],1)},[],!1,null,null,null).exports,r=(e("28a5"),e("cebc")),l={props:{options:{}},data:function(){return{lineItem:{},barItem:{},pieItem:{},topdata:{}}},methods:{setParams:function(){return Object(r.a)({},this.options.options,{roadLevel:this.options.value})},showBar:function(t){var a={xAxis:{data:t&&t.alarmName||"暂无数据",axisLabel:{inside:!!t.alarmName,formatter:function(t){return 0!=t&&t.split("").join("\n")}},axisTick:{show:!1},axisLine:{show:!1},z:10},yAxis:{name:"报警(次)",type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{textStyle:{color:"#485465"}}},series:[{data:t&&t.alarmCount||[0,0,0,0],type:"bar"}]};this.barItem=a},showLine:function(t){var a={xAxis:{name:"小时",data:t.hours||"暂无数据"},yAxis:{name:"km",type:"value"},series:[{data:t.mileageSum||[0,0,0,0],type:"line"}]};this.lineItem=a}},mounted:function(){var t=this;this.$http({url:"/driverBehavior/getRoadDistributionByVID",params:this.setParams()}).then(function(a){var e=a.data,i=a.flag;t.topdata=i&&e?e:{}}),this.$http({url:"/driverBehavior/findAlarmStatisticsByType",params:this.setParams()}).then(function(a){var e=a.data;a.flag&&e&&t.showBar(e)}),this.$http({url:"/OperationsDistributedController/queryRoadGradeDistributionDetail",params:this.setParams()}).then(function(a){var e=a.data;a.flag&&e&&t.showLine(e)})},watch:{"options.flag":function(t){t||(this.options.name="")}}},c=Object(o.a)(l,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"singleDialog"},[e("el-row",[e("el-col",{attrs:{span:5}},[t._v("总里程:"+t._s(t.topdata.totalMilages||"--")+"km")]),e("el-col",{attrs:{span:5}},[t._v("总时间:"+t._s(t.topdata.totalHours||"--")+"h")]),e("el-col",{attrs:{span:5}},[t._v("最高速度:"+t._s(t.topdata.maxSpeed||"--")+"km/h")]),e("el-col",{attrs:{span:5}},[t._v("平均速度:"+t._s(t.topdata.avgSpeed||"--")+"km/h")]),e("el-col",{attrs:{span:4}},[t._v("报警总数:"+t._s(t.topdata.totalAlarms||0)+"条")])],1),e("cv-echart",{ref:"lineChart",attrs:{name:"line",data:t.lineItem}}),e("cv-echart",{ref:"barChart",attrs:{name:"bar",data:t.barItem}})],1)},[],!1,null,null,null).exports,d={props:{data:{},title:""},components:{levelDialog:n,analysisPiechat:i.a,singleDialog:c},inject:["store"],data:function(){return{dataItem:{},dialog:{flag:!1,title:"--",name:"",size:"dialog-small",url:"",value:""}}},methods:{clickPie:function(t){this.data.seriesData&&("single"==this.data.modelType?this.singleDialogChart(t):this.mutiDialog(t))},mutiDialog:function(t){this.dialog.flag=!0,this.dialog.title=t.name,this.dialog.name="levelDialog",this.dialog.value=t.data.ROADLEVEL},singleDialogChart:function(t){this.dialog.flag=!0,this.dialog.title="道路等级分布",this.dialog.name="singleDialog",this.dialog.size="dialog-middle",this.dialog.value=t.data.ROADLEVEL,this.dialog.options=this.store.operation}}},h=(e("d4b7"),Object(o.a)(d,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-row",{staticClass:"roadLevel"},[e("el-col",{attrs:{span:24}},[e("div",{staticClass:"titleItem"},[t._v(t._s(t.title))]),e("analysis-piechat",{attrs:{data:t.data,title:t.title},on:{getPie:t.clickPie}}),e("el-dialog",{attrs:{visible:t.dialog.flag,title:t.dialog.title,"custom-class":t.dialog.size,"close-on-click-modal":!1},on:{"update:visible":function(a){return t.$set(t.dialog,"flag",a)}}},[e(t.dialog.name,{tag:"component",attrs:{options:t.dialog}})],1)],1)],1)},[],!1,null,null,null).exports);a.default=h}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-62b84357","chunk-c0a56550","chunk-5641447a","chunk-5ebe9495","chunk-6d1403cc","chunk-456491eb"],{1968:function(t,e,a){"use strict";var i=a("4a96");a.n(i).a},2233:function(t,e,a){},"2d14":function(t,e,a){},4052:function(t,e,a){"use strict";var i=a("2233");a.n(i).a},"43ec":function(t,e,a){"use strict";a.r(e);var i=a("cebc"),s={props:{options:{}},data:function(){return{dataItem:{},flag:!1}},methods:{showLine:function(t){var e={xAxis:{name:this.options.xName,data:t.x||"暂无数据"},yAxis:{name:this.options.yName,type:"value"},series:[{data:t.y||[0,0,0,0],type:"line"}]};this.dataItem=e}},mounted:function(){var t=this;this.flag=!0,this.$http({url:this.options.options.url,params:{dateType:this.options.options.params.dateType,searchTime:this.options.options.params.searchTime,enterpriseId:this.options.options.params.enterpriseId}}).then(function(e){e.flag&&t.showLine(e.data),t.flag=!1})},watch:{"options.flag":function(t){t||(this.options.name="")}}},r=a("2877"),o={components:{lineEchart:Object(r.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.flag,expression:"flag"}]},[a("cv-echart",{ref:"lineEchart",attrs:{name:"line",data:t.dataItem}})],1)},[],!1,null,null,null).exports},props:{data:{}},data:function(){return{dialog:{flag:!1,title:"",size:"dialog-small",name:"line-echart",options:{}}}},inject:["store"],methods:{routerPath:function(t,e){if(t){var a=Object(i.a)({},this.store.operation,{vehicleId:t,plateCode:e});delete a.enterpriseId;var s=this.$service.winParams("/monitor/singleDrivingAnalysis",a);this.$service.winOpen(s)}},avgAlarm:function(){this.validate()&&(this.dialog.options={params:this.store.operation,url:"/driverBehavior/findAlarmCountInfoReport"},this.dialog.xName="日期",this.dialog.yName="次",this.dialog.title="日发生报警次数趋势图",this.dialog.flag=!0,this.dialog.name="line-echart")},avgHour:function(){this.validate()&&(this.dialog.options={params:this.store.operation,url:"/driverBehavior/findRunTimeInfoReport"},this.dialog.xName="日期",this.dialog.yName="小时",this.dialog.title="日行驶时间趋势图",this.dialog.flag=!0,this.dialog.name="line-echart")},avgSpeed:function(){this.validate()&&(this.dialog.options={params:this.store.operation,url:"/driverBehavior/findMileageInfoReport"},this.dialog.xName="日期",this.dialog.yName="里程",this.dialog.title="日行驶里程趋势图",this.dialog.flag=!0,this.dialog.name="line-echart")},validate:function(){return""==this.store.operation.searchTime?(this.$message.warning("请选择查询时间"),!1):null!=this.store.operation.enterpriseId||(this.$message.warning("请选择查询公司"),!1)}}},l=(a("7a71"),Object(r.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"survey"},[a("div",{staticStyle:{padding:"10px"}},[a("el-row",{staticClass:"font1"},[t._v("概况")]),a("el-row",{staticStyle:{"text-align":"center","margin-bottom":"10px"}},[a("span",{staticClass:"font1"},[t._v("公司名称:")]),a("span",{staticClass:"companyName"},[t._v(t._s(t.data.enterpriseName||"--"))])]),a("el-row",[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"font2"},[t._v("\n                    统计周期:"+t._s(t.data.sumDays||0)+"天("+t._s(t.data.sumDaysStr||"--")+")\n                ")])]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"font2"},[t._v("\n                    车辆总数:"+t._s(t.data.vehicleCount||0)+"辆\n                ")])])],1)],1),a("div",{staticClass:"bottomBorder"},[a("el-row",{staticClass:"heightRow"},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"greenKm font3"},[a("span",{on:{click:t.avgSpeed}},[t._v(t._s(t.data.totalMileages||0)+"公里")])])]),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"font1"},[t._v("\n                    车辆日均行驶里程:\n                ")])])],1),a("el-row",{staticClass:"heightRow"},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"font2"},[t._v("\n                    行驶里程\n                ")])]),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"font2",staticStyle:{"text-align":"left"}},[a("span",[t._v(t._s(t.data.vehicleMileageByDayAvg||0)+"Km(最大公里数："),a("span",{staticClass:"bluePlateCode",on:{click:function(e){return t.routerPath(t.data.maxMileagesVehicleId,t.data.maxMileagesVehiclePlateCode)}}},[t._v(t._s(t.data.maxMileagesVehiclePlateCode||"--"))]),t._v("  "+t._s(t.data.maxMileages||0)+"Km)")])])])],1)],1),a("div",{staticClass:"bottomBorder"},[a("el-row",{staticClass:"heightRow"},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"yellowHour font3"},[a("span",{on:{click:t.avgHour}},[t._v(" "+t._s(t.data.totalHour||0)+"小时")])])]),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"font1"},[t._v("\n                  车辆日均行驶时间:\n                ")])])],1),a("el-row",{staticClass:"heightRow"},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"font2"},[t._v("\n                    行驶时间\n                ")])]),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"font2",staticStyle:{"text-align":"left"}},[a("span",[t._v(t._s(t.data.totalHourByDayAvg||0)+"H(最大行驶时间："),a("span",{staticClass:"bluePlateCode",on:{click:function(e){return t.routerPath(t.data.maxHourVehicleId,t.data.maxHourVehiclePlateCode)}}},[t._v(t._s(t.data.maxHourVehiclePlateCode||"--"))]),t._v("  "+t._s(t.data.maxHour||0)+"H)")])])])],1)],1),a("div",{staticClass:"bottomBorder"},[a("el-row",{staticClass:"heightRow"},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"redAlarm font3"},[a("span",{on:{click:t.avgAlarm}},[t._v(t._s(t.data.totalAlarm||0)+"次")])])]),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"font1"},[t._v("\n                    百公里平均报警:\n                ")])])],1),a("el-row",{staticClass:"heightRow"},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"font2"},[t._v("\n                    报警总数\n                ")])]),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"font2",staticStyle:{"text-align":"left"}},[a("span",[t._v(t._s(t.data.oneHundredKmAlarmAvg||0)+"次")])])])],1)],1),a("el-dialog",{attrs:{visible:t.dialog.flag,title:t.dialog.title,"custom-class":t.dialog.size,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.dialog,"flag",e)}}},[a(t.dialog.name,{tag:"component",attrs:{options:t.dialog}})],1)],1)},[],!1,null,"4826aa8a",null).exports);e.default=l},"469f":function(t,e,a){a("6c1c"),a("1654"),t.exports=a("7d7b")},"4a96":function(t,e,a){},"4e64":function(t,e,a){"use strict";var i=a("e7b4");a.n(i).a},"5cd5":function(t,e,a){"use strict";a("7f7f"),a("ac6a");var i={props:{data:{}},data:function(){return{dataItem:{},defualt:[{value:0,name:"暂"},{value:0,name:"无"},{value:0,name:"数"},{value:0,name:"据"}]}},computed:{myPie:function(){return this.$refs.echartpie},getchart:function(){return this.$refs.echartpie.getEchart()}},methods:{load:function(t){this.$emit("getPie",t)},getLegendData:function(){var t=[];return this.data.seriesData.forEach(function(e){t.push(e.name)}),t},setOpstion:function(){var t=this,e={title:{text:this.data.title?this.data.title:"",x:"center"},tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)",position:["50%","50%"]},series:[{type:"pie",radius:[0,"40%"],left:"center",data:this.data.seriesData?this.data.seriesData:this.defualt,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}],color:this.setColor()};this.dataItem=e,setTimeout(function(){t.$refs.echartpie&&t.getchart.on("click",t.load)},2e3)},getColor:function(){var t=Math.floor(256*Math.random()),e=Math.floor(256*Math.random()),a=Math.floor(150*Math.random());return t==e==255&&(a=Math.floor(150*Math.random())),"rgba(".concat(t,",").concat(e,",").concat(a,",0.6)")},setColor:function(){var t=this;return this.data.seriesData?this.data.seriesData.map(function(e){return t.getColor()}):["#ffae8b","#ffdb5c","#36a2da","#fb7193","#9fe6b7"]}},watch:{data:function(t){this.setOpstion()}}},s=a("2877"),r=Object(s.a)(i,function(){var t=this.$createElement;return(this._self._c||t)("cv-echart",{ref:"echartpie",staticStyle:{"min-height":"300px"},attrs:{name:"pie",data:this.dataItem}})},[],!1,null,null,null);e.a=r.exports},"5d73":function(t,e,a){t.exports=a("469f")},"5df3":function(t,e,a){"use strict";var i=a("02f4")(!0);a("01f9")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,a=this._i;return a>=e.length?{value:void 0,done:!0}:(t=i(e,a),this._i+=t.length,{value:t,done:!1})})},"726a":function(t,e,a){"use strict";a.r(e),a("ac6a"),a("5df3");var i=a("a745"),s=a.n(i),r=a("5d73"),o=a.n(r);function l(t,e){return function(t){if(s()(t))return t}(t)||function(t,e){var a=[],i=!0,s=!1,r=void 0;try{for(var l,n=o()(t);!(i=(l=n.next()).done)&&(a.push(l.value),!e||a.length!==e);i=!0);}catch(t){s=!0,r=t}finally{try{i||null==n.return||n.return()}finally{if(s)throw r}}return a}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}a("96cf");var n,c=a("3b8d"),d=a("cebc"),h=a("f97f"),u=a("ad63"),g=a("d655"),p=a("cb3d"),m=a("7945"),v=a("43ec"),f=a("9065"),y=a("2f62"),b=a("e4d3"),C={name:"Analysis",components:{vehicleScore:u.default,roadLevel:h.default,barChart:p.default,alarmMileage:m.a,survey:v.default,comprehensiveScore:f.default,regional:g.default},mixins:[b.a],computed:{_searchRangerLists:function(){return[{key:"date",name:"日"},{key:"month",name:"月"},{key:"year",name:"年"}]}},provide:function(){return{store:this.store}},data:function(){return{store:{operation:{dateType:"date",searchTime:"",enterpriseId:null}},valueFormat:"yyyy-MM-dd",pickerOptions1:{disabledDate:function(t){return t.getTime()>Date.now()-864e5}},loadingFlag:{vehicleCount:!1,vehicleTypeCount:!1,alarmMTCount:!1,surveyFlag:!1,vehicleOperateFlag:!1,roadLevelFlag:!1,scoreByVehicleFlag:!1,socreDataFlag:!1},companyTree:[],treeLoadFlag:!0,surveyData:{},socreData:{},vehicleLowest:{},vehicleTop:{},vehicleScores:{},vehicleOperate:{},roadLevel:{},enterpriseName:"",alarmType:{vehicleId:null,x:null,y:null,topN:null,type:null,ids:null,title:"",dateType:"date",sort:"DESC",searchTime:"2018-06-01",enterpriseId:4924000335560822},alarmTop:{vehicleId:null,x:null,y:null,topN:null,type:null,ids:null,title:"",dateType:"date",searchTime:"2018-06-01"},alarmLowest:{vehicleId:null,x:null,y:null,topN:null,type:null,ids:null,title:"",dateType:"date",searchTime:"2018-06-01"},alarmMT:{legend:["报警","里程"],x:null,y:null},handleflag:!1}},methods:Object(d.a)({},Object(y.b)(["findAlarmStatisticsByVehicle","findAlarmStatisticsByType","findAlarmCountMileageSumInfo","getDriverStatisticsMult","queryOperatingAreaDistribution","queryRoadGradeDistribution","findScoreByVehicle","getScoreByVIDS","getMaxMeleageHourByEnterprise"]),{treeLoaded:function(){this.treeLoadFlag=!1},changeDate:function(t){var e=this;switch(this.store.operation.searchTime="",t){case"date":this.valueFormat="yyyy-MM-dd",this.pickerOptions1={disabledDate:function(t){return t.getTime()>Date.now()-864e5}};break;case"month":this.valueFormat="yyyy-MM",this.pickerOptions1={disabledDate:function(t){var a=new Date;return e.$filter.CompareDate(a.getFullYear()+"-"+a.getMonth(),t.getFullYear()+"-"+(t.getMonth()+1))}};break;case"year":this.valueFormat="yyyy",this.pickerOptions1={disabledDate:function(t){var e=new Date;return t.getFullYear()>e.getFullYear()-1}}}},getCompanyTree:function(){var t=this;this.$http({url:"/enterprise/getEnterpriseTreeList"}).then(function(e){!e.flag&&e.errorCode?t.$message.error({message:t.$t("error."+e.errorCode)}):t.companyTree=e.data})},handleCheckChange:function(t){this.handleflag||(this.enterpriseName=t.text,this.store.operation.enterpriseId=t.id)},search:function(){return this.store.operation.searchTime?this.store.operation.enterpriseId?(this.getBaseInfo(),this.getScoreByVehicle(),this.getScoreByVIDSByVehicle(),this.vehicleCount(),this.vehicleTypeCount(),this.getVehicleOperate(),this.getRoadLevel(),void this.alarmMTCount()):(this.$message.warning("请选择公司"),!1):(this.$message.warning("请选择时间"),!1)},vehicleCount:function(){var t=this;this.loadingFlag.vehicleCount=!0;var e=Object(d.a)({},this.store.operation,{topSize:30,space:10,modelType:"multi"});this.findAlarmStatisticsByVehicle(e).then(function(e){t.alarmTop=e[0],t.alarmLowest=e[1],t.loadingFlag.vehicleCount=!1})},vehicleTypeCount:function(){var t=this;this.loadingFlag.vehicleTypeCount=!0;var e=Object(d.a)({},this.store.operation,{topSize:30,sort:"DESC",space:10,modelType:"multi"});this.findAlarmStatisticsByType(e).then(function(e){t.alarmType=e,t.alarmType.singleType=!0,t.loadingFlag.vehicleTypeCount=!1})},alarmMTCount:function(){var t=this;this.loadingFlag.alarmMTCount=!0;var e=Object(d.a)({},this.store.operation,{modelType:"multi"});this.findAlarmCountMileageSumInfo(e).then(function(e){e.markAreaData=[["00:00","06:00"],["18:00","23:00"]],t.alarmMT=e,t.loadingFlag.alarmMTCount=!1})},getBaseInfo:(n=Object(c.a)(regeneratorRuntime.mark(function t(){var e,a,i,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loadingFlag.surveyFlag=!0,t.next=3,Promise.all([this.getDriverStatisticsMult(this.store.operation),this.getMaxMeleageHourByEnterprise(this.store.operation)]);case 3:e=t.sent,a=l(e,2),i=a[0],s=a[1],this.surveyData=Object.assign(i,s),this.surveyData.enterpriseName=this.enterpriseName,this.loadingFlag.surveyFlag=!1;case 10:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)}),getVehicleOperate:function(){var t=this;this.loadingFlag.vehicleOperateFlag=!0,this.queryOperatingAreaDistribution(this.store.operation).then(function(e){t.vehicleOperate=e,t.loadingFlag.vehicleOperateFlag=!1})},getScoreByVehicle:function(){var t=this;this.loadingFlag.scoreByVehicleFlag=!0,this.findScoreByVehicle(Object(d.a)({},this.store.operation,{topSize:30,space:10})).then(function(e){t.vehicleLowest=e[1],t.vehicleTop=e[0],t.vehicleScores=e[2],e[2].seriesData&&(t.vehicleScores.name="评分"),t.loadingFlag.scoreByVehicleFlag=!1})},getRoadLevel:function(){var t=this;this.loadingFlag.roadLevelFlag=!0,this.queryRoadGradeDistribution(this.store.operation).then(function(e){t.roadLevel=e,t.loadingFlag.roadLevelFlag=!1})},getScoreByVIDSByVehicle:function(){var t=this;this.loadingFlag.socreDataFlag=!0,this.getScoreByVIDS(this.store.operation).then(function(e){var a=e.flag,i=(e.errorCode,e.data);t.socreData=a&&i?i:{},t.loadingFlag.socreDataFlag=!1})}}),mounted:function(){this.getCompanyTree()},watch:{"loadingFlag.surveyFlag":function(t){this.handleflag=t}}},w=(a("b119"),a("2877")),D=Object(w.a)(C,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"multiDrivingAnalysis"},[a("cv-operation",{attrs:{position:"left"}},[a("el-form-item",{attrs:{label:"日期类型"}},[a("el-select",{on:{change:t.changeDate},model:{value:t.store.operation.dateType,callback:function(e){t.$set(t.store.operation,"dateType",e)},expression:"store.operation.dateType"}},t._l(t._searchRangerLists,function(t){return a("el-option",{key:t.key,attrs:{value:t.key,label:t.name}})}),1)],1),a("el-form-item",{attrs:{label:"日期选择"}},[a("el-date-picker",{attrs:{type:t.store.operation.dateType,"value-format":t.valueFormat,"picker-options":t.pickerOptions1},model:{value:t.store.operation.searchTime,callback:function(e){t.$set(t.store.operation,"searchTime",e)},expression:"store.operation.searchTime"}})],1),a("el-form-item",[a("cv-tool",{staticClass:"cv-tool",attrs:{name:t.$route.name,data:t.$store.getters.manageMenus},on:{search:t.search}})],1)],1),a("cv-content",{attrs:{model:"single"}},[a("cv-scrollbar",{directives:[{name:"loading",rawName:"v-loading",value:t.treeLoadFlag,expression:"treeLoadFlag"}],class:[t.treeLoadFlag?"scrollW1":"scrollW2"],attrs:{slot:"aside"},slot:"aside"},[a("div",{staticClass:"selectCompany"},[t._v("公司选择")]),a("cv-tree",{ref:"companyTree",staticStyle:{height:"100%"},attrs:{data:t.companyTree,"tree-loaded":t.treeLoaded},on:{"node-click":t.handleCheckChange}})],1),a("el-row",{attrs:{gutter:8}},[a("el-col",{attrs:{span:12}},[a("cv-lazy-render",{staticClass:"chartZoom",attrs:{time:"1000",height:"300"}},[a("survey",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingFlag.surveyFlag,expression:"loadingFlag.surveyFlag"}],attrs:{data:t.surveyData}})],1)],1),a("el-col",{attrs:{span:12}},[a("cv-lazy-render",{staticClass:"chartZoom",attrs:{time:"1000",height:"300"}},[a("comprehensive-score",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingFlag.socreDataFlag,expression:"loadingFlag.socreDataFlag"}],attrs:{data:t.socreData}})],1)],1)],1),a("el-row",{attrs:{gutter:8}},[a("el-col",{attrs:{span:12}},[a("cv-lazy-render",{staticClass:"chartZoom",attrs:{time:"1000",height:"300"}},[a("bar-chart",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingFlag.scoreByVehicleFlag,expression:"loadingFlag.scoreByVehicleFlag"}],attrs:{title:"车辆评分(最低)",data:t.vehicleLowest}})],1)],1),a("el-col",{attrs:{span:12}},[a("cv-lazy-render",{staticClass:"chartZoom",attrs:{time:"1000",height:"300"}},[a("bar-chart",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingFlag.scoreByVehicleFlag,expression:"loadingFlag.scoreByVehicleFlag"}],attrs:{title:"车辆评分(最高)",data:t.vehicleTop}})],1)],1)],1),a("el-row",{attrs:{gutter:8}},[a("el-col",{attrs:{span:8}},[a("cv-lazy-render",{staticClass:"chartZoom",attrs:{time:"1000",height:"300"}},[a("vehicleScore",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingFlag.scoreByVehicleFlag,expression:"loadingFlag.scoreByVehicleFlag"}],attrs:{title:"车辆评分分布",data:t.vehicleScores}})],1)],1),a("el-col",{attrs:{span:8}},[a("cv-lazy-render",{staticClass:"chartZoom",attrs:{time:"1000",height:"300"}},[a("regional",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingFlag.vehicleOperateFlag,expression:"loadingFlag.vehicleOperateFlag"}],attrs:{title:"运营区域分布(里程)",data:t.vehicleOperate}})],1)],1),a("el-col",{attrs:{span:8}},[a("cv-lazy-render",{staticClass:"chartZoom",attrs:{time:"1000",height:"300"}},[a("roadLevel",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingFlag.roadLevelFlag,expression:"loadingFlag.roadLevelFlag"}],attrs:{title:"道路等级分布(里程)",data:t.roadLevel}})],1)],1)],1),a("el-row",{attrs:{gutter:8}},[a("el-col",{attrs:{span:24}},[a("cv-lazy-render",{staticClass:"chartZoom",attrs:{time:"1000",height:"300"}},[a("bar-chart",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingFlag.vehicleTypeCount,expression:"loadingFlag.vehicleTypeCount"}],ref:"one",attrs:{title:"报警类型统计",data:t.alarmType}})],1)],1)],1),a("el-row",{attrs:{gutter:8}},[a("el-col",{attrs:{span:12}},[a("cv-lazy-render",{staticClass:"chartZoom",attrs:{time:"1000",height:"300"}},[a("bar-chart",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingFlag.vehicleCount,expression:"loadingFlag.vehicleCount"}],attrs:{title:"车辆报警(最低)",data:t.alarmLowest}})],1)],1),a("el-col",{attrs:{span:12}},[a("cv-lazy-render",{staticClass:"chartZoom",attrs:{time:"1000",height:"300"}},[a("bar-chart",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingFlag.vehicleCount,expression:"loadingFlag.vehicleCount"}],attrs:{title:"车辆报警(最高)",data:t.alarmTop}})],1)],1)],1),a("el-row",{attrs:{gutter:8}},[a("el-col",{attrs:{span:24}},[a("cv-lazy-render",{staticClass:"chartZoom",attrs:{time:"1000",height:"300"}},[a("alarm-mileage",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingFlag.alarmMTCount,expression:"loadingFlag.alarmMTCount"}],attrs:{title:"报警、里程、时间分布图",data:t.alarmMT}})],1)],1)],1)],1)],1)},[],!1,null,"25342236",null).exports;e.default=D},"7a71":function(t,e,a){"use strict";var i=a("c4d6");a.n(i).a},"7d7b":function(t,e,a){var i=a("e4ae"),s=a("7cd6");t.exports=a("584a").getIterator=function(t){var e=s(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},9065:function(t,e,a){"use strict";a.r(e);var i={props:{data:{}},data:function(){return{fen:0,score:0}},watch:{data:function(t){t&&(this.score=this.data.score&&this.$filter.toFixed(this.data.score,0)||0,this.fen=this.score/10||0)}}},s=(a("4052"),a("2877")),r=Object(s.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comprehensive"},[a("div",{staticClass:"header"},[t._m(0),a("div",{staticClass:"great"},[t._v("\n            "+t._s(t.score)),a("span",{staticClass:"fen"},[t._v("分")])]),a("el-rate",{staticStyle:{"text-align":"center"},attrs:{disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}",max:10},model:{value:t.fen,callback:function(e){t.fen=e},expression:"fen"}})],1),a("div",{staticClass:"progress"},[a("div",{staticStyle:{display:"inline-block"}},[a("el-progress",{staticClass:"marginRight",attrs:{type:"circle",percentage:t.data.scoreSagety,color:"#ee7b81","stroke-width":12,width:93}}),a("div",{staticClass:"textPosition",staticStyle:{color:"#ee7b81"}},[t._v("安全")])],1),a("div",{staticStyle:{display:"inline-block"}},[a("el-progress",{staticClass:"marginRight",attrs:{type:"circle",percentage:t.data.scoreEconomy,color:"#39b649","stroke-width":12,width:93}}),a("div",{staticClass:"textPosition",staticStyle:{color:"#39b649"}},[t._v("经济")])],1)])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("综合评估分数")])])}],!1,null,"7e69cae1",null).exports;e.default=r},"9a53":function(t,e,a){},ad63:function(t,e,a){"use strict";a.r(e);var i=a("cebc"),s=(a("7f7f"),{props:{options:{}},data:function(){return{}}}),r=a("2877"),o=Object(r.a)(s,function(){var t=this.$createElement,e=this._self._c||t;return e("el-row",[e("el-col",{attrs:{span:24}},[e("cv-grid",{attrs:{params:this.options.params,url:this.options.url}},[e("el-table-column",{attrs:{label:"报警区域分布",prop:"infoid"}}),e("el-table-column",{attrs:{label:"报警类型分布",prop:"infoname"}})],1)],1)],1)},[],!1,null,null,null).exports,l=a("5cd5"),n={props:{options:{}},data:function(){return{}},watch:{"options.flag":function(t){t||(this.options.name="")}}},c=Object(r.a)(n,function(){var t=this.$createElement,e=this._self._c||t;return e("el-row",[e("el-col",{attrs:{span:24}},[e("cv-grid",{attrs:{params:this.options.params,url:this.options.url}},[e("el-table-column",{attrs:{label:"车牌号码",prop:"plateCode"}}),e("el-table-column",{attrs:{label:"评分",prop:"score"}})],1)],1)],1)},[],!1,null,null,null).exports,d={props:{data:{},title:{}},components:{scoreDialog:o,analysisPiechat:l.a,vehicleScoreDialog:c},data:function(){return{dialog:{flag:!1,title:"--",name:"",size:"dialog-small",url:""}}},inject:["store"],methods:{clickPie:function(t){"评分"==this.data.name?this.vehicleScore(t):this.alarmInfoInfo(t)},alarmInfo:function(t){this.dialog.flag=!0,this.dialog.title=t.name,this.dialog.name="scoreDialog",this.dialog.url="/alarmInfo/findSingleCarAlarmInfo"},vehicleScore:function(t){this.dialog.title=t.name,this.dialog.name="vehicleScoreDialog",this.dialog.url="/driverBehavior/findScoreByVehiclePage",this.dialog.params=Object(i.a)({},this.store.operation,{scoreArea:t.data.id}),this.dialog.flag=!0}}},h=(a("1968"),Object(r.a)(d,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"vehicleScore"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"titleItem"},[t._v(t._s(t.title))]),a("analysis-piechat",{attrs:{data:t.data},on:{getPie:t.clickPie}}),a("el-dialog",{attrs:{visible:t.dialog.flag,title:t.dialog.title,"custom-class":t.dialog.size,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.dialog,"flag",e)}}},[a(t.dialog.name,{tag:"component",attrs:{options:t.dialog}})],1)],1)],1)},[],!1,null,null,null).exports);e.default=h},b119:function(t,e,a){"use strict";var i=a("9a53");a.n(i).a},c4d6:function(t,e,a){},d4b7:function(t,e,a){"use strict";var i=a("2d14");a.n(i).a},d655:function(t,e,a){"use strict";a.r(e),a("7f7f");var i={props:{options:{}},inject:["store"],data:function(){return{result:{},loadingFlag:!0}},methods:{getData:function(t){var e={tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},series:[{type:"pie",radius:"55%",left:"center",data:t||["暂无数据"],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};this.result=e,this.loadingFlag=!1}},mounted:function(){var t=this;this.$store.dispatch("queryOperatingAreaDistributionDetail",{enterpriseId:this.store.operation.enterpriseId,dateType:this.store.operation.dateType,searchTime:this.store.operation.searchTime,province:this.options.percent}).then(function(e){t.getData(e.echartData)})},watch:{"options.flag":function(t){t||(this.options.name="")}}},s=a("2877"),r=Object(s.a)(i,function(){var t=this.$createElement,e=this._self._c||t;return e("el-row",[e("el-col",{directives:[{name:"loading",rawName:"v-loading",value:this.loadingFlag,expression:"loadingFlag"}],attrs:{span:24}},[e("cv-echart",{attrs:{name:"pie",data:this.result}})],1)],1)},[],!1,null,null,null).exports,o=a("5cd5"),l=(a("28a5"),a("ac6a"),a("cebc")),n={props:{options:{}},data:function(){return{lineItem:{},barItem:{},pieItem:{},topdata:{},flag:!1}},methods:{setParams:function(){return Object(l.a)({},this.options.options,{province:this.options.percent})},setPieData:function(t){var e=[];return t.forEach(function(t){e.push({value:t.mileageSum,name:t.roadlevelName})}),e},showBar:function(t){var e={xAxis:{data:t&&t.alarmName||"暂无数据",axisLabel:{inside:!!t.alarmName,formatter:function(t){return 0!=t&&t.split("").join("\n")}},axisTick:{show:!1},axisLine:{show:!1},z:10},yAxis:{name:"报警(次)",type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{textStyle:{color:"#485465"}}},series:[{data:t&&t.alarmCount||[0,0,0,0],type:"bar"}]};this.barItem=e},showLine:function(t){var e={xAxis:{name:"小时",data:t.hours||"暂无数据"},yAxis:{name:"km",type:"value"},series:[{data:t.mileageSum||[0,0,0,0],type:"line"}]};this.lineItem=e},showPie:function(t){var e={tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},series:[{type:"pie",radius:"55%",left:"center",data:t||["暂无数据"],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};this.pieItem=e},getAreaDistributionByVID:function(){var t=this;this.$http({url:"/driverBehavior/getAreaDistributionByVID",params:this.setParams()}).then(function(e){var a=e.data,i=e.flag;t.topdata=i&&a?a:{}})},findAlarmStatisticsByType:function(){var t=this;this.$http({url:"/driverBehavior/findAlarmStatisticsByType",params:this.setParams()}).then(function(e){var a=e.data;e.flag&&a?t.showBar(a):t.showBar([])})},queryRoadGradeDistributionDetail:function(){var t=this;this.$http({url:"/OperationsDistributedController/queryRoadGradeDistributionDetail",params:this.setParams()}).then(function(e){var a=e.data;e.flag&&a&&t.showLine(a)})},queryOperatingAreaDistributionDetail:function(){var t=this;this.$http({url:"/OperationsDistributedController/queryOperatingAreaDistributionDetail",params:this.setParams()}).then(function(e){var a=e.data;e.flag&&a&&t.showPie(t.setPieData(a))})}},mounted:function(){this.getAreaDistributionByVID(),this.findAlarmStatisticsByType(),this.queryRoadGradeDistributionDetail(),this.queryOperatingAreaDistributionDetail()},watch:{"options.flag":function(t){t||(this.options.name="")}}},c=Object(s.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.flag,expression:"flag"}],staticClass:"singleDialog"},[a("el-row",[a("el-col",{attrs:{span:5}},[t._v("总里程:"+t._s(t.topdata.totalMilages||"--")+"km")]),a("el-col",{attrs:{span:5}},[t._v("总时间:"+t._s(t.topdata.totalHours||"--")+"h")]),a("el-col",{attrs:{span:5}},[t._v("最高速度:"+t._s(t.topdata.maxSpeed||"--")+"km/h")]),a("el-col",{attrs:{span:5}},[t._v("平均速度:"+t._s(t.topdata.avgSpeed||"--")+"km/h")]),a("el-col",{attrs:{span:4}},[t._v("报警总数:"+t._s(t.topdata.totalAlarms||0)+"条")])],1),a("cv-echart",{ref:"lineChart",attrs:{name:"line",data:t.lineItem}}),a("cv-echart",{ref:"barChart",attrs:{name:"bar",data:t.barItem}}),a("cv-echart",{ref:"pieChart",attrs:{name:"pie",data:t.pieItem}})],1)},[],!1,null,null,null).exports,d={props:{data:{},title:""},components:{regionalDialog:r,analysisPiechat:o.a,singleDialog:c},data:function(){return{dialog:{flag:!1,title:"--",name:"",size:"dialog-small",percent:""}}},inject:["store"],methods:{clickPie:function(t){this.data.seriesData&&("single"==this.data.modelType?this.singleDialogChart(t):this.mutiDialog(t))},mutiDialog:function(t){this.dialog.flag=!0,this.dialog.title=t.name,this.dialog.name="regionalDialog",this.dialog.percent=t.data.PROVINCE},singleDialogChart:function(t){this.dialog.flag=!0,this.dialog.title="运营区域分布",this.dialog.name="singleDialog",this.dialog.size="dialog-middle",this.dialog.percent=t.data.PROVINCE,this.dialog.options=this.store.operation}}},h=(a("4e64"),Object(s.a)(d,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"regional"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"titleItem"},[t._v(t._s(t.title))]),a("analysis-piechat",{attrs:{data:t.data},on:{getPie:t.clickPie}}),a("el-dialog",{attrs:{visible:t.dialog.flag,title:t.dialog.title,"custom-class":t.dialog.size,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.dialog,"flag",e)}}},[a(t.dialog.name,{tag:"component",attrs:{options:t.dialog}})],1)],1)],1)},[],!1,null,null,null).exports);e.default=h},e4d3:function(t,e,a){"use strict";e.a={data:function(){return{store:{company_tree:[]}}},provide:function(){return{store:this.store}},methods:{staticTree:function(){var t=this;this.$http({url:"/enterprise/findEnterpriseOrganizationTreeList"}).then(function(e){var a=e.data,i=e.flag;t.store.company_tree=i?a:[]})},staticTreeOld:function(){var t=this;this.$http({url:"/enterprise/getEnterpriseTreeList"}).then(function(e){var a=e.data,i=e.flag;t.store.company_tree=i?a:[]})}}}},e7b4:function(t,e,a){},f97f:function(t,e,a){"use strict";a.r(e),a("7f7f");var i=a("5cd5"),s={props:{options:{}},data:function(){return{result:{},loadFlag:!0}},inject:["store"],methods:{echartData:function(t,e){var a={legend:{data:"里程",x:"left"},grid:{left:"3%",bottom:"3%",containLabel:!0},tooltip:{formatter:"时间:{b}<br/>里程:{c}"},xAxis:{type:"category",name:"时间",boundaryGap:!1,data:t||["暂","无","数","据"]},yAxis:[{name:"里程",type:"value"}],series:[{name:"里程",type:"line",smooth:!0,itemStyle:{normal:{color:"red"}},symbolSize:8,lineStyle:{normal:{width:3}},data:e||[0,0,0,0,0]}]};this.result=a,this.loadFlag=!1},getData:function(){var t=this;this.$store.dispatch("queryRoadGradeDistributionDetail",{enterpriseId:this.store.operation.enterpriseId,dateType:this.store.operation.dateType,searchTime:this.store.operation.searchTime,roadLevel:this.options.value}).then(function(e){t.echartData(e.echartData.hours,e.echartData.mileageSum)})}},mounted:function(){this.getData()},watch:{"options.flag":function(t){t||(this.options.name="")}}},r=a("2877"),o=Object(r.a)(s,function(){var t=this.$createElement,e=this._self._c||t;return e("el-row",[e("el-col",{directives:[{name:"loading",rawName:"v-loading",value:this.loadFlag,expression:"loadFlag"}],attrs:{span:24}},[e("cv-echart",{attrs:{name:"line",data:this.result}})],1)],1)},[],!1,null,null,null).exports,l=(a("28a5"),a("cebc")),n={props:{options:{}},data:function(){return{lineItem:{},barItem:{},pieItem:{},topdata:{}}},methods:{setParams:function(){return Object(l.a)({},this.options.options,{roadLevel:this.options.value})},showBar:function(t){var e={xAxis:{data:t&&t.alarmName||"暂无数据",axisLabel:{inside:!!t.alarmName,formatter:function(t){return 0!=t&&t.split("").join("\n")}},axisTick:{show:!1},axisLine:{show:!1},z:10},yAxis:{name:"报警(次)",type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{textStyle:{color:"#485465"}}},series:[{data:t&&t.alarmCount||[0,0,0,0],type:"bar"}]};this.barItem=e},showLine:function(t){var e={xAxis:{name:"小时",data:t.hours||"暂无数据"},yAxis:{name:"km",type:"value"},series:[{data:t.mileageSum||[0,0,0,0],type:"line"}]};this.lineItem=e}},mounted:function(){var t=this;this.$http({url:"/driverBehavior/getRoadDistributionByVID",params:this.setParams()}).then(function(e){var a=e.data,i=e.flag;t.topdata=i&&a?a:{}}),this.$http({url:"/driverBehavior/findAlarmStatisticsByType",params:this.setParams()}).then(function(e){var a=e.data;e.flag&&a&&t.showBar(a)}),this.$http({url:"/OperationsDistributedController/queryRoadGradeDistributionDetail",params:this.setParams()}).then(function(e){var a=e.data;e.flag&&a&&t.showLine(a)})},watch:{"options.flag":function(t){t||(this.options.name="")}}},c=Object(r.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"singleDialog"},[a("el-row",[a("el-col",{attrs:{span:5}},[t._v("总里程:"+t._s(t.topdata.totalMilages||"--")+"km")]),a("el-col",{attrs:{span:5}},[t._v("总时间:"+t._s(t.topdata.totalHours||"--")+"h")]),a("el-col",{attrs:{span:5}},[t._v("最高速度:"+t._s(t.topdata.maxSpeed||"--")+"km/h")]),a("el-col",{attrs:{span:5}},[t._v("平均速度:"+t._s(t.topdata.avgSpeed||"--")+"km/h")]),a("el-col",{attrs:{span:4}},[t._v("报警总数:"+t._s(t.topdata.totalAlarms||0)+"条")])],1),a("cv-echart",{ref:"lineChart",attrs:{name:"line",data:t.lineItem}}),a("cv-echart",{ref:"barChart",attrs:{name:"bar",data:t.barItem}})],1)},[],!1,null,null,null).exports,d={props:{data:{},title:""},components:{levelDialog:o,analysisPiechat:i.a,singleDialog:c},inject:["store"],data:function(){return{dataItem:{},dialog:{flag:!1,title:"--",name:"",size:"dialog-small",url:"",value:""}}},methods:{clickPie:function(t){this.data.seriesData&&("single"==this.data.modelType?this.singleDialogChart(t):this.mutiDialog(t))},mutiDialog:function(t){this.dialog.flag=!0,this.dialog.title=t.name,this.dialog.name="levelDialog",this.dialog.value=t.data.ROADLEVEL},singleDialogChart:function(t){this.dialog.flag=!0,this.dialog.title="道路等级分布",this.dialog.name="singleDialog",this.dialog.size="dialog-middle",this.dialog.value=t.data.ROADLEVEL,this.dialog.options=this.store.operation}}},h=(a("d4b7"),Object(r.a)(d,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"roadLevel"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"titleItem"},[t._v(t._s(t.title))]),a("analysis-piechat",{attrs:{data:t.data,title:t.title},on:{getPie:t.clickPie}}),a("el-dialog",{attrs:{visible:t.dialog.flag,title:t.dialog.title,"custom-class":t.dialog.size,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.dialog,"flag",e)}}},[a(t.dialog.name,{tag:"component",attrs:{options:t.dialog}})],1)],1)],1)},[],!1,null,null,null).exports);e.default=h}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-c0a56550"],{"4e64":function(t,a,e){"use strict";var i=e("e7b4");e.n(i).a},"5cd5":function(t,a,e){"use strict";e("7f7f"),e("ac6a");var i={props:{data:{}},data:function(){return{dataItem:{},defualt:[{value:0,name:"暂"},{value:0,name:"无"},{value:0,name:"数"},{value:0,name:"据"}]}},computed:{myPie:function(){return this.$refs.echartpie},getchart:function(){return this.$refs.echartpie.getEchart()}},methods:{load:function(t){this.$emit("getPie",t)},getLegendData:function(){var t=[];return this.data.seriesData.forEach(function(a){t.push(a.name)}),t},setOpstion:function(){var t=this,a={title:{text:this.data.title?this.data.title:"",x:"center"},tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)",position:["50%","50%"]},series:[{type:"pie",radius:[0,"40%"],left:"center",data:this.data.seriesData?this.data.seriesData:this.defualt,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}],color:this.setColor()};this.dataItem=a,setTimeout(function(){t.$refs.echartpie&&t.getchart.on("click",t.load)},2e3)},getColor:function(){var t=Math.floor(256*Math.random()),a=Math.floor(256*Math.random()),e=Math.floor(150*Math.random());return t==a==255&&(e=Math.floor(150*Math.random())),"rgba(".concat(t,",").concat(a,",").concat(e,",0.6)")},setColor:function(){var t=this;return this.data.seriesData?this.data.seriesData.map(function(a){return t.getColor()}):["#ffae8b","#ffdb5c","#36a2da","#fb7193","#9fe6b7"]}},watch:{data:function(t){this.setOpstion()}}},s=e("2877"),r=Object(s.a)(i,function(){var t=this,a=t.$createElement;return(t._self._c||a)("cv-echart",{ref:"echartpie",staticStyle:{"min-height":"300px"},attrs:{name:"pie",data:t.dataItem}})},[],!1,null,null,null);a.a=r.exports},d655:function(t,a,e){"use strict";e.r(a),e("7f7f");var i={props:{options:{}},inject:["store"],data:function(){return{result:{},loadingFlag:!0}},methods:{getData:function(t){var a={tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},series:[{type:"pie",radius:"55%",left:"center",data:t||["暂无数据"],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};this.result=a,this.loadingFlag=!1}},mounted:function(){var t=this;this.$store.dispatch("queryOperatingAreaDistributionDetail",{enterpriseId:this.store.operation.enterpriseId,dateType:this.store.operation.dateType,searchTime:this.store.operation.searchTime,province:this.options.percent}).then(function(a){t.getData(a.echartData)})},watch:{"options.flag":function(t){t||(this.options.name="")}}},s=e("2877"),r=Object(s.a)(i,function(){var t=this.$createElement,a=this._self._c||t;return a("el-row",[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:this.loadingFlag,expression:"loadingFlag"}],attrs:{span:24}},[a("cv-echart",{attrs:{name:"pie",data:this.result}})],1)],1)},[],!1,null,null,null).exports,n=e("5cd5"),o=(e("28a5"),e("ac6a"),e("cebc")),l={props:{options:{}},data:function(){return{lineItem:{},barItem:{},pieItem:{},topdata:{},flag:!1}},methods:{setParams:function(){return Object(o.a)({},this.options.options,{province:this.options.percent})},setPieData:function(t){var a=[];return t.forEach(function(t){a.push({value:t.mileageSum,name:t.roadlevelName})}),a},showBar:function(t){var a={xAxis:{data:t&&t.alarmName||"暂无数据",axisLabel:{inside:!!t.alarmName,formatter:function(t){return 0!=t&&t.split("").join("\n")}},axisTick:{show:!1},axisLine:{show:!1},z:10},yAxis:{name:"报警(次)",type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{textStyle:{color:"#485465"}}},series:[{data:t&&t.alarmCount||[0,0,0,0],type:"bar"}]};this.barItem=a},showLine:function(t){var a={xAxis:{name:"小时",data:t.hours||"暂无数据"},yAxis:{name:"km",type:"value"},series:[{data:t.mileageSum||[0,0,0,0],type:"line"}]};this.lineItem=a},showPie:function(t){var a={tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},series:[{type:"pie",radius:"55%",left:"center",data:t||["暂无数据"],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};this.pieItem=a},getAreaDistributionByVID:function(){var t=this;this.$http({url:"/driverBehavior/getAreaDistributionByVID",params:this.setParams()}).then(function(a){var e=a.data,i=a.flag;t.topdata=i&&e?e:{}})},findAlarmStatisticsByType:function(){var t=this;this.$http({url:"/driverBehavior/findAlarmStatisticsByType",params:this.setParams()}).then(function(a){var e=a.data;a.flag&&e?t.showBar(e):t.showBar([])})},queryRoadGradeDistributionDetail:function(){var t=this;this.$http({url:"/OperationsDistributedController/queryRoadGradeDistributionDetail",params:this.setParams()}).then(function(a){var e=a.data;a.flag&&e&&t.showLine(e)})},queryOperatingAreaDistributionDetail:function(){var t=this;this.$http({url:"/OperationsDistributedController/queryOperatingAreaDistributionDetail",params:this.setParams()}).then(function(a){var e=a.data;a.flag&&e&&t.showPie(t.setPieData(e))})}},mounted:function(){this.getAreaDistributionByVID(),this.findAlarmStatisticsByType(),this.queryRoadGradeDistributionDetail(),this.queryOperatingAreaDistributionDetail()},watch:{"options.flag":function(t){t||(this.options.name="")}}},c=Object(s.a)(l,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.flag,expression:"flag"}],staticClass:"singleDialog"},[e("el-row",[e("el-col",{attrs:{span:5}},[t._v("总里程:"+t._s(t.topdata.totalMilages||"--")+"km")]),e("el-col",{attrs:{span:5}},[t._v("总时间:"+t._s(t.topdata.totalHours||"--")+"h")]),e("el-col",{attrs:{span:5}},[t._v("最高速度:"+t._s(t.topdata.maxSpeed||"--")+"km/h")]),e("el-col",{attrs:{span:5}},[t._v("平均速度:"+t._s(t.topdata.avgSpeed||"--")+"km/h")]),e("el-col",{attrs:{span:4}},[t._v("报警总数:"+t._s(t.topdata.totalAlarms||0)+"条")])],1),e("cv-echart",{ref:"lineChart",attrs:{name:"line",data:t.lineItem}}),e("cv-echart",{ref:"barChart",attrs:{name:"bar",data:t.barItem}}),e("cv-echart",{ref:"pieChart",attrs:{name:"pie",data:t.pieItem}})],1)},[],!1,null,null,null).exports,h={props:{data:{},title:""},components:{regionalDialog:r,analysisPiechat:n.a,singleDialog:c},data:function(){return{dialog:{flag:!1,title:"--",name:"",size:"dialog-small",percent:""}}},inject:["store"],methods:{clickPie:function(t){this.data.seriesData&&("single"==this.data.modelType?this.singleDialogChart(t):this.mutiDialog(t))},mutiDialog:function(t){this.dialog.flag=!0,this.dialog.title=t.name,this.dialog.name="regionalDialog",this.dialog.percent=t.data.PROVINCE},singleDialogChart:function(t){this.dialog.flag=!0,this.dialog.title="运营区域分布",this.dialog.name="singleDialog",this.dialog.size="dialog-middle",this.dialog.percent=t.data.PROVINCE,this.dialog.options=this.store.operation}}},d=(e("4e64"),Object(s.a)(h,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-row",{staticClass:"regional"},[e("el-col",{attrs:{span:24}},[e("div",{staticClass:"titleItem"},[t._v(t._s(t.title))]),e("analysis-piechat",{attrs:{data:t.data},on:{getPie:t.clickPie}}),e("el-dialog",{attrs:{visible:t.dialog.flag,title:t.dialog.title,"custom-class":t.dialog.size,"close-on-click-modal":!1},on:{"update:visible":function(a){return t.$set(t.dialog,"flag",a)}}},[e(t.dialog.name,{tag:"component",attrs:{options:t.dialog}})],1)],1)],1)},[],!1,null,null,null).exports);a.default=d},e7b4:function(t,a,e){}}]);
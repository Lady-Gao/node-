(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-500a3e5c"],{"71b5":function(e,t,a){"use strict";var i=a("bfef");a.n(i).a},"8369f":function(e,t,a){},"88e6":function(e,t,a){"use strict";var i=a("8369f");a.n(i).a},a5fa:function(e,t,a){"use strict";var i=a("e773");a.n(i).a},be61:function(e,t,a){"use strict";a.r(t),a("a481");var i={props:{id:{},data:{}},data:function(){return{}},methods:{},watch:{},mounted:function(){}},s=(a("71b5"),a("2877")),o=Object(s.a)(i,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"onlyOneVideo"},[t("OBJECT",{attrs:{codebase:".\\TLMDVRAx.CAB#version=1,0,5,3",id:this.id,name:"TLMDvrAx",CLASSID:"CLSID:15AB9520-D6EF-499B-AB7F-906AB0BA04AD",events:"true",HEIGHT:"500",WIDTH:"800",align:"top"}},[t("param",{attrs:{value:"/swf/park/1/1303872749292.swf",name:"movie"}}),t("param",{attrs:{value:"high",name:"quality"}}),t("param",{attrs:{value:"always",name:"allowScriptAccess"}}),t("param",{attrs:{value:"internal",name:"allowNetworking"}}),t("param",{attrs:{value:"transparent",name:"wmode"}}),t("embed",{attrs:{height:"600",width:"940",wmode:"transparent",type:"application/x-shockwave-flash",pluginspage:"http://www.macromedia.com/go/getflashplayer",allownetworking:"internal",allowscriptaccess:"always",quality:"high",src:"/swf/park/1/1303872749292.swf"}})])],1)},[],!1,null,null,null).exports,r={components:{videoObject:o},props:{data:{}},data:function(){return{WindNum:"4",WindNumArr:[{name:"1",value:1},{name:"4",value:4}],cameraV:"全部",camera:[{name:"全部",value:4},{name:"摄像头1",value:0},{name:"摄像头2",value:1},{name:"摄像头3",value:2},{name:"摄像头4",value:3}],fileName:"",recordfileName:"",snapFlag:!0,voiceOpenFlag:!0,voiceClosedFlag:!0,cameraFlag:!1,szServerIP:"",nSeverPort:"",szUserName:"",szPassWord:"",deviceID:""}},methods:{videoLogin:function(){var e=this.szServerIP,t=this.nSeverPort,a=this.szUserName,i=this.szPassWord,s=this.getVideoDom("onVideo").LoginServer(e,t,a,i);s?(this.getVideoDom("onVideo").ShowWndStyle=4,this.getVideoDom("onVideo").SetDrawText(1,"")):this.$message.error({message:this.$t("videoErrorCode."+s)})},getVideoDom:function(e){return document.getElementById(e)},openVideo:function(){this.cameraFlag=!0;var e=this.deviceID,t=this.cameraV;"全部"==t&&(t=4);var a="";if(t<4)0==(a=this.getVideoDom("onVideo").PlayVideoByWnd(e,t,t))&&(this.snapFlag=!1,this.voiceOpenFlag=!1,this.voiceClosedFlag=!1),0!=a&&this.$message.error({message:this.$t("videoErrorCode."+a)}),this.getVideoDom("onVideo").SetDrawText(7,"");else for(var i=0;i<t;i++)a=this.getVideoDom("onVideo").PlayVideoByWnd(e,i,i),this.getVideoDom("onVideo").SetDrawText(7,""),0==a&&(this.snapFlag=!1,this.voiceOpenFlag=!1,this.voiceClosedFlag=!1),0!=a&&this.$message.error({message:this.$t("videoErrorCode."+a)})},closedVideo:function(){this.cameraFlag=!1;var e=this.cameraV;if("全部"==e&&(e=4),e<4)this.getVideoDom("onVideo").StopVideoByWndNum(e);else for(var t=0;t<e;t++)this.getVideoDom("onVideo").StopVideoByWndNum(t);this.snapFlag=!0,this.voiceOpenFlag=!0,this.voiceClosedFlag=!0},snapPicture:function(){var e=this.cameraV;"全部"==e&&(e=4);var t="",a=this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss").replace(/-/g,"").replace(/:/g,"").replace(/ /g,"");t=3<e?"D:\\A-picture\\"+a+".jpg":"D:\\A-picture\\CH"+e+"-"+a+".jpg";var i=this.getVideoDom("onVideo").SnapPicture(t);0!=i?this.$message.error({message:this.$t("videoErrorCode."+i)}):this.$message.success({message:"抓拍图片已保存至D:\\A-picture文件夹"})},searchVideo:function(){var e=((new Date).getTime()+999)/1e3,t=this.deviceID;this.getVideoDom("onVideo").StartRemoteFileSearch(t,0,16,0,e)},setWindNum:function(){var e=this.windNum;this.getVideoDom("onVideo").ShowWndStyle=e},openVoice:function(){var e=this.deviceID,t=this.cameraV;if("全部"==t&&(t=4),4==t)this.$message.error({message:this.$t("只能在单个摄像头下开启声音！")});else{var a=this.getVideoDom("onVideo").PlayAudioDirectly(e,t);0!=a?this.$message.error({message:this.$t("videoErrorCode."+a)}):this.$message.success({message:"声音打开！"})}},closedVoice:function(){var e=this.deviceID,t=this.cameraV;"全部"==t&&(t=4);for(var a=0;a<t;a++)this.getVideoDom("onVideo").StopAudioDirectly(e,t)}},watch:{},mounted:function(){var e=JSON.parse(localStorage.getItem("VideologinData"));this.deviceID=e.dvrId,this.szServerIP=e.ip,this.nSeverPort=e.port,this.szUserName=e.username,this.szPassWord=e.password,this.videoLogin()}},n=(a("efd0"),Object(s.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cv-multimedia-manage"},[a("cv-scrollbar",{staticClass:"cvs"},[a("el-form",{staticClass:"operateleft",attrs:{"label-width":"90px"}},[a("el-form-item",{staticStyle:{"margin-bottom":"350px"},attrs:{label:"摄像头:"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{disabled:e.cameraFlag,size:"small"},model:{value:e.cameraV,callback:function(t){e.cameraV=t},expression:"cameraV"}},e._l(e.camera,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.value}})}),1)],1),a("div",{staticClass:"operate"},[a("el-col",{staticClass:"btnStyle",attrs:{span:12}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"请先选中需要抓拍的窗口",placement:"top"}},[a("el-button",{attrs:{disabled:e.snapFlag},on:{click:function(t){return e.snapPicture()}}},[e._v("抓图")])],1)],1),a("el-col",{staticClass:"btnStyle",attrs:{span:12}},[a("el-button",{on:{click:function(t){return e.openVideo()}}},[e._v("打开视频")])],1),a("el-col",{staticClass:"btnStyle",attrs:{span:12}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.closedVideo()}}},[e._v("关闭视频")])],1),a("el-col",{staticClass:"btnStyle",attrs:{span:12}},[a("el-button",{attrs:{disabled:e.voiceOpenFlag},on:{click:function(t){return e.openVoice()}}},[e._v("打开声音")])],1),a("el-col",{staticClass:"btnStyle",attrs:{span:12}},[a("el-button",{attrs:{type:"primary",disabled:e.voiceClosedFlag},on:{click:function(t){return e.closedVoice()}}},[e._v("关闭声音")])],1)],1)],1),a("el-row",{staticClass:"onlyOne"},[a("el-col",{attrs:{span:12}},[a("videoObject",{attrs:{id:"onVideo"}})],1)],1)],1)],1)},[],!1,null,null,null).exports),l=(a("6b54"),a("28a5"),{components:{videoObject:o},data:function(){return{props:{options:{}},IsParseName:"远程时间暂停回放",cameraNum:"",camera:[{name:"摄像头1",value:0},{name:"摄像头2",value:1},{name:"摄像头3",value:2},{name:"摄像头4",value:3}],type:"",typeArr:[{name:"时间",value:"0x1"},{name:"移动侦测",value:"0x2"},{name:"报警",value:"0x4"},{name:"手动",value:"0x8"},{name:"全部",value:"0x10"}],operation:{time:"",startTime:"",endTime:""},videoAccount:"",videoMess:"",timeArr:[],defaultR:"",choseStime:"",choseEtime:"",fileNm:"",szServerIP:"",nSeverPort:"",szUserName:"",szPassWord:"",deviceID:"",playBackFlag:!0,stopBackFlag:!0,radioFlag:!1}},methods:{videoLogin:function(){var e=this.szServerIP,t=this.nSeverPort,a=this.szUserName,i=this.szPassWord;this.getVideoDom("replayObject").LoginServer(e,t,a,i)?this.getVideoDom("replayObject").ShowWndStyle=1:this.$message.error("登陆失败！")},getVideoDom:function(e){return document.getElementById(e)},getChosetime:function(e){var t=e.split("~");this.choseStime=t[1],this.choseEtime=t[2],this.fileNm=t[0]},StartRemoteRecTimePlay:function(){this.radioFlag=!0;var e=this.deviceID,t=this.getVideoDom("replayObject").StartRemoteRecFilePlay(e,this.fileNm,0);0==t?this.getVideoDom("replayObject").SetDrawText(13,"回放成功"):this.$message.error({message:this.$t("videoErrorCode."+t)})},show_date_time:function(e){var t=new Date("1/1/1970 00:00:00");return(new Date(e).getTime()-t.getTime())/1e3},StopRemoteRecPlay:function(){this.radioFlag=!1,this.getVideoDom("replayObject").StopRemoteRecPlay()},RemoteRecPlayPause:function(){var e=100;"远程时间暂停回放"==this.IsParseName?0==(e=this.getVideoDom("replayObject").RemoteRecPlayPause(1))?this.IsParseName:alert("执行失败，失败码："+e):0==(e=this.getVideoDom("replayObject").RemoteRecPlayPause(0))?this.IsParseName:alert("执行失败，失败码："+e)},playVideo:function(){},RemoteRecPlayGetPos:function(){var e=(100*this.getVideoDom("replayObject").RemoteRecPlayGetPos()).toString().split(".")[0]+"%";this.getVideoPos=e},RemoteRecPlaySetPos:function(){var e=1,t=document.getElementById("txtwz").value;if(""!=t){0<t.indexOf("%")&&(t=t.substr(0,t.length-1));var a=parseFloat(t)/100;e=document.getElementById("TLMDvrAx").RemoteRecPlaySetPos(a)}0!=e&&alert("执行失败，失败码："+e)},translatenChnComb:function(e){var t=0;switch(e){case 0:return 1;case 1:return 2;case 2:return 4;case 3:return 8}return t},SearchTodayRec:function(){var e=this.deviceID,t=this.cameraNum,a=parseInt(this.cameraNum),i=this.$filter.format(this.operation.startTime,"yyyy/MM/dd HH:mm:ss"),s=this.$filter.format(this.operation.endTime,"yyyy/MM/dd HH:mm:ss"),o=this.show_date_time(i),r=this.show_date_time(s);if(this.timeArr=[],""===t)return this.$message.error({message:"请选择摄像头！"}),!1;if(this.operation.startTime>this.operation.endTime)return this.$message.error({message:"开始时间不能大于结束时间！"}),!1;if(""===this.operation.startTime||""===this.operation.endTime)return this.$message.error({message:"请先选择回放时间段！"}),!1;var n=this.translatenChnComb(a),l=this.getVideoDom("replayObject").StartRemoteFileSearch(e,n,16,o,r);if(this.videoAccount="\n录像总数为"+l.toString(),"0"==l.toString())return this.$message.error("暂无回放视频可以播放！"),!1;for(var c=0;c<l;c++){var m=this.getVideoDom("replayObject").GetNextRemoteFileInfo(e).split(" "),d=parseInt(m[3].slice(10))-28800,u=parseInt(m[4].slice(8))-28800,h=m[9].slice(9),p=new Date(parseInt(1e3*d)),v=new Date(parseInt(1e3*u)),g=p.toLocaleString(),f=v.toLocaleString();this.timeArr.push({fileName:h,sT:d,eT:u,cms:g,cme:f})}this.playBackFlag=!1,this.stopBackFlag=!1}},watch:{},mounted:function(){var e=JSON.parse(localStorage.getItem("VideologinData"));this.deviceID=e.dvrId,this.szServerIP=e.ip,this.nSeverPort=e.port,this.szUserName=e.username,this.szPassWord=e.password,this.videoLogin(),this.operation.startTime="",this.operation.endTime="",this.cameraNum=""}}),c=(a("a5fa"),{components:{onVideo:n,videoReplay:Object(s.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"videoBACK"},[a("cv-scrollbar",{staticClass:"cvs"},[a("div",{staticClass:"operateleftw"},[a("el-form",{attrs:{"label-width":"90px"}},[a("el-form-item",{attrs:{label:"摄像头:"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"small"},model:{value:e.cameraNum,callback:function(t){e.cameraNum=t},expression:"cameraNum"}},e._l(e.camera,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"开始时间:"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",placeholder:"选择开始时间"},model:{value:e.operation.startTime,callback:function(t){e.$set(e.operation,"startTime",t)},expression:"operation.startTime"}})],1),a("el-form-item",{attrs:{label:"结束时间:"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",placeholder:"选择结束时间"},model:{value:e.operation.endTime,callback:function(t){e.$set(e.operation,"endTime",t)},expression:"operation.endTime"}}),a("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary"},on:{click:function(t){return e.SearchTodayRec()}}},[e._v("搜索")])],1),a("div",{staticClass:"showBox"},[a("cv-scrollbar",{staticClass:"scroll-area",attrs:{tag:"ul","wrap-class":"el-select-dropdown__wrap scrollSpecial","view-class":"el-select-dropdown__list"}},[a("div",{staticStyle:{width:"120px"}}),a("el-radio-group",{attrs:{disabled:e.radioFlag},on:{change:e.getChosetime},model:{value:e.defaultR,callback:function(t){e.defaultR=t},expression:"defaultR"}},e._l(e.timeArr,function(t){return a("el-radio",{key:t.fileName,attrs:{label:t.fileName+"~"+t.sT+"~"+t.eT}},[e._v(e._s(t.cms+"~"+t.cme)+"\n                  ")])}),1)],1)],1),a("div",{staticStyle:{margin:"20px 10px"}},[a("el-button",{attrs:{disabled:e.playBackFlag},on:{click:function(t){return e.StartRemoteRecTimePlay()}}},[e._v("远程时间回放")]),a("el-button",{attrs:{disabled:e.stopBackFlag},on:{click:function(t){return e.StopRemoteRecPlay()}}},[e._v("远程时间停止回放")])],1),a("div")],1)],1),a("div",{staticClass:"onlyOne"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("videoObject",{attrs:{id:"replayObject"}})],1)],1)],1)])],1)},[],!1,null,null,null).exports},data:function(){return{elTabPanes:[{name:"实时视频播放",component:"onVideo",index:"first"},{name:"视频回放",component:"videoReplay",index:"second"}],activeName:"first"}},methods:{getLoginData:function(){}}}),m=(a("88e6"),Object(s.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"TLvideo"},[e.$service.isIe()?e._e():a("div",{staticStyle:{height:"200px","line-height":"200px","text-align":"center","font-size":"24px"}},[e._v("该视频播放只支持IE浏览器，请用IE浏览器打开!")]),e.$service.isIe()?a("el-form",{staticClass:"cv-header",attrs:{inline:!0}},[a("div",{staticStyle:{position:"absolute",left:"45%",top:"30px",height:"30px","line-height":"30px"}},[e._v("\n            请在播放视频之前，下载视频控件！\n            "),a("a",{staticStyle:{color:"red"},attrs:{href:"http://lib.cvtsp.com/video/TLMDVRAxSetup.exe"}},[e._v("点击这里下载视频控件")])])]):e._e(),e.$service.isIe()?a("cv-content",[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.elTabPanes,function(e){return a("el-tab-pane",{key:e.name,attrs:{name:e.index,label:e.name}},[a(e.component,{tag:"component"})],1)}),1)],1):e._e()],1)},[],!1,null,null,null));t.default=m.exports},bfef:function(e,t,a){},c8ae:function(e,t,a){},e773:function(e,t,a){},efd0:function(e,t,a){"use strict";var i=a("c8ae");a.n(i).a}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f4c0c65c"],{"4d6c":function(t,e,r){"use strict";r.r(e),r("7f7f"),r("8369");var a=r("b0ad"),i={props:{options:{}},mixins:[],data:function(){return{isDisabled:!1,loadFlag:!1,formData:{name:"",manufacturerContacts:"",manufacturerTel:"",remark:"",manufacturerNumber:""},rules:{name:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},{validator:this.isSame,trigger:"blur"}],manufacturerTel:[{pattern:/^1[34578][0-9]{9}$/,message:this.$t("terminalProM.typeCorrectNum"),trigger:"blur,change"}],manufacturerNumber:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},{pattern:/^([1-9]\d*|0)(\.\d*[1-9])?$/,message:this.$t("deviceManage.rule3")},{min:5,max:5,message:this.$t("deviceManage.rule4")}]}}},methods:{save:function(){var t=this;this.$refs.formItem.validate(function(e){if(!e)return!1;t.loadFlag=!0;var r={manufacturerContacts:t.formData.manufacturerContacts,name:t.formData.name,manufacturerTel:t.formData.manufacturerTel,remark:t.formData.remark,manufacturerNumber:t.formData.manufacturerNumber};t.options.isModify?(r.id=t.options.rowInfo.id,t.$store.dispatch("updateTerminalManufacturer",r).then(function(e){e.flag?(t.$message.success(t.$t("action.updateSuccess")),t.$emit("update:searchTable",!0),t.options.flag=!1):t.$message.error(t.$t("error."+e.errorCode)),t.loadFlag=!1}).catch(function(e){t.loadFlag=!1})):t.$store.dispatch("insertTerminalManufacturer",r).then(function(e){e.flag?(t.$message.success(t.$t("action.updateSuccess")),t.$emit("update:searchTable",!0),t.options.flag=!1):t.$message.error(t.$t("error."+e.errorCode)),t.loadFlag=!1}).catch(function(e){t.loadFlag=!1})})},resetForm:function(){this.$refs.formItem.resetFields()},isSame:function(t,e,r){var a=this;this.$service.isContext(e)||(e+""!=this.options.name1?this.$store.dispatch("isExistTerminalManufacturerName",{name:e}).then(function(t){t.flag?r():r(new Error(a.$t("terminalProM.sameName")))}):r())}},watch:{"options.flag":function(t){t||(this.options.name="")}},mounted:function(){var t=this;if(this.options.isModify){var e=this.$loading({text:this.$t("role.type1"),target:document.querySelector(".el-dialog")}),r={id:this.options.rowInfo.id};this.$store.dispatch("getTerminalManufacturerById",r).then(function(r){e.close(),r.flag&&(t.formData=r.data,t.formData.manufacturerNumber=r.data.manufacturerNumber+"")}).catch(function(t){e.close()})}}},n=(r("c003"),r("2877")),o=Object(n.a)(i,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-row",{staticClass:"terminalContainer"},[r("el-col",{attrs:{span:24}},[r("el-form",{ref:"formItem",attrs:{model:t.formData,"label-position":"right","label-width":"150px",inline:!0,rules:t.rules}},[r("el-form-item",{attrs:{label:t.$t("terminalProM.name"),prop:"name"}},[r("el-input",{attrs:{maxlength:15},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name","string"==typeof e?e.trim():e)},expression:"formData.name"}})],1),r("el-form-item",{attrs:{label:t.$t("terminalProM.terminalCode"),prop:"manufacturerNumber"}},[r("el-input",{attrs:{maxlength:15},model:{value:t.formData.manufacturerNumber,callback:function(e){t.$set(t.formData,"manufacturerNumber","string"==typeof e?e.trim():e)},expression:"formData.manufacturerNumber"}})],1),r("el-form-item",{attrs:{label:t.$t("terminalProM.contactsPerson"),prop:"manufacturerContacts"}},[r("el-input",{attrs:{maxlength:20},model:{value:t.formData.manufacturerContacts,callback:function(e){t.$set(t.formData,"manufacturerContacts","string"==typeof e?e.trim():e)},expression:"formData.manufacturerContacts"}})],1),r("el-form-item",{attrs:{label:t.$t("terminalProM.phoneNumber"),prop:"manufacturerTel"}},[r("el-input",{attrs:{maxlength:11},model:{value:t.formData.manufacturerTel,callback:function(e){t.$set(t.formData,"manufacturerTel","string"==typeof e?e.trim():e)},expression:"formData.manufacturerTel"}})],1),r("el-form-item",{attrs:{label:t.$t("terminalProM.remark"),prop:"remark"}},[r("el-input",{attrs:{maxlength:50},model:{value:t.formData.remark,callback:function(e){t.$set(t.formData,"remark","string"==typeof e?e.trim():e)},expression:"formData.remark"}})],1)],1)],1),r("el-col",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{span:24}},[r("el-button",{attrs:{loading:t.loadFlag,type:"primary"},on:{click:t.save}},[t._v(t._s(t.$t("action.save")))]),r("el-button",{attrs:{disabled:t.isDisabled},on:{click:t.resetForm}},[t._v(t._s(t.$t("action.reset")))])],1)],1)},[],!1,null,null,null).exports,l=r("e4d3"),s={components:{addOrEditM:o},mixins:[a.a,l.a],computed:{_table:function(){return this.$refs.terminalTable}},data:function(){return{store:{search:{name:"",manufacturerNumber:""}},searchFlag:!1,dialog:{flag:!1,name:"addBrand",size:"dialog-small",title:"--",isModify:!1,rowInfo:[],addOrEdit:{enterpriseId:this.$store.getters.user.id}}}},methods:{add:function(t){this.dialog.title=t.title,this.dialog.size="dialog-small",this.dialog.name="addOrEditM",this.dialog.flag=!0,this.dialog.isModify=!1},remove:function(t){var e=this;this.confirmPrompt().then(function(){var r={id:t.row.id};e.$store.dispatch("deleteTerminalManufacturer",r).then(function(t){t.flag?(e.$message.success(e.$t("action.removeSuccess")),e.searchFlag=!0):e.$message.error(e.$t("error."+t.errorCode))})})},modify:function(t){this.dialog.title=this.$t("power.modify"),this.dialog.size="dialog-small",this.dialog.name="addOrEditM",this.dialog.flag=!0,this.dialog.isModify=!0,this.dialog.rowInfo=t.row,this.dialog.name1=t.row.name},search:function(){this._table.tableInitial()}},watch:{searchFlag:function(t){t&&(this._table.tableInitial(),this.searchFlag=!1)}}},u=Object(n.a)(s,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"terminal"},[r("cv-operation",[r("el-form-item",[r("el-input",{attrs:{placeholder:t.$t("terminalProM.nameSearch"),clearable:""},model:{value:t.store.search.name,callback:function(e){t.$set(t.store.search,"name","string"==typeof e?e.trim():e)},expression:"store.search.name"}})],1),r("el-form-item",[r("el-input",{attrs:{placeholder:t.$t("terminalProM.terminalCodeSearch"),clearable:""},model:{value:t.store.search.manufacturerNumber,callback:function(e){t.$set(t.store.search,"manufacturerNumber","string"==typeof e?e.trim():e)},expression:"store.search.manufacturerNumber"}})],1),r("el-form-item",[r("cv-tool",{staticClass:"cv-tool",attrs:{name:t.$route.name,data:t.$store.getters.manageMenus,"is-remove":!1,"is-modify":!1,"is-export":!1},on:{search:t.search,add:t.add}})],1)],1),r("cv-content",[r("cv-grid",{ref:"terminalTable",attrs:{params:t.store.search,url:"/tmanuf/findTerminalManufacturerPage"}},[r("el-table-column",{attrs:{label:t.$t("terminalProM.name"),prop:"name"}}),r("el-table-column",{attrs:{label:t.$t("terminalProM.terminalCode"),prop:"manufacturerNumber"}}),r("el-table-column",{attrs:{label:t.$t("terminalProM.contactsPerson"),prop:"manufacturerContacts"}}),r("el-table-column",{attrs:{label:t.$t("terminalProM.phoneNumber"),prop:"manufacturerTel"}}),r("el-table-column",{attrs:{label:t.$t("terminalProM.remark"),prop:"remark"}}),r("el-table-column",{attrs:{label:t.$t("action.operation")},scopedSlots:t._u([{key:"default",fn:function(e){return[r("cv-table-tool",{attrs:{name:t.$route.name,data:t.$store.getters.manageMenus},on:{remove:function(r){return t.remove(e)},modify:function(r){return t.modify(e)}}})]}}])})],1)],1),r("el-dialog",{attrs:{visible:t.dialog.flag,title:t.dialog.title,"custom-class":t.dialog.size},on:{"update:visible":function(e){return t.$set(t.dialog,"flag",e)}}},[r(t.dialog.name,{tag:"component",attrs:{visible:t.dialog.flag,options:t.dialog,searchTable:t.searchFlag},on:{"update:visible":function(e){return t.$set(t.dialog,"flag",e)},"update:searchTable":function(e){t.searchFlag=e},"update:search-table":function(e){t.searchFlag=e}}})],1)],1)},[],!1,null,null,null).exports;e.default=u},8369:function(t,e,r){"use strict";var a=r("cebc");e.a={data:function(){return{table:{size:10,total:0,current:1,flag:!1,loading:!1,data:[]}}},methods:{tableLoading:function(t,e,r,i){var n=this;r?(this.table.flag=!0,this.table.current=1):this.table.flag=!1,this.table.loading=!0;var o=Object(a.a)({current:this.table.current,size:this.table.size},e);this.$http(i?{url:t,data:o}:{url:t,params:o}).then(function(t){var e=t.data;t.flag&&0!=e.length?(n.table.data=e.records,n.table.total=e.total,n.table.current=e.current):(n.table.data=[],n.table.total=0),n.table.loading=!1}).catch(function(t){n.table.loading=!1})},tableFilterColor:function(t){return this.$filter.plateCodeColor(t.plateColor)},tableFilterIcType:function(t){return this.$filter.icType(t.state)},tableFilterIcResult:function(t){return this.$filter.icResult(t.readerresult)},tableFilterTiredAlarm:function(t){return this.$filter.tiredAlarmType(t.alarm)},tableFilterTiredAdas:function(t){return this.$filter.tiredAdasType(t.alarm)},tableFilterOrderTypeS:function(t){return this.$filter.orderTypeS(t.sendFlag)},tableFilterFormat:function(t){return this.$filter.format(t.orderTime||t.gpsTime)},tableFilterFormats:function(t){return this.$filter.format(t.backTime)},tableBusLineType:function(t){return this.$filter.lineType(t.lineType)},tableFilterAcc:function(t){return this.$filter.accStatus(t.accStatus)},tableSplitMobile:function(t){return t.mobileCode?t.mobileCode.slice(1,t.mobileCode.length):""},tableConfirm:function(t){return this.$filter.isConfirm(t.isnotarize)},tableUpkeep:function(t){return this.$filter.isConfirm(t.type)},tableRenewal:function(t){return this.$filter.renewal(t.state)},tableReMot:function(t){return this.$filter.reMot(t.state)},tableOil:function(t){return this.$filter.fixNumber(t.total,2)},tableSex:function(t){return this.$filter.sex(t.sex)},plateCodeF:function(t){return t.plateCode?t.plateCode:"--"},plateCodeAndColor:function(t){return t.plateCode+"("+this.$filter.plateCodeColor(t.plateColor)+")"},driverStuas:function(t){return this.$filter.alarmStatus(t.fatigueDrive)},overStuas:function(t){return this.$filter.alarmStatus(t.tOversSpeed)},overHStuas:function(t){return this.$filter.alarmStatus(t.tOverSpeedH)},filterAlStuas:function(t){return this.$filter.alarmStatus(t.overSpeed)},filteralarmStuas:function(t){return this.$filter.alarmStatus(t.overSpeedH)},filterLStuas:function(t){return this.$filter.alarmStatus(t.forbid)},applyFlag:function(t){return this.$filter.applyFlag(t.applyFlag)},SEtime:function(t){return this.$filter.SEtime(t.StartTime,t.EndTime)},channelType:function(t){return this.$filter.channelType(t.Channel)},FileSize:function(t){return this.$filter.FileSize(t.fileSize||t.FileSize||0)},AlarmFilter:function(t){return this.$filter.AlarmFilter(t.Alarm)},MediaTypeFilter:function(t){return this.$filter.MediaTypeFilter(t.MediaType)},StreamTypeFilter:function(t){return this.$filter.StreamTypeFilter(t.StreamType)},StorageTypeFilter:function(t){return this.$filter.StorageTypeFilter(t.StorageType)},statusType:function(t){return this.$filter.statusType(t.Status)},fileSource:function(t){return this.$filter.fileSource(t.fileSource)}}}},b0ad:function(t,e,r){"use strict";(function(t){r("7f7f"),e.a={methods:{confirmPrompt:function(t,e){var r=this,a=t||this.$t("action.confirmIsRemove");return new Promise(function(t,i){r.$confirm(a,r.$t("action.tip"),{confirmButtonText:r.$t("action.confirm"),cancelButtonText:r.$t("action.cancel"),type:"warning"}).then(function(){t()}).catch(function(){"function"==typeof e&&e()})})},timeLimitFunc:function(t,e,r){if(t&&e)return((new Date(e)-new Date(t))/864e5).toFixed(1)<=r||this.$message.error({message:this.$t("请选择时间范围在"+r+"天内")});this.$message.error({message:this.$t("请选择时间范围")})},addRemoveUnique:function(t,e,r){var a=t.length,i=e.length;return i<a?{name:"add",data:this.$service.isUnique(t,e,r)}:a<i?{name:"remove",data:this.$service.isUnique(e,t,r)}:a==i?{name:"equal",data:this.$service.isUnique(t,e,r)}:void 0},showTooltip:function(t,e){var r=t.target,a=this.$refs[e];a.referenceElm=r,a.$refs.popper.style.display="none",a.doDestroy(),a.setExpectedState(!0),a.handleShowPopper()},mouseenterShowTip:function(t,e,r){var a=t.target;if(a.scrollWidth>a.offsetWidth||r)return this.showTooltip(t,e),r?r.startTime+"~"+r.endTime:a.innerText},mouseenterShowToolTip:function(t,e,r){var a=t.target;return this.showTooltip(t,e),!r&&a.innerText},mouseoverHideTip:function(t){var e=this.$refs[t];e&&(e.setExpectedState(!1),e.handleClosePopper())},asyncDownloadScript:function(e,r){var a=this,i=0<arguments.length&&void 0!==e?e:"Baidu",n=1<arguments.length?r:void 0;return t[i]?t[i]._preloader?t[i]._preloader:Promise.resolve(t[i]):(t[i]={},t[i]._preloader=new Promise(function(e,r){var o=document.createElement("script");o.src=n,t.document.body.appendChild(o),a.$service.isIe()&&a.$service.IE_VERSION<11?o.onreadystatechange=function(){"loaded"!=o.readyState&&"complete"!=o.readyState||(e(t[i]),t[i]._preloader=null)}:o.onload=function(){e(t[i]),t[i]._preloader=null}}),t[i]._preloader)}}}}).call(this,r("c8ba"))},c003:function(t,e,r){"use strict";var a=r("ee91");r.n(a).a},e4d3:function(t,e,r){"use strict";e.a={data:function(){return{store:{company_tree:[]}}},provide:function(){return{store:this.store}},methods:{staticTree:function(){var t=this;this.$http({url:"/enterprise/findEnterpriseOrganizationTreeList"}).then(function(e){var r=e.data,a=e.flag;t.store.company_tree=a?r:[]})},staticTreeOld:function(){var t=this;this.$http({url:"/enterprise/getEnterpriseTreeList"}).then(function(e){var r=e.data,a=e.flag;t.store.company_tree=a?r:[]})}}}},ee91:function(t,e,r){}}]);
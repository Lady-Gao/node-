(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-80d30f0a"],{"073b":function(e,t,a){},b323:function(e,t,a){"use strict";a.r(t),a("ac6a"),a("96cf");var r,i,l,n,s=a("3b8d"),o=a("cebc"),d=a("2f62"),c={data:function(){return{label:"",addObj:{enterpriseId:"",fleetId:"",plateCode:"",plateColor:"",type:"2",terminalId:"",manufacturerId:"",mobileCode:"",manufacturerNumber:"",code:"",protocolVersion:"1073741828",canCfgVersion:""},rules:{enterpriseId:{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},fleetId:{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},plateCode:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],plateColor:{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},type:{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},protocolVersion:{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},manufacturerId:{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},mobileCode:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},{pattern:/^[0-9]+$/,message:this.$t("filter.type2")},{validator:this.isTel,trigger:"blur"}],manufacturerNumber:{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},code:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},{pattern:/^[A-Z|0-9]+$/,message:this.$t("filter.type7")},{min:7,max:7,message:this.$filter.lanReplace(this.$t("filter.FixedLength"),{len:7})}],terminalId:{required:!1,message:this.$t("filter.notEmpty"),trigger:"blur,change"}},canCfgVersion:[],protocolVersions:[],manufacturerName:[],termainalList:[],isTermianlFlag:!0,submitFalg:!1}},watch:{"addObj.enterpriseId":function(e){this.getTerminal(e)}},methods:Object(o.a)({},Object(d.b)(["isExistPlateCode","isExistTerminalMobile","quickWayAddCar","getCanCfgVersionList","getProtocolVersionList","getTerminalManufacturerList","findQuickAddCarUnbindTerminalList"]),{isPlateCode:function(e,t,a){var r=this;this.$service.isContext(t)||this.isExistPlateCode({plateCode:t}).then(function(e){e.flag?a():a(new Error(r.$t("vt.isPlateCode")))})},isTel:function(e,t,a){var r=this;if(!this.$service.isContext(t)){var i=t;if(i.length<12)for(var l=i.length;l<12;l++)i="0"+i;this.addObj.mobileCode=i,this.rules.mobileCode[0].required?this.isExistTerminalMobile({mobileCode:i}).then(function(e){e.flag?a():a(new Error(r.$t("terminal.phone")))}):a()}},slectState:function(e){1==e?(this.isTermianlFlag=!1,this.setInput(!0,!1)):(this.isTermianlFlag=!0,this.addObj.terminalId="",this.setInput(!1,!0),this.clearTerminal(),this.addObj.protocolVersion="1073741828")},setInput:function(e,t){this.rules.code[0].required=t,this.rules.terminalId.required=e,this.rules.mobileCode[0].required=t,this.rules.manufacturerId.required=t,this.rules.protocolVersion.required=t,this.rules.manufacturerNumber.required=t},clearInput:function(){var e=this.addObj;for(var t in e)e[t]="type"==t?"2":"";this.slectState(2)},getParams:function(){var e={},t=this.addObj;for(var a in t)e[a]=t[a];return"2"==t.type&&"1073741831"==t.protocolVersion?e.channelCount=1:e.channelCount="",e.enterpriseId=this.label.enterpriseId,e},addSave:function(){var e=this;this.$refs.addObj.validate(function(t){if(!t)return!1;e.submitFalg=!0,e.quickWayAddCar(e.getParams()).then(function(t){var a=t.flag,r=t.errorCode;a?(e.$message.success("车辆新增成功"),e.clearInput()):e.$message.error(e.$t("error."+r)),e.submitFalg=!1}).catch(function(t){e.submitFalg=!1})})},getCanCfgVersion:(n=Object(s.a)(regeneratorRuntime.mark(function e(){var t,a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCanCfgVersionList();case 2:t=e.sent,a=t.data,r=t.flag,this.canCfgVersion=r?a:[];case 6:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)}),getProtocolVersion:(l=Object(s.a)(regeneratorRuntime.mark(function e(){var t,a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getProtocolVersionList();case 2:t=e.sent,a=t.data,r=t.flag,this.protocolVersions=r?a:[];case 6:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)}),getTerminalManufacturer:(i=Object(s.a)(regeneratorRuntime.mark(function e(){var t,a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getTerminalManufacturerList();case 2:t=e.sent,a=t.data,r=t.flag,this.manufacturerName=r?a:[];case 6:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)}),getTerminal:(r=Object(s.a)(regeneratorRuntime.mark(function e(t){var a,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("empty"!=t)return e.next=3,this.findQuickAddCarUnbindTerminalList({enterpriseId:this.label.enterpriseId});e.next=9;break;case 3:a=e.sent,r=a.data,i=a.flag,this.termainalList=i?r:[],e.next=10;break;case 9:this.termainalList=[];case 10:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)}),selectTerminal:function(e){var t=this;this.clearTerminal(),this.termainalList.forEach(function(a){a.id==e&&(t.addObj.manufacturerId=a.manufacturerId,t.addObj.mobileCode=a.mobileCode,t.addObj.manufacturerNumber=a.manufacturerNumber,t.addObj.code=a.code,t.addObj.protocolVersion=a.protocolVersion,t.addObj.canCfgVersion=a.canCfgVersion)})},clearTerminal:function(){this.addObj.manufacturerId="",this.addObj.mobileCode="",this.addObj.manufacturerNumber="",this.addObj.code="",this.addObj.protocolVersion="",this.addObj.canCfgVersion=""},showEqType:function(e){var t=this;this.manufacturerName.forEach(function(a){a.id==e&&(t.addObj.manufacturerNumber=a.manufacturerNumber)})}}),mounted:function(){this.getCanCfgVersion(),this.getProtocolVersion(),this.getTerminalManufacturer()}},u=(a("eca5"),a("2877")),m=Object(u.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("cv-operation"),a("cv-content",[a("el-form",{ref:"addObj",attrs:{model:e.addObj,rules:e.rules,inline:!0,"label-position":"right","label-width":"120px"}},[a("el-form-item",{staticClass:"domHight",attrs:{label:e.$t("action.company"),prop:"enterpriseId"}},[a("cv-dropdown-tree",{staticClass:"domWind",attrs:{url:"/enterprise/findEnterpriseOrganizationTreeList ",label:e.label},on:{"update:label":function(t){e.label=t}},model:{value:e.addObj.enterpriseId,callback:function(t){e.$set(e.addObj,"enterpriseId",t)},expression:"addObj.enterpriseId"}})],1),a("el-form-item",{staticClass:"domHight",attrs:{label:e.$t("cE.ownCar"),prop:"fleetId"}},[a("cv-dropdown-tree",{staticClass:"domWind",attrs:{url:"/enterprise/findFleetTreeList","auto-params":{enterpriseId:e.label.enterpriseId,pId:e.label.id,type:e.label.type},"un-node-filter":["type",null],"is-initial":!1},model:{value:e.addObj.fleetId,callback:function(t){e.$set(e.addObj,"fleetId",t)},expression:"addObj.fleetId"}})],1),a("el-form-item",{staticClass:"domHight",attrs:{label:e.$t("vehicleInfo.plateCode"),prop:"plateCode"}},[a("el-input",{staticClass:"domWind",attrs:{maxlength:12},model:{value:e.addObj.plateCode,callback:function(t){e.$set(e.addObj,"plateCode","string"==typeof t?t.trim():t)},expression:"addObj.plateCode"}})],1),a("el-form-item",{staticClass:"domHight",attrs:{label:e.$t("vehicleInfo.plateColor"),prop:"plateColor"}},[a("el-select",{staticClass:"domWind",attrs:{clearable:"",placeholder:e.$t("terminal.placeholder")},model:{value:e.addObj.plateColor,callback:function(t){e.$set(e.addObj,"plateColor",t)},expression:"addObj.plateColor"}},[a("el-option",{attrs:{label:e.$t("filter.colorBlue"),value:"1"}}),a("el-option",{attrs:{label:e.$t("filter.colorYellow"),value:"2"}}),a("el-option",{attrs:{label:e.$t("filter.colorBlack"),value:"3"}}),a("el-option",{attrs:{label:e.$t("filter.colorWhite"),value:"4"}}),a("el-option",{attrs:{label:e.$t("filter.colorGreen"),value:"5"}}),a("el-option",{attrs:{label:e.$t("filter.color"),value:"9"}})],1)],1),a("el-form-item",{staticClass:"domHight",attrs:{label:e.$t("vehicleManage.Equipmentstate"),prop:"type"}},[a("el-radio-group",{staticClass:"domWind",on:{change:e.slectState},model:{value:e.addObj.type,callback:function(t){e.$set(e.addObj,"type",t)},expression:"addObj.type"}},[a("el-radio",{attrs:{label:"2"}},[e._v(e._s(e.$t("vehicleManage.newequipment")))]),a("el-radio",{attrs:{label:"1"}},[e._v(e._s(e.$t("vehicleManage.Existingquipment")))])],1)],1),a("div",[a("el-form-item",{staticClass:"domHight",attrs:{label:e.$t("vehicleManage.Devicelist"),prop:"terminalId"}},[a("el-select",{staticClass:"domWind",attrs:{clearable:"",disabled:e.isTermianlFlag,placeholder:e.$t("terminal.placeholder"),size:"small"},on:{change:e.selectTerminal},model:{value:e.addObj.terminalId,callback:function(t){e.$set(e.addObj,"terminalId",t)},expression:"addObj.terminalId"}},e._l(e.termainalList,function(e){return a("el-option",{key:e.id,attrs:{label:e.manufacturerModelCode,value:e.id}})}),1)],1)],1),a("div",[a("el-form-item",{staticClass:"domHight",attrs:{label:e.$t("terminal.manufacturer"),prop:"manufacturerId"}},[a("el-select",{staticClass:"domWind",attrs:{disabled:!e.isTermianlFlag,clearable:"",filterable:"",placeholder:e.$t("terminal.placeholder"),size:"small"},on:{change:e.showEqType},model:{value:e.addObj.manufacturerId,callback:function(t){e.$set(e.addObj,"manufacturerId",t)},expression:"addObj.manufacturerId"}},e._l(e.manufacturerName,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id+""}})}),1)],1),a("el-form-item",{staticClass:"domHight",attrs:{label:e.$t("vehicleManage.sim"),prop:"mobileCode"}},[a("el-input",{staticClass:"domWind",attrs:{disabled:!e.isTermianlFlag,size:"small",maxlength:12},model:{value:e.addObj.mobileCode,callback:function(t){e.$set(e.addObj,"mobileCode","string"==typeof t?t.trim():t)},expression:"addObj.mobileCode"}})],1),a("el-form-item",{staticClass:"domHight",attrs:{label:e.$t("vehicleManage.ManufacturerNu"),prop:"manufacturerNumber"}},[a("el-input",{staticClass:"domWind",attrs:{disabled:!0,size:"small",maxlength:12},model:{value:e.addObj.manufacturerNumber,callback:function(t){e.$set(e.addObj,"manufacturerNumber","string"==typeof t?t.trim():t)},expression:"addObj.manufacturerNumber"}})],1),a("el-form-item",{staticClass:"domHight",attrs:{label:e.$t("terminal.code"),prop:"code"}},[a("el-input",{staticClass:"domWind",attrs:{disabled:!e.isTermianlFlag,size:"small",maxlength:7},model:{value:e.addObj.code,callback:function(t){e.$set(e.addObj,"code","string"==typeof t?t.trim():t)},expression:"addObj.code"}})],1),a("el-form-item",{staticClass:"domHight",attrs:{label:e.$t("terminal.versionProtocol"),prop:"protocolVersion"}},[a("el-select",{staticClass:"domWind",attrs:{disabled:!e.isTermianlFlag,clearable:"",placeholder:e.$t("terminal.placeholder"),size:"small"},model:{value:e.addObj.protocolVersion,callback:function(t){e.$set(e.addObj,"protocolVersion",t)},expression:"addObj.protocolVersion"}},e._l(e.protocolVersions,function(e){return a("el-option",{key:e.protocolVersion+"",attrs:{label:e.name,value:e.protocolVersion+""}})}),1)],1),a("el-form-item",{staticClass:"domHight",attrs:{label:e.$t("terminal.Can")}},[a("el-select",{staticClass:"domWind",attrs:{clearable:"",disabled:!e.isTermianlFlag,placeholder:e.$t("terminal.placeholder"),size:"small"},model:{value:e.addObj.canCfgVersion,callback:function(t){e.$set(e.addObj,"canCfgVersion",t)},expression:"addObj.canCfgVersion"}},e._l(e.canCfgVersion,function(e){return a("el-option",{key:e.id,attrs:{label:e.canRemark,value:e.id}})}),1)],1)],1),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{on:{click:e.clearInput}},[e._v(e._s(e.$t("el.colorpicker.clear")))]),a("el-button",{attrs:{type:"primary",loading:e.submitFalg},on:{click:e.addSave}},[e._v(e._s(e.$t("action.save")))])],1)],1)],1)],1)},[],!1,null,"81052ea2",null).exports;t.default=m},eca5:function(e,t,a){"use strict";var r=a("073b");a.n(r).a}}]);
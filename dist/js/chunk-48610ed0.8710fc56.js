(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-48610ed0","chunk-c0a56550","chunk-5641447a","chunk-1390261e","chunk-73bdb788"],{"05c0":function(t,e,a){"use strict";a("7f7f"),a("20d6"),a("ac6a");var i=a("cebc"),s=a("3f4e"),n=a("2f62"),r={name:"CvPublictreeContent",components:{CvContent:s.a},props:{model:String,vehicleMonitor:Function,loading:Boolean,noresize:{default:!1,type:Boolean}},data:function(){return{entryList:[],condition:""}},computed:Object(i.a)({},Object(n.c)(["onlineList","isAttention","socketEnterprise","socketVehicle","vehicle_data","vehicleCondition"]),{isCheck:function(){switch(this.model){case"multi":return!0;case"single":default:return!1}},_treeMethods:function(){return this.$refs.tabs},_contentMethods:function(){return this.$refs.content}}),beforeDestroy:function(){var t=this._treeMethods.getAllNodes;this.setStoreVehicleSearchCondition(this.condition),this.setStoreVehicleData(t())},mounted:function(){var t=this._treeMethods.$refs.tree.reference().ztreeApi;t()&&t().checkAllNodes(!1)},methods:Object(i.a)({},Object(n.b)(["setStoreVehicleData","setStoreVehicleSearchCondition"]),{handlerVehicleSearch:function(t){this.condition=t},vehicle_Monitor:function(t){var e=t.data;if(t.name,"function"==typeof this.vehicleMonitor)switch(this.model){case"multi":return this.vehicle_Monitor_multi(t);case"single":return this.vehicleMonitor(e[0])}},vehicle_Monitor_multi:function(t){var e=this,a=t.data;switch(t.name){case"check":this.entryList=this.entryList.concat(a);break;case"cancel":a.forEach(function(t){var a=e.entryList.findIndex(function(e){return e.id==t.id});0<=a&&e.entryList.splice(a,1)})}this.vehicleMonitor(this.entryList)}})},o=(a("45d7"),a("2877")),l=Object(o.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cv-content",{ref:"content",attrs:{loading:t.loading,noresize:t.noresize}},[t.model?a("cv-tabs-tree",{ref:"tabs",staticClass:"vehiclemaster-tree",attrs:{slot:"aside","vehicle-search":t.vehicleCondition,"is-checked":t.isCheck,"tree-data":t.vehicle_data,"online-monitor":t.onlineList,"vehicle-monitor":t.socketVehicle,"attention-monitor":t.isAttention,"enterprise-fleet-monitor":t.socketEnterprise,"node-monitor":t.vehicle_Monitor},on:{"vehicle-choose-search":t.handlerVehicleSearch},slot:"aside"}):t._e(),t._t("default")],2)},[],!1,null,"2dfdf41b",null).exports;l.install=function(t){t.component(l.name,l)},e.a=l},"2d14":function(t,e,a){},"36ae":function(t,e,a){"use strict";var i=a("40cc");a.n(i).a},"37fb":function(t,e,a){"use strict";a.r(e);var i={props:{data:{}},data:function(){return{fen:0,score:0}},watch:{data:function(t){t&&(this.score=this.data.score&&this.$filter.toFixed(this.data.score,0)||0,this.fen=this.score/10||0)}}},s=(a("36ae"),a("2877")),n=Object(s.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comprehensive"},[a("div",{staticClass:"header"},[t._m(0),a("div",{staticClass:"great"},[t._v("\n            "+t._s(t.score)),a("span",{staticClass:"fen"},[t._v("分")])]),a("el-rate",{staticStyle:{"text-align":"center"},attrs:{disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}",max:10},model:{value:t.fen,callback:function(e){t.fen=e},expression:"fen"}})],1),a("div",{staticClass:"progress"},[a("p",[t._v("统计周期:"+t._s(t.data.sumDays||"--")+"天 ("+t._s(t.data.sumDaysStr||"--")+")")]),a("p",{staticStyle:{"font-size":"30px",margin:"20px"}},[t._v(t._s(t.data.vehiclePlateCode||"--"))])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("综合评估分数")])])}],!1,null,"94f153ba",null).exports;e.default=n},"40cc":function(t,e,a){},"45d7":function(t,e,a){"use strict";var i=a("6e18");a.n(i).a},"4e64":function(t,e,a){"use strict";var i=a("e7b4");a.n(i).a},"5a32":function(t,e,a){},"5cd5":function(t,e,a){"use strict";a("7f7f"),a("ac6a");var i={props:{data:{}},data:function(){return{dataItem:{},defualt:[{value:0,name:"暂"},{value:0,name:"无"},{value:0,name:"数"},{value:0,name:"据"}]}},computed:{myPie:function(){return this.$refs.echartpie},getchart:function(){return this.$refs.echartpie.getEchart()}},methods:{load:function(t){this.$emit("getPie",t)},getLegendData:function(){var t=[];return this.data.seriesData.forEach(function(e){t.push(e.name)}),t},setOpstion:function(){var t=this,e={title:{text:this.data.title?this.data.title:"",x:"center"},tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)",position:["50%","50%"]},series:[{type:"pie",radius:[0,"40%"],left:"center",data:this.data.seriesData?this.data.seriesData:this.defualt,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}],color:this.setColor()};this.dataItem=e,setTimeout(function(){t.$refs.echartpie&&t.getchart.on("click",t.load)},2e3)},getColor:function(){var t=Math.floor(256*Math.random()),e=Math.floor(256*Math.random()),a=Math.floor(150*Math.random());return t==e==255&&(a=Math.floor(150*Math.random())),"rgba(".concat(t,",").concat(e,",").concat(a,",0.6)")},setColor:function(){var t=this;return this.data.seriesData?this.data.seriesData.map(function(e){return t.getColor()}):["#ffae8b","#ffdb5c","#36a2da","#fb7193","#9fe6b7"]}},watch:{data:function(t){this.setOpstion()}}},s=a("2877"),n=Object(s.a)(i,function(){var t=this.$createElement;return(this._self._c||t)("cv-echart",{ref:"echartpie",staticStyle:{"min-height":"300px"},attrs:{name:"pie",data:this.dataItem}})},[],!1,null,null,null);e.a=n.exports},"6e18":function(t,e,a){},a828:function(t,e,a){},ca2a:function(t,e,a){"use strict";a.r(e),a("386d"),a("96cf");var i,s,n=a("3b8d"),r=a("cebc"),o=a("05c0"),l=a("f97f"),c=a("d655"),d=a("cb3d"),u=a("7945"),h=a("fcee"),p=a("37fb"),m=a("2f62"),g={name:"singleAnalysis",components:{CvPublictreeContent:o.a,roadLevel:l.default,barChart:d.default,alarmMileage:u.a,survey:h.default,comprehensiveScore:p.default,regional:c.default},provide:function(){return{store:this.store}},computed:{_searchRangerLists:function(){return[{key:"date",name:"日"},{key:"month",name:"月"},{key:"year",name:"年"}]}},data:function(){return{store:{operation:{dateType:"date",searchTime:"",vehicleId:null}},loadingFlag:{vehicleCount:!1,vehicleTypeCount:!1,alarmMTCount:!1,surveyFlag:!1,survey2Flag:!1,vehicleOperateFlag:!1,roadLevelFlag:!1},valueFormat:"yyyy-MM-dd",pickerOptions1:{disabledDate:function(t){return t.getTime()>Date.now()-864e5}},companyTree:[],treeLoadFlag:!0,surveyData:{},surveyData2:{},vehicleOperate:{},roadLevel:{},alarmType:{vehicleId:null,x:null,y:null,topN:null,type:"single",ids:null,title:"",dateType:"date",sort:"DESC",searchTime:"2018-06-01"},alarmTop:{vehicleId:null,x:null,y:null,topN:null,type:null,ids:null,title:"",dateType:"date",searchTime:"2018-06-01"},alarmLowest:{vehicleId:null,x:null,y:null,topN:null,type:null,ids:null,title:"",dateType:"date",searchTime:"2018-06-01"},alarmMT:{x:null,y:null}}},methods:Object(r.a)({},Object(m.b)(["findTripMileageStatisticsInfo","findAlarmStatisticsByType","findAlarmCountMileageSumInfo","queryOperatingAreaDistribution","queryRoadGradeDistribution","getDriverStatisticsSingle","getScoreByVID"]),{treeLoaded:function(){this.treeLoadFlag=!1},handlerVehicleMonitor:function(t){this.store.operation.vehicleId=t.id,this.store.operation.plateCode=t.plateCode},changeDate:function(t){var e=this;switch(this.store.operation.searchTime="",t){case"date":this.valueFormat="yyyy-MM-dd",this.pickerOptions1={disabledDate:function(t){return t.getTime()>Date.now()-864e5}};break;case"month":this.valueFormat="yyyy-MM",this.pickerOptions1={disabledDate:function(t){var a=new Date;return e.$filter.CompareDate(a.getFullYear()+"-"+a.getMonth(),t.getFullYear()+"-"+(t.getMonth()+1))}};break;case"year":this.valueFormat="yyyy",this.pickerOptions1={disabledDate:function(t){var e=new Date;return t.getFullYear()>e.getFullYear()-1}}}},search:function(){return this.store.operation.searchTime?this.store.operation.vehicleId?(this.getBaseInfo(),this.getVehicleOperate(),this.getRoadLevel(),this.getScoreByVIDSinge(),this.vehicleCount(),this.vehicleTypeCount(),void this.alarmMTCount()):(this.$message.warning("请选择车辆"),!1):(this.$message.warning("请选择时间"),!1)},vehicleCount:function(){var t=this;this.loadingFlag.vehicleCount=!0;var e=Object(r.a)({},this.store.operation,{topSize:30,space:10,modelType:"multi",sort:"DESC"});this.findTripMileageStatisticsInfo(e).then(function(e){t.alarmTop=e,t.loadingFlag.vehicleCount=!1})},vehicleTypeCount:function(){var t=this;this.loadingFlag.vehicleTypeCount=!0;var e=Object(r.a)({},this.store.operation,{topSize:30,sort:"DESC",space:10,modelType:"multi"});this.findAlarmStatisticsByType(e).then(function(e){t.alarmType=e,t.alarmType.singleType=!0,t.loadingFlag.vehicleTypeCount=!1})},alarmMTCount:function(){var t=this;this.loadingFlag.alarmMTCount=!0;var e=Object(r.a)({},this.store.operation,{modelType:"multi"});this.findAlarmCountMileageSumInfo(e).then(function(e){e.markAreaData=[["00:00","06:00"],["18:00","23:00"]],t.alarmMT=e,t.loadingFlag.alarmMTCount=!1})},getScoreByVIDSinge:(s=Object(n.a)(regeneratorRuntime.mark(function t(){var e,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loadingFlag.survey2Flag=!0,t.next=3,this.getScoreByVID(this.store.operation);case 3:e=t.sent,a=e.flag,i=e.data,this.surveyData2=a?i:{},this.surveyData2.vehiclePlateCode=this.store.operation.plateCode,this.loadingFlag.survey2Flag=!1;case 9:case"end":return t.stop()}},t,this)})),function(){return s.apply(this,arguments)}),getBaseInfo:(i=Object(n.a)(regeneratorRuntime.mark(function t(){var e,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loadingFlag.surveyFlag=!0,t.next=3,this.getDriverStatisticsSingle(this.store.operation);case 3:e=t.sent,a=e.flag,i=e.data,this.surveyData=a?i:{},this.loadingFlag.surveyFlag=!1;case 8:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)}),getVehicleOperate:function(){var t=this;this.loadingFlag.vehicleOperateFlag=!0,this.queryOperatingAreaDistribution(this.store.operation).then(function(e){t.vehicleOperate=e,t.vehicleOperate.modelType="single",t.loadingFlag.vehicleOperateFlag=!1})},getRoadLevel:function(){var t=this;this.loadingFlag.roadLevelFlag=!0,this.queryRoadGradeDistribution(this.store.operation).then(function(e){t.roadLevel=e,t.roadLevel.modelType="single",t.loadingFlag.roadLevelFlag=!1})}}),mounted:function(){var t=this;this.$route.query.vehicleId&&(this.store.operation=this.$route.query,setTimeout(function(){t.search()},1500))}},v=(a("e3d4"),a("2877")),f=Object(v.a)(g,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"multiDrivingAnalysis"},[a("cv-operation",{attrs:{position:"left"}},[a("el-form-item",{attrs:{label:"日期类型"}},[a("el-select",{on:{change:t.changeDate},model:{value:t.store.operation.dateType,callback:function(e){t.$set(t.store.operation,"dateType",e)},expression:"store.operation.dateType"}},t._l(t._searchRangerLists,function(t){return a("el-option",{key:t.key,attrs:{value:t.key,label:t.name}})}),1)],1),a("el-form-item",{attrs:{label:"日期选择"}},[a("el-date-picker",{attrs:{type:t.store.operation.dateType,"value-format":t.valueFormat,"picker-options":t.pickerOptions1},model:{value:t.store.operation.searchTime,callback:function(e){t.$set(t.store.operation,"searchTime",e)},expression:"store.operation.searchTime"}})],1),a("el-form-item",[a("cv-tool",{staticClass:"cv-tool",attrs:{name:t.$route.name,data:t.$store.getters.manageMenus},on:{search:t.search}})],1)],1),a("cv-publictree-content",{attrs:{model:"single","vehicle-monitor":t.handlerVehicleMonitor}},[a("el-row",{attrs:{gutter:8}},[a("el-col",{attrs:{span:12}},[a("cv-lazy-render",{staticClass:"chartZoom",attrs:{time:"1000",height:"300"}},[a("comprehensive-score",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingFlag.survey2Flag,expression:"loadingFlag.survey2Flag"}],attrs:{data:t.surveyData2}})],1)],1),a("el-col",{attrs:{span:12}},[a("cv-lazy-render",{staticClass:"chartZoom",attrs:{time:"1000",height:"300"}},[a("survey",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingFlag.surveyFlag,expression:"loadingFlag.surveyFlag"}],attrs:{data:t.surveyData}})],1)],1)],1),a("el-row",{attrs:{gutter:8}},[a("el-col",{attrs:{span:12}},[a("cv-lazy-render",{staticClass:"chartZoom",attrs:{time:"1000",height:"300"}},[a("regional",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingFlag.vehicleOperateFlag,expression:"loadingFlag.vehicleOperateFlag"}],attrs:{title:"运营区域分布(里程)",data:t.vehicleOperate}})],1)],1),a("el-col",{attrs:{span:12}},[a("cv-lazy-render",{staticClass:"chartZoom",attrs:{time:"1000",height:"300"}},[a("roadLevel",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingFlag.roadLevelFlag,expression:"loadingFlag.roadLevelFlag"}],attrs:{title:"道路等级分布(里程)",data:t.roadLevel}})],1)],1)],1),a("el-row",{attrs:{gutter:8}},[a("el-col",{attrs:{span:12}},[a("cv-lazy-render",{staticClass:"chartZoom",attrs:{time:"1000",height:"300"}},[a("bar-chart",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingFlag.vehicleTypeCount,expression:"loadingFlag.vehicleTypeCount"}],ref:"one",attrs:{title:"报警类型统计",data:t.alarmType,Type:"singe"}})],1)],1),a("el-col",{attrs:{span:12}},[a("cv-lazy-render",{staticClass:"chartZoom",attrs:{time:"1000",height:"300"}},[a("bar-chart",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingFlag.vehicleCount,expression:"loadingFlag.vehicleCount"}],attrs:{title:"单车行程统计",data:t.alarmTop,Type:"singe"}})],1)],1)],1),a("el-row",{attrs:{gutter:8}},[a("el-col",{attrs:{span:24}},[a("cv-lazy-render",{staticClass:"chartZoom",attrs:{time:"1000",height:"300"}},[a("alarm-mileage",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingFlag.alarmMTCount,expression:"loadingFlag.alarmMTCount"}],attrs:{data:t.alarmMT,title:"报警、里程、时间分布图"}})],1)],1)],1)],1)],1)},[],!1,null,null,null).exports;e.default=f},d4b7:function(t,e,a){"use strict";var i=a("2d14");a.n(i).a},d655:function(t,e,a){"use strict";a.r(e),a("7f7f");var i={props:{options:{}},inject:["store"],data:function(){return{result:{},loadingFlag:!0}},methods:{getData:function(t){var e={tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},series:[{type:"pie",radius:"55%",left:"center",data:t||["暂无数据"],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};this.result=e,this.loadingFlag=!1}},mounted:function(){var t=this;this.$store.dispatch("queryOperatingAreaDistributionDetail",{enterpriseId:this.store.operation.enterpriseId,dateType:this.store.operation.dateType,searchTime:this.store.operation.searchTime,province:this.options.percent}).then(function(e){t.getData(e.echartData)})},watch:{"options.flag":function(t){t||(this.options.name="")}}},s=a("2877"),n=Object(s.a)(i,function(){var t=this.$createElement,e=this._self._c||t;return e("el-row",[e("el-col",{directives:[{name:"loading",rawName:"v-loading",value:this.loadingFlag,expression:"loadingFlag"}],attrs:{span:24}},[e("cv-echart",{attrs:{name:"pie",data:this.result}})],1)],1)},[],!1,null,null,null).exports,r=a("5cd5"),o=(a("28a5"),a("ac6a"),a("cebc")),l={props:{options:{}},data:function(){return{lineItem:{},barItem:{},pieItem:{},topdata:{},flag:!1}},methods:{setParams:function(){return Object(o.a)({},this.options.options,{province:this.options.percent})},setPieData:function(t){var e=[];return t.forEach(function(t){e.push({value:t.mileageSum,name:t.roadlevelName})}),e},showBar:function(t){var e={xAxis:{data:t&&t.alarmName||"暂无数据",axisLabel:{inside:!!t.alarmName,formatter:function(t){return 0!=t&&t.split("").join("\n")}},axisTick:{show:!1},axisLine:{show:!1},z:10},yAxis:{name:"报警(次)",type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{textStyle:{color:"#485465"}}},series:[{data:t&&t.alarmCount||[0,0,0,0],type:"bar"}]};this.barItem=e},showLine:function(t){var e={xAxis:{name:"小时",data:t.hours||"暂无数据"},yAxis:{name:"km",type:"value"},series:[{data:t.mileageSum||[0,0,0,0],type:"line"}]};this.lineItem=e},showPie:function(t){var e={tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},series:[{type:"pie",radius:"55%",left:"center",data:t||["暂无数据"],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};this.pieItem=e},getAreaDistributionByVID:function(){var t=this;this.$http({url:"/driverBehavior/getAreaDistributionByVID",params:this.setParams()}).then(function(e){var a=e.data,i=e.flag;t.topdata=i&&a?a:{}})},findAlarmStatisticsByType:function(){var t=this;this.$http({url:"/driverBehavior/findAlarmStatisticsByType",params:this.setParams()}).then(function(e){var a=e.data;e.flag&&a?t.showBar(a):t.showBar([])})},queryRoadGradeDistributionDetail:function(){var t=this;this.$http({url:"/OperationsDistributedController/queryRoadGradeDistributionDetail",params:this.setParams()}).then(function(e){var a=e.data;e.flag&&a&&t.showLine(a)})},queryOperatingAreaDistributionDetail:function(){var t=this;this.$http({url:"/OperationsDistributedController/queryOperatingAreaDistributionDetail",params:this.setParams()}).then(function(e){var a=e.data;e.flag&&a&&t.showPie(t.setPieData(a))})}},mounted:function(){this.getAreaDistributionByVID(),this.findAlarmStatisticsByType(),this.queryRoadGradeDistributionDetail(),this.queryOperatingAreaDistributionDetail()},watch:{"options.flag":function(t){t||(this.options.name="")}}},c=Object(s.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.flag,expression:"flag"}],staticClass:"singleDialog"},[a("el-row",[a("el-col",{attrs:{span:5}},[t._v("总里程:"+t._s(t.topdata.totalMilages||"--")+"km")]),a("el-col",{attrs:{span:5}},[t._v("总时间:"+t._s(t.topdata.totalHours||"--")+"h")]),a("el-col",{attrs:{span:5}},[t._v("最高速度:"+t._s(t.topdata.maxSpeed||"--")+"km/h")]),a("el-col",{attrs:{span:5}},[t._v("平均速度:"+t._s(t.topdata.avgSpeed||"--")+"km/h")]),a("el-col",{attrs:{span:4}},[t._v("报警总数:"+t._s(t.topdata.totalAlarms||0)+"条")])],1),a("cv-echart",{ref:"lineChart",attrs:{name:"line",data:t.lineItem}}),a("cv-echart",{ref:"barChart",attrs:{name:"bar",data:t.barItem}}),a("cv-echart",{ref:"pieChart",attrs:{name:"pie",data:t.pieItem}})],1)},[],!1,null,null,null).exports,d={props:{data:{},title:""},components:{regionalDialog:n,analysisPiechat:r.a,singleDialog:c},data:function(){return{dialog:{flag:!1,title:"--",name:"",size:"dialog-small",percent:""}}},inject:["store"],methods:{clickPie:function(t){this.data.seriesData&&("single"==this.data.modelType?this.singleDialogChart(t):this.mutiDialog(t))},mutiDialog:function(t){this.dialog.flag=!0,this.dialog.title=t.name,this.dialog.name="regionalDialog",this.dialog.percent=t.data.PROVINCE},singleDialogChart:function(t){this.dialog.flag=!0,this.dialog.title="运营区域分布",this.dialog.name="singleDialog",this.dialog.size="dialog-middle",this.dialog.percent=t.data.PROVINCE,this.dialog.options=this.store.operation}}},u=(a("4e64"),Object(s.a)(d,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"regional"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"titleItem"},[t._v(t._s(t.title))]),a("analysis-piechat",{attrs:{data:t.data},on:{getPie:t.clickPie}}),a("el-dialog",{attrs:{visible:t.dialog.flag,title:t.dialog.title,"custom-class":t.dialog.size,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.dialog,"flag",e)}}},[a(t.dialog.name,{tag:"component",attrs:{options:t.dialog}})],1)],1)],1)},[],!1,null,null,null).exports);e.default=u},e3d4:function(t,e,a){"use strict";var i=a("5a32");a.n(i).a},e7b4:function(t,e,a){},f97f:function(t,e,a){"use strict";a.r(e),a("7f7f");var i=a("5cd5"),s={props:{options:{}},data:function(){return{result:{},loadFlag:!0}},inject:["store"],methods:{echartData:function(t,e){var a={legend:{data:"里程",x:"left"},grid:{left:"3%",bottom:"3%",containLabel:!0},tooltip:{formatter:"时间:{b}<br/>里程:{c}"},xAxis:{type:"category",name:"时间",boundaryGap:!1,data:t||["暂","无","数","据"]},yAxis:[{name:"里程",type:"value"}],series:[{name:"里程",type:"line",smooth:!0,itemStyle:{normal:{color:"red"}},symbolSize:8,lineStyle:{normal:{width:3}},data:e||[0,0,0,0,0]}]};this.result=a,this.loadFlag=!1},getData:function(){var t=this;this.$store.dispatch("queryRoadGradeDistributionDetail",{enterpriseId:this.store.operation.enterpriseId,dateType:this.store.operation.dateType,searchTime:this.store.operation.searchTime,roadLevel:this.options.value}).then(function(e){t.echartData(e.echartData.hours,e.echartData.mileageSum)})}},mounted:function(){this.getData()},watch:{"options.flag":function(t){t||(this.options.name="")}}},n=a("2877"),r=Object(n.a)(s,function(){var t=this.$createElement,e=this._self._c||t;return e("el-row",[e("el-col",{directives:[{name:"loading",rawName:"v-loading",value:this.loadFlag,expression:"loadFlag"}],attrs:{span:24}},[e("cv-echart",{attrs:{name:"line",data:this.result}})],1)],1)},[],!1,null,null,null).exports,o=(a("28a5"),a("cebc")),l={props:{options:{}},data:function(){return{lineItem:{},barItem:{},pieItem:{},topdata:{}}},methods:{setParams:function(){return Object(o.a)({},this.options.options,{roadLevel:this.options.value})},showBar:function(t){var e={xAxis:{data:t&&t.alarmName||"暂无数据",axisLabel:{inside:!!t.alarmName,formatter:function(t){return 0!=t&&t.split("").join("\n")}},axisTick:{show:!1},axisLine:{show:!1},z:10},yAxis:{name:"报警(次)",type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{textStyle:{color:"#485465"}}},series:[{data:t&&t.alarmCount||[0,0,0,0],type:"bar"}]};this.barItem=e},showLine:function(t){var e={xAxis:{name:"小时",data:t.hours||"暂无数据"},yAxis:{name:"km",type:"value"},series:[{data:t.mileageSum||[0,0,0,0],type:"line"}]};this.lineItem=e}},mounted:function(){var t=this;this.$http({url:"/driverBehavior/getRoadDistributionByVID",params:this.setParams()}).then(function(e){var a=e.data,i=e.flag;t.topdata=i&&a?a:{}}),this.$http({url:"/driverBehavior/findAlarmStatisticsByType",params:this.setParams()}).then(function(e){var a=e.data;e.flag&&a&&t.showBar(a)}),this.$http({url:"/OperationsDistributedController/queryRoadGradeDistributionDetail",params:this.setParams()}).then(function(e){var a=e.data;e.flag&&a&&t.showLine(a)})},watch:{"options.flag":function(t){t||(this.options.name="")}}},c=Object(n.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"singleDialog"},[a("el-row",[a("el-col",{attrs:{span:5}},[t._v("总里程:"+t._s(t.topdata.totalMilages||"--")+"km")]),a("el-col",{attrs:{span:5}},[t._v("总时间:"+t._s(t.topdata.totalHours||"--")+"h")]),a("el-col",{attrs:{span:5}},[t._v("最高速度:"+t._s(t.topdata.maxSpeed||"--")+"km/h")]),a("el-col",{attrs:{span:5}},[t._v("平均速度:"+t._s(t.topdata.avgSpeed||"--")+"km/h")]),a("el-col",{attrs:{span:4}},[t._v("报警总数:"+t._s(t.topdata.totalAlarms||0)+"条")])],1),a("cv-echart",{ref:"lineChart",attrs:{name:"line",data:t.lineItem}}),a("cv-echart",{ref:"barChart",attrs:{name:"bar",data:t.barItem}})],1)},[],!1,null,null,null).exports,d={props:{data:{},title:""},components:{levelDialog:r,analysisPiechat:i.a,singleDialog:c},inject:["store"],data:function(){return{dataItem:{},dialog:{flag:!1,title:"--",name:"",size:"dialog-small",url:"",value:""}}},methods:{clickPie:function(t){this.data.seriesData&&("single"==this.data.modelType?this.singleDialogChart(t):this.mutiDialog(t))},mutiDialog:function(t){this.dialog.flag=!0,this.dialog.title=t.name,this.dialog.name="levelDialog",this.dialog.value=t.data.ROADLEVEL},singleDialogChart:function(t){this.dialog.flag=!0,this.dialog.title="道路等级分布",this.dialog.name="singleDialog",this.dialog.size="dialog-middle",this.dialog.value=t.data.ROADLEVEL,this.dialog.options=this.store.operation}}},u=(a("d4b7"),Object(n.a)(d,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"roadLevel"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"titleItem"},[t._v(t._s(t.title))]),a("analysis-piechat",{attrs:{data:t.data,title:t.title},on:{getPie:t.clickPie}}),a("el-dialog",{attrs:{visible:t.dialog.flag,title:t.dialog.title,"custom-class":t.dialog.size,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.dialog,"flag",e)}}},[a(t.dialog.name,{tag:"component",attrs:{options:t.dialog}})],1)],1)],1)},[],!1,null,null,null).exports);e.default=u},fcee:function(t,e,a){"use strict";a.r(e);var i={props:{data:{}}},s=(a("fe8f"),a("2877")),n=Object(s.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"survey"},[a("el-row",{staticClass:"font1"},[t._v("分析结果")]),a("div",{staticClass:"font2"},[t._v("\n        统计周期为"),a("span",{staticClass:"redAlarm"},[t._v(t._s(t.data.sumDays||"--"))]),t._v("天， 共计行驶\n        "),a("span",{staticClass:"greenKm"},[t._v(t._s(t._f("toFixed")(t.data.totalMileages,2)||0))]),t._v("公里， 行驶时间\n        "),a("span",{staticClass:"yellowHour "},[t._v(t._s(t._f("toFixed")(t.data.totalHours,2)||0))]),t._v("小时。 在统计周期内，平均车速为\n        "),a("span",{staticClass:"bluePlateCode"},[t._v(t._s(t._f("toFixed")(t.data.avgSpeed,2)||0))]),t._v("公里/小时， 最高车速\n        "),a("span",{staticClass:"pinkBlue"},[t._v(t._s(t._f("toFixed")(t.data.maxSpeed,2)||0))]),t._v("公里/小时， 途径\n        "),a("span",{staticClass:"yellowHour"},[t._v(t._s(t.data.provinces||0))]),t._v("个省份， 累计产生安全报警\n        "),a("span",{staticClass:"bluePlateCode"},[t._v(t._s(t.data.alarmCount||0))]),t._v("次， 平均\n        "),a("span",{staticClass:"greenKm"},[t._v(t._s(t._f("toFixed")(t.data.oneHundredKmAlarmAvg,2)||0))]),t._v("次/百公里， 夜间行驶\n        "),a("span",{staticClass:"redAlarm"},[t._v(t._s(t._f("toFixed")(t.data.mileageLignt,2)||0))]),t._v("公里 （占总行程的\n        "),a("span",{staticClass:"redAlarm"},[t._v(t._s(t._f("isValue")(t._f("toFixed")(100*t.data.mileageLigntPer,2),"%")||0))]),t._v(" ）;\n    ")]),a("div",{staticClass:"font2 "},[a("span",{staticClass:"font3 span"},[t._v("*")]),a("b",{staticClass:"font3 "},[t._v("建议")]),a("b",[t._v(t._s(t.data.tip||"--"))])])],1)},[],!1,null,"2aa0b516",null).exports;e.default=n},fe8f:function(t,e,a){"use strict";var i=a("a828");a.n(i).a}}]);
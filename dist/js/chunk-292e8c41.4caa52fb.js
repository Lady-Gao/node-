(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-292e8c41"],{"05c0":function(e,t,i){"use strict";i("7f7f"),i("20d6"),i("ac6a");var r=i("cebc"),n=i("3f4e"),o=i("2f62"),a={name:"CvPublictreeContent",components:{CvContent:n.a},props:{model:String,vehicleMonitor:Function,loading:Boolean,noresize:{default:!1,type:Boolean}},data:function(){return{entryList:[],condition:""}},computed:Object(r.a)({},Object(o.c)(["onlineList","isAttention","socketEnterprise","socketVehicle","vehicle_data","vehicleCondition"]),{isCheck:function(){switch(this.model){case"multi":return!0;case"single":default:return!1}},_treeMethods:function(){return this.$refs.tabs},_contentMethods:function(){return this.$refs.content}}),beforeDestroy:function(){var e=this._treeMethods.getAllNodes;this.setStoreVehicleSearchCondition(this.condition),this.setStoreVehicleData(e())},mounted:function(){var e=this._treeMethods.$refs.tree.reference().ztreeApi;e()&&e().checkAllNodes(!1)},methods:Object(r.a)({},Object(o.b)(["setStoreVehicleData","setStoreVehicleSearchCondition"]),{handlerVehicleSearch:function(e){this.condition=e},vehicle_Monitor:function(e){var t=e.data;if(e.name,"function"==typeof this.vehicleMonitor)switch(this.model){case"multi":return this.vehicle_Monitor_multi(e);case"single":return this.vehicleMonitor(t[0])}},vehicle_Monitor_multi:function(e){var t=this,i=e.data;switch(e.name){case"check":this.entryList=this.entryList.concat(i);break;case"cancel":i.forEach(function(e){var i=t.entryList.findIndex(function(t){return t.id==e.id});0<=i&&t.entryList.splice(i,1)})}this.vehicleMonitor(this.entryList)}})},s=(i("45d7"),i("2877")),l=Object(s.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("cv-content",{ref:"content",attrs:{loading:e.loading,noresize:e.noresize}},[e.model?i("cv-tabs-tree",{ref:"tabs",staticClass:"vehiclemaster-tree",attrs:{slot:"aside","vehicle-search":e.vehicleCondition,"is-checked":e.isCheck,"tree-data":e.vehicle_data,"online-monitor":e.onlineList,"vehicle-monitor":e.socketVehicle,"attention-monitor":e.isAttention,"enterprise-fleet-monitor":e.socketEnterprise,"node-monitor":e.vehicle_Monitor},on:{"vehicle-choose-search":e.handlerVehicleSearch},slot:"aside"}):e._e(),e._t("default")],2)},[],!1,null,"2dfdf41b",null).exports;l.install=function(e){e.component(l.name,l)},t.a=l},"45d7":function(e,t,i){"use strict";var r=i("6e18");i.n(r).a},"6e18":function(e,t,i){},ece0:function(e,t,i){"use strict";i.r(t),i("7f7f"),i("ac6a"),i("96cf");var r,n=i("3b8d"),o=(i("ed08"),{components:{CvPublictreeContent:i("05c0").a},data:function(){return{common:{alarmTree:[]},reset:!1,value:"1",pickerOption:{disabledDate:function(e){return e.getTime()>Date.now()}},operation:{time:[this.$filter.timeStamp(this.$filter.format(new Date,"yyyy-MM-dd start")),this.$filter.timeStamp(this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss"))],startTime:null,endTime:null,alarm:"1",alarmTypes:[],vehicleIds:[]},policeCarListGrid:{options:{current:1,size:10,total:0,flag:!1},loading:!1,table:[],allAlarm:[],fleetId:"",enterpriseId:"",vehicleIds:""},grid:{alarmTypeStr:"",endTime:"",mapType:"",startTime:"",vehicleIds:""}}},computed:{_table:function(){return this.$refs.table}},methods:{handlerVehicleMonitor:function(e){this.operation.vehicleIds.push(e.id)},search:(r=Object(n.a)(regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!(0<this.operation.vehicleIds.length)){e.next=5;break}this.operation.vehicleIds.forEach(function(e){t.push(e)}),e.next=8;break;case 5:if(0==this.operation.vehicleIds)return this.$message.error({message:this.$t("请选择车辆")}),e.abrupt("return");e.next=8;break;case 8:null!=this.operation.time?(this.grid={vehicleIds:this.$service.isContext(t.join(","))?null:t.join(","),startTime:this.$filter.format(this.operation.time[0],"yyyy-MM-dd HH:mm:ss"),endTime:this.$filter.format(this.operation.time[1],"yyyy-MM-dd HH:mm:ss"),alarmTypeStr:this.$service.isContext(this.operation.alarmTypes.join(","))?null:this.operation.alarmTypes.join(","),mapType:1},null!=this.grid.startTime&&null!=this.grid.endTime?this.$filter.timeRange(this.grid.startTime,this.grid.endTime)<=3?setTimeout(function(){i._table.tableInitial()},100):(this.policeCarListGrid.loading=!1,this.$message.error({message:this.$t("时间范围为3天")})):(this.$message.error({message:this.$t("请选择时间范围")}),this.policeCarListGrid.loading=!1)):(this.$message.error({message:this.$t("请选择时间范围")}),this.policeCarListGrid.loading=!1);case 9:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)}),checked:function(e){this.operation.alarmTypes=e},allAlarmType:function(e){this.allAlarm=e},alarmTime:function(e){return""!=e.time?e.time:""},filterColor:function(e){return this.$filter.plateCodeColor(e.plateColor)},filterAlarmLevel:function(e){return this.$filter.alarmLevel(e.alarmLevel)},filterAlarmType:function(e){}},watch:{"operation.time":function(e){this.policeCarListGrid.options.current=1,this.reset=!0},"operation.alarmTypes":function(e){this.policeCarListGrid.options.current=1,this.reset=!0},"operation.vehicleIds":function(e){this.policeCarListGrid.options.current=1,this.reset=!0},"$store.getters.ptMultiCar":function(e){this.operation.vehicleIds=e}},mounted:function(){var e=this;this.$http({url:"/alarmInfo/frinAlarmTypeInfoList.do",params:{}}).then(function(t){t.flag&&(e.common.alarmTree=t.data.children)})}}),a=i("2877"),s=Object(a.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cv-alarm-search"},[i("cv-operation",[i("el-form-item",{attrs:{label:"起止日期:"}},[i("el-date-picker",{staticStyle:{width:"330px"},attrs:{editable:!1,type:"datetimerange",placeholder:"选择时间范围","picker-options":e.pickerOption,size:"small"},model:{value:e.operation.time,callback:function(t){e.$set(e.operation,"time",t)},expression:"operation.time"}})],1),i("el-form-item",{attrs:{label:"报警类型:"}},[i("cv-dropdown-tree",{attrs:{isCheck:!0,data:e.common.alarmTree},on:{checked:e.checked},model:{value:e.alarmArr,callback:function(t){e.alarmArr=t},expression:"alarmArr"}})],1),i("el-form-item",{staticStyle:{float:"right"}},[i("cv-tool",{staticClass:"cv-tool",staticStyle:{margin:"0"},attrs:{name:e.$route.name,data:e.$store.getters.monitorMenu,"is-export":!1,"is-remove":!1,"is-add":!1,"is-modify":!1},on:{search:e.search}})],1)],1),i("cv-content",[i("cv-publictree-content",{attrs:{model:"single","vehicle-monitor":e.handlerVehicleMonitor,loading:!1}},[i("cv-grid",{ref:"table",attrs:{params:e.grid,url:"/alarmInfo/findAlarmInfoList.do"}},[i("el-table-column",{attrs:{label:"车牌号码",prop:"plateCode","min-width":"100px"}}),i("el-table-column",{attrs:{label:"车牌颜色",prop:"plateColor","min-width":"100px"}}),i("el-table-column",{attrs:{label:"报警类型",prop:"type","min-width":"100px"}}),i("el-table-column",{attrs:{label:"报警级别",prop:"alarmLevel","min-width":"100px"}}),i("el-table-column",{attrs:{label:"报警来源",prop:"sources","min-width":"100px"}}),i("el-table-column",{attrs:{label:"车速(km/h)",prop:"speed","min-width":"120px"}}),i("el-table-column",{attrs:{label:"GPS车速(km/h)",prop:"gpsSpeed","min-width":"160px"}}),i("el-table-column",{attrs:{label:"获取位置",prop:"locationName","min-width":"120px"}}),i("el-table-column",{attrs:{label:"报警时间",prop:"time","min-width":"120px"}})],1)],1)],1)],1)},[],!1,null,"eef26eda",null).exports;s.install=function(e){e.component(s.name,s)},t.default=s}}]);
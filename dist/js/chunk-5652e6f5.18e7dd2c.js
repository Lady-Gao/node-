(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5652e6f5"],{"05c0":function(t,e,a){"use strict";a("7f7f"),a("20d6"),a("ac6a");var i=a("cebc"),s=a("3f4e"),l=a("2f62"),n={name:"CvPublictreeContent",components:{CvContent:s.a},props:{model:String,vehicleMonitor:Function,loading:Boolean,noresize:{default:!1,type:Boolean}},data:function(){return{entryList:[],condition:""}},computed:Object(i.a)({},Object(l.c)(["onlineList","isAttention","socketEnterprise","socketVehicle","vehicle_data","vehicleCondition"]),{isCheck:function(){switch(this.model){case"multi":return!0;case"single":default:return!1}},_treeMethods:function(){return this.$refs.tabs},_contentMethods:function(){return this.$refs.content}}),beforeDestroy:function(){var t=this._treeMethods.getAllNodes;this.setStoreVehicleSearchCondition(this.condition),this.setStoreVehicleData(t())},mounted:function(){var t=this._treeMethods.$refs.tree.reference().ztreeApi;t()&&t().checkAllNodes(!1)},methods:Object(i.a)({},Object(l.b)(["setStoreVehicleData","setStoreVehicleSearchCondition"]),{handlerVehicleSearch:function(t){this.condition=t},vehicle_Monitor:function(t){var e=t.data;if(t.name,"function"==typeof this.vehicleMonitor)switch(this.model){case"multi":return this.vehicle_Monitor_multi(t);case"single":return this.vehicleMonitor(e[0])}},vehicle_Monitor_multi:function(t){var e=this,a=t.data;switch(t.name){case"check":this.entryList=this.entryList.concat(a);break;case"cancel":a.forEach(function(t){var a=e.entryList.findIndex(function(e){return e.id==t.id});0<=a&&e.entryList.splice(a,1)})}this.vehicleMonitor(this.entryList)}})},o=(a("45d7"),a("2877")),r=Object(o.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cv-content",{ref:"content",attrs:{loading:t.loading,noresize:t.noresize}},[t.model?a("cv-tabs-tree",{ref:"tabs",staticClass:"vehiclemaster-tree",attrs:{slot:"aside","vehicle-search":t.vehicleCondition,"is-checked":t.isCheck,"tree-data":t.vehicle_data,"online-monitor":t.onlineList,"vehicle-monitor":t.socketVehicle,"attention-monitor":t.isAttention,"enterprise-fleet-monitor":t.socketEnterprise,"node-monitor":t.vehicle_Monitor},on:{"vehicle-choose-search":t.handlerVehicleSearch},slot:"aside"}):t._e(),t._t("default")],2)},[],!1,null,"2dfdf41b",null).exports;r.install=function(t){t.component(r.name,r)},e.a=r},"0685":function(t,e,a){},"36c7":function(t,e,a){},"45d7":function(t,e,a){"use strict";var i=a("6e18");a.n(i).a},"55f1":function(t,e,a){},"56ad":function(t,e,a){"use strict";var i=a("36c7");a.n(i).a},"6e18":function(t,e,a){},"92a7":function(t,e,a){},a584:function(t,e,a){"use strict";a.r(e),a("7f7f"),a("6b54"),a("386d");var i=a("cebc"),s=a("2f62"),l=(a("bb1b"),a("2877")),n=Object(l.a)({},function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"swiper"},[this._t("default")],2)},[],!1,null,"5be0dc98",null).exports;a("f0e2").default.options.flash.swf="static/video-js.swf";var o={props:{src:{default:"http://vjs.zencdn.net/v/oceans.mp4"},type:{default:"video/mp4"},idx:{default:0}},mounted:function(){}},r=(a("bc0b"),{components:{videos:Object(l.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("video",{staticClass:"video-js vjs-default-skin vjs-big-play-centered",class:"video_"+t.idx,staticStyle:{width:"100%",height:"100%"},attrs:{controls:"",preload:"none",poster:"m.jpg","data-setup":"{}"}},[a("source",{attrs:{src:t.src,type:t.type}})])},[],!1,null,null,null).exports,swpier:n},props:{type:{default:"tab0"},list:[]},data:function(){return{videoList:[]}},methods:{dbclick:function(t,e){this.$emit("nodeclick",{type:t,obj:e})}}}),c=(a("b51b"),Object(l.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["tab0"==t.type?a("swpier",{attrs:{tag:"ul"}},t._l(t.list,function(e,i){return a("li",{key:i},[a("img",{staticClass:"playBOX",attrs:{src:e.filePath,alt:"点击查看"},on:{click:function(a){return t.dbclick("img",e)}}})])}),0):t._e(),"tab1"==t.type?a("swpier",{staticClass:"ul"},t._l(t.list,function(t,e){return a("li",{key:e,staticClass:"video-item"},[a("videos",{ref:"video",refInFor:!0,attrs:{src:t.filePath,type:"video/mp4"}})],1)}),0):t._e(),"tab2"==t.type?a("swpier",{staticClass:"ul"},t._l(t.list,function(t,e){return a("li",{key:e,staticClass:"audio-item"},[a("videos",{ref:"audio",refInFor:!0,attrs:{src:t.filePath,idx:e,type:"audio/mp3"}})],1)}),0):t._e()],1)},[],!1,null,"c5074124",null).exports),d={props:{data:{}},computed:Object(i.a)({},Object(s.c)(["mapName","mapType"])),methods:{mapInit:function(){this.setMapMarker(this.data)},setMapMarker:function(t){if(t.obj.mapLo&&t.obj.mapLa){var e=this.$refs.dialogMap.mapMethods.mapAddpoint({longitude:parseFloat(t.obj.mapLo),latitude:parseFloat(t.obj.mapLa)},this.$filter.isOnline({plateCode:t.obj.plateCode,vehicleStatus:1},!1,this.mapName),{width:32,height:32});this.$refs.dialogMap.mapMethods.addOverlay(e),this.$refs.dialogMap.mapMethods.moveToCenter(e.point,17)}}}},h=(a("c037"),Object(l.a)(d,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["img"==t.data.type?a("img",{staticClass:"dialog-width",attrs:{src:t.data.obj.filePath,alt:"点击查看"}}):t._e(),"map"==t.data.type?a(t.mapName,{ref:"dialogMap",tag:"component",staticStyle:{width:"100%",height:"400px"},attrs:{mapLoaded:t.mapInit}}):t._e()],1)},[],!1,null,"663bec92",null).exports),m={components:{tabType:c,tableDialog:h},props:{type:{default:""},info:{},list:[]},data:function(){return{dialog:{flag:!1,title:"",size:"dialog-tiny"},options:{},flag:""}},computed:{},methods:{nodeclick:function(t){this.dialog.flag=!0,this.dialog.title="查看",this.options={type:t.type,obj:t.obj}}}},p={components:{Tabpane:Object(l.a)(m,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"TapaneTab"},[a("tabType",{staticClass:"tabType",attrs:{type:t.type,list:t.list},on:{nodeclick:t.nodeclick}}),a("el-dialog",{attrs:{title:t.dialog.title,visible:t.dialog.flag,"custom-class":t.dialog.size},on:{"update:visible":function(e){return t.$set(t.dialog,"flag",e)}}},[a("tableDialog",{attrs:{data:t.options}})],1)],1)},[],!1,null,"26a73ffc",null).exports},props:{grid:{}},data:function(){return{activeName:"tab0",imgList:[],videoList:[],audioList:[]}},watch:{grid:function(t){t.fileMap?(this.imgList=t.fileMap.image,this.videoList=t.fileMap.video,this.audioList=t.fileMap.audio):(this.imgList=[],this.videoList=[],this.audioList=[])}}},u={props:{data:{},loading:!1},data:function(){return{grid:{},flag:!1,loadFlag:!1,activeName:null,mapObj:null,dialog:{flag:!1,title:"",name:"",size:"dialog-xxxl"},expands:[]}},components:{AssistanTabs:Object(l.a)(p,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:t.$t("filter.picture")+"("+(t.grid.imageCount||0)+")",name:"tab0"}},[a("Tabpane",{attrs:{type:t.activeName,list:t.imgList,info:t.infoList}})],1),a("el-tab-pane",{attrs:{label:t.$t("filter.video")+"("+(t.grid.videoCount||0)+")",name:"tab1"}},[a("Tabpane",{attrs:{type:t.activeName,list:t.videoList,info:t.infoList}})],1),a("el-tab-pane",{attrs:{label:t.$t("filter.music")+"("+(t.grid.audioCount||0)+")",name:"tab2"}},[a("Tabpane",{attrs:{type:t.activeName,list:t.audioList,info:t.infoList}})],1)],1)},[],!1,null,"d3668e3c",null).exports,tableDialog:h},computed:Object(i.a)({},Object(s.c)(["mapName","mapType"])),methods:Object(i.a)({},Object(s.b)(["findWebAdasInfoDetails"]),{handleChange:function(t,e){var a=this;e.length?(this.expands=[],t&&this.expands.push(t.id)):this.expands=[],0<this.expands.length&&(this.flag=!0,this.findWebAdasInfoDetails({id:t.id,mapType:this.mapType,alarmTypeId:t.alarmId}).then(function(e){var i=e.flag,s=e.data;e.errorCode,i&&(a.grid=s,a.grid.plateCode=t.plateCode,a.setMapMarker(a.grid)),a.flag=!1}))},mapInit:function(){this.setMapMarker(this.grid)},setMapMarker:function(t){if(t.mapLo&&t.mapLa){var e=this.$refs.tablemap&&this.$refs.tablemap.mapMethods.mapAddpoint({longitude:parseFloat(t.mapLo),latitude:parseFloat(t.mapLa)},this.$filter.isOnline({plateCode:t.plateCode,vehicleStatus:1},!1,this.mapName),{width:32,height:32});this.$refs.tablemap.mapMethods.addOverlay(e),this.$refs.tablemap.mapMethods.moveToCenter(e.point,17)}},setType:function(t){switch(t){case 1:return void(this.flag=this.$t("fence.2"));case 2:return void(this.flag=this.$t("systemLog.height"));case 3:return void(this.flag=this.$t("systemLog.weight"));default:return void(this.flag="")}},storageDetail:function(){this.dialog.flag=!0,this.dialog.title=this.$t("power.look"),this.dialog.name="tableDialog",this.options={type:"map",obj:this.grid}}}),watch:{"dialog.flag":function(t){t||(this.dialog.name="")},data:function(t){0==t.length&&(this.activeName=null)}}},f=(a("56ad"),Object(l.a)(u,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AssistanTable"},[a("cv-grid",{attrs:{data:t.data,expandrowkeys:t.expands,loadFlg:t.loading},on:{"expand-change":t.handleChange}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"panelTable"},[a("AssistanTabs",{staticClass:"table",attrs:{grid:t.grid}}),a("div",{staticClass:"mapInfo"},[a(t.mapName,{ref:"tablemap",tag:"component",staticClass:"multiMap",attrs:{mapLoaded:t.mapInit},nativeOn:{click:function(a){return t.storageDetail(e)}}})],1)],1)]}}])}),a("el-table-column",{attrs:{prop:"plateCode",label:t.$t("cvtsp.plateCode")}}),a("el-table-column",{attrs:{prop:"speed",label:t.$t("historyTrack.gpsSpeed")}}),a("el-table-column",{attrs:{prop:"name",label:t.$t("systemLog.AlarmType")}}),a("el-table-column",{attrs:{prop:"time",label:t.$t("systemLog.AlarmTime")}}),a("el-table-column",{attrs:{prop:"locationName",label:t.$t("systemLog.AlarmLocation")}}),a("el-table-column",{attrs:{prop:"statusName",label:t.$t("systemLog.Whether")}})],1),a("el-dialog",{attrs:{title:t.dialog.title,visible:t.dialog.flag,"custom-class":t.dialog.size},on:{"update:visible":function(e){return t.$set(t.dialog,"flag",e)}}},[a(t.dialog.name,{tag:"component",attrs:{data:t.options}})],1)],1)},[],!1,null,null,null).exports),b={props:{search:{},allAlarmId:{}},data:function(){return{grid:{endTime:"",vehicleIds:"",alarmIds:"",startTime:""}}},methods:{linkTo:function(t){this.$emit("toDetail",t.row)},load:function(){var t=this;this.grid={endTime:this.search.endTime,vehicleIds:this.search.vehicleIds,alarmTypeIds:this.search.alarmArr.length?this.search.alarmArr.join(","):this.allAlarmId,startTime:this.search.startTime},setTimeout(function(){t.$refs.dtable.tableInitial()},10)}}},g=Object(l.a)(b,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cv-grid",{ref:"dtable",attrs:{params:t.grid,isInitial:!1,url:"/adasAlarm/findAdasAlarmStatisticsInfo"}},[a("el-table-column",{attrs:{prop:"plateCode",label:t.$t("cvtsp.plateCode")}}),a("el-table-column",{attrs:{prop:"alarmCount",label:t.$t("systemLog.AlarmCount")}}),a("el-table-column",{attrs:{prop:"imageCount",label:t.$t("filter.picture")}}),a("el-table-column",{attrs:{prop:"audioCount",label:t.$t("filter.music")}}),a("el-table-column",{attrs:{prop:"videoCount",label:t.$t("filter.video")}}),a("el-table-column",{attrs:{label:t.$t("UserManage.operation")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("cv-span",{attrs:{type:"primary"},nativeOn:{click:function(a){return a.preventDefault(),t.linkTo(e)}}},[t._v("  "+t._s(t.$t("systemLog.detaild")))])]}}])})],1)},[],!1,null,"097461dd",null).exports,v={components:{AssistanTable:f,CvPublictreeContent:a("05c0").a,AssistantArivingStatistics:g},computed:{labeld:function(){return this.plateCode?"["+this.plateCode+"]"+this.$t("systemLog.detaild"):this.$t("systemLog.detaild")}},data:function(){return{activeName:"tab0",list:[],allAlarmId:[],label:"",common:{pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},alarmTree:[],setime:[this.$filter.format(new Date,"yyyy-MM-dd start"),this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss")],alarmArr:[]},table:{total:0,size:10,page:1,current:1},flag:!1,search:{vehicleIds:"",startTime:this.$filter.format(new Date,"yyyy-MM-dd start"),endTime:this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss"),alarmTypeIds:"",platforms:"5,6"},plateCode:"",plateCodeid:""}},methods:Object(i.a)({},Object(s.b)(["findWebAdasAlarmInfoList","findAlarmTypeInfoListByAdas"]),{tableLoad:function(){this.activeName="tab0",this.list=[],this.table.size=10,this.table.total=0,this.table.current=1,this.table.page=0,this.plateCode="",this.getParams()&&this.search.vehicleIds&&this.$refs.statistics.load()},loadDetail:function(t){var e=this;t&&(this.table.current=1);var a={vehicleIds:this.plateCodeid||this.search.vehicleIds,startTime:this.common.setime[0],endTime:this.common.setime[1],alarmTypeIds:this.search.alarmArr.length?this.search.alarmArr.join(","):this.allAlarmId,size:this.table.size,current:this.table.current};this.findWebAdasAlarmInfoList(a).then(function(t){var a=t.flag,i=t.data,s=t.errorCode;a&&!s?(e.list=i.records,e.table.size=i.size,e.table.total=i.total,e.table.current=i.current,e.table.page=i.pages):(e.list=[],e.table.size=10,e.table.total=0,e.table.current=1,e.table.page=0,e.$message.warning(e.$t("error."+s))),e.flag=!1})},getParams:function(){return this.search.vehicleIds?!(7<this.$filter.timeRange(this.common.setime[0],this.common.setime[1]))||(this.$message.warning(this.$t("systemLog.selectTime")),!1):(this.$message.warning(this.$t("fenceSend.choseVehicle")),!1)},handlerVehicleMonitor:function(t){if(0<t.length){var e=t.map(function(t){return t.id});this.search.vehicleIds=e.join(",")}else this.search.vehicleIds=""},handlerCurrentChange:function(t){this.table.current=t,this.list=[],this.flag=!0,this.loadDetail(!1)},handlerSizeChange:function(t){this.table.size=t,this.list=[],this.flag=!0,this.loadDetail(!0)},toDetail:function(t){this.plateCode=t.plateCode,this.plateCodeid=t.vehicleId,this.flag=!0,this.loadDetail(!0),this.activeName="tab1"},findAlarmType:function(t){var e=this;this.findAlarmTypeInfoListByAdas({platforms:t}).then(function(t){var a=t.flag,i=t.data;if(t.errorCode,a){var s=(e.common.alarmTree=i).map(function(t){return t.alarmId});e.allAlarmId=s.join(",")}})}}),mounted:function(){var t=this;this.$route.query.vehicleId&&(this.search.vehicleIds=this.$route.query.vehicleId,this.search.alarmTypeIds=this.$route.query.alarmTypeId,this.search.alarmArr.push(this.$route.query.alarmTypeId.toString()),this.$refs.statistics.load(),setTimeout(function(){t.search.vehicleIds="",t.search.alarmArr=[]},200)),this.findAlarmType("5,6")},watch:{"common.setime":function(t){this.search.startTime=t[0],this.search.endTime=t[1]},"search.platforms":function(t){this.findAlarmType(t)},"search.alarmArr":function(t){}}},y=Object(l.a)(v,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("cv-operation",{staticClass:"header",attrs:{position:"left"}},[a("el-form-item",{attrs:{label:t.$t("placeholder.selectDate")}},[a("el-date-picker",{attrs:{type:"datetimerange",clearable:!1,"value-format":"yyyy-MM-dd HH:mm:ss","picker-options":t.common.pickerOptions,"range-separator":"至","start-placeholder":"$t('el.datepicker.startDate')","end-placeholder":"$t('el.datepicker.endDate')"},model:{value:t.common.setime,callback:function(e){t.$set(t.common,"setime",e)},expression:"common.setime"}})],1),a("el-form-item",{attrs:{label:t.$t("systemLog.AlarmType")}},[a("el-select",{attrs:{placeholder:t.$t("placeholder.selectValue")},model:{value:t.search.platforms,callback:function(e){t.$set(t.search,"platforms",e)},expression:"search.platforms"}},[a("el-option",{attrs:{label:t.$t("filter.all"),value:"5,6"}}),a("el-option",{attrs:{label:"ADAS",value:"6"}}),a("el-option",{attrs:{label:"DSM",value:"5"}})],1)],1),a("el-form-item",{attrs:{label:t.$t("systemLog.AlarmSelect")}},[a("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:t.$t("placeholder.selectValue")},model:{value:t.search.alarmArr,callback:function(e){t.$set(t.search,"alarmArr",e)},expression:"search.alarmArr"}},t._l(t.common.alarmTree,function(t){return a("el-option",{key:t.alarmId,attrs:{label:t.alarmName,value:t.alarmId}})}),1)],1),a("el-form-item",[a("cv-tool",{staticClass:"cv-tool",staticStyle:{margin:"0"},attrs:{name:t.$route.name,"is-remove":!1,"is-add":!1,"is-modify":!1},on:{search:t.tableLoad}})],1)],1),a("cv-publictree-content",{attrs:{model:"multi","vehicle-monitor":t.handlerVehicleMonitor}},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:t.$t("systemLog.count"),name:"tab0"}},[a("AssistantArivingStatistics",{ref:"statistics",attrs:{search:t.search,allAlarmId:t.allAlarmId},on:{toDetail:t.toDetail}})],1),a("el-tab-pane",{attrs:{label:t.labeld,name:"tab1"}},[a("AssistanTable",{staticStyle:{"min-height":"300px"},attrs:{data:t.list,loading:t.flag}}),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!=t.table.total,expression:"table.total == 0 ? false : true"}],staticStyle:{float:"right"},attrs:{total:t.table.total,small:"",layout:"total, sizes, prev, pager, next","page-sizes":[10,20,30,40,50]},on:{"current-change":t.handlerCurrentChange,"size-change":t.handlerSizeChange}})],1)],1)],1)],1)},[],!1,null,null,null).exports;y.install=function(t){t.component(y.name,y)},e.default=y},b51b:function(t,e,a){"use strict";var i=a("92a7");a.n(i).a},bb1b:function(t,e,a){"use strict";var i=a("55f1");a.n(i).a},bc0b:function(t,e,a){"use strict";var i=a("e0fb");a.n(i).a},c037:function(t,e,a){"use strict";var i=a("0685");a.n(i).a},e0fb:function(t,e,a){}}]);
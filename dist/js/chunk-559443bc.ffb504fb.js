(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-559443bc"],{"6c4c":function(e,t,a){},"75a2":function(e,t,a){"use strict";var r=a("b7dc");a.n(r).a},7864:function(e,t,a){"use strict";a.r(t);var r={inject:["store"],data:function(){return{label:""}}},s=(a("f277"),a("2877")),i=Object(s.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"alarm-selection"},[a("el-form-item",{attrs:{label:"所属公司/机构"}},[a("cv-dropdown-tree",{attrs:{placeholder:e.$t("common.enterprise.enterpriseName"),data:e.store.company_tree,readonly:!1,"is-default":!1,label:e.label},on:{"update:label":function(t){e.label=t}},model:{value:e.store.searchParams.enterpriseId,callback:function(t){e.$set(e.store.searchParams,"enterpriseId",t)},expression:"store.searchParams.enterpriseId"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.store.tabIndex||2==e.store.tabIndex,expression:"(store.tabIndex == 1 || store.tabIndex == 2)"}],attrs:{label:"所属车组"}},[a("cv-dropdown-tree",{attrs:{url:"/enterprise/findFleetTreeList","is-initial":!1,"auto-params":{enterpriseId:e.label.enterpriseId,pId:e.label.id,type:e.label.type}},model:{value:e.store.searchParams.fleetIds,callback:function(t){e.$set(e.store.searchParams,"fleetIds",t)},expression:"store.searchParams.fleetIds"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.store.tabIndex,expression:"store.tabIndex == 1"}],attrs:{label:"车牌号码"}},[a("el-input",{model:{value:e.store.searchParams.plateCode,callback:function(t){e.$set(e.store.searchParams,"plateCode",t)},expression:"store.searchParams.plateCode"}})],1)],1)},[],!1,null,null,null).exports,o=a("8369"),l=a("b0ad"),n={props:{searchFlag:{},contentFlag:{}},inject:["store"],computed:{_table:function(){return this.$refs.table}},mixins:[o.a,l.a],data:function(){return{commitUse:{ids:"",type:""}}},methods:{modify:function(e){this.$emit("update:modify",!0),this.store.modifyData=e},tableSearch:function(e){this._table.tableInitial()},use:function(e){var t=this;this.confirmPrompt("是否确定应用此配置").then(function(){switch(t.store.tabIndex){case 1:t.commitUse.ids=e.vehicleId,t.commitUse.type=0;break;case 2:t.commitUse.ids=e.fleetId,t.commitUse.type=1;break;case 3:t.commitUse.ids=e.enterpriseId,t.commitUse.type=2}t.store.contentFlag=!0,t.$store.dispatch("saveApplyFlag",t.commitUse).then(function(e){e.flag?(t.$message.success("应用成功"),t.tableSearch()):t.$message.error("应用失败"),t.store.contentFlag=!1})})},del:function(e){var t=this;this.confirmPrompt().then(function(){var a={ids:e,type:""};switch(t.store.tabIndex){case 1:a.type=0;break;case 2:a.type=1;break;case 3:a.type=2}t.store.contentFlag=!0,t.$store.dispatch("deleteCommon",a).then(function(e){e.flag?(t.$message.success("删除成功"),t.store.contentFlag=!1,t.tableSearch()):(t.store.contentFlag=!1,t.$message.error("删除失败"))})})}},watch:{searchFlag:function(e){var t=this;e&&setTimeout(function(e){t.tableSearch(),t.$emit("update:searchFlag",!1)},1e3)}}},c=Object(s.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("cv-grid",{directives:[{name:"loading",rawName:"v-loading",value:this.store.contentFlag,expression:"this.store.contentFlag"}],ref:"table",attrs:{params:e.store.searchParams,url:"/platFormAlarm/queryPaltFormConfigByPage"}},[a("el-table-column",{attrs:{label:e.$t("cE.carNumbers"),prop:"plateCode",width:"150",formatter:e.plateCodeAndColor}}),a("el-table-column",{attrs:{label:e.$t("dm.company"),prop:"enterpriseName"}}),a("el-table-column",{attrs:{label:"车组名称",prop:"fleetName"}}),a("el-table-column",{attrs:{label:"疲劳驾驶",prop:"fatigueDrive",width:"100",formatter:e.driverStuas}}),a("el-table-column",{attrs:{label:"禁行报警",prop:"forbid",formatter:e.filterLStuas}}),a("el-table-column",{attrs:{label:"超速报警",prop:"overSpeeed",formatter:e.filterAlStuas}}),a("el-table-column",{attrs:{label:"高速公路超速报警",prop:"overSpeedH",width:"150",formatter:e.filteralarmStuas}}),a("el-table-column",{attrs:{label:"三分钟超速报警",prop:"tOversSpeed",width:"150",formatter:e.overStuas}}),a("el-table-column",{attrs:{label:"三分钟超速高速报警",prop:"tOverSpeedH",width:"200",formatter:e.overHStuas}}),a("el-table-column",{attrs:{label:"配置应用状态",prop:"applyFlag",width:"130",formatter:e.applyFlag}}),a("el-table-column",{attrs:{label:e.$t("action.operation"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cv-table-tool",{attrs:{name:e.$route.name,data:e.$store.getters.monitorMenu},on:{remove:function(a){return e.del(t.row.id)},modify:function(a){return e.modify(t.row)}}}),t.row.applyFlag?e._e():a("cv-span",{attrs:{type:"success"},nativeOn:{click:function(a){return e.use(t.row)}}},[e._v("应用")])]}}])})],1)},[],!1,null,null,null).exports,m={props:{searchFlag:{}},inject:["store"],computed:{_table:function(){return this.$refs.table}},mixins:[o.a,l.a],data:function(){return{commitUse:{ids:"",type:""}}},methods:{modify:function(e){this.$emit("update:modify",!0),this.store.modifyData=e},tableSearch:function(){this._table.tableInitial()},use:function(e){var t=this;this.confirmPrompt("是否确定应用此配置").then(function(){switch(t.store.tabIndex){case 1:t.commitUse.ids=e.vehicleId,t.commitUse.type=0;break;case 2:t.commitUse.ids=e.fleetId,t.commitUse.type=1;break;case 3:t.commitUse.ids=e.enterpriseId,t.commitUse.type=2}t.store.contentFlag=!0,t.$store.dispatch("saveApplyFlag",t.commitUse).then(function(e){e.flag?(t.$message.success("应用成功"),t.store.contentFlag=!1,t.tableSearch()):(t.$message.error("应用失败"),t.store.contentFlag=!1)})})},del:function(e){var t=this;this.confirmPrompt().then(function(){var a={ids:e,type:""};switch(t.store.tabIndex){case 1:a.type=0;break;case 2:a.type=1;break;case 3:a.type=2}t.store.contentFlag=!0,t.$store.dispatch("deleteCommon",a).then(function(e){e.flag?(t.$message.success("删除成功"),t.store.contentFlag=!1,t.tableSearch()):(t.store.contentFlag=!1,t.$message.error("删除失败"))})})}},watch:{searchFlag:function(e){e&&(this.tableSearch(),this.$emit("update:searchFlag",!1))}}},u=Object(s.a)(m,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("cv-grid",{directives:[{name:"loading",rawName:"v-loading",value:this.store.contentFlag,expression:"this.store.contentFlag"}],ref:"table",attrs:{params:e.store.searchParams,url:"/platFormAlarm/queryEnterAlarmOrgPage"}},[a("el-table-column",{attrs:{label:e.$t("dm.company"),prop:"enterpriseName"}}),a("el-table-column",{attrs:{label:"疲劳驾驶",prop:"fatigueDrive",width:"100",formatter:e.driverStuas}}),a("el-table-column",{attrs:{label:"禁行报警",prop:"forbid",formatter:e.filterLStuas}}),a("el-table-column",{attrs:{label:"超速报警",prop:"overSpeeed",formatter:e.filterAlStuas}}),a("el-table-column",{attrs:{label:"高速公路超速报警",prop:"overSpeedH",width:"150",formatter:e.filteralarmStuas}}),a("el-table-column",{attrs:{label:"三分钟超速报警",prop:"tOversSpeed",width:"150",formatter:e.overStuas}}),a("el-table-column",{attrs:{label:"三分钟超速高速报警",prop:"tOverSpeedH",width:"200",formatter:e.overHStuas}}),a("el-table-column",{attrs:{label:"配置应用状态",prop:"applyFlag",width:"130",formatter:e.applyFlag}}),a("el-table-column",{attrs:{label:e.$t("action.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cv-table-tool",{attrs:{name:e.$route.name,data:e.$store.getters.monitorMenu},on:{remove:function(a){return e.del(t.row.id)},modify:function(a){return e.modify(t.row)}}}),t.row.applyFlag?e._e():a("cv-span",{attrs:{type:"success"},nativeOn:{click:function(a){return e.use(t.row)}}},[e._v("应用")])]}}])})],1)},[],!1,null,null,null).exports,d={props:{searchFlag:{}},inject:["store"],computed:{_table:function(){return this.$refs.table}},mixins:[o.a,l.a],data:function(){return{commitUse:{ids:"",type:""}}},methods:{modify:function(e){this.$emit("update:modify",!0),this.store.modifyData=e},tableSearch:function(){this._table.tableInitial()},use:function(e){var t=this;this.confirmPrompt("是否确定应用此配置").then(function(){switch(t.store.tabIndex){case 1:t.commitUse.ids=e.vehicleId,t.commitUse.type=0;break;case 2:t.commitUse.ids=e.fleetId,t.commitUse.type=1;break;case 3:t.commitUse.ids=e.enterpriseId,t.commitUse.type=2}t.store.contentFlag=!0,t.$store.dispatch("saveApplyFlag",t.commitUse).then(function(e){e.flag?(t.$message.success("应用成功"),t.store.contentFlag=!1,t.tableSearch()):(t.$message.error("应用失败"),t.store.contentFlag=!1)})})},del:function(e){var t=this;this.confirmPrompt().then(function(){var a={ids:e,type:""};switch(t.store.tabIndex){case 1:a.type=0;break;case 2:a.type=1;break;case 3:a.type=2}t.store.contentFlag=!0,t.$store.dispatch("deleteCommon",a).then(function(e){e.flag?(t.$message.success("删除成功"),t.store.contentFlag=!1,t.tableSearch()):(t.$message.error("删除失败"),t.store.contentFlag=!1)})})}},watch:{searchFlag:function(e){e&&(this.tableSearch(),this.$emit("update:searchFlag",!1))}}},f=Object(s.a)(d,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("cv-grid",{directives:[{name:"loading",rawName:"v-loading",value:this.store.contentFlag,expression:"this.store.contentFlag"}],ref:"table",attrs:{params:e.store.searchParams,url:"/platFormAlarm/queryFleetAlarmOrgPage"}},[a("el-table-column",{attrs:{label:e.$t("dm.company"),prop:"enterpriseName"}}),a("el-table-column",{attrs:{label:"车组名称",prop:"fleetName"}}),a("el-table-column",{attrs:{label:"疲劳驾驶",prop:"fatigueDrive",width:"100",formatter:e.driverStuas}}),a("el-table-column",{attrs:{label:"禁行报警",prop:"forbid",formatter:e.filterLStuas}}),a("el-table-column",{attrs:{label:"超速报警",prop:"overSpeeed",formatter:e.filterAlStuas}}),a("el-table-column",{attrs:{label:"高速公路超速报警",prop:"overSpeedH",width:"150",formatter:e.filteralarmStuas}}),a("el-table-column",{attrs:{label:"三分钟超速报警",prop:"tOversSpeed",width:"150",formatter:e.overStuas}}),a("el-table-column",{attrs:{label:"三分钟超速高速报警",prop:"tOverSpeedH",width:"200",formatter:e.overHStuas}}),a("el-table-column",{attrs:{label:"配置应用状态",prop:"applyFlag",width:"130",formatter:e.applyFlag}}),a("el-table-column",{attrs:{label:e.$t("action.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cv-table-tool",{attrs:{name:e.$route.name,data:e.$store.getters.monitorMenu},on:{remove:function(a){return e.del(t.row.id)},modify:function(a){return e.modify(t.row)}}}),t.row.applyFlag?e._e():a("cv-span",{attrs:{type:"success"},nativeOn:{click:function(a){return e.use(t.row)}}},[e._v("应用")])]}}])})],1)},[],!1,null,null,null).exports,p=a("e4d3"),h=(a("ac6a"),a("cebc")),g={props:{searchFlag:{}},inject:["store","dialogData"],data:function(){return{label:""}},methods:{search:function(){this.$emit("update:searchTable",!0)}}},b=(a("75a2"),Object(s.a)(g,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"alarm-selection"},[a("el-form-item",{attrs:{label:"所属公司/机构"}},[a("cv-dropdown-tree",{attrs:{placeholder:e.$t("common.enterprise.enterpriseName"),data:e.store.company_tree,readonly:!1,"is-default":!1,label:e.label},on:{"update:label":function(t){e.label=t}},model:{value:e.dialogData.selectParams.enterpriseId,callback:function(t){e.$set(e.dialogData.selectParams,"enterpriseId",t)},expression:"dialogData.selectParams.enterpriseId"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.store.tabIndex,expression:"(store.tabIndex == 1)"}],attrs:{label:"所属车组"}},[a("cv-dropdown-tree",{attrs:{url:"/enterprise/findFleetTreeList","is-initial":!1,"auto-params":{enterpriseId:e.label.enterpriseId,pId:e.label.id,type:e.label.type}},model:{value:e.dialogData.selectParams.fleetId,callback:function(t){e.$set(e.dialogData.selectParams,"fleetId",t)},expression:"dialogData.selectParams.fleetId"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==e.store.tabIndex,expression:"(store.tabIndex == 2)"}],attrs:{label:"所属车组"}},[a("el-input",{model:{value:e.dialogData.selectParams.text,callback:function(t){e.$set(e.dialogData.selectParams,"text",t)},expression:"dialogData.selectParams.text"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.store.tabIndex,expression:"store.tabIndex == 1"}],attrs:{label:"车牌号码"}},[a("el-input",{model:{value:e.dialogData.selectParams.plateCode,callback:function(t){e.$set(e.dialogData.selectParams,"plateCode",t)},expression:"dialogData.selectParams.plateCode"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.store.tabIndex||2==e.store.tabIndex,expression:"(store.tabIndex == 1 || store.tabIndex == 2)"}]},[a("el-button",{nativeOn:{click:function(t){return e.search(t)}}},[e._v("搜索")])],1)],1)},[],!1,null,null,null).exports),v={inject:["dialogData"]},$=Object(s.a)(v,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"疲劳驾驶报警",prop:"title"}},[a("el-switch",{attrs:{"on-color":"#13ce66","off-color":"#ff4949","active-value":"1","inactive-value":"0"},model:{value:e.dialogData.itemsParams.fatigueDrive,callback:function(t){e.$set(e.dialogData.itemsParams,"fatigueDrive",t)},expression:"dialogData.itemsParams.fatigueDrive"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"禁行报警",prop:"href"}},[a("el-switch",{attrs:{"on-color":"#13ce66","off-color":"#ff4949","active-value":"1","inactive-value":"0"},model:{value:e.dialogData.itemsParams.forbid,callback:function(t){e.$set(e.dialogData.itemsParams,"forbid",t)},expression:"dialogData.itemsParams.forbid"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"超速报警",prop:"href"}},[a("el-switch",{attrs:{"on-color":"#13ce66","off-color":"#ff4949","active-value":"1","inactive-value":"0"},model:{value:e.dialogData.itemsParams.overSpeed,callback:function(t){e.$set(e.dialogData.itemsParams,"overSpeed",t)},expression:"dialogData.itemsParams.overSpeed"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"高速公路超速报警",prop:"href"}},[a("el-switch",{attrs:{"on-color":"#13ce66","off-color":"#ff4949","active-value":"1","inactive-value":"0"},model:{value:e.dialogData.itemsParams.overSpeedH,callback:function(t){e.$set(e.dialogData.itemsParams,"overSpeedH",t)},expression:"dialogData.itemsParams.overSpeedH"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"三分钟超速报警",prop:"href"}},[a("el-switch",{attrs:{"on-color":"#13ce66","off-color":"#ff4949","active-value":"1","inactive-value":"0"},model:{value:e.dialogData.itemsParams.tOversSpeed,callback:function(t){e.$set(e.dialogData.itemsParams,"tOversSpeed",t)},expression:"dialogData.itemsParams.tOversSpeed"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"三分钟高速公路超速报警",prop:"href"}},[a("el-switch",{attrs:{"on-color":"#13ce66","off-color":"#ff4949","active-value":"1","inactive-value":"0"},model:{value:e.dialogData.itemsParams.tOverSpeedH,callback:function(t){e.$set(e.dialogData.itemsParams,"tOverSpeedH",t)},expression:"dialogData.itemsParams.tOverSpeedH"}})],1)],1)],1)},[],!1,null,null,null).exports,y=a("2f62"),S={inject:["store"],props:{options:{}},mixins:[o.a],components:{alarmSelect:b,configItems:$},provide:function(){return{dialogData:this.dialogData}},data:function(){return{dialogData:{selectParams:{enterpriseId:"",fleetId:"",plateCode:"",text:""},itemsParams:{forbid:"",fatigueDrive:"",tOversSpeed:"",overSpeed:"",overSpeedH:"",tOverSpeedH:""}},commitParams:{vehicleIds:"",enterpriseId:"",fleetId:"",forbid:"",fatigueDrive:"",tOversSpeed:"",overSpeed:"",overSpeedH:"",tOverSpeedH:""},searchFlag:!1,useFlag:!1}},methods:Object(h.a)({},Object(y.b)(["insertPlatFormConfigNew","insertFleetAlarmOrg","insertEnterAlarmOrg"]),{cancel:function(){this.options.flag=!1},confirm:function(){var e=this;switch(this.$service.mapParams(this.commitParams,this.dialogData.itemsParams),this.$service.mapParams(this.commitParams,this.dialogData.selectParams),this.store.tabIndex){case 1:if(!this.commitParams.vehicleIds)return this.$message.warning("请勾选车辆"),!1;this.insertPlatFormConfigNew(this.commitParams).then(function(t){t.flag&&(e.$message.success(e.$t("common.Configuration.success")),e.$emit("update:refresh",!0),e.options.flag=!1),t.flag||e.$message.error({message:e.$t("error."+t.errorCode)})});break;case 2:if(!this.commitParams.fleetIds)return this.$message.warning("请勾选车组"),!1;this.insertFleetAlarmOrg(this.commitParams).then(function(t){t.flag&&(e.$message.success(e.$t("common.Configuration.success")),e.$emit("update:refresh",!0),e.options.flag=!1),t.flag||e.$message.error({message:e.$t("error."+t.errorCode)})});break;case 3:this.insertEnterAlarmOrg(this.commitParams).then(function(t){t.flag&&(e.$message.success(e.$t("common.Configuration.success")),e.$emit("update:refresh",!0),e.options.flag=!1),t.flag||e.$message.error({message:e.$t("error."+t.errorCode)})})}},use:function(){var e=this;switch(this.$service.mapParams(this.commitParams,this.dialogData.itemsParams),this.$service.mapParams(this.commitParams,this.dialogData.selectParams),this.commitParams.applyFlag=1,this.useFlag=!0,this.store.tabIndex){case 1:this.insertPlatFormConfigNew(this.commitParams).then(function(t){t.flag&&(e.$message.success("应用成功"),e.$emit("update:refresh",!0),e.options.flag=!1,e.useFlag=!1),t.flag||(e.$message.error({message:e.$t("error."+t.errorCode)}),e.useFlag=!1)});break;case 2:this.insertFleetAlarmOrg(this.commitParams).then(function(t){t.flag&&(e.$message.success("应用成功"),e.$emit("update:refresh",!0),e.options.flag=!1,e.useFlag=!1),t.flag||(e.$message.error({message:e.$t("error."+t.errorCode)}),e.useFlag=!1)});break;case 3:this.insertEnterAlarmOrg(this.commitParams).then(function(t){t.flag&&(e.$message.success("应用成功"),e.$emit("update:refresh",!0),e.options.flag=!1,e.useFlag=!1),t.flag||(e.$message.error({message:e.$t("error."+t.errorCode)}),e.useFlag=!1)})}},carChange:function(e){var t=[];0<e.length&&e.forEach(function(e){t.push(e.id)}),this.commitParams.vehicleIds=t.length?t.join(","):""},groupChange:function(e){var t=[];0<e.length&&e.forEach(function(e){t.push(e.id)}),this.commitParams.fleetIds=t.length?t.join(","):""},carLoad:function(){this.$refs.table1.tableInitial()},groupLoad:function(){this.$refs.table2.tableInitial()}}),watch:{searchFlag:function(e){if(e)switch(this.store.tabIndex){case 1:this.carLoad(),this.searchFlag=!1;break;case 2:this.groupLoad(),this.searchFlag=!1;break;case 3:this.searchFlag=!1}}}},F=Object(s.a)(S,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"alarmConfig-addModify"},[a("el-row",[a("el-form",{attrs:{inline:!0}},[a("alarm-select",{attrs:{searchTable:e.searchFlag},on:{"update:searchTable":function(t){e.searchFlag=t},"update:search-table":function(t){e.searchFlag=t}}})],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:1==e.store.tabIndex||2==e.store.tabIndex,expression:"(store.tabIndex == 1 || store.tabIndex == 2)"}]},[a("cv-grid",{directives:[{name:"show",rawName:"v-show",value:1==e.store.tabIndex,expression:"store.tabIndex == 1"}],ref:"table1",attrs:{params:e.dialogData.selectParams,url:"/vehicle/findVehiclePage","default-height":300,isPagination:!1},on:{"selection-change":e.carChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"100",prop:""}}),a("el-table-column",{attrs:{label:"车牌号码",prop:"plateCode"}})],1),a("cv-grid",{directives:[{name:"show",rawName:"v-show",value:2==e.store.tabIndex,expression:"store.tabIndex == 2"}],ref:"table2",attrs:{params:e.dialogData.selectParams,url:"/enterprise/findFleetListPage","default-height":300,isPagination:!1},on:{"selection-change":e.groupChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"100",prop:""}}),a("el-table-column",{attrs:{label:"车组",prop:"text"}})],1)],1),a("el-row",[a("config-items")],1),a("el-row",{staticStyle:{"text-align":"center"}},[a("el-col",[a("el-button",{nativeOn:{click:function(t){return e.cancel(t)}}},[e._v("取消")]),a("el-button",{nativeOn:{click:function(t){return e.confirm(t)}}},[e._v("保存")]),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.useFlag,expression:"useFlag"}],nativeOn:{click:function(t){return e.use(t)}}},[e._v("应用")])],1)],1)],1)},[],!1,null,null,null).exports,w={inject:["store"],props:{options:{}},components:{configItems:$},provide:function(){return{dialogData:this.dialogData}},data:function(){return{dialogData:{selectParams:{enterpriseId:"",fleetId:"",plateCode:"",fleetNameCN:""},itemsParams:{forbid:"",fatigueDrive:"",tOversSpeed:"",overSpeed:"",overSpeedH:"",tOverSpeedH:""}},commitParams:{id:"",type:"",forbid:"",fatigueDrive:"",tOversSpeed:"",overSpeed:"",overSpeedH:"",tOverSpeedH:""},searchFlag:!1}},mounted:function(){for(var e in this.$service.mapParams(this.dialogData.itemsParams,this.store.modifyData),this.dialogData.itemsParams)this.dialogData.itemsParams[e]+=""},methods:Object(h.a)({},Object(y.b)(["insertFleetAlarmOrg","insertEnterAlarmOrg","updateAlarmOrgCommon"]),{cancel:function(){this.options.flag=!1},confirm:function(){var e=this;switch(this.$service.mapParams(this.commitParams,this.dialogData.itemsParams),this.commitParams.id=this.store.modifyData.id,this.store.tabIndex){case 1:this.commitParams.type=0;break;case 2:this.commitParams.type=1;break;case 3:this.commitParams.type=2}this.updateAlarmOrgCommon(this.commitParams).then(function(t){t.flag&&(e.$message.success("修改成功"),e.$emit("update:refresh",!0),e.options.flag=!1),t.flag||e.$message.error({message:e.$t("error."+t.errorCode)})})}})},P={components:{alarmSelection:i,carTable:c,companyTable:u,groupTable:f,add:F,modify:Object(s.a)(w,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"alarmConfig-addModify"},[a("el-row",[a("config-items")],1),a("el-row",{staticStyle:{"text-align":"center"}},[a("el-col",[a("el-button",{nativeOn:{click:function(t){return e.cancel(t)}}},[e._v("取消")]),a("el-button",{nativeOn:{click:function(t){return e.confirm(t)}}},[e._v("保存")])],1)],1)],1)},[],!1,null,null,null).exports},mixins:[p.a],provide:function(){return{store:this.store}},computed:{_carTable:function(){return this.$refs.carTable}},data:function(){return{carModify:!1,groupModify:!1,companyModify:!1,store:{searchParams:{enterpriseId:"",fleetIds:"",plateCode:""},modifyData:{},tabIndex:1,contentFlag:!1},dialog:{flag:!1,size:"",name:"",title:""},activeName:"tabs0",searchFlag:!1,table1:!1,table2:!1,table3:!1}},methods:{add:function(){this.$service.mapParams(this.dialog,{size:"dialog-middle",title:"添加",name:"add",flag:!0})},search:function(){switch(this.store.tabIndex){case 1:this.table1=!0;break;case 2:this.table2=!0;break;case 3:this.table3=!0}}},watch:{activeName:function(e){switch(e){case"tabs0":this.store.tabIndex=1;break;case"tabs1":this.store.tabIndex=2;break;case"tabs2":this.store.tabIndex=3}},"dialog.flag":function(e){e||(this.dialog.name="")},searchFlag:function(e){if(e){switch(this.activeName){case"tabs0":this.table1=!0;break;case"tabs1":this.table2=!0;break;case"tabs2":this.table3=!0}this.searchFlag=!1}},carModify:function(e){e&&(this.$service.mapParams(this.dialog,{title:"修改",size:"dialog-middle",name:"modify",flag:!0}),this.carModify=!1)},groupModify:function(e){e&&(this.$service.mapParams(this.dialog,{title:"修改",size:"dialog-middle",name:"modify",flag:!0}),this.groupModify=!1)},companyModify:function(e){e&&(this.$service.mapParams(this.dialog,{title:"修改",size:"dialog-middle",name:"modify",flag:!0}),this.companyModify=!1)}},mounted:function(){this.staticTree()}},x=Object(s.a)(P,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"alarmConfig"},[a("cv-operation",{attrs:{position:"left"}},[a("alarm-selection"),a("el-form-item",[a("cv-tool",{attrs:{name:e.$route.name,data:e.$store.getters.monitorMenu,"is-modify":!1,"is-export":!1,"is-remove":!1},on:{add:e.add,search:e.search}})],1)],1),a("cv-content",[a("cv-tabs",{attrs:{titles:["车辆报警配置","车组报警配置","公司报警配置"]},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("car-table",{attrs:{searchFlag:e.table1,modify:e.carModify},on:{"update:searchFlag":function(t){e.table1=t},"update:search-flag":function(t){e.table1=t},"update:modify":function(t){e.carModify=t}}}),a("group-table",{attrs:{searchFlag:e.table2,modify:e.groupModify},on:{"update:searchFlag":function(t){e.table2=t},"update:search-flag":function(t){e.table2=t},"update:modify":function(t){e.groupModify=t}}}),a("company-table",{attrs:{searchFlag:e.table3,modify:e.companyModify},on:{"update:searchFlag":function(t){e.table3=t},"update:search-flag":function(t){e.table3=t},"update:modify":function(t){e.companyModify=t}}})],1)],1),a("el-dialog",{attrs:{visible:e.dialog.flag,"close-on-click-modal":!1,title:e.dialog.title,"custom-class":e.dialog.size},on:{"update:visible":function(t){return e.$set(e.dialog,"flag",t)}}},[a(e.dialog.name,{tag:"component",attrs:{options:e.dialog,refresh:e.searchFlag},on:{confirm:e.load,"update:refresh":function(t){e.searchFlag=t}}})],1)],1)},[],!1,null,null,null).exports;t.default=x},8369:function(e,t,a){"use strict";var r=a("cebc");t.a={data:function(){return{table:{size:10,total:0,current:1,flag:!1,loading:!1,data:[]}}},methods:{tableLoading:function(e,t,a,s){var i=this;a?(this.table.flag=!0,this.table.current=1):this.table.flag=!1,this.table.loading=!0;var o=Object(r.a)({current:this.table.current,size:this.table.size},t);this.$http(s?{url:e,data:o}:{url:e,params:o}).then(function(e){var t=e.data;e.flag&&0!=t.length?(i.table.data=t.records,i.table.total=t.total,i.table.current=t.current):(i.table.data=[],i.table.total=0),i.table.loading=!1}).catch(function(e){i.table.loading=!1})},tableFilterColor:function(e){return this.$filter.plateCodeColor(e.plateColor)},tableFilterIcType:function(e){return this.$filter.icType(e.state)},tableFilterIcResult:function(e){return this.$filter.icResult(e.readerresult)},tableFilterTiredAlarm:function(e){return this.$filter.tiredAlarmType(e.alarm)},tableFilterTiredAdas:function(e){return this.$filter.tiredAdasType(e.alarm)},tableFilterOrderTypeS:function(e){return this.$filter.orderTypeS(e.sendFlag)},tableFilterFormat:function(e){return this.$filter.format(e.orderTime||e.gpsTime)},tableFilterFormats:function(e){return this.$filter.format(e.backTime)},tableBusLineType:function(e){return this.$filter.lineType(e.lineType)},tableFilterAcc:function(e){return this.$filter.accStatus(e.accStatus)},tableSplitMobile:function(e){return e.mobileCode?e.mobileCode.slice(1,e.mobileCode.length):""},tableConfirm:function(e){return this.$filter.isConfirm(e.isnotarize)},tableUpkeep:function(e){return this.$filter.isConfirm(e.type)},tableRenewal:function(e){return this.$filter.renewal(e.state)},tableReMot:function(e){return this.$filter.reMot(e.state)},tableOil:function(e){return this.$filter.fixNumber(e.total,2)},tableSex:function(e){return this.$filter.sex(e.sex)},plateCodeF:function(e){return e.plateCode?e.plateCode:"--"},plateCodeAndColor:function(e){return e.plateCode+"("+this.$filter.plateCodeColor(e.plateColor)+")"},driverStuas:function(e){return this.$filter.alarmStatus(e.fatigueDrive)},overStuas:function(e){return this.$filter.alarmStatus(e.tOversSpeed)},overHStuas:function(e){return this.$filter.alarmStatus(e.tOverSpeedH)},filterAlStuas:function(e){return this.$filter.alarmStatus(e.overSpeed)},filteralarmStuas:function(e){return this.$filter.alarmStatus(e.overSpeedH)},filterLStuas:function(e){return this.$filter.alarmStatus(e.forbid)},applyFlag:function(e){return this.$filter.applyFlag(e.applyFlag)},SEtime:function(e){return this.$filter.SEtime(e.StartTime,e.EndTime)},channelType:function(e){return this.$filter.channelType(e.Channel)},FileSize:function(e){return this.$filter.FileSize(e.fileSize||e.FileSize||0)},AlarmFilter:function(e){return this.$filter.AlarmFilter(e.Alarm)},MediaTypeFilter:function(e){return this.$filter.MediaTypeFilter(e.MediaType)},StreamTypeFilter:function(e){return this.$filter.StreamTypeFilter(e.StreamType)},StorageTypeFilter:function(e){return this.$filter.StorageTypeFilter(e.StorageType)},statusType:function(e){return this.$filter.statusType(e.Status)},fileSource:function(e){return this.$filter.fileSource(e.fileSource)}}}},b0ad:function(e,t,a){"use strict";(function(e){a("7f7f"),t.a={methods:{confirmPrompt:function(e,t){var a=this,r=e||this.$t("action.confirmIsRemove");return new Promise(function(e,s){a.$confirm(r,a.$t("action.tip"),{confirmButtonText:a.$t("action.confirm"),cancelButtonText:a.$t("action.cancel"),type:"warning"}).then(function(){e()}).catch(function(){"function"==typeof t&&t()})})},timeLimitFunc:function(e,t,a){if(e&&t)return((new Date(t)-new Date(e))/864e5).toFixed(1)<=a||this.$message.error({message:this.$t("请选择时间范围在"+a+"天内")});this.$message.error({message:this.$t("请选择时间范围")})},addRemoveUnique:function(e,t,a){var r=e.length,s=t.length;return s<r?{name:"add",data:this.$service.isUnique(e,t,a)}:r<s?{name:"remove",data:this.$service.isUnique(t,e,a)}:r==s?{name:"equal",data:this.$service.isUnique(e,t,a)}:void 0},showTooltip:function(e,t){var a=e.target,r=this.$refs[t];r.referenceElm=a,r.$refs.popper.style.display="none",r.doDestroy(),r.setExpectedState(!0),r.handleShowPopper()},mouseenterShowTip:function(e,t,a){var r=e.target;if(r.scrollWidth>r.offsetWidth||a)return this.showTooltip(e,t),a?a.startTime+"~"+a.endTime:r.innerText},mouseenterShowToolTip:function(e,t,a){var r=e.target;return this.showTooltip(e,t),!a&&r.innerText},mouseoverHideTip:function(e){var t=this.$refs[e];t&&(t.setExpectedState(!1),t.handleClosePopper())},asyncDownloadScript:function(t,a){var r=this,s=0<arguments.length&&void 0!==t?t:"Baidu",i=1<arguments.length?a:void 0;return e[s]?e[s]._preloader?e[s]._preloader:Promise.resolve(e[s]):(e[s]={},e[s]._preloader=new Promise(function(t,a){var o=document.createElement("script");o.src=i,e.document.body.appendChild(o),r.$service.isIe()&&r.$service.IE_VERSION<11?o.onreadystatechange=function(){"loaded"!=o.readyState&&"complete"!=o.readyState||(t(e[s]),e[s]._preloader=null)}:o.onload=function(){t(e[s]),e[s]._preloader=null}}),e[s]._preloader)}}}}).call(this,a("c8ba"))},b7dc:function(e,t,a){},e4d3:function(e,t,a){"use strict";t.a={data:function(){return{store:{company_tree:[]}}},provide:function(){return{store:this.store}},methods:{staticTree:function(){var e=this;this.$http({url:"/enterprise/findEnterpriseOrganizationTreeList"}).then(function(t){var a=t.data,r=t.flag;e.store.company_tree=r?a:[]})},staticTreeOld:function(){var e=this;this.$http({url:"/enterprise/getEnterpriseTreeList"}).then(function(t){var a=t.data,r=t.flag;e.store.company_tree=r?a:[]})}}}},f277:function(e,t,a){"use strict";var r=a("6c4c");a.n(r).a}}]);
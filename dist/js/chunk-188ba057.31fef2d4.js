(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-188ba057"],{"8e5a":function(e,t,r){},d08d:function(e,t,r){"use strict";var a=r("8e5a");r.n(a).a},e756:function(e,t,r){"use strict";r.r(t),r("386d");var a={props:{search:{},refresh:{}},computed:{_table:function(){return this.$refs.countTable}},data:function(){return{}},methods:{linkTo:function(e){this.$emit("linkTo",e)}},watch:{refresh:function(e){e&&(this._table.tableInitial(!0),this.$emit("update:refresh",!1))}}},l=r("2877"),s={props:{search:{},refresh:{}},computed:{_table:function(){return this.$refs.detailTable}},watch:{refresh:function(e){e&&(this._table.tableInitial(!0),this.$emit("update:refresh",!1))}}},n={components:{countTable:Object(l.a)(a,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("cv-grid",{ref:"countTable",attrs:{params:e.search,url:"/videoController/queryVideoOperationInfo"}},[r("el-table-column",{attrs:{label:"公司",prop:"enterpriseName"}}),r("el-table-column",{attrs:{label:"用户",prop:"account"}}),r("el-table-column",{attrs:{label:"日期",prop:"operationTime"}}),r("el-table-column",{attrs:{label:"类型",prop:"type"}}),r("el-table-column",{attrs:{label:"模块",prop:"module"}}),r("el-table-column",{attrs:{label:"操作次数",prop:"num"}}),r("el-table-column",{attrs:{label:"详细"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.linkTo(t.row)}}},[e._v("操作详细")])]}}])})],1)},[],!1,null,null,null).exports,detailTable:Object(l.a)(s,function(){var e=this.$createElement,t=this._self._c||e;return t("cv-grid",{ref:"detailTable",attrs:{params:this.search,url:"/videoController/queryVideoOperationInfoByUserId"}},[t("el-table-column",{attrs:{label:"公司",prop:"enterpriseName"}}),t("el-table-column",{attrs:{label:"用户",prop:"account"}}),t("el-table-column",{attrs:{label:"类型",prop:"fType"}}),t("el-table-column",{attrs:{label:"模块",prop:"module"}}),t("el-table-column",{attrs:{label:"内容",prop:"fContext"}}),t("el-table-column",{attrs:{label:"日期",prop:"fTime"}}),t("el-table-column",{attrs:{label:"IP地址",prop:"ipAddress"}})],1)},[],!1,null,null,null).exports},data:function(){return{refresh1:!1,refresh2:!1,header:{label:"",enterpriseName:"",SEtime:[this.$filter.format(new Date,"yyyy-MM-dd start"),this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss")],search:{account:"",enterpriseId:"",type:"",module:"",userId:"",startTime:this.$filter.format(new Date,"yyyy-MM-dd start"),endTime:this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss")},typelist:[{id:"01",name:"操作日志"},{id:"02",name:"安全日志"},{id:"03",name:"系统日志"},{id:"04",name:"视频日志"}],pickerOption:{disabledDate:function(e){return e.getTime()>Date.now()}}},content:{activeName:"tabs0",reload:!1}}},methods:{search:function(){switch(this.content.activeName){case"tabs0":this.refresh1=!0;break;case"tabs1":this.refresh2=!0}},getType:function(e){switch(e){case"操作日志":return"01";case"安全日志":return"02";case"系统日志":return"03";case"视频日志":return"04"}},linkTo:function(e){var t=this;this.content.activeName="tabs1",this.header.search.userId=e.userId,this.header.search.type=this.getType(e.type),setTimeout(function(e){t.refresh2=!0})},Mission:function(e){var t=this;switch(this.content.activeName){case"tabs0":this.$http({url:"/videoController/exportVideoOperationInfo",params:this.header.search}).then(function(e){e.flag&&t.$message("任务下发成功")});break;case"tabs1":this.$http({url:"/videoController/exportVideoOperationInfoByUserId",params:this.header.search}).then(function(e){e.flag&&t.$message("任务下发成功")})}}},watch:{"header.SEtime":function(e){this.header.search.startTime=e?e[0]:"",this.header.search.endTime=e?e[1]:""}}},o=(r("d08d"),Object(l.a)(n,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cv-operationlog"},[r("cv-operation",{attrs:{position:"left"}},[r("el-form-item",[r("el-date-picker",{attrs:{"start-placeholder":"开始日期","end-placeholder":"结束日期",editable:!1,clearable:!1,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","picker-options":e.header.pickerOption},model:{value:e.header.SEtime,callback:function(t){e.$set(e.header,"SEtime",t)},expression:"header.SEtime"}})],1),r("el-form-item",[r("cv-dropdown-tree",{attrs:{placeholder:"请选择公司搜索",url:"/enterprise/getEnterpriseTreeList","is-default":!1,text:e.header.enterpriseName,label:e.header.label},on:{"update:text":function(t){return e.$set(e.header,"enterpriseName",t)},"update:label":function(t){return e.$set(e.header,"label",t)}},model:{value:e.header.search.enterpriseId,callback:function(t){e.$set(e.header.search,"enterpriseId",t)},expression:"header.search.enterpriseId"}})],1),r("el-form-item",[r("el-select",{attrs:{placeholder:"请选择类型搜索",clearable:!0},model:{value:e.header.search.type,callback:function(t){e.$set(e.header.search,"type",t)},expression:"header.search.type"}},e._l(e.header.typelist,function(e){return r("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})}),1)],1),r("el-form-item",[r("el-input",{attrs:{clearable:"",placeholder:"请输入模块搜索"},model:{value:e.header.search.module,callback:function(t){e.$set(e.header.search,"module",t)},expression:"header.search.module"}})],1),r("el-form-item",[r("el-input",{attrs:{clearable:"",placeholder:"请输入用户搜索"},model:{value:e.header.search.account,callback:function(t){e.$set(e.header.search,"account",t)},expression:"header.search.account"}})],1),r("el-form-item",[r("cv-tool",{staticStyle:{margin:"0px"},attrs:{name:e.$route.name,data:e.$store.getters.monitorMenu,"is-modify":!1,"is-remove":!1,"is-export":!0,"is-add":!1},on:{search:e.search,export:e.Mission}})],1)],1),r("cv-content",{attrs:{fill:!0}},[r("cv-tabs",{attrs:{titles:["统计列表","用户详细"]},model:{value:e.content.activeName,callback:function(t){e.$set(e.content,"activeName",t)},expression:"content.activeName"}},[r("count-table",{attrs:{search:e.header.search,refresh:e.refresh1},on:{linkTo:e.linkTo,"update:refresh":function(t){e.refresh1=t}}}),r("detail-table",{attrs:{search:e.header.search,refresh:e.refresh2},on:{"update:refresh":function(t){e.refresh2=t}}})],1)],1)],1)},[],!1,null,null,null).exports);t.default=o}}]);
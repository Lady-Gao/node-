(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-a8b1fe80"],{"05c0":function(t,e,i){"use strict";i("7f7f"),i("20d6"),i("ac6a");var n=i("cebc"),a=i("3f4e"),o=i("2f62"),r={name:"CvPublictreeContent",components:{CvContent:a.a},props:{model:String,vehicleMonitor:Function,loading:Boolean,noresize:{default:!1,type:Boolean}},data:function(){return{entryList:[],condition:""}},computed:Object(n.a)({},Object(o.c)(["onlineList","isAttention","socketEnterprise","socketVehicle","vehicle_data","vehicleCondition"]),{isCheck:function(){switch(this.model){case"multi":return!0;case"single":default:return!1}},_treeMethods:function(){return this.$refs.tabs},_contentMethods:function(){return this.$refs.content}}),beforeDestroy:function(){var t=this._treeMethods.getAllNodes;this.setStoreVehicleSearchCondition(this.condition),this.setStoreVehicleData(t())},mounted:function(){var t=this._treeMethods.$refs.tree.reference().ztreeApi;t()&&t().checkAllNodes(!1)},methods:Object(n.a)({},Object(o.b)(["setStoreVehicleData","setStoreVehicleSearchCondition"]),{handlerVehicleSearch:function(t){this.condition=t},vehicle_Monitor:function(t){var e=t.data;if(t.name,"function"==typeof this.vehicleMonitor)switch(this.model){case"multi":return this.vehicle_Monitor_multi(t);case"single":return this.vehicleMonitor(e[0])}},vehicle_Monitor_multi:function(t){var e=this,i=t.data;switch(t.name){case"check":this.entryList=this.entryList.concat(i);break;case"cancel":i.forEach(function(t){var i=e.entryList.findIndex(function(e){return e.id==t.id});0<=i&&e.entryList.splice(i,1)})}this.vehicleMonitor(this.entryList)}})},s=(i("45d7"),i("2877")),c=Object(s.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("cv-content",{ref:"content",attrs:{loading:t.loading,noresize:t.noresize}},[t.model?i("cv-tabs-tree",{ref:"tabs",staticClass:"vehiclemaster-tree",attrs:{slot:"aside","vehicle-search":t.vehicleCondition,"is-checked":t.isCheck,"tree-data":t.vehicle_data,"online-monitor":t.onlineList,"vehicle-monitor":t.socketVehicle,"attention-monitor":t.isAttention,"enterprise-fleet-monitor":t.socketEnterprise,"node-monitor":t.vehicle_Monitor},on:{"vehicle-choose-search":t.handlerVehicleSearch},slot:"aside"}):t._e(),t._t("default")],2)},[],!1,null,"2dfdf41b",null).exports;c.install=function(t){t.component(c.name,c)},e.a=c},"45d7":function(t,e,i){"use strict";var n=i("6e18");i.n(n).a},"6e18":function(t,e,i){},"7ec1":function(t,e,i){"use strict";var n=i("d8b9");i.n(n).a},a8c8:function(t,e,i){"use strict";i.r(e),i("7f7f"),i("ac6a"),i("386d");var n={name:"consumptionHistorical",components:{CvPublictreeContent:i("05c0").a},computed:{_table:function(){return this.$refs.conTable},_echart:function(){return this.$refs.consumOil}},data:function(){return{pickerOption:{disabledDate:function(t){return t.getTime()>Date.now()}},time:null,search:{startDate:this.$filter.format(new Date,"yyyy-MM-dd start"),endDate:this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss"),vehicleId:""},dataItem:{}}},methods:{tableload:function(){var t=this;return this.time?this.search.vehicleId?(t.search.startDate=t.$filter.format(t.time,"yyyy-MM-dd start"),t.search.endDate=t.$filter.format(t.time,"yyyy-MM-dd end"),this.$refs.conTable.tableInitial(),this.dataItem={},void this.getOilData()):(this.$message.warning(t.$t("consumptionHistorical.choseVehicle")),!1):(this.$message.warning(t.$t("consumptionHistorical.Choicetimerange")),!1)},setSeries:function(t){var e=[];return t.forEach(function(t){e.push(t.toFixed(2))}),e},tableOil:function(t){return t.total.toFixed(2)},getOilData:function(){var t=this,e=this,i={startDate:this.$filter.format(this.time,"yyyy-MM-dd start"),endDate:this.$filter.format(this.time,"yyyy-MM-dd end"),vehicleId:this.search.vehicleId,current:this._table.current,size:this._table.size};this.$store.dispatch("queryOilMassChart",i).then(function(i){if(i.flag){var n={legend:{data:e.$t("multiCar.oilquantity"),x:"left"},grid:{left:"4%",right:"5%",bottom:"5%",containLabel:!0},tooltip:{formatter:e.$t("processing.timer")+":{b}<br/>"+e.$t("multiCar.oilquantity")+":{c}(L)"},xAxis:{type:"category",name:e.$t("processing.timer"),boundaryGap:!1,data:i.data?i.data.timeX:e.$t("el.table.emptyText")},yAxis:[{name:e.$t("consumptionHistorical.percentageOilmass"),type:"value"}],series:[{name:e.$t("multiCar.oilquantity"),type:"line",itemStyle:{normal:{areaStyle:{color:new window.echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(255, 158, 68)"},{offset:1,color:"rgb(255, 70, 131)"}])}}},symbolSize:8,data:i.data?e.setSeries(i.data.oilMassY):[0,0,0,0]}]};t.dataItem=n}})},handlerVehicleMonitor:function(t){this.search.vehicleId=t.id}},watch:{"$store.getters.ptSingleCar":function(t){this.vehicleId=t.id}}},a=(i("7ec1"),i("2877")),o=Object(a.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fuelGa"},[i("cv-operation",{staticClass:"header",attrs:{position:"left"}},[i("el-form-item",{attrs:{label:t.$t("consumptionHistorical.queryDate")}},[i("el-date-picker",{staticStyle:{},attrs:{editable:!1,clearable:!1,type:"date",placeholder:t.$t("consumptionHistorical.Choicetimerange"),"picker-options":t.pickerOption},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),i("el-form-item",{staticStyle:{float:"right"}},[i("cv-tool",{attrs:{name:t.$route.name,data:t.$store.getters.monitorMenu,"is-modify":!1,"is-export":!1,"is-add":!1,"is-remove":!1},on:{search:t.tableload}})],1)],1),i("cv-publictree-content",{attrs:{model:"single","vehicle-monitor":t.handlerVehicleMonitor}},[i("cv-grid",{ref:"conTable",attrs:{url:"/oilLogController/queryFuelHistoryList",params:t.search}},[i("el-table-column",{attrs:{label:t.$t("consumptionHistorical.percentageOilmass"),prop:"total",formatter:t.tableOil},scopedSlots:t._u([{key:"default",fn:function(e){return i("div",{},[t._v("\n            "+t._s(e.row.total.toFixed(2)))])}}])}),i("el-table-column",{attrs:{label:t.$t("consumptionHistorical.Reportingtime"),prop:"addOilTime"}})],1),i("div",{staticStyle:{width:"100%",height:"300px"}},[i("cv-echart",{ref:"consumOil",staticStyle:{width:"100%",height:"100%"},attrs:{name:"line",data:t.dataItem}})],1)],1)],1)},[],!1,null,"199250ae",null).exports;o.install=function(t){t.component(o.name,o)},e.default=o},d8b9:function(t,e,i){}}]);
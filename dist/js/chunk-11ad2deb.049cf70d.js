(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-11ad2deb"],{"05c0":function(e,t,i){"use strict";i("7f7f"),i("20d6"),i("ac6a");var r=i("cebc"),n=i("3f4e"),s=i("2f62"),a={name:"CvPublictreeContent",components:{CvContent:n.a},props:{model:String,vehicleMonitor:Function,loading:Boolean,noresize:{default:!1,type:Boolean}},data:function(){return{entryList:[],condition:""}},computed:Object(r.a)({},Object(s.c)(["onlineList","isAttention","socketEnterprise","socketVehicle","vehicle_data","vehicleCondition"]),{isCheck:function(){switch(this.model){case"multi":return!0;case"single":default:return!1}},_treeMethods:function(){return this.$refs.tabs},_contentMethods:function(){return this.$refs.content}}),beforeDestroy:function(){var e=this._treeMethods.getAllNodes;this.setStoreVehicleSearchCondition(this.condition),this.setStoreVehicleData(e())},mounted:function(){var e=this._treeMethods.$refs.tree.reference().ztreeApi;e()&&e().checkAllNodes(!1)},methods:Object(r.a)({},Object(s.b)(["setStoreVehicleData","setStoreVehicleSearchCondition"]),{handlerVehicleSearch:function(e){this.condition=e},vehicle_Monitor:function(e){var t=e.data;if(e.name,"function"==typeof this.vehicleMonitor)switch(this.model){case"multi":return this.vehicle_Monitor_multi(e);case"single":return this.vehicleMonitor(t[0])}},vehicle_Monitor_multi:function(e){var t=this,i=e.data;switch(e.name){case"check":this.entryList=this.entryList.concat(i);break;case"cancel":i.forEach(function(e){var i=t.entryList.findIndex(function(t){return t.id==e.id});0<=i&&t.entryList.splice(i,1)})}this.vehicleMonitor(this.entryList)}})},o=(i("45d7"),i("2877")),c=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("cv-content",{ref:"content",attrs:{loading:e.loading,noresize:e.noresize}},[e.model?i("cv-tabs-tree",{ref:"tabs",staticClass:"vehiclemaster-tree",attrs:{slot:"aside","vehicle-search":e.vehicleCondition,"is-checked":e.isCheck,"tree-data":e.vehicle_data,"online-monitor":e.onlineList,"vehicle-monitor":e.socketVehicle,"attention-monitor":e.isAttention,"enterprise-fleet-monitor":e.socketEnterprise,"node-monitor":e.vehicle_Monitor},on:{"vehicle-choose-search":e.handlerVehicleSearch},slot:"aside"}):e._e(),e._t("default")],2)},[],!1,null,"2dfdf41b",null).exports;c.install=function(e){e.component(c.name,c)},t.a=c},"45d7":function(e,t,i){"use strict";var r=i("6e18");i.n(r).a},"5d7f":function(e,t,i){"use strict";i.r(t),i("7f7f"),i("386d");var r={components:{CvPublictreeContent:i("05c0").a},mixins:[],data:function(){return{plateCode:"",reset:!1,receiveTime:[this.$filter.timeStamp(this.$filter.format(new Date(new Date-864e5),"yyyy-MM-dd start")),this.$filter.timeStamp(this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss"))],search:{overStartTime:this.$filter.format(new Date(new Date-864e5),"yyyy-MM-dd start"),overEndTime:this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss"),vehicleId:"",mapType:this.$store.getters.mapType},pickerOption:{disabledDate:function(e){return e.getTime()>Date.now()}}}},computed:{_table:function(){return this.$refs.table}},methods:{isTimeEvent:function(){return this.search.vehicleId?this.receiveTime?(this.search.overStartTime=this.$filter.format(this.receiveTime[0],"yyyy-MM-dd HH:mm:ss"),this.search.overEndTime=this.$filter.format(this.receiveTime[1],"yyyy-MM-dd HH:mm:ss"),3<this.$filter.timeRange(this.search.overStartTime,this.search.overEndTime)?(this.$message.warning("时间范围为3天"),!1):void this._table.tableInitial()):(this.$message.warning("请选择时间范围"),!1):(this.$message.warning("请选择车辆"),!1)},downOut:function(){if(!this.search.vehicleId)return this.$message.warning("请选择车辆"),!1;if(!this.receiveTime)return this.$message.warning("请选择时间范围"),!1;if(this.search.overStartTime=this.$filter.format(this.receiveTime[0],"yyyy-MM-dd HH:mm:ss"),this.search.overEndTime=this.$filter.format(this.receiveTime[1],"yyyy-MM-dd HH:mm:ss"),3<this.$filter.timeRange(this.search.overStartTime,this.search.overEndTime))return this.$message.warning("时间范围为3天"),!1;this.search;var e=this.$service.winParams(this.$COMMON.baseUrl+"/report/queryOverTimeDriveReport",this.search);window.location.href=e},handlerVehicleMonitor:function(e){this.search.vehicleId=e.id,this.plateCode=e.plateCode}}},n=(i("c761"),i("2877")),s=Object(n.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"main"},[i("cv-operation",{staticClass:"header",attrs:{position:"left"}},[i("el-form-item",{attrs:{label:"起始时间:"}},[i("el-date-picker",{attrs:{editable:!1,clearable:!1,size:"small",type:"datetimerange",placeholder:"请选择时间","picker-options":e.pickerOption},model:{value:e.receiveTime,callback:function(t){e.receiveTime=t},expression:"receiveTime"}})],1),i("el-form-item",{staticStyle:{float:"right"},attrs:{label:""}},[i("cv-tool",{staticClass:"cv-tool",staticStyle:{margin:"0"},attrs:{name:e.$route.name,data:e.$store.getters.monitorMenu,"is-remove":!1,"is-add":!1,"is-modify":!1,"is-reset":!1},on:{search:e.isTimeEvent,export:e.downOut}})],1)],1),i("cv-publictree-content",{attrs:{model:"single","vehicle-monitor":e.handlerVehicleMonitor}},[i("cv-grid",{ref:"table",attrs:{url:"/overTimeDrive/queryOverTimeDrive",params:e.search}},[i("el-table-column",{attrs:{label:"车牌号码",prop:"plateCode","min-width":"100px"}}),i("el-table-column",{attrs:{label:"所属公司",prop:"etprsName","min-width":"100px"}}),i("el-table-column",{attrs:{label:"车辆分组",prop:"dpName","min-width":"100px"}}),i("el-table-column",{attrs:{label:"超时起始时间",prop:"overStartTime","min-width":"120px"}}),i("el-table-column",{attrs:{label:"超时终止时间",prop:"overEndTime","min-width":"160px"}}),i("el-table-column",{attrs:{label:"超时开始位置",prop:"overStartAddr","min-width":"160px"}}),i("el-table-column",{attrs:{label:"超时结束位置",prop:"overEndAddr","min-width":"160px"}})],1)],1)],1)},[],!1,null,"9460a4ea",null).exports;s.install=function(e){e.component(s.name,s)},t.default=s},"6e18":function(e,t,i){},af7c:function(e,t,i){},c761:function(e,t,i){"use strict";var r=i("af7c");i.n(r).a}}]);
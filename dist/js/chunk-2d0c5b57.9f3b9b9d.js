(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d0c5b57"],{"3ff4":function(e,t,a){"use strict";a.r(t),a("386d");var l={data:function(){return{pickerOptions0:{disabledDate:function(e){return e.getTime()>Date.now()}},downFlag:!0,search:{enterpriseName:"",enterpriseId:"",fleetName:"",fleetId:"",plateCode:"",startTime:"",endTime:"",vehicleId:"",type:""},time:[this.$filter.timeStamp(this.$filter.format(new Date,"yyyy-MM-dd start")),this.$filter.timeStamp(this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss"))],table1:{size:10,total:0,current:1,table:[],loading:!1,flag:!1},table2:{size:10,total:0,current:1,enterpriseId:"",type:"",table:[],loading:!1,flag:!1},table3:{size:10,total:0,current:1,table:[],loading:!1,flag:!1},table4:{size:10,total:0,current:1,fleetId:"",table:[],loading:!1,type:"",flag:!1},peccancyType:[{name:"空滤堵塞报警",val:"37"},{name:"仓温报警信号",val:"39"},{name:"机滤堵塞信号",val:"40"},{name:"燃油堵塞信号",val:"41"},{name:"机油温度报警信号",val:"42"},{name:"燃油警告",val:"43"},{name:"空档滑行告警",val:"44"},{name:"超长怠速告警",val:"45"},{name:"怠速空调告警",val:"46"},{name:"发动机超转告警",val:"47"},{name:"急加速报警",val:"48"},{name:"急减速报警",val:"49"},{name:"冷却液温度过高报警",val:"51"},{name:"蓄电池电压报警",val:"52"},{name:"平台-场外停车预警",val:"74"},{name:"平台-非指定道口出入境预警",val:"75"},{name:"出区域",val:"71"},{name:"出线路",val:"72"},{name:"路段行驶时间过长",val:"73"},{name:"平台-路段行驶时间不足",val:"76"},{name:"平台-路段行驶时间过长",val:"77"},{name:"超高或传感器被破坏报警",val:"79"},{name:"顶盖未合严或传感器被破坏报警",val:"78"},{name:"平台-区域超速报警",val:"69"},{name:"超速预警",val:"13"},{name:"疲劳驾驶预警",val:"14"},{name:"TTS模块故障",val:"10"},{name:"摄像头故障",val:"11"},{name:"预警",val:"3"},{name:"终端LCD或显示器故障",val:"9"}],activeName:"first"}},methods:{load:function(e,t){switch(this.activeName){case"first":this.table1Load(e),this.downFlag=!0;break;case"second":this.table2Load(e,t),this.downFlag="clear"!=t;break;case"third":this.table3Load(e),this.downFlag=!0;break;case"fourth":this.table4Load(e,t),this.downFlag="clear"!=t}},checked:function(e){this.search.type=e},table1Load:function(e){var t=this,a=this.getData(this.table1);return e?(this.table1.flag=!0,this.table1.current=1):this.table1.flag=!1,this.time[0]?1<this.$filter.timeRange(a.startTime,a.endTime)?(this.$message.warning("查询范围不能超过一天!"),!1):(this.table1.loading=!0,""!=this.search.enterpriseId&&(a.enterpriseId=this.search.enterpriseId),a.typeName=1,void this.$store.dispatch("vehiclePeccancyStatistics",a).then(function(e){e.flag?(t.table1.table=e.data.records,t.table1.total=e.data.total,t.table1.current=e.data.current):(t.$message.error(t.$t("error."+e.errorCode)),t.table1.table=[],t.table1.total=0),t.table1.loading=!1}).catch(function(){t.table1.loading=!1})):(this.$message.warning("请选择时间!"),!1)},table2Load:function(e,t,a,l){var i=this,r=this.getData(this.table2);return e?(this.table2.flag=!0,this.table2.current=1,r.enterpriseId=a||this.table2.enterpriseId,r.alarmTypeId=l||this.table2.type):(this.table2.flag=!1,r.enterpriseId=this.table2.enterpriseId,r.alarmTypeId=this.table2.type),r.typeName=2,this.time[0]?1<this.$filter.timeRange(r.startTime,r.endTime)?(this.$message.warning("查询范围不能超过一天!"),!1):(r.plateCode=this.search.plateCode,void(t?(this.table2.table=[],this.table2.enterpriseId="",r.alarmTypeId="",this.table2.total=0):(this.table2.loading=!0,this.$store.dispatch("vehiclePeccancyStatistics",r).then(function(e){e.flag?(i.table2.table=e.data.records,i.table2.total=e.data.total,i.table2.current=e.data.current):(i.$message.error(i.$t("error."+e.errorCode)),i.table2.table=[],i.table2.total=0),i.table2.loading=!1}).catch(function(){i.table2.loading=!1})))):(this.$message.warning("请选择时间!"),!1)},table3Load:function(e){var t=this;if(e?(this.table3.flag=!0,this.table3.current=1):this.table3.flag=!1,!this.time[0])return this.$message.warning("请选择时间!"),!1;this.table3.loading=!0;var a=this.getData(this.table3);if(""!=this.search.fleetName&&(a.fleetName=this.search.fleetName),(a.typeName=1)<this.$filter.timeRange(a.startTime,a.endTime))return this.$message.warning("查询范围不能超过一天!"),!1;this.$store.dispatch("groupPeccancyStatistics",a).then(function(e){e.flag?(t.table3.table=e.data.records,t.table3.total=e.data.total,t.table3.current=e.data.current):(t.$message.error(t.$t("error."+e.errorCode)),t.table3.table=[],t.table3.total=0),t.table3.loading=!1}).catch(function(){t.table3.loading=!1})},table4Load:function(e,t,a,l){var i=this,r=this.getData(this.table4);return e?(this.table4.flag=!0,this.table4.current=1,r.dpId=a||this.table4.fleetId,r.alarmTypeId=l||this.table4.type):(this.table4.flag=!1,r.dpId=this.table4.fleetId,r.alarmTypeId=this.table4.type),r.typeName=2,r.plateCode=this.search.plateCode,this.time[0]?1<this.$filter.timeRange(r.startTime,r.endTime)?(this.$message.warning("查询范围不能超过一天!"),!1):void(t?(this.table4.table=[],this.table4.total=0):(this.table4.loading=!0,this.$store.dispatch("groupPeccancyStatistics",r).then(function(e){e.flag?(i.table4.table=e.data.records,i.table4.total=e.data.total,i.table4.current=e.data.current):(i.$message.error(i.$t("error."+e.errorCode)),i.table4.table=[],i.table4.total=0),i.table4.loading=!1}).catch(function(){i.table4.loading=!1}))):(this.$message.warning("请选择时间!"),!1)},companyDeil:function(e){this.table2Load(!0,null,e.enterpriseId,e.alarmTypeId),this.table2.enterpriseId=e.enterpriseId,this.table2.type=e.alarmTypeId,this.activeName="second"},groupDeil:function(e){this.table4Load(!0,null,e.dpId,e.alarmTypeId),this.table4.fleetId=e.dpId,this.table4.type=e.alarmTypeId,this.activeName="fourth"},getunTimelyHandle:function(e){return 0==e.unTimelyHandle&&0==e.timelyHandle?e.alarmCount:e.unTimelyHandle},enterpriseId:function(e){this.search.enterpriseId="empty"!=e?e.id:""},down:function(){var e="",t={};if(!this.time[0])return this.$message.warning("请选择时间!"),!1;switch(this.activeName){case"first":if(e="/report/exportVehiclePeccancyStatistics",t=this.getData(this.table1),1<this.$filter.timeRange(t.startTime,t.endTime))return this.$message.warning("查询范围不能超过一天!"),!1;""!=this.search.enterpriseId&&(t.enterpriseId=this.search.enterpriseId),t.typeName=1;break;case"second":if(e="/report/exportVehiclePeccancyStatistics",t=this.getData(this.table2),1<this.$filter.timeRange(t.startTime,t.endTime))return this.$message.warning("查询范围不能超过一天!"),!1;t.enterpriseId=this.table2.enterpriseId,t.palteCode=this.search.palteCode,t.alarmTypeId=this.table2.type,t.typeName=2;break;case"third":if(e="/report/exportGroupPeccancyStatistics",t=this.getData(this.table3),1<this.$filter.timeRange(t.startTime,t.endTime))return this.$message.warning("查询范围不能超过一天!"),!1;""!=this.search.fleetName&&(t.fleetName=this.search.fleetName),t.typeName=1;break;case"fourth":if(e="/report/exportGroupPeccancyStatistics",t=this.getData(this.table4),1<this.$filter.timeRange(t.startTime,t.endTime))return this.$message.warning("查询范围不能超过一天!"),!1;t.dpId=this.table4.fleetId,t.palteCode=this.search.palteCode,t.alarmTypeId=this.table4.type,t.typeName=2}var a=this.$service.winParams(this.$COMMON.baseUrl+e,t);window.location.href=a},getData:function(e){return this.search.startTime=/NAN/gi.test(this.$filter.format(this.time[0]))?this.time[0]:this.$filter.format(this.time[0],"yyyy-MM-dd HH:mm:ss"),this.search.endTime=/NAN/gi.test(this.$filter.format(this.time[1]))?this.time[1]:this.$filter.format(this.time[1],"yyyy-MM-dd HH:mm:ss"),{startTime:this.search.startTime,endTime:this.search.endTime,alarmTypeId:this.search.type,size:e.size,current:e.current}}},mounted:function(){this.table1Load()}},i=a("2877"),r=Object(i.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vehiclePeccancy"},[a("cv-header",[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"first"==e.activeName,expression:'(activeName != "first" ? false : true)'}],attrs:{label:e.$t("dm.company")}},[a("cv-dropdown-tree",{attrs:{placeholder:e.$t("common.enterprise.affiliated"),interface:"/enterprise/getEnterpriseTreeList"},on:{label:e.enterpriseId},model:{value:e.search.enterpriseName,callback:function(t){e.$set(e.search,"enterpriseName",t)},expression:"search.enterpriseName"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"third"==e.activeName,expression:'(activeName != "third" ? false : true)'}],attrs:{label:e.$t("cL.subGroup")}},[a("el-input",{attrs:{placeholder:"",size:"small"},model:{value:e.search.fleetName,callback:function(t){e.$set(e.search,"fleetName",t)},expression:"search.fleetName"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"first"==e.activeName||"third"==e.activeName,expression:'((activeName != "first" && activeName != "third") ? false : true)'}],attrs:{label:"违规类型"}},[a("cv-dropdown-tree",{staticStyle:{display:"inline-block"},attrs:{isCheck:!0,size:"small",interface:"/alarmInfo/frinAlarmTypeInfoList.do","show-checkbox":!0},on:{checked:e.checked}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"first"!=e.activeName&&"third"!=e.activeName,expression:'((activeName == "first" || activeName == "third") ? false : true)'}],attrs:{label:e.$t("cL.carNumber")}},[a("el-input",{attrs:{size:"small",maxlength:10},model:{value:e.search.plateCode,callback:function(t){e.$set(e.search,"plateCode","string"==typeof t?t.trim():t)},expression:"search.plateCode"}})],1),a("el-form-item",{attrs:{label:"选择时间:"}},[a("el-date-picker",{staticClass:"picker",attrs:{"picker-options":e.pickerOptions0,clearable:!1,editable:!1,type:"datetimerange",placeholder:"选择时间范围",prop:"time"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),a("el-form-item",{staticStyle:{float:"right"}},[a("cv-tool",{staticStyle:{margin:"0px"},attrs:{name:e.$route.name,data:e.$store.getters.monitorMenu,"is-modify":!1,"is-remove":!1,"is-add":!1,"is-export":e.downFlag},on:{export:e.down,search:e.load}})],1)],1),a("cv-content",{attrs:{fill:!0}},[a("el-tabs",{on:{"tab-click":function(t){return e.load(!1,"clear")}},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"公司违规统计信息",name:"first"}},[a("cv-grid",{directives:[{name:"loading",rawName:"v-loading",value:e.table1.loading,expression:"table1.loading"}],attrs:{options:e.table1},on:{load:function(t){return e.load(!1)}}},[a("el-table",{ref:"table1",attrs:{border:"",stripe:"",data:e.table1.table,height:e.$service.getAutoHeight(1,1)}},[a("el-table-column",{attrs:{label:"公司名称 ","min-width":"100",prop:"enterpriseName"}}),a("el-table-column",{attrs:{label:"违规类型","min-width":"150",prop:"alarmTypeName"}}),a("el-table-column",{attrs:{label:"开始时间","min-width":"150",prop:"startTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cv-span",[e._v(e._s(e.search.startTime))])]}}])}),a("el-table-column",{attrs:{label:"结束时间","min-width":"150",prop:"endTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cv-span",[e._v(e._s(e.search.endTime))])]}}])}),a("el-table-column",{attrs:{label:"违规次数 ","min-width":"80",prop:"alarmCount"}}),a("el-table-column",{attrs:{label:"已处理次数","min-width":"100",prop:"timelyHandle"}}),a("el-table-column",{attrs:{label:"未处理次数","min-width":"100",prop:"unTimelyHandle",formatter:e.getunTimelyHandle}}),a("el-table-column",{attrs:{label:"处理率","min-width":"80",prop:"timelypercentage"}}),a("el-table-column",{attrs:{label:e.$t("action.operation"),prop:"operate"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cv-span",{attrs:{type:"primary"},nativeOn:{click:function(a){return e.companyDeil(t.row)}}},[e._v("详细信息")])]}}])})],1)],1)],1),a("el-tab-pane",{attrs:{label:"公司违规统计详细信息",name:"second"}},[a("cv-grid",{directives:[{name:"loading",rawName:"v-loading",value:e.table2.loading,expression:"table2.loading"}],attrs:{options:e.table2},on:{load:function(t){return e.load(!1)}}},[a("el-table",{ref:"table2",attrs:{border:"",stripe:"",data:e.table2.table,height:e.$service.getAutoHeight(1,1)}},[a("el-table-column",{attrs:{label:"车牌号","min-width":"100",prop:"plateCode"}}),a("el-table-column",{attrs:{label:"公司名称","min-width":"100",prop:"enterpriseName"}}),a("el-table-column",{attrs:{label:"分组名称","min-width":"100",prop:"dpName"}}),a("el-table-column",{attrs:{label:"违规类型","min-width":"150",prop:"alarmTypeName"}}),a("el-table-column",{attrs:{label:"开始时间 ","min-width":"150",prop:"startTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cv-span",[e._v(e._s(e.search.startTime))])]}}])}),a("el-table-column",{attrs:{label:"结束时间","min-width":"150",prop:"endTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cv-span",[e._v(e._s(e.search.endTime))])]}}])}),a("el-table-column",{attrs:{label:"违规次数","min-width":"80",prop:"alarmCount"}}),a("el-table-column",{attrs:{label:"已处理次数","min-width":"100",prop:"timelyHandle"}}),a("el-table-column",{attrs:{label:"未处理次数","min-width":"100",prop:"unTimelyHandle",formatter:e.getunTimelyHandle}}),a("el-table-column",{attrs:{label:"处理率","min-width":"80",prop:"timelypercentage"}})],1)],1)],1),a("el-tab-pane",{attrs:{label:"分组违规统计信息",name:"third"}},[a("cv-grid",{directives:[{name:"loading",rawName:"v-loading",value:e.table3.loading,expression:"table3.loading"}],attrs:{options:e.table3},on:{load:function(t){return e.load(!1)}}},[a("el-table",{ref:"table3",attrs:{border:"",stripe:"",data:e.table3.table,height:e.$service.getAutoHeight(1,1)}},[a("el-table-column",{attrs:{label:"公司名称 ","min-width":"100",prop:"enterpriseName"}}),a("el-table-column",{attrs:{label:"分组名称","min-width":"100",prop:"dpName"}}),a("el-table-column",{attrs:{label:"违规类型","min-width":"150",prop:"alarmTypeName"}}),a("el-table-column",{attrs:{label:"开始时间","min-width":"150",prop:"startTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cv-span",[e._v(e._s(e.search.startTime))])]}}])}),a("el-table-column",{attrs:{label:"结束时间","min-width":"150",prop:"endTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cv-span",[e._v(e._s(e.search.endTime))])]}}])}),a("el-table-column",{attrs:{label:"违规次数 ","min-width":"80",prop:"alarmCount"}}),a("el-table-column",{attrs:{label:"已处理次数","min-width":"100",prop:"timelyHandle"}}),a("el-table-column",{attrs:{label:"未处理次数","min-width":"100",prop:"unTimelyHandle",formatter:e.getunTimelyHandle}}),a("el-table-column",{attrs:{label:"处理率","min-width":"80",prop:"timelypercentage"}}),a("el-table-column",{attrs:{label:e.$t("action.operation"),prop:"operate"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cv-span",{attrs:{type:"primary"},nativeOn:{click:function(a){return e.groupDeil(t.row)}}},[e._v("详细信息")])]}}])})],1)],1)],1),a("el-tab-pane",{attrs:{label:"分组违规统计详细信息",name:"fourth"}},[a("cv-grid",{directives:[{name:"loading",rawName:"v-loading",value:e.table4.loading,expression:"table4.loading"}],attrs:{options:e.table4},on:{load:function(t){return e.load(!1)}}},[a("el-table",{ref:"table4",attrs:{border:"",stripe:"",data:e.table4.table,height:e.$service.getAutoHeight(1,1)}},[a("el-table-column",{attrs:{label:"车牌号","min-width":"100",prop:"plateCode"}}),a("el-table-column",{attrs:{label:"公司名称","min-width":"100",prop:"enterpriseName"}}),a("el-table-column",{attrs:{label:"分组名称","min-width":"100",prop:"dpName"}}),a("el-table-column",{attrs:{label:"违规类型","min-width":"150",prop:"alarmTypeName"}}),a("el-table-column",{attrs:{label:"开始时间 ","min-width":"150",prop:"startTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cv-span",[e._v(e._s(e.search.startTime))])]}}])}),a("el-table-column",{attrs:{label:"结束时间","min-width":"150",prop:"endTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cv-span",[e._v(e._s(e.search.endTime))])]}}])}),a("el-table-column",{attrs:{label:"违规次数","min-width":"80",prop:"alarmCount"}}),a("el-table-column",{attrs:{label:"已处理次数","min-width":"100",prop:"timelyHandle"}}),a("el-table-column",{attrs:{label:"未处理次数","min-width":"100",prop:"unTimelyHandle",formatter:e.getunTimelyHandle}}),a("el-table-column",{attrs:{label:"处理率","min-width":"80",prop:"timelypercentage"}})],1)],1)],1)],1)],1)],1)},[],!1,null,null,null).exports;t.default=r}}]);
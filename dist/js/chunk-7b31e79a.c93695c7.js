(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7b31e79a"],{"2eec":function(e,t,a){},6419:function(e,t,a){"use strict";a.r(t);var r=a("cebc"),l=(a("386d"),{computed:{_table1:function(){return this.$refs.table1},_table2:function(){return this.$refs.table2}},data:function(){return{label:"",search:{plateCode:"",enterpriseId:"",fleetIds:"",startDate:this.$filter.format(new Date-1728e5,"yyyy-MM-dd"),endDate:this.$filter.format(new Date-864e5,"yyyy-MM-dd")},getMileage:!1,company:"",activeName:"tabs0",plateCode:"",nextCode:"",enterpriseName:"",enterpriseId:"",fleetName:"",fleetId:"",sTime:"",etime:"",SEtime:[this.$filter.format(new Date-1728e5,"yyyy-MM-dd"),this.$filter.format(new Date-864e5,"yyyy-MM-dd")],pickerOption:{disabledDate:function(e){return e.getTime()>Date.now()-864e5}}}},methods:{linkTo:function(e){this.activeName="tabs1",this.search.plateCode=e.row.plateCode,this._table2.tableInitial(!0)},searchMileage:function(){switch(this.activeName){case"tabs0":this._table1.tableInitial(!0);break;case"tabs1":this._table2.tableInitial(!0)}},handleClick:function(){this.search.plateCode=""},searchReg:function(e,t){return!(2<this.$filter.timeRange(e,t))||(this.$message.error({message:this.$t("查询时间间隔不能超过三天")}),!1)},down:function(){if(null!=this.SEtime){if("tabs0"==this.activeName){var e=this.$service.winParams(this.$COMMON.baseUrl+"/report/exportMieageByDate",Object(r.a)({},this.search,{size:this._table1.size,current:this._table1.current}));window.location.href=e}if("tabs1"==this.activeName){var t=this.$service.winParams(this.$COMMON.baseUrl+"/report/exportMieageByDateDetail",Object(r.a)({},this.search,{size:this._table2.size,current:this._table2.current}));window.location.href=t}}else this.$message.error({message:this.$t("请选择时间")})},plateCodeAndColor:function(e){return this.$filter.plateCodeColor(e.plateColor)},setMileage:function(e){return e.mileage.toFixed(1)}},watch:{SEtime:function(e){this.search.startDate=e[0],this.search.endDate=e[1]}}}),i=(a("facb"),a("2877")),n=Object(i.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"MileageStatistics"},[a("cv-operation",{attrs:{position:"left"}},[a("el-form-item",{attrs:{label:"起止时间"}},[a("el-date-picker",{attrs:{clearable:!1,editable:!1,"value-format":"yyyy-MM-dd",type:"daterange",placeholder:"选择时间范围","picker-options":e.pickerOption},model:{value:e.SEtime,callback:function(t){e.SEtime=t},expression:"SEtime"}})],1),a("el-form-item",{attrs:{label:"车牌号"}},[a("el-input",{staticStyle:{width:"120px"},attrs:{clearable:""},model:{value:e.search.plateCode,callback:function(t){e.$set(e.search,"plateCode","string"==typeof t?t.trim():t)},expression:"search.plateCode"}})],1),a("el-form-item",{attrs:{label:"所属公司/机构"}},[a("cv-dropdown-tree",{attrs:{url:"/enterprise/findEnterpriseOrganizationTreeList ","is-default":!1,label:e.label},on:{"update:label":function(t){e.label=t}},model:{value:e.search.enterpriseId,callback:function(t){e.$set(e.search,"enterpriseId",t)},expression:"search.enterpriseId"}})],1),a("el-form-item",{attrs:{label:"所属车组"}},[a("cv-dropdown-tree",{attrs:{url:"/enterprise/findFleetTreeList","auto-params":{enterpriseId:e.label.enterpriseId,pId:e.label.id,type:e.label.type}},model:{value:e.search.fleetIds,callback:function(t){e.$set(e.search,"fleetIds","string"==typeof t?t.trim():t)},expression:"search.fleetIds"}})],1),a("el-form-item",[a("cv-tool",{staticStyle:{margin:"0px"},attrs:{name:e.$route.name,data:e.$store.getters.monitorMenu,"is-add":!1,"is-modify":!1,"is-remove":!1},on:{export:e.down,search:e.searchMileage}})],1)],1),a("cv-content",{attrs:{fill:!0}},[a("cv-tabs",{attrs:{titles:["行驶里程统计","单日行驶里程信息"],"force-render":!1},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("cv-grid",{ref:"table1",attrs:{params:e.search,url:"/report/findMieageByDate",bodyParser:!0}},[a("el-table-column",{attrs:{label:e.$t("cE.carNumber"),"header-align":"center","min-width":"100",prop:"plateCode"}}),a("el-table-column",{attrs:{label:e.$t("cE.carColor"),"header-align":"center","min-width":"100",prop:"plateColor",formatter:e.plateCodeAndColor}}),a("el-table-column",{attrs:{label:e.$t("reportForm.mileageStatic.blcarGroup"),"header-align":"center","min-width":"100",prop:"feetName"}}),a("el-table-column",{attrs:{label:e.$t("reportForm.mileageStatic.blenterprise"),"header-align":"center","min-width":"120",prop:"enterpriseName"}}),a("el-table-column",{attrs:{label:e.$t("reportForm.mileageStatic.driveTotalMileage"),"header-align":"center","min-width":"150",prop:"mileageSum"}}),a("el-table-column",{attrs:{label:e.$t("el.datepicker.startTime"),"header-align":"center","min-width":"150",prop:"startDate"}}),a("el-table-column",{attrs:{label:e.$t("el.datepicker.endTime"),"header-align":"center","min-width":"150",prop:"endDate"}}),a("el-table-column",{attrs:{label:e.$t("action.operation"),"header-align":"center","min-width":"120",prop:"operate"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.flag?a("cv-span",{attrs:{type:"primary"},nativeOn:{click:function(a){return a.preventDefault(),e.linkTo(t)}}},[e._v(e._s(1==t.row.flag?e.$t("reportForm.mileageStatic.lookDetail"):e.$t("reportForm.mileageStatic.blank")))]):e._e()]}}])})],1),a("cv-grid",{ref:"table2",attrs:{params:e.search,url:"/report/findMieageByDateDetail",bodyParser:!0}},[a("el-table-column",{attrs:{label:e.$t("cE.carNumber"),"header-align":"center","min-width":"100",prop:"plateCode"}}),a("el-table-column",{attrs:{label:e.$t("cE.carColor"),"header-align":"center","min-width":"100",prop:"plateColor",formatter:e.plateCodeAndColor}}),a("el-table-column",{attrs:{label:e.$t("reportForm.mileageStatic.blcarGroup"),"header-align":"center","min-width":"100",prop:"feetName"}}),a("el-table-column",{attrs:{label:e.$t("reportForm.mileageStatic.blenterprise"),"header-align":"center","min-width":"120",prop:"enterpriseName"}}),a("el-table-column",{attrs:{label:e.$t("reportForm.mileageStatic.driveTotalMileage"),"header-align":"center","min-width":"150",prop:"mileage",formatter:e.setMileage}}),a("el-table-column",{attrs:{label:e.$t("reportForm.mileageStatic.driveDate"),"header-align":"center","min-width":"150",prop:"startTime"}})],1)],1)],1)],1)},[],!1,null,null,null).exports;t.default=n},facb:function(e,t,a){"use strict";var r=a("2eec");a.n(r).a}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6dadf69f"],{2399:function(t,e,i){"use strict";var a=i("8755");i.n(a).a},4449:function(t,e,i){"use strict";var a=i("945a");i.n(a).a},"65d8":function(t,e,i){"use strict";i.r(e),i("7f7f");var a=i("cebc"),n=(i("ac6a"),i("2f62")),o={props:{options:{}},data:function(){return{selectArray:[],submitFalg:!1}},computed:Object(a.a)({},Object(n.c)(["queryOtherProtocolGroup"])),methods:{save:function(){var t=this;0<this.selectArray.length?(this.submitFalg=!0,this.$store.dispatch("addAttachPlat",{ids:this.selectArray.join(","),id:this.options.id}).then(function(e){e.flag?(t.$message.success(t.$t("action.addSuccess")),t.$emit("confirm"),t.options.flag=!1):t.$message.error(t.$t("error."+e.errorCode)),t.submitFalg=!1}).catch(function(e){t.submitFalg=!1})):this.$message.warning("请选择上级平台")},handleSelectionChange:function(t){var e=this;this.selectArray=[],t.forEach(function(t){e.selectArray.push(t.id)})}},watch:{"options.flag":function(t){t||(this.options.name="")}}},r=(i("4449"),i("2877")),s={components:{add:Object(r.a)(o,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vehicleMaster"},[i("el-row",[i("cv-grid",{attrs:{params:{id:t.options.id},url:t.queryOtherProtocolGroup},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{label:"协议名称",prop:"protocolName","min-width":"150"}}),i("el-table-column",{attrs:{label:"平台名称",prop:"platName","min-width":"150"}})],1)],1),i("el-row",{staticStyle:{"margin-top":"20px"}},[i("div",{staticClass:"dialog-footer"},[i("el-button",{attrs:{type:"primary",loading:t.submitFalg},on:{click:t.save}},[t._v(t._s(t.$t("action.confirm")))]),i("el-button",{on:{click:function(e){t.options.flag=!1}}},[t._v(t._s(t.$t("action.cancel")))])],1)])],1)},[],!1,null,null,null).exports},mixins:[i("b0ad").a],data:function(){return{treeLoading:!0,vehicle_tree:null,table:{id:null},dialog:{id:"",title:"--",flag:!1,name:"add",size:"dialog-full"}}},computed:Object(a.a)({},Object(n.c)(["queryAttachInfoByCar"]),{_tableMethods:function(){return this.$refs.table}}),methods:{load:function(){this._tableMethods.tableInitial()},handlerMonitor:function(t){var e=t.data;this.table.id=e[0].id,this.dialog.id=e[0].id,this._tableMethods.tableInitial()},remove:function(t){var e=this;this.confirmPrompt().then(function(){e.$store.dispatch("deleteAttachPlat",{ids:t.row.id}).then(function(t){t.flag?(e.$message.success(e.$t("action.removeSuccess")),e._tableMethods.tableInitial()):e.$message.error(e.$t("error."+t.errorCode))})})},add:function(t){this.dialog.id?this.$service.mapParams(this.dialog,{flag:!0,size:"dialog-small",name:t.name,title:t.title}):this.$message.warning("请选择车辆")}},mounted:function(){var t=this;this.$http({url:"/monitor/findVehicleTreeInfoList"}).then(function(e){t.vehicle_tree=e.data,t.treeLoading=!1})}},l=(i("2399"),Object(r.a)(s,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vehicleMaster"},[i("cv-operation",[i("el-form-item",[i("cv-tool",{attrs:{name:t.$route.name,data:t.$store.getters.manageMenus,"is-remove":!1,"is-export":!1,"is-modify":!1,"is-search":!1,"is-add":!0},on:{add:t.add}})],1)],1),i("cv-content",[i("cv-tabs-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.treeLoading,expression:"treeLoading"}],staticClass:"vehiclemaster-tree",attrs:{slot:"aside","is-operation":!1,titles:["车辆选择","车辆列表"],"is-checked":!1,"tree-data":t.vehicle_tree,"node-monitor":t.handlerMonitor},slot:"aside"}),i("cv-grid",{ref:"table",attrs:{params:t.table,url:t.queryAttachInfoByCar,"is-initial":!1}},[i("el-table-column",{attrs:{label:"协议名称",prop:"protocolName","min-width":"150"}}),i("el-table-column",{attrs:{label:"平台名称",prop:"platName","min-width":"150"}}),i("el-table-column",{attrs:{label:t.$t("action.operation"),width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("cv-table-tool",{attrs:{name:t.$route.name,data:t.$store.getters.manageMenus,"is-modify":!1},on:{remove:function(i){return t.remove(e)}}})]}}])})],1)],1),i("el-dialog",{attrs:{visible:t.dialog.flag,title:t.dialog.title,"custom-class":t.dialog.size},on:{"update:visible":function(e){return t.$set(t.dialog,"flag",e)}}},[i(t.dialog.name,{tag:"component",attrs:{options:t.dialog},on:{confirm:function(e){return t.load()}}})],1)],1)},[],!1,null,null,null).exports);e.default=l},8755:function(t,e,i){},"945a":function(t,e,i){},b0ad:function(t,e,i){"use strict";(function(t){i("7f7f"),e.a={methods:{confirmPrompt:function(t,e){var i=this,a=t||this.$t("action.confirmIsRemove");return new Promise(function(t,n){i.$confirm(a,i.$t("action.tip"),{confirmButtonText:i.$t("action.confirm"),cancelButtonText:i.$t("action.cancel"),type:"warning"}).then(function(){t()}).catch(function(){"function"==typeof e&&e()})})},timeLimitFunc:function(t,e,i){if(t&&e)return((new Date(e)-new Date(t))/864e5).toFixed(1)<=i||this.$message.error({message:this.$t("请选择时间范围在"+i+"天内")});this.$message.error({message:this.$t("请选择时间范围")})},addRemoveUnique:function(t,e,i){var a=t.length,n=e.length;return n<a?{name:"add",data:this.$service.isUnique(t,e,i)}:a<n?{name:"remove",data:this.$service.isUnique(e,t,i)}:a==n?{name:"equal",data:this.$service.isUnique(t,e,i)}:void 0},showTooltip:function(t,e){var i=t.target,a=this.$refs[e];a.referenceElm=i,a.$refs.popper.style.display="none",a.doDestroy(),a.setExpectedState(!0),a.handleShowPopper()},mouseenterShowTip:function(t,e,i){var a=t.target;if(a.scrollWidth>a.offsetWidth||i)return this.showTooltip(t,e),i?i.startTime+"~"+i.endTime:a.innerText},mouseenterShowToolTip:function(t,e,i){var a=t.target;return this.showTooltip(t,e),!i&&a.innerText},mouseoverHideTip:function(t){var e=this.$refs[t];e&&(e.setExpectedState(!1),e.handleClosePopper())},asyncDownloadScript:function(e,i){var a=this,n=0<arguments.length&&void 0!==e?e:"Baidu",o=1<arguments.length?i:void 0;return t[n]?t[n]._preloader?t[n]._preloader:Promise.resolve(t[n]):(t[n]={},t[n]._preloader=new Promise(function(e,i){var r=document.createElement("script");r.src=o,t.document.body.appendChild(r),a.$service.isIe()&&a.$service.IE_VERSION<11?r.onreadystatechange=function(){"loaded"!=r.readyState&&"complete"!=r.readyState||(e(t[n]),t[n]._preloader=null)}:r.onload=function(){e(t[n]),t[n]._preloader=null}}),t[n]._preloader)}}}}).call(this,i("c8ba"))}}]);
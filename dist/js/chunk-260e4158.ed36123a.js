(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-260e4158"],{"1e87":function(t,e,n){},"498b":function(t,e,n){"use strict";var i=n("8a73");n.n(i).a},"4b5b":function(t,e,n){},"4fe0":function(t,e,n){"use strict";var i=n("1e87");n.n(i).a},"559b":function(t,e,n){},"72ab":function(t,e,n){"use strict";(function(t){n.d(e,"b",function(){return a}),n.d(e,"a",function(){return o}),n("7f7f");var i=n("9efd"),a=function(e,n){var i=0<arguments.length&&void 0!==e?e:"BMap",a=1<arguments.length?n:void 0;return t[i]?t[i]._preloader?t[i]._preloader:Promise.resolve(t[i]):(t[i]={},t[i]._preloader=new Promise(function(e,n){t._initMap=function(){e(t[i]),t[i]._preloader=null,t._initMap=null};var o=document.createElement("script");o.type="text/javascript",t.document.body.appendChild(o),o.src="".concat(a,"&callback=_initMap")}),t[i]._preloader)},o=function(e,n){var a=0<arguments.length&&void 0!==e?e:"Baidu",o=1<arguments.length?n:void 0;return t[a]?t[a]._preloader?t[a]._preloader:Promise.resolve(t[a]):(t[a]={},t[a]._preloader=new Promise(function(e,n){var r=document.createElement("script");r.src=o,t.document.body.appendChild(r),i.a.isIe()&&i.a.IE_VERSION<11?r.onreadystatechange=function(){"loaded"!=r.readyState&&"complete"!=r.readyState||(e(t[a]),t[a]._preloader=null)}:r.onload=function(){e(t[a]),t[a]._preloader=null}}),t[a]._preloader)}}).call(this,n("c8ba"))},"8a73":function(t,e,n){},"936d":function(t,e,n){"use strict";n.r(e),n("96cf");var i,a,o,r,s,l,h=n("3b8d"),c=n("cebc"),u=(n("28a5"),{props:{data:{}},computed:{_eChart:function(){return this.$refs.alarmcount}},data:function(){return{options:{title:{text:"报警实时统计",x:"center",top:"2%",textStyle:{color:"#fff"}},tooltip:{trigger:"axis",axisPointer:{animation:!1}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:[],axisLabel:{textStyle:{color:"#fff"},formatter:function(t){var e=t.split(" ");return e[0],e[1]}},splitLine:{show:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],axisLabel:{textStyle:{color:"#fff"}},splitLine:{lineStyle:{opacity:.1}},max:function(t){return t.max+20}},series:[{name:"实时报警",type:"line",showSymbol:!1,smooth:!0,hoverAnimation:!1,data:[],itemStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,1,0,[{offset:1,color:"#30ecd5"},{offset:0,color:"rgba(255,221,51,0.24)"}])}},areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,1,0,[{offset:1,color:"#30ecd5"},{offset:0,color:"rgba(255,221,51,0.24)"}])}}}]}}},watch:{data:function(t){t&&this.setData(t)}},methods:{setData:function(t){var e=t.time,n=this.options.xAxis.data.length,i=this.options.series[0].data.length;this.options.xAxis.data.push(e),this.options.series[0].data.push(t.count),60<=n&&this.options.xAxis.data.shift(),60<=i&&this.options.series[0].data.shift(),this._eChart.setOptions(this.options)}}}),p=n("2877"),g=Object(p.a)(u,function(){var t=this,e=t.$createElement;return(t._self._c||e)("cv-echart",{ref:"alarmcount",staticClass:"echartBox",attrs:{name:"line",data:t.options,dataValue:t.dataValue},on:{tigger:function(e){return t.setClick(!0)}},nativeOn:{click:function(e){return t.setClick(e)}}})},[],!1,null,null,null).exports,f=(n("7f7f"),n("ac6a"),{props:{data:{}},data:function(){return{dataItem:{}}},methods:{setBarItem:function(t){var e=t.slice(0,15),n=[],i=[];e.forEach(function(t){i.push(t.proviceName),n.push(t.alarmCount)});var a={yAxis:i,series:[{name:"总数",data:n}]};this.setBarShow(a)},setSeries:function(t){var e=[];return t.forEach(function(t){e.push({name:t.name,stack:"总量",type:"bar",itemStyle:{normal:{color:new echarts.graphic.LinearGradient(1,0,0,0,[{offset:0,color:"rgba(250,52,52,0.8)"},{offset:1,color:"rgba(247,185,94,0.8)"}])}},data:t.data,label:{normal:{show:!0,formatter:function(t){return t.data+"(次)"},position:"right"}}})}),e},setBarShow:function(t){this.dataItem=t?{title:{text:"报警分布",x:"center",textStyle:{color:"#fff"}},textStyle:{color:"#fff"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:"{b} : {c} (次)"},xAxis:{type:"value",splitLine:{show:!1},max:function(t){return t.max+100}},yAxis:{type:"category",data:t.yAxis,inverse:!0},series:this.setSeries(t.series)}:{yAxis:{type:"category",data:"暂无数据"},series:[]}}},watch:{data:function(t){t&&this.setBarItem(t)}},mounted:function(){this.setBarItem(this.data)}}),v=Object(p.a)(f,function(){var t=this.$createElement;return(this._self._c||t)("cv-echart",{staticClass:"echartBox",attrs:{name:"bar",data:this.dataItem}})},[],!1,null,null,null).exports,d={props:{data:{}},computed:{_eChart:function(){return this.$refs.actionEchart}},data:function(){return{options:{title:{text:"驾驶行为报警占比",x:"center",top:"2%",textStyle:{color:"#fff"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"驾驶行为",type:"pie",radius:"55%",center:["52%","58%"],data:[{value:0,name:"急加速"},{value:0,name:"急减速"},{value:0,name:"疲劳驾驶(100次)"},{value:0,name:"碰撞"},{value:0,name:"超速"},{value:0,name:"急转弯"},{value:0,name:"侧翻"}],color:["#6fe621","#4fccff","#4d7bf3","#fb497c","rgba(67,93,15,1)","#ffc760","#214e9f"],label:{normal:{show:!0,formatter:function(t){return t.name+":\n"+t.value+"("+t.percent+"%)"}}},itemStyle:{emphasis:{shadowBlur:15,shadowOffsetX:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},dataValue:[]}},methods:{setData:function(t){this.options.series[0].data=t,this._eChart.setOptions(this.options)}},watch:{data:function(t){t&&this.setData(t)}},mounted:function(){this.setData(this.data)}},m=Object(p.a)(d,function(){var t=this.$createElement;return(this._self._c||t)("cv-echart",{ref:"actionEchart",staticClass:"echartBox",attrs:{name:"pie",data:this.options,dataValue:this.dataValue}})},[],!1,null,null,null).exports,y=n("2f62"),x={props:{data:{},pointReady:{}},computed:Object(c.a)({},Object(y.c)(["mapName"])),data:function(){return{map:null,mapv:null,mapStyleJson:[{featureType:"water",elementType:"all",stylers:{color:"rgba(255,255,255)"}},{featureType:"land",elementType:"all",stylers:{color:"#091934"}},{featureType:"boundary",elementType:"geometry",stylers:{color:"#064f85"}},{featureType:"railway",elementType:"all",stylers:{visibility:"off"}},{featureType:"highway",elementType:"geometry",stylers:{color:"#004981"}},{featureType:"highway",elementType:"geometry.fill",stylers:{color:"#005b96",lightness:1}},{featureType:"highway",elementType:"labels",stylers:{visibility:"on"}},{featureType:"arterial",elementType:"geometry",stylers:{color:"#004981",lightness:-39}},{featureType:"arterial",elementType:"geometry.fill",stylers:{color:"#00508b"}},{featureType:"poi",elementType:"all",stylers:{visibility:"off"}},{featureType:"green",elementType:"all",stylers:{color:"#056197",visibility:"off"}},{featureType:"subway",elementType:"all",stylers:{visibility:"off"}},{featureType:"manmade",elementType:"all",stylers:{visibility:"off"}},{featureType:"local",elementType:"all",stylers:{visibility:"off"}},{featureType:"arterial",elementType:"labels",stylers:{visibility:"off"}},{featureType:"boundary",elementType:"geometry.fill",stylers:{color:"#029fd4"}},{featureType:"building",elementType:"all",stylers:{color:"#1a5787"}},{featureType:"label",elementType:"all",stylers:{visibility:"off"}},{featureType:"poi",elementType:"labels.text.fill",stylers:{color:"#ffffff",visibility:"off"}},{featureType:"poi",elementType:"labels.text.stroke",stylers:{color:"#1e1c1c",visibility:"off"}},{featureType:"administrative",elementType:"labels",stylers:{visibility:"on"}},{featureType:"road",elementType:"labels",stylers:{visibility:"off"}},{featureType:"districtlabel",elementType:"all",stylers:{visibility:"off"}}],datas:[],allPoints:[],onlinePoints:[],mapOk:!1}},methods:{mapReady:function(){this.map=this.$refs.map.mapMethods,this.map.setMapStyle(this.mapStyleJson);var t=this.map.point({lng:106.315651,lat:33.921992});this.map.moveToCenter(t,5),this.mapOk=!0},showAll:function(t){var e=n("fdf9"),i=new e.DataSet(t);new e.baiduMapLayer(this.map.map,i,{fillStyle:"rgba(200, 200, 0, 0.8)",bigData:"Point",size:1.2,draw:"simple"}),this.$emit("update:pointReady",!0)},showOnline:function(t){var e=n("fdf9"),i=new e.DataSet(t);new e.baiduMapLayer(this.map.map,i,{fillStyle:"rgba(255, 250, 250, 0.9)",size:1.5,draw:"simple",bigData:"Point",animation:{stepsRange:{start:0,end:10},trails:1,duration:6}})},GPSPointsHandle:function(t){var e=[],n=[];t.all.forEach(function(t){e.push({geometry:{type:"Point",coordinates:t}})}),t.online.forEach(function(t){n.push({geometry:{type:"Point",coordinates:t},time:10*Math.random()})}),this.allPoints=e,this.onlinePoints=n}},watch:{data:function(t){t&&this.GPSPointsHandle(t)},allPoints:function(t){this.showAll(t)},onlinePoints:function(t){this.showOnline(t)},mapOk:function(t){t&&this.GPSPointsHandle(this.data)}}},w=(n("dc97"),Object(p.a)(x,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"gpsBG"},[e("cv-baidu-map",{ref:"map",staticStyle:{width:"100",height:"100%"},attrs:{mapLoaded:this.mapReady}})],1)},[],!1,null,null,null).exports),_=(n("6b54"),n("c5f6"),{components:{scroll:{props:{count:{type:Number,default:0},countClassName:{default:"count-item-bg"}},data:function(){return{transform:"translateY(0%)"}},methods:{setTranslate:function(t){this.transform="translateY(".concat(100*-t,"%)")}},template:'\n                <li :class="[\'scroll-num-item\', countClassName]">\n                    <span class="num-item__bg" :style="{transform: transform}">\n                        <p>0</p>\n                        <p>1</p>\n                        <p>2</p>\n                        <p>3</p>\n                        <p>4</p>\n                        <p>5</p>\n                        <p>6</p>\n                        <p>7</p>\n                        <p>8</p>\n                        <p>9</p>\n                    </span>\n                </li>\n            '}},props:{count:{type:Number,default:0},digit:{type:Number,default:1},countClassName:{default:"count-item-bg"}},computed:{scroll:function(){return this.$refs.scroll}},watch:{count:function(t){var e=this;t.toString().split("").reverse().forEach(function(t,n){var i=e.scroll[e.digit-(n+1)];i&&i.setTranslate(t)})}}}),b=(n("d5a4"),{components:{scrollNum:Object(p.a)(_,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"scroll-num",attrs:{title:t.count}},t._l(t.digit,function(e){return n("scroll",{key:e,ref:"scroll",refInFor:!0,attrs:{countClassName:t.countClassName}})}),1)},[],!1,null,null,null).exports},props:{data:{}},data:function(){return{count:0,list:[{title:"入网",num:1e4,size:6},{title:"在线",num:2e4,size:6},{title:"离线",num:3e4,size:6},{title:"里程(10000km)",num:4e4,size:7},{title:"报警",num:5e4,size:8}]}},watch:{data:function(t){this.list.forEach(function(e){switch(e.title){case"入网":e.num=t.totalCount,e.size=(t.totalCount+"").length<=6?6:(t.totalCount+"").length;break;case"在线":e.num=t.onlineCount,e.size=(t.onlineCount+"").length<=6?6:(t.onlineCount+"").length;break;case"离线":e.num=t.offlineCount,e.size=(t.offlineCount+"").length<=6?6:(t.offlineCount+"").length;break;case"里程(10000km)":e.num=t.mileage,e.size=(t.mileage+"").length<=6?6:(t.mileage+"").length;break;case"报警":e.num=t.alarmCount,e.size=(t.alarmCount+"").length<=6?6:(t.alarmCount+"").length}})}}}),S=(n("498b"),Object(p.a)(b,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"displayHeader"},[n("div",{staticClass:"header"},[t._v("车联网大数据平台")]),n("ul",t._l(t.list,function(e){return n("li",{key:e.id,staticClass:"item"},[n("div",{staticClass:"item-box"},[n("scroll-num",{attrs:{count:Number(e.num),digit:e.size,"count-class-name":"scrollNum"}}),n("span",{staticClass:"item-box-title"},[t._v(t._s(e.title))])],1)])}),0)])},[],!1,null,null,null).exports),C={props:{data:{}},computed:{_echart:function(){return this.$refs.operationEchart}},data:function(){return{options:{title:{text:"报警统计",x:"center",top:"2%",textStyle:{color:"#fff"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},yAxis:{type:"value",splitLine:{show:!1},axisLabel:{textStyle:{color:"#fff"}}},xAxis:{type:"category",data:[],splitLine:{show:!1},inverse:!0,axisLabel:{textStyle:{color:"#fff"},formatter:function(t){var e=t.split("-");return e[0],e[1]+"-"+e[2]}},nameTextStyle:{align:"center"}},series:[]}}},methods:{setDate:function(t){this.options.xAxis.data=t.x,this.options.series=t.y,this._echart.setOptions(this.options)}},watch:{data:function(t){t&&this.setDate(t)}},mounted:function(){this.setDate(this.data)}},k=Object(p.a)(C,function(){var t=this.$createElement;return(this._self._c||t)("cv-echart",{ref:"operationEchart",staticClass:"echartBox",attrs:{name:"bar",data:this.options}})},[],!1,null,null,null).exports,L={props:{data:{}},data:function(){return{dataItem:{}}},methods:{setBarItem:function(t){var e=t.slice(0,15),n=[],i=[],a=[],o=[];e.forEach(function(t){o.push(t.proviceName),n.push(t.onlineCount),i.push(t.offlineCount),a.push(t.totalCount)});var r={yAxis:o,series:[{name:"在线",data:n,itemStyle:{normal:{color:"rgba(37,193,201,0.9)"}}},{name:"离线",data:i,itemStyle:{normal:{color:"rgba(129,201,37,0.9)"}}}]};this.setBarShow(r)},setSeries:function(t){var e=[];return t.forEach(function(t){e.push({name:t.name,stack:"总量",type:"bar",data:t.data,itemStyle:t.itemStyle})}),e},setBarShow:function(t){this.dataItem=t?{title:{text:"车辆分布",x:"center",textStyle:{color:"#fff"}},textStyle:{color:"#fff"},grid:{left:"5%",right:"4%",bottom:"3%",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{inverse:!0,type:"value",splitLine:{show:!1}},yAxis:{type:"category",position:"right",data:t.yAxis,inverse:!0},series:this.setSeries(t.series)}:{yAxis:{type:"category",data:"暂无数据"},series:[]}}},watch:{data:function(t){t?this.setBarItem(t):this.setBarShow()}},mounted:function(){this.setBarItem(this.data)}},M=Object(p.a)(L,function(){var t=this.$createElement;return(this._self._c||t)("cv-echart",{staticClass:"echartBox",attrs:{name:"bar",data:this.dataItem}})},[],!1,null,null,null).exports,E=n("72ab"),P={components:{NBalarmcount:g,NBalarmdistribution:v,NBdriveraction:m,NBgpsdistribution:w,displayHeader:S,NBoperateanalysis:k,NBvehicledistribution:M},data:function(){return{isReady:!1,socket:null,headerTime:null,headerData:[],vehicledistributionTime:null,vehicledistribution:[],alarmdistribution:[],actionsTime:null,actionDatas:[],alarmInterval:null,operationAlysisDatas:[],alarmOnline:{},GPSPoints:{},c1:"",c2:"",c3:"",c4:"",c5:"",c6:""}},methods:Object(c.a)({},Object(y.b)("bigDataShow",["getVehcileData","getVehcileMap","getVehcileAlarm","getDriverAnalyze","getOperationsAnalyze","getVehcileGps"]),{socketConnect:function(){var t=this,e=localStorage.getItem("token");this.socket=io(this.$COMMON.socketUrl,{query:{token:e,userId:this.$store.getters.user.id}}),this.socket.on("connect",function(e){setTimeout(function(e){t.c6="NBalarmcount"},100)}),this.socket.on("AlarmCountEvent",function(e){t.alarmOnline=e})},getHeader:(l=Object(h.a)(regeneratorRuntime.mark(function t(){var e,n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getVehcileData();case 2:e=t.sent,n=e.flag,i=e.data,n&&(this.headerData=i),n||(this.headerData=[]);case 7:case"end":return t.stop()}},t,this)})),function(){return l.apply(this,arguments)}),getVehicleMap:(s=Object(h.a)(regeneratorRuntime.mark(function t(){var e,n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getVehcileMap();case 2:e=t.sent,n=e.flag,i=e.data,n&&(this.vehicledistribution=i),""==this.c1&&(this.c1="NBvehicledistribution");case 7:case"end":return t.stop()}},t,this)})),function(){return s.apply(this,arguments)}),getAlarmDistribute:(r=Object(h.a)(regeneratorRuntime.mark(function t(){var e,n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getVehcileAlarm();case 2:e=t.sent,n=e.flag,i=e.data,n&&(this.alarmdistribution=i),""==this.c3&&(this.c3="NBalarmdistribution");case 7:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)}),getActions:(o=Object(h.a)(regeneratorRuntime.mark(function t(){var e,n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getDriverAnalyze();case 2:e=t.sent,n=e.flag,i=e.data,n&&(this.actionDatas=i),""==this.c5&&(this.c5="NBdriveraction");case 7:case"end":return t.stop()}},t,this)})),function(){return o.apply(this,arguments)}),getAnalysis:(a=Object(h.a)(regeneratorRuntime.mark(function t(){var e,n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getOperationsAnalyze();case 2:e=t.sent,n=e.flag,i=e.data,n&&(this.operationAlysisDatas=i),""==this.c4&&(this.c4="NBoperateanalysis");case 7:case"end":return t.stop()}},t,this)})),function(){return a.apply(this,arguments)}),getGPSpoints:(i=Object(h.a)(regeneratorRuntime.mark(function t(){var e,n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getVehcileGps();case 2:e=t.sent,n=e.flag,i=e.data,n&&(this.GPSPoints=i),""==this.c2&&(this.c2="NBgpsdistribution");case 7:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)})}),mounted:function(){var t=this;Object(E.b)("BMap","//api.map.baidu.com/api?v=2.0&ak=8GrVRotzGKj3xzIRu07hCzx2").then(function(e){Object(E.a)("Echarts","http://lib.cvtsp.com/echarts/echarts.min.js").then(function(e){t.getGPSpoints()})}),this.getHeader(),this.actionsTime=setInterval(function(e){t.getActions()},6e4),this.headerTime=setInterval(function(e){t.getHeader()},3e3),this.vehicledistributionTime=setInterval(function(e){t.getVehicleMap(),t.getAlarmDistribute(),t.getGPSpoints()},18e5)},destroyed:function(){clearInterval(this.headerTime),clearInterval(this.alarmInterval),this.socket.disconnect()},watch:{isReady:function(t){var e=this;t&&setTimeout(function(t){e.getVehicleMap(),e.getAlarmDistribute(),e.getAnalysis(),e.getActions(),e.socketConnect()},1500)}}},A=(n("4fe0"),Object(p.a)(P,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"containerBG"},[n("div",{staticClass:"row-one"},[n("display-header",{staticStyle:{position:"relative","z-index":"2"},attrs:{data:t.headerData}})],1),n("div",{staticClass:"row-two"},[n("div",{staticClass:"column-one"},[n(t.c1,{tag:"component",staticStyle:{position:"relative","z-index":"2"},attrs:{data:t.vehicledistribution}})],1),n("div",{staticClass:"column-two"},[n(t.c2,{tag:"component",attrs:{data:t.GPSPoints,pointReady:t.isReady},on:{"update:pointReady":function(e){t.isReady=e},"update:point-ready":function(e){t.isReady=e}}})],1),n("div",{staticClass:"column-three"},[n(t.c3,{tag:"component",attrs:{data:t.alarmdistribution}})],1)]),n("div",{staticClass:"row-three"},[n("div",{staticClass:"column-one"},[n(t.c4,{tag:"component",attrs:{data:t.operationAlysisDatas}})],1),n("div",{staticClass:"column-two"},[n(t.c5,{tag:"component",attrs:{data:t.actionDatas}})],1),n("div",{staticClass:"column-three"},[n(t.c6,{tag:"component",attrs:{data:t.alarmOnline}})],1)])])},[],!1,null,null,null));e.default=A.exports},d5a4:function(t,e,n){"use strict";var i=n("4b5b");n.n(i).a},dc97:function(t,e,n){"use strict";var i=n("559b");n.n(i).a},fdf9:function(t,e,n){(function(t){!function(e){"use strict";var n=function(t){t&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height)};function i(){this._subscribers={}}i.prototype.on=function(t,e){var n=this._subscribers[t];n||(n=[],this._subscribers[t]=n),n.push({callback:e})},i.prototype.off=function(t,e){var n=this._subscribers[t];if(n)for(var i=0;i<n.length;i++)n[i].callback==e&&(n.splice(i,1),i--)},i.prototype._trigger=function(t,e,n){if("*"==t)throw new Error("Cannot trigger event *");var i=[];t in this._subscribers&&(i=i.concat(this._subscribers[t])),"*"in this._subscribers&&(i=i.concat(this._subscribers["*"]));for(var a=0,o=i.length;a<o;a++){var r=i[a];r.callback&&r.callback(t,e,n||null)}};var a={municipalities:[{n:"北京",g:"116.395645,39.929986|12"},{n:"上海",g:"121.487899,31.249162|12"},{n:"天津",g:"117.210813,39.14393|12"},{n:"重庆",g:"106.530635,29.544606|12"}],provinces:[{n:"安徽",g:"117.216005,31.859252|8",cities:[{n:"合肥",g:"117.282699,31.866942|12"},{n:"安庆",g:"117.058739,30.537898|13"},{n:"蚌埠",g:"117.35708,32.929499|13"},{n:"亳州",g:"115.787928,33.871211|13"},{n:"巢湖",g:"117.88049,31.608733|13"},{n:"池州",g:"117.494477,30.660019|14"},{n:"滁州",g:"118.32457,32.317351|13"},{n:"阜阳",g:"115.820932,32.901211|13"},{n:"淮北",g:"116.791447,33.960023|13"},{n:"淮南",g:"117.018639,32.642812|13"},{n:"黄山",g:"118.29357,29.734435|13"},{n:"六安",g:"116.505253,31.755558|13"},{n:"马鞍山",g:"118.515882,31.688528|13"},{n:"宿州",g:"116.988692,33.636772|13"},{n:"铜陵",g:"117.819429,30.94093|14"},{n:"芜湖",g:"118.384108,31.36602|12"},{n:"宣城",g:"118.752096,30.951642|13"}]},{n:"福建",g:"117.984943,26.050118|8",cities:[{n:"福州",g:"119.330221,26.047125|12"},{n:"龙岩",g:"117.017997,25.078685|13"},{n:"南平",g:"118.181883,26.643626|13"},{n:"宁德",g:"119.542082,26.656527|14"},{n:"莆田",g:"119.077731,25.44845|13"},{n:"泉州",g:"118.600362,24.901652|12"},{n:"三明",g:"117.642194,26.270835|14"},{n:"厦门",g:"118.103886,24.489231|12"},{n:"漳州",g:"117.676205,24.517065|12"}]},{n:"甘肃",g:"102.457625,38.103267|6",cities:[{n:"兰州",g:"103.823305,36.064226|12"},{n:"白银",g:"104.171241,36.546682|13"},{n:"定西",g:"104.626638,35.586056|13"},{n:"甘南州",g:"102.917442,34.992211|14"},{n:"嘉峪关",g:"98.281635,39.802397|13"},{n:"金昌",g:"102.208126,38.516072|13"},{n:"酒泉",g:"98.508415,39.741474|13"},{n:"临夏州",g:"103.215249,35.598514|13"},{n:"陇南",g:"104.934573,33.39448|14"},{n:"平凉",g:"106.688911,35.55011|13"},{n:"庆阳",g:"107.644227,35.726801|13"},{n:"天水",g:"105.736932,34.584319|13"},{n:"武威",g:"102.640147,37.933172|13"},{n:"张掖",g:"100.459892,38.93932|13"}]},{n:"广东",g:"113.394818,23.408004|8",cities:[{n:"广州",g:"113.30765,23.120049|12"},{n:"潮州",g:"116.630076,23.661812|13"},{n:"东莞",g:"113.763434,23.043024|12"},{n:"佛山",g:"113.134026,23.035095|13"},{n:"河源",g:"114.713721,23.757251|12"},{n:"惠州",g:"114.410658,23.11354|12"},{n:"江门",g:"113.078125,22.575117|13"},{n:"揭阳",g:"116.379501,23.547999|13"},{n:"茂名",g:"110.931245,21.668226|13"},{n:"梅州",g:"116.126403,24.304571|13"},{n:"清远",g:"113.040773,23.698469|13"},{n:"汕头",g:"116.72865,23.383908|13"},{n:"汕尾",g:"115.372924,22.778731|14"},{n:"韶关",g:"113.594461,24.80296|13"},{n:"深圳",g:"114.025974,22.546054|12"},{n:"阳江",g:"111.97701,21.871517|14"},{n:"云浮",g:"112.050946,22.937976|13"},{n:"湛江",g:"110.365067,21.257463|13"},{n:"肇庆",g:"112.479653,23.078663|13"},{n:"中山",g:"113.42206,22.545178|12"},{n:"珠海",g:"113.562447,22.256915|13"}]},{n:"广西",g:"108.924274,23.552255|7",cities:[{n:"南宁",g:"108.297234,22.806493|12"},{n:"百色",g:"106.631821,23.901512|13"},{n:"北海",g:"109.122628,21.472718|13"},{n:"崇左",g:"107.357322,22.415455|14"},{n:"防城港",g:"108.351791,21.617398|15"},{n:"桂林",g:"110.26092,25.262901|12"},{n:"贵港",g:"109.613708,23.103373|13"},{n:"河池",g:"108.069948,24.699521|14"},{n:"贺州",g:"111.552594,24.411054|14"},{n:"来宾",g:"109.231817,23.741166|14"},{n:"柳州",g:"109.422402,24.329053|12"},{n:"钦州",g:"108.638798,21.97335|13"},{n:"梧州",g:"111.305472,23.485395|13"},{n:"玉林",g:"110.151676,22.643974|14"}]},{n:"贵州",g:"106.734996,26.902826|8",cities:[{n:"贵阳",g:"106.709177,26.629907|12"},{n:"安顺",g:"105.92827,26.228595|13"},{n:"毕节地区",g:"105.300492,27.302612|14"},{n:"六盘水",g:"104.852087,26.591866|13"},{n:"铜仁地区",g:"109.196161,27.726271|14"},{n:"遵义",g:"106.93126,27.699961|13"},{n:"黔西南州",g:"104.900558,25.095148|11"},{n:"黔东南州",g:"107.985353,26.583992|11"},{n:"黔南州",g:"107.523205,26.264536|11"}]},{n:"海南",g:"109.733755,19.180501|9",cities:[{n:"海口",g:"110.330802,20.022071|13"},{n:"白沙",g:"109.358586,19.216056|12"},{n:"保亭",g:"109.656113,18.597592|12"},{n:"昌江",g:"109.0113,19.222483|12"},{n:"儋州",g:"109.413973,19.571153|13"},{n:"澄迈",g:"109.996736,19.693135|13"},{n:"东方",g:"108.85101,18.998161|13"},{n:"定安",g:"110.32009,19.490991|13"},{n:"琼海",g:"110.414359,19.21483|13"},{n:"琼中",g:"109.861849,19.039771|12"},{n:"乐东",g:"109.062698,18.658614|12"},{n:"临高",g:"109.724101,19.805922|13"},{n:"陵水",g:"109.948661,18.575985|12"},{n:"三亚",g:"109.522771,18.257776|12"},{n:"屯昌",g:"110.063364,19.347749|13"},{n:"万宁",g:"110.292505,18.839886|13"},{n:"文昌",g:"110.780909,19.750947|13"},{n:"五指山",g:"109.51775,18.831306|13"}]},{n:"河北",g:"115.661434,38.61384|7",cities:[{n:"石家庄",g:"114.522082,38.048958|12"},{n:"保定",g:"115.49481,38.886565|13"},{n:"沧州",g:"116.863806,38.297615|13"},{n:"承德",g:"117.933822,40.992521|14"},{n:"邯郸",g:"114.482694,36.609308|13"},{n:"衡水",g:"115.686229,37.746929|13"},{n:"廊坊",g:"116.703602,39.518611|13"},{n:"秦皇岛",g:"119.604368,39.945462|12"},{n:"唐山",g:"118.183451,39.650531|13"},{n:"邢台",g:"114.520487,37.069531|13"},{n:"张家口",g:"114.893782,40.811188|13"}]},{n:"河南",g:"113.486804,34.157184|7",cities:[{n:"郑州",g:"113.649644,34.75661|12"},{n:"安阳",g:"114.351807,36.110267|12"},{n:"鹤壁",g:"114.29777,35.755426|13"},{n:"焦作",g:"113.211836,35.234608|13"},{n:"开封",g:"114.351642,34.801854|13"},{n:"洛阳",g:"112.447525,34.657368|12"},{n:"漯河",g:"114.046061,33.576279|13"},{n:"南阳",g:"112.542842,33.01142|13"},{n:"平顶山",g:"113.300849,33.745301|13"},{n:"濮阳",g:"115.026627,35.753298|12"},{n:"三门峡",g:"111.181262,34.78332|13"},{n:"商丘",g:"115.641886,34.438589|13"},{n:"新乡",g:"113.91269,35.307258|13"},{n:"信阳",g:"114.085491,32.128582|13"},{n:"许昌",g:"113.835312,34.02674|13"},{n:"周口",g:"114.654102,33.623741|13"},{n:"驻马店",g:"114.049154,32.983158|13"}]},{n:"黑龙江",g:"128.047414,47.356592|6",cities:[{n:"哈尔滨",g:"126.657717,45.773225|12"},{n:"大庆",g:"125.02184,46.596709|12"},{n:"大兴安岭地区",g:"124.196104,51.991789|10"},{n:"鹤岗",g:"130.292472,47.338666|13"},{n:"黑河",g:"127.50083,50.25069|14"},{n:"鸡西",g:"130.941767,45.32154|13"},{n:"佳木斯",g:"130.284735,46.81378|12"},{n:"牡丹江",g:"129.608035,44.588521|13"},{n:"七台河",g:"131.019048,45.775005|14"},{n:"齐齐哈尔",g:"123.987289,47.3477|13"},{n:"双鸭山",g:"131.171402,46.655102|13"},{n:"绥化",g:"126.989095,46.646064|13"},{n:"伊春",g:"128.910766,47.734685|14"}]},{n:"湖北",g:"112.410562,31.209316|8",cities:[{n:"武汉",g:"114.3162,30.581084|12"},{n:"鄂州",g:"114.895594,30.384439|14"},{n:"恩施",g:"109.517433,30.308978|14"},{n:"黄冈",g:"114.906618,30.446109|14"},{n:"黄石",g:"115.050683,30.216127|13"},{n:"荆门",g:"112.21733,31.042611|13"},{n:"荆州",g:"112.241866,30.332591|12"},{n:"潜江",g:"112.768768,30.343116|13"},{n:"神农架林区",g:"110.487231,31.595768|13"},{n:"十堰",g:"110.801229,32.636994|13"},{n:"随州",g:"113.379358,31.717858|13"},{n:"天门",g:"113.12623,30.649047|13"},{n:"仙桃",g:"113.387448,30.293966|13"},{n:"咸宁",g:"114.300061,29.880657|13"},{n:"襄阳",g:"112.176326,32.094934|12"},{n:"孝感",g:"113.935734,30.927955|13"},{n:"宜昌",g:"111.310981,30.732758|13"}]},{n:"湖南",g:"111.720664,27.695864|7",cities:[{n:"长沙",g:"112.979353,28.213478|12"},{n:"常德",g:"111.653718,29.012149|12"},{n:"郴州",g:"113.037704,25.782264|13"},{n:"衡阳",g:"112.583819,26.898164|13"},{n:"怀化",g:"109.986959,27.557483|13"},{n:"娄底",g:"111.996396,27.741073|13"},{n:"邵阳",g:"111.461525,27.236811|13"},{n:"湘潭",g:"112.935556,27.835095|13"},{n:"湘西州",g:"109.745746,28.317951|14"},{n:"益阳",g:"112.366547,28.588088|13"},{n:"永州",g:"111.614648,26.435972|13"},{n:"岳阳",g:"113.146196,29.378007|13"},{n:"张家界",g:"110.48162,29.124889|13"},{n:"株洲",g:"113.131695,27.827433|13"}]},{n:"江苏",g:"119.368489,33.013797|8",cities:[{n:"南京",g:"118.778074,32.057236|12"},{n:"常州",g:"119.981861,31.771397|12"},{n:"淮安",g:"119.030186,33.606513|12"},{n:"连云港",g:"119.173872,34.601549|12"},{n:"南通",g:"120.873801,32.014665|12"},{n:"苏州",g:"120.619907,31.317987|12"},{n:"宿迁",g:"118.296893,33.95205|13"},{n:"泰州",g:"119.919606,32.476053|13"},{n:"无锡",g:"120.305456,31.570037|12"},{n:"徐州",g:"117.188107,34.271553|12"},{n:"盐城",g:"120.148872,33.379862|12"},{n:"扬州",g:"119.427778,32.408505|13"},{n:"镇江",g:"119.455835,32.204409|13"}]},{n:"江西",g:"115.676082,27.757258|7",cities:[{n:"南昌",g:"115.893528,28.689578|12"},{n:"抚州",g:"116.360919,27.954545|13"},{n:"赣州",g:"114.935909,25.845296|13"},{n:"吉安",g:"114.992039,27.113848|13"},{n:"景德镇",g:"117.186523,29.303563|12"},{n:"九江",g:"115.999848,29.71964|13"},{n:"萍乡",g:"113.859917,27.639544|13"},{n:"上饶",g:"117.955464,28.457623|13"},{n:"新余",g:"114.947117,27.822322|13"},{n:"宜春",g:"114.400039,27.81113|13"},{n:"鹰潭",g:"117.03545,28.24131|13"}]},{n:"吉林",g:"126.262876,43.678846|7",cities:[{n:"长春",g:"125.313642,43.898338|12"},{n:"白城",g:"122.840777,45.621086|13"},{n:"白山",g:"126.435798,41.945859|13"},{n:"吉林",g:"126.564544,43.871988|12"},{n:"辽源",g:"125.133686,42.923303|13"},{n:"四平",g:"124.391382,43.175525|12"},{n:"松原",g:"124.832995,45.136049|13"},{n:"通化",g:"125.94265,41.736397|13"},{n:"延边",g:"129.485902,42.896414|13"}]},{n:"辽宁",g:"122.753592,41.6216|8",cities:[{n:"沈阳",g:"123.432791,41.808645|12"},{n:"鞍山",g:"123.007763,41.118744|13"},{n:"本溪",g:"123.778062,41.325838|12"},{n:"朝阳",g:"120.446163,41.571828|13"},{n:"大连",g:"121.593478,38.94871|12"},{n:"丹东",g:"124.338543,40.129023|12"},{n:"抚顺",g:"123.92982,41.877304|12"},{n:"阜新",g:"121.660822,42.01925|14"},{n:"葫芦岛",g:"120.860758,40.74303|13"},{n:"锦州",g:"121.147749,41.130879|13"},{n:"辽阳",g:"123.172451,41.273339|14"},{n:"盘锦",g:"122.073228,41.141248|13"},{n:"铁岭",g:"123.85485,42.299757|13"},{n:"营口",g:"122.233391,40.668651|13"}]},{n:"内蒙古",g:"114.415868,43.468238|5",cities:[{n:"呼和浩特",g:"111.660351,40.828319|12"},{n:"阿拉善盟",g:"105.695683,38.843075|14"},{n:"包头",g:"109.846239,40.647119|12"},{n:"巴彦淖尔",g:"107.423807,40.76918|12"},{n:"赤峰",g:"118.930761,42.297112|12"},{n:"鄂尔多斯",g:"109.993706,39.81649|12"},{n:"呼伦贝尔",g:"119.760822,49.201636|12"},{n:"通辽",g:"122.260363,43.633756|12"},{n:"乌海",g:"106.831999,39.683177|13"},{n:"乌兰察布",g:"113.112846,41.022363|12"},{n:"锡林郭勒盟",g:"116.02734,43.939705|11"},{n:"兴安盟",g:"122.048167,46.083757|11"}]},{n:"宁夏",g:"106.155481,37.321323|8",cities:[{n:"银川",g:"106.206479,38.502621|12"},{n:"固原",g:"106.285268,36.021523|13"},{n:"石嘴山",g:"106.379337,39.020223|13"},{n:"吴忠",g:"106.208254,37.993561|14"},{n:"中卫",g:"105.196754,37.521124|14"}]},{n:"青海",g:"96.202544,35.499761|7",cities:[{n:"西宁",g:"101.767921,36.640739|12"},{n:"果洛州",g:"100.223723,34.480485|11"},{n:"海东地区",g:"102.085207,36.51761|11"},{n:"海北州",g:"100.879802,36.960654|11"},{n:"海南州",g:"100.624066,36.284364|11"},{n:"海西州",g:"97.342625,37.373799|11"},{n:"黄南州",g:"102.0076,35.522852|11"},{n:"玉树州",g:"97.013316,33.00624|14"}]},{n:"山东",g:"118.527663,36.09929|8",cities:[{n:"济南",g:"117.024967,36.682785|12"},{n:"滨州",g:"117.968292,37.405314|12"},{n:"东营",g:"118.583926,37.487121|12"},{n:"德州",g:"116.328161,37.460826|12"},{n:"菏泽",g:"115.46336,35.26244|13"},{n:"济宁",g:"116.600798,35.402122|13"},{n:"莱芜",g:"117.684667,36.233654|13"},{n:"聊城",g:"115.986869,36.455829|12"},{n:"临沂",g:"118.340768,35.072409|12"},{n:"青岛",g:"120.384428,36.105215|12"},{n:"日照",g:"119.50718,35.420225|12"},{n:"泰安",g:"117.089415,36.188078|13"},{n:"威海",g:"122.093958,37.528787|13"},{n:"潍坊",g:"119.142634,36.716115|12"},{n:"烟台",g:"121.309555,37.536562|12"},{n:"枣庄",g:"117.279305,34.807883|13"},{n:"淄博",g:"118.059134,36.804685|12"}]},{n:"山西",g:"112.515496,37.866566|7",cities:[{n:"太原",g:"112.550864,37.890277|12"},{n:"长治",g:"113.120292,36.201664|12"},{n:"大同",g:"113.290509,40.113744|12"},{n:"晋城",g:"112.867333,35.499834|13"},{n:"晋中",g:"112.738514,37.693362|13"},{n:"临汾",g:"111.538788,36.099745|13"},{n:"吕梁",g:"111.143157,37.527316|14"},{n:"朔州",g:"112.479928,39.337672|13"},{n:"忻州",g:"112.727939,38.461031|12"},{n:"阳泉",g:"113.569238,37.869529|13"},{n:"运城",g:"111.006854,35.038859|13"}]},{n:"陕西",g:"109.503789,35.860026|7",cities:[{n:"西安",g:"108.953098,34.2778|12"},{n:"安康",g:"109.038045,32.70437|13"},{n:"宝鸡",g:"107.170645,34.364081|12"},{n:"汉中",g:"107.045478,33.081569|13"},{n:"商洛",g:"109.934208,33.873907|13"},{n:"铜川",g:"108.968067,34.908368|13"},{n:"渭南",g:"109.483933,34.502358|13"},{n:"咸阳",g:"108.707509,34.345373|13"},{n:"延安",g:"109.50051,36.60332|13"},{n:"榆林",g:"109.745926,38.279439|12"}]},{n:"四川",g:"102.89916,30.367481|7",cities:[{n:"成都",g:"104.067923,30.679943|12"},{n:"阿坝州",g:"102.228565,31.905763|15"},{n:"巴中",g:"106.757916,31.869189|14"},{n:"达州",g:"107.494973,31.214199|14"},{n:"德阳",g:"104.402398,31.13114|13"},{n:"甘孜州",g:"101.969232,30.055144|15"},{n:"广安",g:"106.63572,30.463984|13"},{n:"广元",g:"105.819687,32.44104|13"},{n:"乐山",g:"103.760824,29.600958|13"},{n:"凉山州",g:"102.259591,27.892393|14"},{n:"泸州",g:"105.44397,28.89593|14"},{n:"南充",g:"106.105554,30.800965|13"},{n:"眉山",g:"103.84143,30.061115|13"},{n:"绵阳",g:"104.705519,31.504701|12"},{n:"内江",g:"105.073056,29.599462|13"},{n:"攀枝花",g:"101.722423,26.587571|14"},{n:"遂宁",g:"105.564888,30.557491|12"},{n:"雅安",g:"103.009356,29.999716|13"},{n:"宜宾",g:"104.633019,28.769675|13"},{n:"资阳",g:"104.63593,30.132191|13"},{n:"自贡",g:"104.776071,29.359157|13"}]},{n:"西藏",g:"89.137982,31.367315|6",cities:[{n:"拉萨",g:"91.111891,29.662557|13"},{n:"阿里地区",g:"81.107669,30.404557|11"},{n:"昌都地区",g:"97.185582,31.140576|15"},{n:"林芝地区",g:"94.349985,29.666941|11"},{n:"那曲地区",g:"92.067018,31.48068|14"},{n:"日喀则地区",g:"88.891486,29.269023|14"},{n:"山南地区",g:"91.750644,29.229027|11"}]},{n:"新疆",g:"85.614899,42.127001|6",cities:[{n:"乌鲁木齐",g:"87.564988,43.84038|12"},{n:"阿拉尔",g:"81.291737,40.61568|13"},{n:"阿克苏地区",g:"80.269846,41.171731|12"},{n:"阿勒泰地区",g:"88.137915,47.839744|13"},{n:"巴音郭楞",g:"86.121688,41.771362|12"},{n:"博尔塔拉州",g:"82.052436,44.913651|11"},{n:"昌吉州",g:"87.296038,44.007058|13"},{n:"哈密地区",g:"93.528355,42.858596|13"},{n:"和田地区",g:"79.930239,37.116774|13"},{n:"喀什地区",g:"75.992973,39.470627|12"},{n:"克拉玛依",g:"84.88118,45.594331|13"},{n:"克孜勒苏州",g:"76.137564,39.750346|11"},{n:"石河子",g:"86.041865,44.308259|13"},{n:"塔城地区",g:"82.974881,46.758684|12"},{n:"图木舒克",g:"79.198155,39.889223|13"},{n:"吐鲁番地区",g:"89.181595,42.96047|13"},{n:"五家渠",g:"87.565449,44.368899|13"},{n:"伊犁州",g:"81.297854,43.922248|11"}]},{n:"云南",g:"101.592952,24.864213|7",cities:[{n:"昆明",g:"102.714601,25.049153|12"},{n:"保山",g:"99.177996,25.120489|13"},{n:"楚雄州",g:"101.529382,25.066356|13"},{n:"大理州",g:"100.223675,25.5969|14"},{n:"德宏州",g:"98.589434,24.44124|14"},{n:"迪庆州",g:"99.713682,27.831029|14"},{n:"红河州",g:"103.384065,23.367718|11"},{n:"丽江",g:"100.229628,26.875351|13"},{n:"临沧",g:"100.092613,23.887806|14"},{n:"怒江州",g:"98.859932,25.860677|14"},{n:"普洱",g:"100.980058,22.788778|14"},{n:"曲靖",g:"103.782539,25.520758|12"},{n:"昭通",g:"103.725021,27.340633|13"},{n:"文山",g:"104.089112,23.401781|14"},{n:"西双版纳",g:"100.803038,22.009433|13"},{n:"玉溪",g:"102.545068,24.370447|13"}]},{n:"浙江",g:"119.957202,29.159494|8",cities:[{n:"杭州",g:"120.219375,30.259244|12"},{n:"湖州",g:"120.137243,30.877925|12"},{n:"嘉兴",g:"120.760428,30.773992|13"},{n:"金华",g:"119.652576,29.102899|12"},{n:"丽水",g:"119.929576,28.4563|13"},{n:"宁波",g:"121.579006,29.885259|12"},{n:"衢州",g:"118.875842,28.95691|12"},{n:"绍兴",g:"120.592467,30.002365|13"},{n:"台州",g:"121.440613,28.668283|13"},{n:"温州",g:"120.690635,28.002838|12"},{n:"舟山",g:"122.169872,30.03601|13"}]}],other:[{n:"香港",g:"114.186124,22.293586|11"},{n:"澳门",g:"113.557519,22.204118|13"},{n:"台湾",g:"120.961454,23.80406|8"}]};function o(t){var e=t.split("|");return e[0]=e[0].split(","),{lng:parseFloat(e[0][0]),lat:parseFloat(e[0][1])}}var r={getProvinceNameByCityName:function(t){for(var e=a.provinces,n=0;n<e.length;n++)for(var i=e[n].n,o=e[n].cities,r=0;r<o.length;r++)if(o[r].n==t)return i;return null},getCenterByCityName:function(t){t=t.replace("市","");for(var e=0;e<a.municipalities.length;e++)if(a.municipalities[e].n==t)return o(a.municipalities[e].g);for(e=0;e<a.other.length;e++)if(a.other[e].n==t)return o(a.other[e].g);var n=a.provinces;for(e=0;e<n.length;e++){if(n[e].n==t)return o(n[e].g);for(var i=n[e].cities,r=0;r<i.length;r++)if(i[r].n==t)return o(i[r].g)}return null}},s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=function t(e,n,i){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,n);if(void 0===a){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in a)return a.value;var r=a.get;return void 0!==r?r.call(i):void 0},c=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},u=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e};function p(t,e){i.bind(this)(),this._options=e||{},this._data=[],t&&this.add(t)}(p.prototype=i.prototype).add=function(t,e){if(Array.isArray(t))for(var n=0,i=t.length;n<i;n++){if(t[n].time&&14==t[n].time.length&&"20"==t[n].time.substr(0,2)){var a=t[n].time;t[n].time=new Date(a.substr(0,4)+"-"+a.substr(4,2)+"-"+a.substr(6,2)+" "+a.substr(8,2)+":"+a.substr(10,2)+":"+a.substr(12,2)).getTime()}this._data.push(t[n])}else{if(!(t instanceof Object))throw new Error("Unknown dataType");this._data.push(t)}this._dataCache=JSON.parse(JSON.stringify(this._data))},p.prototype.reset=function(){this._data=JSON.parse(JSON.stringify(this._dataCache))},p.prototype.get=function(t){t=t||{},new Date;var e=this._data;if(new Date,t.filter){for(var n=[],i=0;i<e.length;i++)t.filter(e[i])&&n.push(e[i]);e=n}return t.transferCoordinate&&(e=this.transferCoordinate(e,t.transferCoordinate,t.fromColumn,t.toColumn)),e},p.prototype.set=function(t){this._set(t),this._trigger("change")},p.prototype._set=function(t){this.clear(),this.add(t)},p.prototype.clear=function(t){this._data=[]},p.prototype.remove=function(t){},p.prototype.update=function(t,e){for(var n=this._data,i=0;i<n.length;i++)if(e){var a=!0;for(var o in e)n[i][o]!=e[o]&&(a=!1);a&&t&&t(n[i])}else t&&t(n[i]);this._dataCache=JSON.parse(JSON.stringify(this._data)),this._trigger("change")},p.prototype.transferCoordinate=function(t,e,n,i){i=i||"_coordinates",n=n||"coordinates";for(var a=0;a<t.length;a++){var o=t[a].geometry,r=o[n];switch(o.type){case"Point":o[i]=e(r);break;case"LineString":for(var s=[],l=0;l<r.length;l++)s.push(e(r[l]));o[i]=s;break;case"MultiLineString":case"Polygon":s=u(r);o[i]=s;break;case"MultiPolygon":s=[];for(var h=0;h<r.length;h++){var c=r[h];c=u(c);s.push(c)}o[i]=s}}function u(t){for(var n=[],i=0;i<t.length;i++){for(var a=t[i],o=[],r=0;r<a.length;r++)o.push(e(a[r]));n.push(o)}return n}return t},p.prototype.initGeometry=function(t){t?this._data.forEach(function(e){e.geometry=t(e)}):this._data.forEach(function(t){if(!t.geometry)if(t.lng&&t.lat)t.geometry={type:"Point",coordinates:[t.lng,t.lat]};else if(t.city){var e=r.getCenterByCityName(t.city);e&&(t.geometry={type:"Point",coordinates:[e.lng,e.lat]})}})},p.prototype.getMax=function(t){var e=this._data;if(e&&!(e.length<=0)){for(var n=parseFloat(e[0][t]),i=1;i<e.length;i++){var a=parseFloat(e[i][t]);n<a&&(n=a)}return n}},p.prototype.getSum=function(t){var e=this._data;if(e&&!(e.length<=0)){for(var n=0,i=0;i<e.length;i++)e[i][t]&&(n+=parseFloat(e[i][t]));return n}},p.prototype.getMin=function(t){var e=this._data;if(e&&!(e.length<=0)){for(var n=parseFloat(e[0][t]),i=1;i<e.length;i++){var a=parseFloat(e[i][t]);a<n&&(n=a)}return n}},p.prototype.getUnique=function(t){var e=this._data;if(e&&!(e.length<=0)){for(var n={},i=1;i<e.length;i++)n[e[i][t]]=!0;e=[];for(var a in n)e.push(a);return e}};var g={drawDataSet:function(t,e,n){for(var i=e instanceof p?e.get():e,a=0,o=i.length;a<o;a++){var r=i[a];this.draw(t,r,n)}},draw:function(t,e,n){var i=e.geometry.type,a=e.geometry._coordinates||e.geometry.coordinates,o=n.symbol||"circle";switch(i){case"Point":var r=e._size||e.size||n._size||n.size||5;"circle"===o?("Point"===n.bigData&&t.moveTo(a[0],a[1]),t.arc(a[0],a[1],r,0,2*Math.PI)):"rect"===o?t.rect(a[0]-r/2,a[1]-r/2,r,r):"honeycomb"===o&&function(t,e,n,i){for(var a=0;a<6;a++){var o=(r={x:e,y:n},s=i,l=60*a+30,h=Math.PI/180*l,[r.x+s*Math.cos(h),r.y+s*Math.sin(h)]);t.lineTo(o[0],o[1])}var r,s,l,h}(t,a[0],a[1],r);break;case"LineString":this.drawLineString(t,a);break;case"MultiLineString":for(var s=0;s<a.length;s++){var l=a[s];this.drawLineString(t,l)}break;case"Polygon":this.drawPolygon(t,a);break;case"MultiPolygon":for(s=0;s<a.length;s++){var h=a[s];this.drawPolygon(t,h),n.multiPolygonDraw&&n.multiPolygonDraw()}}},drawLineString:function(t,e){for(var n=0;n<e.length;n++){var i=e[n][0],a=e[n][1];0==n?t.moveTo(i,a):t.lineTo(i,a)}},drawPolygon:function(t,e){t.beginPath();for(var n=0;n<e.length;n++){var i=e[n];t.moveTo(i[0][0],i[0][1]);for(var a=1;a<i.length;a++)t.lineTo(i[a][0],i[a][1]);t.lineTo(i[0][0],i[0][1]),t.closePath()}}},f={draw:function(t,e,n){var i=e instanceof p?e.get():e;for(var a in t.save(),n)t[a]=n[a];if(n.bigData){t.save(),t.beginPath();for(var o=0,r=i.length;o<r;o++){var s=i[o];g.draw(t,s,n)}var l=n.bigData;"Point"==l||"Polygon"==l||"MultiPolygon"==l?(t.fill(),t.lineDash&&t.setLineDash(t.lineDash),s.lineDash&&t.setLineDash(s.lineDash),(s.strokeStyle||n.strokeStyle)&&n.lineWidth&&t.stroke()):"LineString"!=l&&"MultiLineString"!=l||t.stroke(),t.restore()}else for(o=0,r=i.length;o<r;o++){s=i[o];t.save(),(s.fillStyle||s._fillStyle)&&(t.fillStyle=s.fillStyle||s._fillStyle),(s.strokeStyle||s._strokeStyle)&&(t.strokeStyle=s.strokeStyle||s._strokeStyle),t.lineDash&&t.setLineDash(t.lineDash),s.lineDash&&t.setLineDash(s.lineDash);l=s.geometry.type;t.beginPath(),g.draw(t,s,n),n.multiPolygonDraw=function(){t.fill(),(s.strokeStyle||n.strokeStyle)&&n.lineWidth&&t.stroke()},"Point"==l||"Polygon"==l||"MultiPolygon"==l?(t.fill(),(s.strokeStyle||n.strokeStyle)&&n.lineWidth&&t.stroke()):"LineString"!=l&&"MultiLineString"!=l||((s.lineWidth||s._lineWidth)&&(t.lineWidth=s.lineWidth||s._lineWidth),t.stroke()),t.restore()}t.restore()}};function v(t,e){if("undefined"==typeof document);else{var n=document.createElement("canvas");t&&(n.width=t),e&&(n.height=e)}return n}function d(t){t=t||{},this.gradient=t.gradient||{.25:"rgba(0, 0, 255, 1)",.55:"rgba(0, 255, 0, 1)",.85:"rgba(255, 255, 0, 1)",1:"rgba(255, 0, 0, 1)"},this.maxSize=t.maxSize||35,this.minSize=t.minSize||0,this.max=t.max||100,this.min=t.min||0,this.initPalette()}d.prototype.setMax=function(t){this.max=t||100},d.prototype.setMin=function(t){this.min=t||0},d.prototype.setMaxSize=function(t){this.maxSize=t||35},d.prototype.setMinSize=function(t){this.minSize=t||0},d.prototype.initPalette=function(){var t=this.gradient,e=new v(256,1),n=this.paletteCtx=e.getContext("2d"),i=n.createLinearGradient(0,0,256,1);for(var a in t)i.addColorStop(parseFloat(a),t[a]);n.fillStyle=i,n.fillRect(0,0,256,1)},d.prototype.getColor=function(t){var e=this.getImageData(t);return"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]/256+")"},d.prototype.getImageData=function(t){var e=this.paletteCtx.getImageData(0,0,256,1).data;if(void 0===t)return e;var n=this.max,i=this.min;n<t&&(t=n),t<i&&(t=i);var a=4*Math.floor((t-i)/(n-i)*255);return[e[a],e[1+a],e[2+a],e[3+a]]},d.prototype.getSize=function(t){var e=this.max,n=this.min,i=this.maxSize,a=this.minSize;return e<t&&(t=e),t<n&&(t=n),a+(t-n)/(e-n)*(i-a)},d.prototype.getLegend=function(t){var e=this.gradient,n=t.width||20,i=t.height||180,a=new v(n,i),o=a.getContext("2d"),r=o.createLinearGradient(0,i,0,0);for(var s in e)r.addColorStop(parseFloat(s),e[s]);return o.fillStyle=r,o.fillRect(0,0,n,i),a};var m=("undefined"==typeof window?{}:window).devicePixelRatio||1;function y(t,e,n){var i=x(n),a=w(n),o=i-a,r=n.range||null,s=0,l=1024;r&&2===r.length&&(s=(r[0]-a)/o*1024),r&&2===r.length&&(l=(r[1]-a)/o*1024);for(var h,c=n.maxOpacity||.8,u=(r=n.range,3),p=t.length;u<p;u+=4)h=4*t[u],t[u]/256>c&&(t[u]=256*c),h&&s<=h&&h<=l?(t[u-3]=e[h],t[u-2]=e[1+h],t[u-1]=e[2+h]):t[u]=0}function x(t){var e=t.max||100;return e}function w(t){var e=t.min||0;return e}function _(t,e,n){var i=x(n),a=w(n),o=n._size;null==o&&null==(o=n.size)&&(o=13);var r=new d({gradient:n.gradient,max:i,min:a}),s=function(t){var e=t/2,n=t+e,i=new v(2*n,2*n),a=i.getContext("2d");return a.shadowBlur=e,a.shadowColor="black",a.shadowOffsetX=a.shadowOffsetY=1e4,a.beginPath(),a.arc(n-1e4,n-1e4,t,0,2*Math.PI,!0),a.closePath(),a.fill(),i}(o),l=s.width/2,h=s.height/2,c=e,u={};for(var p in c.forEach(function(t,e){var n=void 0===t.count?1:t.count,a=Math.min(1,n/i).toFixed(2);u[a]=u[a]||[],u[a].push(t)}),u)if(!isNaN(p)){var f=u[p];t.beginPath(),n.withoutAlpha||(t.globalAlpha=p),t.strokeStyle=r.getColor(p*i),f.forEach(function(e,a){if(e.geometry){var o=e.geometry._coordinates||e.geometry.coordinates,r=e.geometry.type;if("Point"===r){var c=void 0===e.count?1:e.count;t.globalAlpha=c/i,t.drawImage(s,o[0]-l,o[1]-h)}else if("LineString"===r){c=void 0===e.count?1:e.count;t.globalAlpha=c/i,t.beginPath(),g.draw(t,e,n),t.stroke()}}})}}var b={draw:function(t,e,n){if(!(t.canvas.width<=0||t.canvas.height<=0)){var i=n.strength||.3;t.strokeStyle="rgba(0,0,0,"+i+")";var a=new v(t.canvas.width,t.canvas.height),o=a.getContext("2d");o.scale(m,m),n=n||{};var r=e instanceof p?e.get():e;t.save();var s=new d({gradient:n.gradient});if(_(o,r,n),!n.absolute){var l=o.getImageData(0,0,t.canvas.width,t.canvas.height);y(l.data,s.getImageData(),n),t.putImageData(l,0,0),t.restore()}a=s=null}}},S={draw:function(t,e,n){t.save();for(var i=e instanceof p?e.get():e,a={},o=n._size||n.size||50,r=n.offset||{x:0,y:0},s=0;s<i.length;s++){var l=i[s].geometry._coordinates||i[s].geometry.coordinates,h=Math.floor((l[0]-r.x)/o)+","+Math.floor((l[1]-r.y)/o);a[h]||(a[h]=0),a[h]+=~~(i[s].count||1)}var c=new d({min:n.min||0,max:n.max||100,gradient:n.gradient});for(var h in a)h=h.split(","),t.beginPath(),t.rect(h[0]*o+.5+r.x,h[1]*o+.5+r.y,o,o),t.fillStyle=c.getColor(a[h]),t.fill(),n.strokeStyle&&n.lineWidth&&t.stroke();if(n.label&&!1!==n.label.show)for(var h in t.fillStyle=n.label.fillStyle||"white",n.label.font&&(t.font=n.label.font),n.label.shadowColor&&(t.shadowColor=n.label.shadowColor),n.label.shadowBlur&&(t.shadowBlur=n.label.shadowBlur),a){h=h.split(",");var u=a[h],g=t.measureText(u).width;t.fillText(u,h[0]*o+.5+r.x+o/2-g/2,h[1]*o+.5+r.y+o/2+5)}t.restore()}},C={draw:function(t,e,n){t.save();var i=e instanceof p?e.get():e;for(var a in n)t[a]=n[a];for(var o=n.offset||{x:10,y:10},r=n._size||n.size||40,s=2*(r=r/2/Math.sin(Math.PI/3))*Math.sin(Math.PI/3),l=1.5*r,h={},c=0;c<i.length;c++){var u=i[c].geometry._coordinates||i[c].geometry.coordinates,g=(u[1]-o.y)/l,f=Math.round(g),v=(u[0]-o.x)/s-(1&f?.5:0),m=Math.round(v),y=g-f;if(1<3*Math.abs(y)){var x=v-m,w=m+(v<m?-1:1)/2,_=f+(g<f?-1:1),b=v-w,S=g-_;b*b+S*S<x*x+y*y&&(m=w+(1&f?1:-1)/2,f=_)}var C=m+"-"+f,k=h[C];k?k.push(i[c]):((k=h[C]=[i[c]]).i=m,k.j=f,k.x=(m+(1&f?.5:0))*s,k.y=f*l)}var L,M,E,P,A=new d({max:n.max||100,maxSize:r,gradient:n.gradient});for(var a in h){var T=h[a];t.beginPath();for(var z=0;z<6;z++){var O=(L={x:T.x+o.x,y:T.y+o.y},M=r,E=60*z+30,P=Math.PI/180*E,[L.x+M*Math.cos(P),L.y+M*Math.sin(P)]);t.lineTo(O[0],O[1])}t.closePath();var R=0;for(c=0;c<T.length;c++)R+=T[c].count||1;T.count=R,t.fillStyle=A.getColor(R),t.fill(),n.strokeStyle&&n.lineWidth&&t.stroke()}if(n.label&&!1!==n.label.show)for(var a in t.fillStyle=n.label.fillStyle||"white",n.label.font&&(t.font=n.label.font),n.label.shadowColor&&(t.shadowColor=n.label.shadowColor),n.label.shadowBlur&&(t.shadowBlur=n.label.shadowBlur),h){T=h[a];var I=T.count;I=I<0?I.toFixed(2):~~I;var F=t.measureText(I).width;t.fillText(I,T.x+o.x-F/2,T.y+o.y+5)}t.restore()}};function k(t,e,n){var i=t.createShader(n);return t.shaderSource(i,e),t.compileShader(i),i}function L(t,e,n){var i=k(t,e,t.VERTEX_SHADER),a=k(t,n,t.FRAGMENT_SHADER),o=t.createProgram();return t.attachShader(o,i),t.attachShader(o,a),t.linkProgram(o),t.useProgram(o),o}function M(t){var e=document.createElement("canvas"),n=e.getContext("2d");return e.width=1,e.height=1,n.fillStyle=t,n.fillRect(0,0,1,1),n.getImageData(0,0,1,1).data}var E=["attribute vec4 a_Position;","void main() {","gl_Position = a_Position;","gl_PointSize = 30.0;","}"].join(""),A=["precision mediump float;","uniform vec4 u_FragColor;","void main() {","gl_FragColor = u_FragColor;","}"].join(""),T={draw:function(t,e,n){if(e){var i=L(t,E,A);t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE),t.clear(t.COLOR_BUFFER_BIT);var a=t.canvas.width/2,o=t.canvas.height/2,r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r);var s=t.getAttribLocation(i,"a_Position");t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s);var l=t.getUniformLocation(i,"u_FragColor"),h=M(n.strokeStyle||"red");t.uniform4f(l,h[0]/255,h[1]/255,h[2]/255,h[3]/255),t.lineWidth(n.lineWidth||1);for(var c=0,u=e.length;c<u;c++){for(var p=e[c].geometry._coordinates,g=[],f=0;f<p.length;f++){var v=p[f],d=(v[0]-a)/a,m=(o-v[1])/o;g.push(d,m)}var y=new Float32Array(g);t.bufferData(t.ARRAY_BUFFER,y,t.STATIC_DRAW),t.drawArrays(t.LINE_STRIP,0,p.length)}}}},z=["attribute vec4 a_Position;","attribute float a_PointSize;","void main() {","gl_Position = a_Position;","gl_PointSize = a_PointSize;","}"].join(""),O=["precision mediump float;","uniform vec4 u_FragColor;","void main() {","gl_FragColor = u_FragColor;","}"].join(""),R={draw:function(t,e,n){if(e){var i=L(t,z,O),a=t.getAttribLocation(i,"a_Position"),o=t.getAttribLocation(i,"a_PointSize"),r=t.getUniformLocation(i,"u_FragColor");t.clear(t.COLOR_BUFFER_BIT);for(var s=t.canvas.width/2,l=t.canvas.height/2,h=[],c=0,u=0;u<e.length;u++){var p=e[u].geometry._coordinates,g=(p[0]-s)/s,f=(l-p[1])/l;g<-1||1<g||f<-1||1<f||(h.push(g,f),c++)}var v=new Float32Array(h),d=c,m=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,m),t.bufferData(t.ARRAY_BUFFER,v,t.STATIC_DRAW),t.vertexAttribPointer(a,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(a),t.vertexAttrib1f(o,n._size);var y=M(n.fillStyle||"red");t.uniform4f(r,y[0]/255,y[1]/255,y[2]/255,y[3]/255),t.drawArrays(t.POINTS,0,d)}}};function I(t,e,n){n=n||2;var i,a,o,r,s,l,h,c=e&&e.length,u=c?e[0]*n:t.length,p=F(t,0,u,n,!0),g=[];if(!p)return g;if(c&&(p=function(t,e,n,i){var a,o,r,s,l,h=[];for(a=0,o=e.length;a<o;a++)r=e[a]*i,s=a<o-1?e[a+1]*i:t.length,(l=F(t,r,s,i,!1))===l.next&&(l.steiner=!0),h.push(q(l));for(h.sort(H),a=0;a<h.length;a++)$(h[a],n),n=D(n,n.next);return n}(t,e,p,n)),t.length>80*n){i=o=t[0],a=r=t[1];for(var f=n;f<u;f+=n)s=t[f],l=t[f+1],s<i&&(i=s),l<a&&(a=l),o<s&&(o=s),r<l&&(r=l);h=Math.max(o-i,r-a)}return B(p,g,n,i,a,h),g}function F(t,e,n,i,a){var o,r;if(a===0<nt(t,e,n,i))for(o=e;o<n;o+=i)r=K(o,t[o],t[o+1],r);else for(o=n-i;e<=o;o-=i)r=K(o,t[o],t[o+1],r);return r&&Y(r,r.next)&&(tt(r),r=r.next),r}function D(t,e){if(!t)return t;e=e||t;var n,i=t;do{if(n=!1,i.steiner||!Y(i,i.next)&&0!==V(i.prev,i,i.next))i=i.next;else{if(tt(i),(i=e=i.prev)===i.next)return null;n=!0}}while(n||i!==e);return e}function B(t,e,n,i,a,o,r){if(t){!r&&o&&function(t,e,n,i){for(var a=t;null===a.z&&(a.z=W(a.x,a.y,e,n,i)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next,a!==t;);a.prevZ.nextZ=null,a.prevZ=null,function(t){var e,n,i,a,o,r,s,l,h=1;do{for(n=t,o=t=null,r=0;n;){for(r++,i=n,e=s=0;e<h&&(s++,i=i.nextZ);e++);for(l=h;0<s||0<l&&i;)0===s?(i=(a=i).nextZ,l--):0!==l&&i?n.z<=i.z?(n=(a=n).nextZ,s--):(i=(a=i).nextZ,l--):(n=(a=n).nextZ,s--),o?o.nextZ=a:t=a,a.prevZ=o,o=a;n=i}o.nextZ=null,h*=2}while(1<r)}(a)}(t,i,a,o);for(var s,l,h=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?j(t,i,a,o):N(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),tt(t),t=l.next,h=l.next;else if((t=l)===h){r?1===r?B(t=U(t,e,n),e,n,i,a,o,2):2===r&&Z(t,e,n,i,a,o):B(D(t),e,n,i,a,o,1);break}}}function N(t){var e=t.prev,n=t,i=t.next;if(0<=V(e,n,i))return!1;for(var a=t.next.next;a!==t.prev;){if(G(e.x,e.y,n.x,n.y,i.x,i.y,a.x,a.y)&&0<=V(a.prev,a,a.next))return!1;a=a.next}return!0}function j(t,e,n,i){var a=t.prev,o=t,r=t.next;if(0<=V(a,o,r))return!1;for(var s=a.x<o.x?a.x<r.x?a.x:r.x:o.x<r.x?o.x:r.x,l=a.y<o.y?a.y<r.y?a.y:r.y:o.y<r.y?o.y:r.y,h=a.x>o.x?a.x>r.x?a.x:r.x:o.x>r.x?o.x:r.x,c=a.y>o.y?a.y>r.y?a.y:r.y:o.y>r.y?o.y:r.y,u=W(s,l,e,n,i),p=W(h,c,e,n,i),g=t.nextZ;g&&g.z<=p;){if(g!==t.prev&&g!==t.next&&G(a.x,a.y,o.x,o.y,r.x,r.y,g.x,g.y)&&0<=V(g.prev,g,g.next))return!1;g=g.nextZ}for(g=t.prevZ;g&&g.z>=u;){if(g!==t.prev&&g!==t.next&&G(a.x,a.y,o.x,o.y,r.x,r.y,g.x,g.y)&&0<=V(g.prev,g,g.next))return!1;g=g.prevZ}return!0}function U(t,e,n){var i=t;do{var a=i.prev,o=i.next.next;!Y(a,o)&&J(a,i,i.next,o)&&X(a,o)&&X(o,a)&&(e.push(a.i/n),e.push(i.i/n),e.push(o.i/n),tt(i),tt(i.next),i=t=o),i=i.next}while(i!==t);return i}function Z(t,e,n,i,a,o){var r,s,l=t;do{for(var h=l.next.next;h!==l.prev;){if(l.i!==h.i&&(s=h,(r=l).next.i!==s.i&&r.prev.i!==s.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&J(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(r,s)&&X(r,s)&&X(s,r)&&function(t,e){for(var n=t,i=!1,a=(t.x+e.x)/2,o=(t.y+e.y)/2;n.y>o!=n.next.y>o&&a<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next,n!==t;);return i}(r,s))){var c=Q(l,h);return l=D(l,l.next),c=D(c,c.next),B(l,e,n,i,a,o),void B(c,e,n,i,a,o)}h=h.next}l=l.next}while(l!==t)}function H(t,e){return t.x-e.x}function $(t,e){if(e=function(t,e){var n,i=e,a=t.x,o=t.y,r=-1/0;do{if(o<=i.y&&o>=i.next.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=a&&r<s){if((r=s)===a){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(a===r)return n.prev;var l,h=n,c=n.x,u=n.y,p=1/0;for(i=n.next;i!==h;)a>=i.x&&i.x>=c&&G(o<u?a:r,o,c,u,o<u?r:a,o,i.x,i.y)&&((l=Math.abs(o-i.y)/(a-i.x))<p||l===p&&i.x>n.x)&&X(i,t)&&(n=i,p=l),i=i.next;return n}(t,e)){var n=Q(e,t);D(n,n.next)}}function W(t,e,n,i,a){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)/a)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)/a)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function q(t){for(var e=t,n=t;e.x<n.x&&(n=e),(e=e.next)!==t;);return n}function G(t,e,n,i,a,o,r,s){return 0<=(a-r)*(e-s)-(t-r)*(o-s)&&0<=(t-r)*(i-s)-(n-r)*(e-s)&&0<=(n-r)*(o-s)-(a-r)*(i-s)}function V(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Y(t,e){return t.x===e.x&&t.y===e.y}function J(t,e,n,i){return!!(Y(t,e)&&Y(n,i)||Y(t,i)&&Y(n,e))||0<V(t,e,n)!=0<V(t,e,i)&&0<V(n,i,t)!=0<V(n,i,e)}function X(t,e){return V(t.prev,t,t.next)<0?0<=V(t,e,t.next)&&0<=V(t,t.prev,e):V(t,e,t.prev)<0||V(t,t.next,e)<0}function Q(t,e){var n=new et(t.i,t.x,t.y),i=new et(e.i,e.x,e.y),a=t.next,o=e.prev;return(t.next=e).prev=t,(n.next=a).prev=n,(i.next=n).prev=i,(o.next=i).prev=o,i}function K(t,e,n,i){var a=new et(t,e,n);return i?(a.next=i.next,(a.prev=i).next.prev=a,i.next=a):(a.prev=a).next=a,a}function tt(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function et(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function nt(t,e,n,i){for(var a=0,o=e,r=n-i;o<n;o+=i)a+=(t[r]-t[o])*(t[o+1]+t[r+1]),r=o;return a}I.deviation=function(t,e,n,i){var a=e&&e.length,o=a?e[0]*n:t.length,r=Math.abs(nt(t,0,o,n));if(a)for(var s=0,l=e.length;s<l;s++){var h=e[s]*n,c=s<l-1?e[s+1]*n:t.length;r-=Math.abs(nt(t,h,c,n))}var u=0;for(s=0;s<i.length;s+=3){var p=i[s]*n,g=i[s+1]*n,f=i[s+2]*n;u+=Math.abs((t[p]-t[f])*(t[1+g]-t[1+p])-(t[p]-t[g])*(t[1+f]-t[1+p]))}return 0===r&&0===u?0:Math.abs((u-r)/r)},I.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,a=0;a<t.length;a++){for(var o=0;o<t[a].length;o++)for(var r=0;r<e;r++)n.vertices.push(t[a][o][r]);0<a&&(i+=t[a-1].length,n.holes.push(i))}return n};var it=["attribute vec4 a_Position;","void main() {","gl_Position = a_Position;","gl_PointSize = 30.0;","}"].join(""),at=["precision mediump float;","uniform vec4 u_FragColor;","void main() {","gl_FragColor = u_FragColor;","}"].join(""),ot={draw:function(t,e,n){if(e){t.clear(t.COLOR_BUFFER_BIT),t.viewport(0,0,t.canvas.width,t.canvas.height);var i=L(t,it,at);t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE);var a=t.canvas.width/2,o=t.canvas.height/2;t.bindBuffer(t.ARRAY_BUFFER,t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,t.createBuffer());var r=t.getAttribLocation(i,"a_Position");t.vertexAttribPointer(r,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(r);var s=t.getUniformLocation(i,"u_FragColor"),l=M(n.fillStyle||"red");t.uniform4f(s,l[0]/255,l[1]/255,l[2]/255,l[3]/255),t.lineWidth(n.lineWidth||1);for(var h=[],c=[],u=0,p=0,g=e.length;p<g;p++){var f=I.flatten(e[p].geometry._coordinates||e[p].geometry.coordinates),v=f.vertices;u=h.length/2;for(var d=0;d<v.length;d+=2)v[d]=(v[d]-a)/a,v[d+1]=(o-v[d+1])/o;for(65536<(h.length+v.length)/2&&(t.bufferData(t.ARRAY_BUFFER,new Float32Array(h),t.STATIC_DRAW),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(c),t.STATIC_DRAW),t.drawElements(t.TRIANGLES,c.length,t.UNSIGNED_SHORT,0),h.length=0,c.length=0,u=0),d=0;d<v.length;d++)h.push(v[d]);var m=I(v,f.holes,f.dimensions);for(d=0;d<m.length;d++)c.push(m[d]+u)}t.bufferData(t.ARRAY_BUFFER,new Float32Array(h),t.STATIC_DRAW),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(c),t.STATIC_DRAW),t.drawElements(t.TRIANGLES,c.length,t.UNSIGNED_SHORT,0),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}}},rt={draw:function(t,e,n){var i=e instanceof p?e.get():e;0<i.length&&("LineString"==i[0].geometry.type?T.draw(t,i,n):"Polygon"==i[0].geometry.type||"MultiPolygon"==i[0].geometry.type?ot.draw(t,i,n):R.draw(t,i,n))}};function st(t,e,n){if(!t||!e)return null;var i,a,o,r,s,l,h=function(t){return 1-2*t+t*t},c=function(t){return 2*t-2*t*t},u=function(t){return t*t},p=[],g=(n=n||40,0),f=0;if(void 0!==e){var v=parseFloat(t.lat),d=parseFloat(e.lat),m=parseFloat(t.lng),y=parseFloat(e.lng);for(m<y&&180<parseFloat(y-m)&&m<0&&(m=parseFloat(360+m),y=parseFloat(360+y)),l=0,a=d==v?(i=0,m-y):y==m?(i=Math.PI/2,v-d):(i=Math.atan((d-v)/(y-m)),(d-v)/Math.sin(i)),0==l&&(l=i+Math.PI/5),s=(o=a/2)*Math.cos(l)+m,r=o*Math.sin(l)+v,g=0;g<n+1;g++){var x=m*h(f)+s*c(f)+y*u(f),w=v*h(f)+r*c(f)+d*u(f),_=t.lng,b=e.lng;p.push([_<0&&0<b?x-360:x,w]),f+=1/n}return p}void 0!==p&&(p=[])}var lt={getPoints:function(t,e){e=e||{};for(var n=[],i=0;i<t.length-1;i++){var a=st(t[i],t[i+1],e.count);a&&0<a.length&&(n=n.concat(a))}return n}};function ht(t){this.splitList=t||{other:1}}function ct(t){this.splitList=t||[{start:0,value:"red"}]}ht.prototype.get=function(t){var e=this.splitList,n=e.other;for(var i in e)if(t==i){n=e[i];break}return n},ht.prototype.generateByDataSet=function(t,e){var n=e||["rgba(255, 255, 0, 0.8)","rgba(253, 98, 104, 0.8)","rgba(255, 146, 149, 0.8)","rgba(255, 241, 193, 0.8)","rgba(110, 176, 253, 0.8)","rgba(52, 139, 251, 0.8)","rgba(17, 102, 252, 0.8)"],i=t.get();this.splitList={};for(var a=0,o=0;o<i.length&&(void 0===this.splitList[i[o].count]&&(this.splitList[i[o].count]=n[a],a++),!(a>=n.length-1));o++);this.splitList.other=n[n.length-1]},ht.prototype.getLegend=function(t){var e=this.splitList,n=document.createElement("div");n.style.cssText="background:#fff; padding: 5px; border: 1px solid #ccc;";var i="";for(var a in e)i+='<div style="line-height: 19px;" value="'+a+'"><span style="vertical-align: -2px; display: inline-block; width: 30px;height: 19px;background:'+e[a]+';"></span><span style="margin-left: 3px;">'+a+"<span></div>";return n.innerHTML=i,n},ct.prototype.get=function(t){for(var e=this.splitList,n=!1,i=0;i<e.length;i++)if((void 0===e[i].start||void 0!==e[i].start&&t>=e[i].start)&&(void 0===e[i].end||void 0!==e[i].end&&t<e[i].end)){n=e[i].value;break}return n},ct.prototype.generateByDataSet=function(t){var e=t.getMin("count"),n=t.getMax("count");this.generateByMinMax(e,n)},ct.prototype.generateByMinMax=function(t,e){var n=["rgba(255, 255, 0, 0.8)","rgba(253, 98, 104, 0.8)","rgba(255, 146, 149, 0.8)","rgba(255, 241, 193, 0.8)","rgba(110, 176, 253, 0.8)","rgba(52, 139, 251, 0.8)","rgba(17, 102, 252, 0.8)"],i=Number((e-t)/7);e=Number(e);var a=Number(t);this.splitList=[];for(var o=0;a<e;)this.splitList.push({start:a,end:a+i,value:n[o]}),o++,a+=i},ct.prototype.getLegend=function(t){this.splitList};var ut=function(){function t(e,n,i){if(s(this,t),!e||!n)return!1;if("baidu"==n&&!BMap)return!1;this.type=n;var a=i&&i.center?i.center:[106.962497,38.208726],o=i&&i.zoom?i.zoom:5,r=this.map=new BMap.Map(e,{enableMapClick:!1});r.centerAndZoom(new BMap.Point(a[0],a[1]),o),r.enableScrollWheelZoom(!0),r.setMapStyle({style:"light"})}return l(t,[{key:"addLayer",value:function(t,e){if("baidu"==this.type)return new mapv.baiduMapLayer(this.map,dataSet,e)}},{key:"getMap",value:function(){return this.map}}]),t}();function pt(t){this.options=t||{},this.paneName=this.options.paneName||"mapPane",this.context=this.options.context||"2d",this.zIndex=this.options.zIndex||0,this.mixBlendMode=this.options.mixBlendMode||null,this.enableMassClear=this.options.enableMassClear,this._map=t.map,this._lastDrawTime=null,this.show()}var gt="undefined"==typeof window?{}:window;gt.BMap&&((pt.prototype=new BMap.Overlay).initialize=function(t){this._map=t;var e=this.canvas=document.createElement("canvas");e.style.cssText="position:absolute;left:0;top:0;z-index:"+this.zIndex+";user-select:none;",e.style.mixBlendMode=this.mixBlendMode,this.adjustSize(),t.getPanes()[this.paneName].appendChild(e);var n=this;return t.addEventListener("resize",function(){n.adjustSize(),n._draw()}),this.canvas},pt.prototype.adjustSize=function(){var t=this._map.getSize(),e=this.canvas,n=this.devicePixelRatio=gt.devicePixelRatio||1;e.width=t.width*n,e.height=t.height*n,"2d"==this.context&&e.getContext(this.context).scale(n,n),e.style.width=t.width+"px",e.style.height=t.height+"px"},pt.prototype.draw=function(){var t=this;clearTimeout(t.timeoutID),t.timeoutID=setTimeout(function(){t._draw()},15)},pt.prototype._draw=function(){var t=this._map,e=t.getSize(),n=t.getCenter();if(n){var i=t.pointToOverlayPixel(n);this.canvas.style.left=i.x-e.width/2+"px",this.canvas.style.top=i.y-e.height/2+"px",this.dispatchEvent("draw"),this.options.update&&this.options.update.call(this)}},pt.prototype.getContainer=function(){return this.canvas},pt.prototype.show=function(){this.canvas||this._map.addOverlay(this),this.canvas.style.display="block"},pt.prototype.hide=function(){this.canvas.style.display="none"},pt.prototype.setZIndex=function(t){this.zIndex=t,this.canvas.style.zIndex=this.zIndex},pt.prototype.getZIndex=function(){return this.zIndex});var ft=ft||function(){var t=[];return{getAll:function(){return t},removeAll:function(){t=[]},add:function(e){t.push(e)},remove:function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)},update:function(e,n){if(0===t.length)return!1;var i=0;for(e=void 0!==e?e:ft.now();i<t.length;)t[i].update(e)||n?i++:t.splice(i,1);return!0}}}();function vt(t,e){var n=e[0]-t[0],i=e[1]-t[1],a=360*Math.atan(i/n)/(2*Math.PI);return e[0]<t[0]&&(a+=180),a}"undefined"==typeof window&&void 0!==t?ft.now=function(){var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?ft.now=window.performance.now.bind(window.performance):void 0!==Date.now?ft.now=Date.now:ft.now=function(){return(new Date).getTime()},ft.Tween=function(t){var e,n=t,i={},a={},o={},r=1e3,s=0,l=!1,h=!1,c=!1,u=0,p=null,g=ft.Easing.Linear.None,f=ft.Interpolation.Linear,v=[],d=null,m=!1,y=null,x=null,w=null;this.to=function(t,e){return a=t,void 0!==e&&(r=e),this},this.start=function(t){for(var e in ft.add(this),m=!(h=!0),p=void 0!==t?t:ft.now(),p+=u,a){if(a[e]instanceof Array){if(0===a[e].length)continue;a[e]=[n[e]].concat(a[e])}void 0!==n[e]&&(i[e]=n[e],i[e]instanceof Array==0&&(i[e]*=1),o[e]=i[e]||0)}return this},this.stop=function(){return h&&(ft.remove(this),h=!1,null!==w&&w.call(n,n),this.stopChainedTweens()),this},this.end=function(){return this.update(p+r),this},this.stopChainedTweens=function(){for(var t=0,e=v.length;t<e;t++)v[t].stop()},this.delay=function(t){return u=t,this},this.repeat=function(t){return s=t,this},this.repeatDelay=function(t){return e=t,this},this.yoyo=function(t){return l=t,this},this.easing=function(t){return g=t,this},this.interpolation=function(t){return f=t,this},this.chain=function(){return v=arguments,this},this.onStart=function(t){return d=t,this},this.onUpdate=function(t){return y=t,this},this.onComplete=function(t){return x=t,this},this.onStop=function(t){return w=t,this},this.update=function(t){var h,w,_;if(t<p)return!0;for(h in!1===m&&(null!==d&&d.call(n,n),m=!0),_=g(w=1<(w=(t-p)/r)?1:w),a)if(void 0!==i[h]){var b=i[h]||0,S=a[h];S instanceof Array?n[h]=f(S,_):("string"==typeof S&&(S="+"===S.charAt(0)||"-"===S.charAt(0)?b+parseFloat(S):parseFloat(S)),"number"==typeof S&&(n[h]=b+(S-b)*_))}if(null!==y&&y.call(n,_),1!==w)return!0;if(0<s){for(h in isFinite(s)&&s--,o){if("string"==typeof a[h]&&(o[h]=o[h]+parseFloat(a[h])),l){var C=o[h];o[h]=a[h],a[h]=C}i[h]=o[h]}return l&&(c=!c),p=void 0!==e?t+e:t+u,!0}null!==x&&x.call(n,n);for(var k=0,L=v.length;k<L;k++)v[k].start(p+r);return!1}},ft.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((1+e)*t-e)*.5:.5*((t-=2)*t*((1+e)*t+e)+2)}},Bounce:{In:function(t){return 1-ft.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*ft.Easing.Bounce.In(2*t):.5*ft.Easing.Bounce.Out(2*t-1)+.5}}},ft.Interpolation={Linear:function(t,e){var n=t.length-1,i=n*e,a=Math.floor(i),o=ft.Interpolation.Utils.Linear;return e<0?o(t[0],t[1],i):1<e?o(t[n],t[n-1],n-i):o(t[a],t[n<a+1?n:a+1],i-a)},Bezier:function(t,e){for(var n=0,i=t.length-1,a=Math.pow,o=ft.Interpolation.Utils.Bernstein,r=0;r<=i;r++)n+=a(1-e,i-r)*a(e,r)*t[r]*o(i,r);return n},CatmullRom:function(t,e){var n=t.length-1,i=n*e,a=Math.floor(i),o=ft.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(a=Math.floor(i=n*(1+e))),o(t[(a-1+n)%n],t[a],t[(a+1)%n],t[(a+2)%n],i-a)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-i)-t[0]):1<e?t[n]-(o(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):o(t[a?a-1:0],t[a],t[n<a+1?n:a+1],t[n<a+2?n:a+2],i-a)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=ft.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var i=e;1<i;i--)n*=i;return t[e]=n}}(),CatmullRom:function(t,e,n,i,a){var o=.5*(n-t),r=.5*(i-e),s=a*a,l=a*s;return(2*e-2*n+o+r)*l+(-3*e+3*n-2*o-r)*s+o*a+e}}};var dt={},mt={draw:function(t,e,n){var i="http://huiyan.baidu.com/github/tools/gis-drawing/static/images/direction.png";n.arrow&&n.arrow.url&&(i=n.arrow.url),dt[i]||(dt[i]=null);var a=dt[i];if(!a){var o=Array.prototype.slice.call(arguments),r=new Image;return r.onload=function(){dt[i]=r,mt.draw.apply(null,o)},void(r.src=i)}var s=e instanceof p?e.get():e;for(var l in t.save(),n)t[l]=n[l];for(var h,c,u=[],g=null,f=0,v=s.length;f<v;f++){var d=s[f];t.save(),(d.fillStyle||d._fillStyle)&&(t.fillStyle=d.fillStyle||d._fillStyle),(d.strokeStyle||d._strokeStyle)&&(t.strokeStyle=d.strokeStyle||d._strokeStyle);var m=d.geometry.type;if(t.beginPath(),"LineString"===m)for(var y=d.geometry._coordinates||d.geometry.coordinates,x=void 0!==n.arrow.interval?n.arrow.interval:1,w=0;w<y.length;w+=x)if(y[w]&&y[w+1]){var _=y[w];if(g&&(h=_,c=g,Math.sqrt(Math.pow(h[0]-c[0],2)+Math.pow(h[1]-c[1],2))<30))continue;t.save();var b=vt(y[w],y[w+1]);t.translate(_[0],_[1]),t.rotate(b*Math.PI/180),t.drawImage(a,-a.width/2/2,-a.height/2/2,a.width/2,a.height/2),t.restore(),u.push(_),g=_}t.restore()}t.restore()}},yt={draw:function(t,e,i){var a=e instanceof p?e.get():e;t.save(),t.fillStyle=i.fillStyle||"rgba(0, 0, 0, 0.5)",t.fillRect(0,0,t.canvas.width,t.canvas.height),i.multiPolygonDraw=function(){t.save(),t.clip(),n(t),t.restore()};for(var o=0,r=a.length;o<r;o++)t.beginPath(),g.drawDataSet(t,[a[o]],i),t.save(),t.clip(),n(t),t.restore();t.restore()}},xt={draw:function(t,e,n){var i=e instanceof p?e.get():e;for(var a in t.save(),n)t[a]=n[a];var o=n.offset||{x:0,y:0},r=[],s=n._size||n.size;s?t.font="bold "+s+"px Arial":s=12;var l=n.textKey||"text";if(n.textAlign||(t.textAlign="center"),n.textBaseline||(t.textBaseline="middle"),n.avoid)for(var h=0,c=i.length;h<c;h++){var u=i[h].geometry._coordinates||i[h].geometry.coordinates,g=u[0]+o.x,f=u[1]+o.y,v=i[h][l],d=t.measureText(v).width,m=g-d/2,y=f-s/2,x={sw:{x:m,y:y+s},ne:{x:m+d,y:y}};wt(r,x)||(r.push(x),m+=d/2,y+=s/2,t.fillText(v,m,y))}else for(h=0,c=i.length;h<c;h++){u=i[h].geometry._coordinates||i[h].geometry.coordinates,g=u[0]+o.x,f=u[1]+o.y,v=i[h][l];t.fillText(v,g,f)}t.restore()}};function wt(t,e){for(var n=0;n<t.length;n++)if(_t(t[n],e))return!0;return!1}function _t(t,e){var n=Math.min(t.ne.x,e.ne.x),i=Math.min(t.sw.y,e.sw.y),a=Math.max(t.sw.x,e.sw.x),o=Math.max(t.ne.y,e.ne.y);return a<n&&o<i}var bt={draw:function(t,e,n){var i=e instanceof p?e.get():e;t.fillStyle="white",t.textAlign="center",t.textBaseline="middle";for(var a=n.offset||{x:0,y:0},o=0,r=i.length;o<r;o++)if(i[o].geometry){var s=i[o].deg||n.deg,l=i[o].icon||n.icon,h=i[o].geometry._coordinates||i[o].geometry.coordinates,c=h[0],u=h[1];s&&(t.save(),t.translate(c,u),t.rotate(s*Math.PI/180),t.translate(-c,-u));var g=n._width||n.width||l.width,f=n._height||n.height||l.height;c=c-g/2+a.x,u=u-f/2+a.y,n.sx&&n.sy&&n.swidth&&n.sheight&&n.width&&n.height?t.drawImage(l,n.sx,n.sy,n.swidth,n.sheight,c,u,g,f):n.width&&n.height?t.drawImage(l,c,u,g,f):t.drawImage(l,c,u),s&&t.restore()}}};"undefined"!=typeof window&&requestAnimationFrame(function t(e){requestAnimationFrame(t),ft.update(e)});var St=function(){function t(e,n,i){s(this,t),n instanceof p||(n=new p(n)),this.dataSet=n,this.map=e}return l(t,[{key:"getDefaultContextConfig",value:function(){return{globalAlpha:1,globalCompositeOperation:"source-over",imageSmoothingEnabled:!0,strokeStyle:"#000000",fillStyle:"#000000",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)",lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:10,lineDashOffset:0,font:"10px sans-serif",textAlign:"start",textBaseline:"alphabetic"}}},{key:"initDataRange",value:function(t){var e=this;if(e.intensity=new d({maxSize:e.options.maxSize,minSize:e.options.minSize,gradient:e.options.gradient,max:e.options.max||this.dataSet.getMax("count")}),e.category=new ht(e.options.splitList),e.choropleth=new ct(e.options.splitList),void 0===e.options.splitList&&e.category.generateByDataSet(this.dataSet,e.options.color),void 0===e.options.splitList){var n=e.options.min||this.dataSet.getMin("count"),i=e.options.max||this.dataSet.getMax("count");e.choropleth.generateByMinMax(n,i)}}},{key:"getLegend",value:function(t){return this.options.draw,"intensity"==this.options.draw||"heatmap"==this.options.draw?this.intensity.getLegend(t):"category"==this.options.draw?this.category.getLegend(t):void 0}},{key:"processData",value:function(t){var e=this,n=e.options.draw;if("bubble"==n||"intensity"==n||"category"==n||"choropleth"==n||"simple"==n)for(var i=0;i<t.length;i++){var a=t[i];"bubble"==e.options.draw?t[i]._size=e.intensity.getSize(a.count):t[i]._size=void 0;var o="_fillStyle";"LineString"!==t[i].geometry.type&&"stroke"!==e.options.styleType||(o="_strokeStyle"),"intensity"==e.options.draw?t[i][o]=e.intensity.getColor(a.count):"category"==e.options.draw?t[i][o]=e.category.get(a.count):"choropleth"==e.options.draw&&(t[i][o]=e.choropleth.get(a.count))}}},{key:"isEnabledTime",value:function(){var t=this.options.animation,e=t&&!(!1===t.enabled);return e}},{key:"argCheck",value:function(t){"heatmap"==t.draw&&t.strokeStyle}},{key:"drawContext",value:function(t,e,n,i){var a=this;switch(a.options.draw){case"heatmap":b.draw(t,e,a.options);break;case"grid":case"honeycomb":a.options.offset={x:i.x,y:i.y},"grid"==a.options.draw?S.draw(t,e,a.options):C.draw(t,e,a.options);break;case"text":xt.draw(t,e,a.options);break;case"icon":bt.draw(t,e,a.options);break;case"clip":yt.draw(t,e,a.options);break;default:"webgl"==a.options.context?rt.draw(a.canvasLayer.canvas.getContext("webgl"),e,a.options):f.draw(t,e,a.options)}a.options.arrow&&!1!==a.options.arrow.show&&mt.draw(t,e,a.options)}},{key:"isPointInPath",value:function(t,e){t=this.canvasLayer.canvas.getContext(this.context);for(var n=this.dataSet.get(),i=0;i<n.length;i++){t.beginPath(),g.draw(t,n[i],this.options);var a=e.x*this.canvasLayer.devicePixelRatio,o=e.y*this.canvasLayer.devicePixelRatio,r=n[i].geometry&&n[i].geometry.type;if(-1<r.indexOf("LineString")){if(t.isPointInStroke&&t.isPointInStroke(a,o))return n[i]}else if(t.isPointInPath(a,o))return n[i]}}},{key:"clickEvent",value:function(t,e){if(this.options.methods){var n=this.isPointInPath(this.getContext(),t);n?this.options.methods.click(n,e):this.options.methods.click(null,e)}}},{key:"mousemoveEvent",value:function(t,e){if(this.options.methods){var n=this.isPointInPath(this.getContext(),t);n?this.options.methods.mousemove(n,e):this.options.methods.mousemove(null,e)}}},{key:"update",value:function(t,e){var n=t.options,i=this.options;for(var a in n)i[a]=n[a];this.init(i),!1!==e&&this.draw()}},{key:"setOptions",value:function(t){this.dataSet.reset(),this.init(t),this.draw()}},{key:"set",value:function(t){var e=this.getContext(),n=this.getDefaultContextConfig();for(var i in n)e[i]=n[i];this.init(t.options),this.draw()}},{key:"destroy",value:function(){this.unbindEvent(),this.hide()}},{key:"initAnimator",value:function(){var t=this,e=t.options.animation;if("time"==t.options.draw||t.isEnabledTime()){e.stepsRange||(e.stepsRange={start:this.dataSet.getMin("time")||0,end:this.dataSet.getMax("time")||0}),this.steps={step:e.stepsRange.start},t.animator=new ft.Tween(this.steps).onUpdate(function(){t._canvasUpdate(this.step)}).repeat(1/0),this.addAnimatorEvent();var n=1e3*e.duration||5e3;t.animator.to({step:e.stepsRange.end},n),t.animator.start()}else t.animator&&t.animator.stop()}},{key:"addAnimatorEvent",value:function(){}},{key:"animatorMovestartEvent",value:function(){var t=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=t.stepsRange.start,this.animator.stop())}},{key:"animatorMoveendEvent",value:function(){this.isEnabledTime()&&this.animator&&this.animator.start()}}]),t}(),Ct=function(t){function e(t,n,i){s(this,e);var a=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i));a.map=t,a.options=i||{},a.dataSet=n;var o=new pt({map:t,zIndex:a.options.zIndex,update:a._canvasUpdate.bind(a)});a.init(a.options),a.canvasLayer=o,a.transferToMercator();var r=a;return n.on("change",function(){r.transferToMercator(),o.draw()}),a.ctx=o.canvas.getContext("2d"),a.start(),a}return c(e,t),l(e,[{key:"draw",value:function(){this.canvasLayer.draw()}},{key:"init",value:function(t){var e=this;e.options=t,this.initDataRange(t),this.context=e.options.context||"2d",e.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(e.options.zIndex),e.options.max&&this.intensity.setMax(e.options.max),e.options.min&&this.intensity.setMin(e.options.min),this.initAnimator()}},{key:"transferToMercator",value:function(){var t=this.map.getMapType().getProjection();if("bd09mc"!==this.options.coordType){var e=this.dataSet.get();e=this.dataSet.transferCoordinate(e,function(e){var n=t.lngLatToPoint({lng:e[0],lat:e[1]});return[n.x,n.y]},"coordinates","coordinates_mercator"),this.dataSet._set(e)}}},{key:"_canvasUpdate",value:function(){var t=this.ctx;if(t){var e=this.map,i=Math.pow(2,18-e.getZoom()),a=e.getMapType().getProjection(),o=a.lngLatToPoint(e.getCenter()),r=new BMap.Pixel(o.x-e.getSize().width/2*i,o.y+e.getSize().height/2*i);n(t);var s={fromColumn:"bd09mc"==this.options.coordType?"coordinates":"coordinates_mercator",transferCoordinate:function(t){if(t){var e=(t[0]-r.x)/i,n=(r.y-t[1])/i;return[e,n]}}};this.data=this.dataSet.get(s),this.processData(this.data),this.drawAnimation()}}},{key:"drawAnimation",value:function(){var t=this.ctx,e=this.data;if(e){t.save(),t.globalCompositeOperation="destination-out",t.fillStyle="rgba(0, 0, 0, .1)",t.fillRect(0,0,t.canvas.width,t.canvas.height),t.restore(),t.save(),this.options.shadowColor&&(t.shadowColor=this.options.shadowColor),this.options.shadowBlur&&(t.shadowBlur=this.options.shadowBlur),this.options.globalAlpha&&(t.globalAlpha=this.options.globalAlpha),this.options.globalCompositeOperation&&(t.globalCompositeOperation=this.options.globalCompositeOperation);for(var n=this.options,i=0;i<e.length;i++)if("Point"===e[i].geometry.type){t.beginPath();var a=e[i].size||this.options.size,o=e[i].minSize||this.options.minSize||0;void 0===e[i]._size&&(e[i]._size=o),t.arc(e[i].geometry._coordinates[0],e[i].geometry._coordinates[1],e[i]._size,0,2*Math.PI,!0),t.closePath(),e[i]._size++,e[i]._size>a&&(e[i]._size=o),t.lineWidth=1,t.strokeStyle=e[i].strokeStyle||e[i]._strokeStyle||n.strokeStyle||"yellow",t.stroke();var r=e[i].fillStyle||e[i]._fillStyle||n.fillStyle;r&&(t.fillStyle=r,t.fill())}else if("LineString"===e[i].geometry.type){t.beginPath();var s=e[i].size||this.options.size||5;o=e[i].minSize||this.options.minSize||0;void 0===e[i]._index&&(e[i]._index=0);var l=e[i]._index;t.arc(e[i].geometry._coordinates[l][0],e[i].geometry._coordinates[l][1],s,0,2*Math.PI,!0),t.closePath(),e[i]._index++,e[i]._index>=e[i].geometry._coordinates.length&&(e[i]._index=0);var h=e[i].strokeStyle||n.strokeStyle;r=e[i].fillStyle||n.fillStyle||"yellow";t.fillStyle=r,t.fill(),h&&n.lineWidth&&(t.lineWidth=n.lineWidth||1,t.strokeStyle=h,t.stroke())}t.restore()}}},{key:"animate",value:function(){this.drawAnimation();var t=this.options.animateTime||100;this.timeout=setTimeout(this.animate.bind(this),t)}},{key:"start",value:function(){this.stop(),this.animate()}},{key:"stop",value:function(){clearTimeout(this.timeout)}},{key:"unbindEvent",value:function(){}},{key:"hide",value:function(){this.canvasLayer.hide(),this.stop()}},{key:"show",value:function(){this.start()}}]),e}(St),kt=function(t){function e(t,n,i){s(this,e);var a=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i)),o=a;i=i||{},a.clickEvent=a.clickEvent.bind(a),a.mousemoveEvent=a.mousemoveEvent.bind(a),o.init(i),o.argCheck(i),o.transferToMercator();var r=a.canvasLayer=new pt({map:t,context:a.context,paneName:i.paneName,mixBlendMode:i.mixBlendMode,enableMassClear:i.enableMassClear,zIndex:i.zIndex,update:function(){o._canvasUpdate()}});return n.on("change",function(){o.transferToMercator(),r.draw()}),a}return c(e,t),l(e,[{key:"clickEvent",value:function(t){var n=t.pixel;h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clickEvent",this).call(this,n,t)}},{key:"mousemoveEvent",value:function(t){var n=t.pixel;h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mousemoveEvent",this).call(this,n,t)}},{key:"bindEvent",value:function(t){this.unbindEvent();var e=this.map;this.options.methods&&(this.options.methods.click&&(e.setDefaultCursor("default"),e.addEventListener("click",this.clickEvent)),this.options.methods.mousemove&&e.addEventListener("mousemove",this.mousemoveEvent))}},{key:"unbindEvent",value:function(t){var e=this.map;this.options.methods&&(this.options.methods.click&&e.removeEventListener("click",this.clickEvent),this.options.methods.mousemove&&e.removeEventListener("mousemove",this.mousemoveEvent))}},{key:"transferToMercator",value:function(){var t=this.map.getMapType().getProjection();if("bd09mc"!==this.options.coordType){var e=this.dataSet.get();e=this.dataSet.transferCoordinate(e,function(e){if(e[0]<-180||180<e[0]||e[1]<-90||90<e[1])return e;var n=t.lngLatToPoint({lng:e[0],lat:e[1]});return[n.x,n.y]},"coordinates","coordinates_mercator"),this.dataSet._set(e)}}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"_canvasUpdate",value:function(t){if(this.canvasLayer){var e=this,i=e.options.animation,a=this.canvasLayer._map,o=Math.pow(2,18-a.getZoom()),r=a.getMapType().getProjection(),s=r.lngLatToPoint(a.getCenter()),l=new BMap.Pixel(s.x-a.getSize().width/2*o,s.y+a.getSize().height/2*o),h=this.getContext();if(e.isEnabledTime()){if(void 0===t)return void n(h);"2d"==this.context&&(h.save(),h.globalCompositeOperation="destination-out",h.fillStyle="rgba(0, 0, 0, .1)",h.fillRect(0,0,h.canvas.width,h.canvas.height),h.restore())}else n(h);if("2d"==this.context)for(var c in e.options)h[c]=e.options[c];else h.clear(h.COLOR_BUFFER_BIT);if(!(e.options.minZoom&&a.getZoom()<e.options.minZoom||e.options.maxZoom&&a.getZoom()>e.options.maxZoom)){var u=1;"2d"!=this.context&&(u=this.canvasLayer.devicePixelRatio);var p={fromColumn:"bd09mc"==e.options.coordType?"coordinates":"coordinates_mercator",transferCoordinate:function(t){var e=(t[0]-l.x)/o*u,n=(l.y-t[1])/o*u;return[e,n]}};void 0!==t&&(p.filter=function(e){var n=i.trails||10;return!!(t&&e.time>t-n&&e.time<t)});var g=e.dataSet.get(p);this.processData(g);var f=a.pointToPixel(new BMap.Point(0,0));"m"==e.options.unit?(e.options.size&&(e.options._size=e.options.size/o),e.options.width&&(e.options._width=e.options.width/o),e.options.height&&(e.options._height=e.options.height/o)):(e.options._size=e.options.size,e.options._height=e.options.height,e.options._width=e.options.width),this.drawContext(h,g,e.options,f),e.options.updateCallback&&e.options.updateCallback(t)}}}},{key:"init",value:function(t){var e=this;e.options=t,this.initDataRange(t),this.context=e.options.context||"2d",e.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(e.options.zIndex),e.options.max&&this.intensity.setMax(e.options.max),e.options.min&&this.intensity.setMin(e.options.min),this.initAnimator(),this.bindEvent()}},{key:"addAnimatorEvent",value:function(){this.map.addEventListener("movestart",this.animatorMovestartEvent.bind(this)),this.map.addEventListener("moveend",this.animatorMoveendEvent.bind(this))}},{key:"show",value:function(){this.map.addOverlay(this.canvasLayer)}},{key:"hide",value:function(){this.map.removeOverlay(this.canvasLayer)}},{key:"draw",value:function(){this.canvasLayer.draw()}}]),e}(St);function Lt(t){this.isAdded_=!1,this.isAnimated_=!1,this.paneName_=Lt.DEFAULT_PANE_NAME_,this.updateHandler_=null,this.resizeHandler_=null,this.topLeft_=null,this.centerListener_=null,this.resizeListener_=null,this.needsResize_=!0,this.requestAnimationFrameId_=null;var e=document.createElement("canvas");function n(t,e){return function(){e.apply(t)}}e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.pointerEvents="none",this.canvas=e,this.canvasCssWidth_=300,this.canvasCssHeight_=150,this.resolutionScale_=1,this.repositionFunction_=n(this,this.repositionCanvas_),this.resizeFunction_=n(this,this.resize_),this.requestUpdateFunction_=n(this,this.update_),t&&this.setOptions(t)}var Mt="undefined"==typeof window?{}:window;Mt.google&&Mt.google.maps&&(Lt.prototype=new google.maps.OverlayView,Lt.DEFAULT_PANE_NAME_="overlayLayer",Lt.CSS_TRANSFORM_=function(){for(var t=document.createElement("div"),e=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],n=0;n<e.length;n++){var i=e[n];if(void 0!==t.style[i])return i}return e[0]}(),Lt.prototype.requestAnimFrame_=Mt.requestAnimationFrame||Mt.webkitRequestAnimationFrame||Mt.mozRequestAnimationFrame||Mt.oRequestAnimationFrame||Mt.msRequestAnimationFrame||function(t){return Mt.setTimeout(t,1e3/60)},Lt.prototype.cancelAnimFrame_=Mt.cancelAnimationFrame||Mt.webkitCancelAnimationFrame||Mt.mozCancelAnimationFrame||Mt.oCancelAnimationFrame||Mt.msCancelAnimationFrame||function(t){},Lt.prototype.setOptions=function(t){void 0!==t.animate&&this.setAnimate(t.animate),void 0!==t.paneName&&this.setPaneName(t.paneName),void 0!==t.updateHandler&&this.setUpdateHandler(t.updateHandler),void 0!==t.resizeHandler&&this.setResizeHandler(t.resizeHandler),void 0!==t.resolutionScale&&this.setResolutionScale(t.resolutionScale),void 0!==t.map&&this.setMap(t.map)},Lt.prototype.setAnimate=function(t){this.isAnimated_=!!t,this.isAnimated_&&this.scheduleUpdate()},Lt.prototype.isAnimated=function(){return this.isAnimated_},Lt.prototype.setPaneName=function(t){this.paneName_=t,this.setPane_()},Lt.prototype.getPaneName=function(){return this.paneName_},Lt.prototype.setPane_=function(){if(this.isAdded_){var t=this.getPanes();if(!t[this.paneName_])throw new Error('"'+this.paneName_+'" is not a valid MapPane name.');t[this.paneName_].appendChild(this.canvas)}},Lt.prototype.setResizeHandler=function(t){this.resizeHandler_=t},Lt.prototype.setResolutionScale=function(t){"number"==typeof t&&(this.resolutionScale_=t,this.resize_())},Lt.prototype.setUpdateHandler=function(t){this.updateHandler_=t},Lt.prototype.onAdd=function(){this.isAdded_||(this.isAdded_=!0,this.setPane_(),this.resizeListener_=google.maps.event.addListener(this.getMap(),"resize",this.resizeFunction_),this.centerListener_=google.maps.event.addListener(this.getMap(),"center_changed",this.repositionFunction_),this.resize_(),this.repositionCanvas_())},Lt.prototype.onRemove=function(){this.isAdded_&&(this.isAdded_=!1,this.topLeft_=null,this.canvas.parentElement.removeChild(this.canvas),this.centerListener_&&(google.maps.event.removeListener(this.centerListener_),this.centerListener_=null),this.resizeListener_&&(google.maps.event.removeListener(this.resizeListener_),this.resizeListener_=null),this.requestAnimationFrameId_&&(this.cancelAnimFrame_.call(Mt,this.requestAnimationFrameId_),this.requestAnimationFrameId_=null))},Lt.prototype.resize_=function(){if(this.isAdded_){var t=this.getMap(),e=t.getDiv().offsetWidth,n=t.getDiv().offsetHeight,i=e*this.resolutionScale_,a=n*this.resolutionScale_,o=this.canvas.width,r=this.canvas.height;o===i&&r===a||(this.canvas.width=i,this.canvas.height=a,this.needsResize_=!0,this.scheduleUpdate()),this.canvasCssWidth_===e&&this.canvasCssHeight_===n||(this.canvasCssWidth_=e,this.canvasCssHeight_=n,this.canvas.style.width=e+"px",this.canvas.style.height=n+"px")}},Lt.prototype.draw=function(){this.repositionCanvas_()},Lt.prototype.repositionCanvas_=function(){var t=this.getMap(),e=t.getBounds().getNorthEast().lat(),n=t.getCenter(),i=Math.pow(2,t.getZoom()),a=n.lng()-180*this.canvasCssWidth_/(256*i);this.topLeft_=new google.maps.LatLng(e,a);var o=this.getProjection(),r=o.fromLatLngToDivPixel(n),s=-Math.round(this.canvasCssWidth_/2-r.x),l=-Math.round(this.canvasCssHeight_/2-r.y);this.canvas.style[Lt.CSS_TRANSFORM_]="translate("+s+"px,"+l+"px)",this.scheduleUpdate()},Lt.prototype.update_=function(){this.requestAnimationFrameId_=null,this.isAdded_&&(this.isAnimated_&&this.scheduleUpdate(),this.needsResize_&&this.resizeHandler_&&(this.needsResize_=!1,this.resizeHandler_()),this.updateHandler_&&this.updateHandler_())},Lt.prototype.getTopLeft=function(){return this.topLeft_},Lt.prototype.scheduleUpdate=function(){this.isAdded_&&!this.requestAnimationFrameId_&&(this.requestAnimationFrameId_=this.requestAnimFrame_.call(Mt,this.requestUpdateFunction_))});var Et=function(t){function e(t,n,i){s(this,e);var a=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i)),o=a;i=i||{},o.init(i),o.argCheck(i);var r={map:t,animate:!1,updateHandler:function(){o._canvasUpdate()},resolutionScale:resolutionScale};return a.canvasLayer=new Lt(r),a.clickEvent=a.clickEvent.bind(a),a.mousemoveEvent=a.mousemoveEvent.bind(a),a.bindEvent(),a}return c(e,t),l(e,[{key:"clickEvent",value:function(t){var n=t.pixel;h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clickEvent",this).call(this,n,t)}},{key:"mousemoveEvent",value:function(t){var n=t.pixel;h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mousemoveEvent",this).call(this,n,t)}},{key:"bindEvent",value:function(t){var e=this.map;this.options.methods&&(this.options.methods.click&&(e.setDefaultCursor("default"),e.addListener("click",this.clickEvent)),this.options.methods.mousemove&&e.addListener("mousemove",this.mousemoveEvent))}},{key:"unbindEvent",value:function(t){var e=this.map;this.options.methods&&(this.options.methods.click&&e.removeListener("click",this.clickEvent),this.options.methods.mousemove&&e.removeListener("mousemove",this.mousemoveEvent))}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"_canvasUpdate",value:function(t){if(this.canvasLayer){var e=this,i=e.options.animation,a=this.getContext();if(e.isEnabledTime()){if(void 0===t)return void n(a);"2d"==this.context&&(a.save(),a.globalCompositeOperation="destination-out",a.fillStyle="rgba(0, 0, 0, .1)",a.fillRect(0,0,a.canvas.width,a.canvas.height),a.restore())}else n(a);if("2d"==this.context)for(var o in e.options)a[o]=e.options[o];else a.clear(a.COLOR_BUFFER_BIT);if(!(e.options.minZoom&&s.getZoom()<e.options.minZoom||e.options.maxZoom&&s.getZoom()>e.options.maxZoom)){var r=1;"2d"!=this.context&&(r=this.canvasLayer.devicePixelRatio);var s=this.map,l=s.getProjection(),h=(r=Math.pow(2,s.zoom)*resolutionScale,l.fromLatLngToPoint(this.canvasLayer.getTopLeft())),c={transferCoordinate:function(t){var e=new google.maps.LatLng(t[1],t[0]),n=l.fromLatLngToPoint(e),i={x:(n.x-h.x)*r,y:(n.y-h.y)*r};return[i.x,i.y]}};void 0!==t&&(c.filter=function(e){var n=i.trails||10;return!!(t&&e.time>t-n&&e.time<t)});var u=e.dataSet.get(c);this.processData(u);var g=new google.maps.LatLng(0,0),f=l.fromLatLngToPoint(g),v={x:(f.x-h.x)*r,y:(f.y-h.y)*r};"m"==e.options.unit&&e.options.size?e.options._size=e.options.size/zoomUnit:e.options._size=e.options.size,this.drawContext(a,new p(u),e.options,v),e.options.updateCallback&&e.options.updateCallback(t)}}}},{key:"init",value:function(t){this.options=t,this.initDataRange(t),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"addAnimatorEvent",value:function(){this.map.addListener("movestart",this.animatorMovestartEvent.bind(this)),this.map.addListener("moveend",this.animatorMoveendEvent.bind(this))}},{key:"show",value:function(){this.map.addOverlay(this.canvasLayer)}},{key:"hide",value:function(){this.map.removeOverlay(this.canvasLayer)}},{key:"draw",value:function(){self.canvasLayer.draw()}}]),e}(St),Pt=void 0;if("undefined"!=typeof maptalks){Pt=function(t){function e(t,n,i){s(this,e);var a=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return a.options_=i,a.dataSet=n,a._initBaseLayer(i),a}return c(e,t),l(e,[{key:"_initBaseLayer",value:function(t){var e=this.baseLayer=new St(null,this.dataSet,t);this.init(t),e.argCheck(t)}},{key:"clickEvent",value:function(t){if(this.baseLayer){var e=t.containerPoint;this.baseLayer.clickEvent(e,t.domEvent)}}},{key:"mousemoveEvent",value:function(t){if(this.baseLayer){var e=t.containerPoint;this.baseLayer.mousemoveEvent(e,t.domEvent)}}},{key:"getEvents",value:function(){return{click:this.clickEvent,mousemove:this.mousemoveEvent}}},{key:"init",value:function(t){var e=this.baseLayer;e.options=t,e.initDataRange(t),e.context=e.options.context||"2d",e.initAnimator()}},{key:"addAnimatorEvent",value:function(){this.map.addListener("movestart",this.animatorMovestartEvent.bind(this)),this.map.addListener("moveend",this.animatorMoveendEvent.bind(this))}}]),e}(maptalks.Layer);var At=function(t){function e(){return s(this,e),u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return c(e,t),l(e,[{key:"needToRedraw",value:function(){var t=this.layer.baseLayer;return!!t.isEnabledTime()||h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"needToRedraw",this).call(this)}},{key:"draw",value:function(){var t=this.layer.baseLayer;this.canvas&&t.isEnabledTime()&&!this._shouldClear||(this.prepareCanvas(),this._shouldClear=!1),this._update(this.gl||this.context,this._mapvFrameTime),delete this._mapvFrameTime,this.completeRender()}},{key:"drawOnInteracting",value:function(){this.draw(),this._shouldClear=!1}},{key:"onSkipDrawOnInteracting",value:function(){this._shouldClear=!0}},{key:"_canvasUpdate",value:function(t){this.setToRedraw(),this._mapvFrameTime=t}},{key:"_update",value:function(t,e){if(this.canvas){var i=this.layer.baseLayer,a=i.options.animation,o=this.getMap();if(i.isEnabledTime()){if(void 0===e)return void n(t);"2d"==i.context&&(t.save(),t.globalCompositeOperation="destination-out",t.fillStyle="rgba(0, 0, 0, .1)",t.fillRect(0,0,t.canvas.width,t.canvas.height),t.restore())}else n(t);if("2d"==i.context)for(var r in i.options)t[r]=i.options[r];else t.clear(t.COLOR_BUFFER_BIT);var s=1;"2d"===i.context&&"heatmap"!==i.options.draw&&(s=i.canvasLayer.devicePixelRatio);var l=new maptalks.Coordinate(0,0),h={fromColumn:"bd09mc"===i.options.coordType?"coordinates_mercator":"coordinates",transferCoordinate:function(t){l.x=t[0],l.y=t[1];var e=o.coordToContainerPoint(l)._multi(s).toArray();return e}};void 0!==e&&(h.filter=function(t){var n=a.trails||10;return!!(e&&t.time>e-n&&t.time<e)});var c=i.dataSet.get(h);i.processData(c),"m"==i.options.unit?(i.options.size&&(i.options._size=i.options.size/zoomUnit),i.options.width&&(i.options._width=i.options.width/zoomUnit),i.options.height&&(i.options._height=i.options.height/zoomUnit)):(i.options._size=i.options.size,i.options._height=i.options.height,i.options._width=i.options.width);var u=new maptalks.Point(0,0),p=o._pointToContainerPoint(u)._multi(s);i.drawContext(t,c,i.options,p),i.options.updateCallback&&i.options.updateCallback(e)}}},{key:"createCanvas",value:function(){if(!this.canvas){var t=this.getMap(),e=t.getSize(),n=maptalks.Browser.retina?2:1,i=n*e.width,a=n*e.height;this.canvas=maptalks.Canvas.createCanvas(i,a,t.CanvasClass);var o=this.layer.baseLayer.context;"2d"===o?(this.context=this.canvas.getContext("2d"),this.layer.options.globalCompositeOperation&&(this.context.globalCompositeOperation=this.layer.options.globalCompositeOperation)):this.gl=this.canvas.getContext("webgl",{alpha:!0,preserveDrawingBuffer:!0,antialias:!1}),this.onCanvasCreate(),this._bindToMapv(),this.layer.fire("canvascreate",{context:this.context,gl:this.gl})}}},{key:"_bindToMapv",value:function(){var t=this.layer.baseLayer;this.devicePixelRatio=maptalks.Browser.retina?2:1,t.canvasLayer=this,t._canvasUpdate=this._canvasUpdate.bind(this),t.getContext=function(){var t=self.getRenderer();return t.gl||t.context}}}]),e}(maptalks.renderer.CanvasRenderer);Pt.registerRenderer("canvas",At)}var Tt=Pt,zt=function(t){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=arguments[1],i=arguments[2];s(this,e);var a=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i));return a.options=i,a.canvasLayer={canvas:null,devicePixelRatio:window.devicePixelRatio},a.layer_=null,a.initDataRange(i),a.initAnimator(),a.onEvents(),t.on("complete",function(){this.init(t,i),this.argCheck(i)},a),a}return c(e,t),l(e,[{key:"init",value:function(t,e){if(!t)throw new Error("not map object");this.map=t,this.context=this.options.context||"2d",this.getCanvasLayer()}},{key:"_canvasUpdate",value:function(t){this.render(this.canvasLayer.canvas,t)}},{key:"render",value:function(t,e){if(t){var i=this.map,a=t.getContext(this.context),o=this.options.animation;if(this.isEnabledTime()){if(void 0===e)return n(a),this;"2d"===this.context&&(a.save(),a.globalCompositeOperation="destination-out",a.fillStyle="rgba(0, 0, 0, .1)",a.fillRect(0,0,a.canvas.width,a.canvas.height),a.restore())}else n(a);if("2d"===this.context)for(var r in this.options)a[r]=this.options[r];else a.clear(a.COLOR_BUFFER_BIT);var s={transferCoordinate:function(t){var e=i.lngLatToContainer(new AMap.LngLat(t[0],t[1]));return[e.x,e.y]}};void 0!==e&&(s.filter=function(t){var n=o.trails||10;return!!(e&&t.time>e-n&&t.time<e)});var l=this.dataSet.get(s);return this.processData(l),"m"===this.options.unit?(this.options.size&&(this.options._size=this.options.size/zoomUnit),this.options.width&&(this.options._width=this.options.width/zoomUnit),this.options.height&&(this.options._height=this.options.height/zoomUnit)):(this.options._size=this.options.size,this.options._height=this.options.height,this.options._width=this.options.width),this.drawContext(a,new p(l),this.options,{x:0,y:0}),this.options.updateCallback&&this.options.updateCallback(e),this}}},{key:"getCanvasLayer",value:function(){if(!this.canvasLayer.canvas&&!this.layer_){var t=this.canvasFunction(),e=this.map.getBounds();this.layer_=new AMap.CanvasLayer({canvas:t,bounds:this.options.bounds||e,zooms:this.options.zooms||[0,22]}),this.layer_.setMap(this.map),this.map.on("mapmove",this.canvasFunction,this),this.map.on("zoomchange",this.canvasFunction,this)}}},{key:"canvasFunction",value:function(){var t=[this.map.getSize().width,this.map.getSize().height],e=t[0],n=t[1];if(this.canvasLayer.canvas){this.canvasLayer.canvas.width=e,this.canvasLayer.canvas.height=n;var i=this.map.getBounds();this.layer_&&this.layer_.setBounds(this.options.bounds||i)}else this.canvasLayer.canvas=function(t,e,n){if("undefined"!==typeof document){var i=document.createElement("canvas");return i.width=t,i.height=e,i}return new n(t,e)}(e,n);return this.render(this.canvasLayer.canvas),this.canvasLayer.canvas}},{key:"removeLayer",value:function(){this.map&&(this.unEvents(),this.map.removeLayer(this.layer_),delete this.map,delete this.layer_,delete this.canvasLayer.canvas)}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"clickEvent",value:function(t){var n=t.pixel;h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clickEvent",this).call(this,n,t)}},{key:"mousemoveEvent",value:function(t){var n=t.pixel;h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mousemoveEvent",this).call(this,n,t)}},{key:"addAnimatorEvent",value:function(){this.map.on("movestart",this.animatorMovestartEvent,this),this.map.on("moveend",this.animatorMoveendEvent,this)}},{key:"onEvents",value:function(){var t=this.map;this.unEvents(),this.options.methods&&(this.options.methods.click&&t.on("click",this.clickEvent,this),this.options.methods.mousemove&&t.on("mousemove",this.mousemoveEvent,this))}},{key:"unEvents",value:function(){var t=this.map;this.options.methods&&(this.options.methods.click&&t.off("click",this.clickEvent,this),this.options.methods.mousemove&&t.off("mousemove",this.mousemoveEvent,this))}}]),e}(St),Ot=function(t){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=arguments[1],i=arguments[2];s(this,e);var a=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i));return a.options=i,a.canvasLayer={canvas:null,devicePixelRatio:window.devicePixelRatio},a.layer_=null,a.previousCursor_=void 0,a.init(t,i),a.argCheck(i),a}return c(e,t),l(e,[{key:"init",value:function(t,e){if(!(t&&t instanceof ol.Map))throw new Error("not map object");this.$Map=t,this.context=this.options.context||"2d",this.getCanvasLayer(),this.initDataRange(e),this.initAnimator(),this.onEvents()}},{key:"_canvasUpdate",value:function(t){this.render(this.canvasLayer.canvas,t)}},{key:"render",value:function(t,e){var i=this.$Map,a=t.getContext(this.context),o=this.options.animation,r=this.options.hasOwnProperty("projection")?this.options.projection:"EPSG:4326";if(this.isEnabledTime()){if(void 0===e)return n(a),this;"2d"===this.context&&(a.save(),a.globalCompositeOperation="destination-out",a.fillStyle="rgba(0, 0, 0, .1)",a.fillRect(0,0,a.canvas.width,a.canvas.height),a.restore())}else n(a);if("2d"===this.context)for(var s in this.options)a[s]=this.options[s];else a.clear(a.COLOR_BUFFER_BIT);var l={transferCoordinate:function(t){return i.getPixelFromCoordinate(ol.proj.transform(t,r,"EPSG:4326"))}};void 0!==e&&(l.filter=function(t){var n=o.trails||10;return!!(e&&t.time>e-n&&t.time<e)});var h=this.dataSet.get(l);return this.processData(h),"m"===this.options.unit?(this.options.size&&(this.options._size=this.options.size/zoomUnit),this.options.width&&(this.options._width=this.options.width/zoomUnit),this.options.height&&(this.options._height=this.options.height/zoomUnit)):(this.options._size=this.options.size,this.options._height=this.options.height,this.options._width=this.options.width),this.drawContext(a,new p(h),this.options,{x:0,y:0}),this.options.updateCallback&&this.options.updateCallback(e),this}},{key:"getCanvasLayer",value:function(){if(!this.canvasLayer.canvas&&!this.layer_){var t=this.getMapExtent();this.layer_=new ol.layer.Image({layerName:this.options.layerName,minResolution:this.options.minResolution,maxResolution:this.options.maxResolution,zIndex:this.options.zIndex,extent:t,source:new ol.source.ImageCanvas({canvasFunction:this.canvasFunction.bind(this),projection:this.options.hasOwnProperty("projection")?this.options.projection:"EPSG:4326",ratio:this.options.hasOwnProperty("ratio")?this.options.ratio:1})}),this.$Map.addLayer(this.layer_),this.$Map.un("precompose",this.reRender,this),this.$Map.on("precompose",this.reRender,this)}}},{key:"reRender",value:function(){if(this.layer_){var t=this.getMapExtent();this.layer_.setExtent(t)}}},{key:"canvasFunction",value:function(t,e,n,i,a){return this.canvasLayer.canvas?(this.canvasLayer.canvas.width=i[0],this.canvasLayer.canvas.height=i[1]):this.canvasLayer.canvas=function(t,e){if("undefined"!==typeof document){var n=document.createElement("canvas");return n.width=t,n.height=e,n}}(i[0],i[1]),this.render(this.canvasLayer.canvas),this.canvasLayer.canvas}},{key:"getMapExtent",value:function(){var t=this.$Map.getSize();return this.$Map.getView().calculateExtent(t)}},{key:"addTo",value:function(t){this.init(t,this.options)}},{key:"removeLayer",value:function(){this.$Map&&(this.unEvents(),this.$Map.un("precompose",this.reRender,this),this.$Map.removeLayer(this.layer_),delete this.$Map,delete this.layer_,delete this.canvasLayer.canvas)}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"clickEvent",value:function(t){var n=t.pixel;h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clickEvent",this).call(this,{x:n[0],y:n[1]},t)}},{key:"mousemoveEvent",value:function(t){var n=t.pixel;h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mousemoveEvent",this).call(this,{x:n[0],y:n[1]},t)}},{key:"addAnimatorEvent",value:function(){this.$Map.on("movestart",this.animatorMovestartEvent,this),this.$Map.on("moveend",this.animatorMoveendEvent,this)}},{key:"onEvents",value:function(){var t=this.$Map;this.unEvents(),this.options.methods&&(this.options.methods.click&&t.on("click",this.clickEvent,this),this.options.methods.mousemove&&t.on("pointermove",this.mousemoveEvent,this))}},{key:"unEvents",value:function(){var t=this.$Map;this.options.methods&&(this.options.methods.click&&t.un("click",this.clickEvent,this),this.options.methods.pointermove&&t.un("pointermove",this.mousemoveEvent,this))}},{key:"setDefaultCursor",value:function(t,e){if(this.$Map){var n=this.$Map.getTargetElement();e?n.style.cursor!==t&&(this.previousCursor_=n.style.cursor,n.style.cursor=t):void 0!==this.previousCursor_&&(n.style.cursor=this.previousCursor_,this.previousCursor_=void 0)}}}]),e}(St),Rt={getDataSet:function(t){var e=[],n=t.features;if(n)for(var i=0;i<n.length;i++){var a=n[i],o=a.geometry,r=a.properties,s={};for(var l in r)s[l]=r[l];s.geometry=o,e.push(s)}return new p(e)}},It={CSVToArray:function(t,e){e=e||",";for(var n=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),i=[[]],a=null;a=n.exec(t);){var o,r=a[1];r.length&&r!==e&&i.push([]),o=a[2]?a[2].replace(new RegExp('""',"g"),'"'):a[3],i[i.length-1].push(o)}return i},getDataSet:function(t,e){for(var n=this.CSVToArray(t,e||","),i=[],a=n[0],o=1;o<n.length-1;o++){for(var r=n[o],s={},l=0;l<r.length;l++){var h=r[l];"geometry"==a[l]&&(h=JSON.parse(h)),s[a[l]]=h}i.push(s)}return new p(i)}};e.version="2.0.35",e.canvasClear=n,e.canvasResolutionScale=function(t){var e=window.devicePixelRatio||1;t.canvas.width=t.canvas.width*e,t.canvas.height=t.canvas.height*e,t.canvas.style.width=t.canvas.width/e+"px",t.canvas.style.height=t.canvas.height/e+"px",t.scale(e,e)},e.canvasDrawSimple=f,e.canvasDrawHeatmap=b,e.canvasDrawGrid=S,e.canvasDrawHoneycomb=C,e.webglDrawSimple=rt,e.webglDrawPoint=R,e.webglDrawLine=T,e.webglDrawPolygon=ot,e.utilCityCenter=r,e.utilCurve=lt,e.utilForceEdgeBundling=function(){var t={},e=[],n=[],i=[],a=.1,o=.1,r=1,s=2,l=6,h=70,c=.6666667,u=.6,p=1e-8;function g(e){return{x:t[e.target].x-t[e.source].x,y:t[e.target].y-t[e.source].y}}function f(e){return Math.sqrt(Math.pow(t[e.source].x-t[e.target].x,2)+Math.pow(t[e.source].y-t[e.target].y,2))}function v(t){return Math.sqrt(Math.pow(t.source.x-t.target.x,2)+Math.pow(t.source.y-t.target.y,2))}function d(e){var n=(t[e.source].x+t[e.target].x)/2,i=(t[e.source].y+t[e.target].y)/2;return{x:n,y:i}}function m(t){for(var e=0,n=1;n<i[t].length;n++){var a=y(i[t][n],i[t][n-1]);e+=a}return e}function y(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function x(t,e){var n=Math.sqrt((e.target.x-e.source.x)*(e.target.x-e.source.x)+(e.target.y-e.source.y)*(e.target.y-e.source.y)),i=((e.source.y-t.y)*(e.source.y-e.target.y)-(e.source.x-t.x)*(e.target.x-e.source.x))/(n*n);return{x:e.source.x+i*(e.target.x-e.source.x),y:e.source.y+i*(e.target.y-e.source.y)}}function w(){for(var t=0;t<e.length;t++)i[t]=[]}function _(){for(var t=0;t<e.length;t++)n[t]=[]}function b(e){for(var n=[],i=0;i<e.length;i++)t[e[i].source].x!=t[e[i].target].x&&t[e[i].source].y!=t[e[i].target].y&&n.push(e[i]);return n}function S(t,e,n){var a=i[t][e-1],o=i[t][e+1],r=i[t][e],s=a.x-r.x+o.x-r.x,l=a.y-r.y+o.y-r.y;return s*=n,l*=n,{x:s,y:l}}function C(t,e,a){for(var o={x:0,y:0},r=n[t],s=0;s<r.length;s++){var l={x:i[r[s]][e].x-i[t][e].x,y:i[r[s]][e].y-i[t][e].y};if(Math.abs(l.x)>p||Math.abs(l.y)>p){var h=1/Math.pow(v({source:i[r[s]][e],target:i[t][e]}),1);o.x+=l.x*h,o.y+=l.y*h}}return o}function k(t,n,i){for(var o=a/(f(e[t])*(n+1)),r=[{x:0,y:0}],s=1;s<n+1;s++){var l={x:0,y:0},h=S(t,s,o),c=C(t,s,i);l.x=i*(h.x+c.x),l.y=i*(h.y+c.y),r.push(l)}return r.push({x:0,y:0}),r}function L(n){for(var a=0;a<e.length;a++)if(1==n)i[a].push(t[e[a].source]),i[a].push(d(e[a])),i[a].push(t[e[a].target]);else{var o=m(a),r=o/(n+1),s=r,l=[];l.push(t[e[a].source]);for(var h=1;h<i[a].length;h++){var c=y(i[a][h],i[a][h-1]);while(c>s){var u=s/c,p=i[a][h-1].x,g=i[a][h-1].y;p+=u*(i[a][h].x-i[a][h-1].x),g+=u*(i[a][h].y-i[a][h-1].y),l.push({x:p,y:g}),c-=s,s=r}s-=c}l.push(t[e[a].target]),i[a]=l}}function M(t,e){return Math.abs((pu=g(t),qu=g(e),(pu.x*qu.x+pu.y*qu.y)/(f(t)*f(e))))}function E(t,e){var n=(f(t)+f(e))/2;return 2/(n/Math.min(f(t),f(e))+Math.max(f(t),f(e))/n)}function A(e,n){var i=(f(e)+f(n))/2,a={x:(t[e.source].x+t[e.target].x)/2,y:(t[e.source].y+t[e.target].y)/2},o={x:(t[n.source].x+t[n.target].x)/2,y:(t[n.source].y+t[n.target].y)/2};return i/(i+y(a,o))}function T(e,n){var i=x(t[n.source],{source:t[e.source],target:t[e.target]}),a=x(t[n.target],{source:t[e.source],target:t[e.target]}),o={x:(i.x+a.x)/2,y:(i.y+a.y)/2},r={x:(t[e.source].x+t[e.target].x)/2,y:(t[e.source].y+t[e.target].y)/2},s=Math.max(0,1-2*y(r,o)/y(i,a));return s}function z(t,e){return Math.min(T(t,e),T(e,t))}function O(t,e){var n=M(t,e)*E(t,e)*A(t,e)*z(t,e);return n}function R(){for(var t=0;t<e.length-1;t++)for(var i=t+1;i<e.length;i++)t!=i&&(Tv=e[t],Uv=e[i],O(Tv,Uv)>=u&&(n[t].push(i),n[i].push(t)))}var I=function(){var t=o,n=h,a=r;w(),_(),L(a),R();for(var s=0;s<l;s++){for(var u=0;u<n;u++){for(var p=[],g=0;g<e.length;g++)p[g]=k(g,a,t);for(var f=0;f<e.length;f++)for(var v=0;v<a+1;v++)i[f][v].x+=p[f][v].x,i[f][v].y+=p[f][v].y}t/=2,a*=2,n*=c,L(a)}return i};return I.nodes=function(e){return 0==arguments.length?t:(t=e,I)},I.edges=function(t){return 0==arguments.length?e:(e=b(t),I)},I.bundling_stiffness=function(t){return 0==arguments.length?a:(a=t,I)},I.step_size=function(t){return 0==arguments.length?o:(o=t,I)},I.cycles=function(t){return 0==arguments.length?l:(l=t,I)},I.iterations=function(t){return 0==arguments.length?h:(h=t,I)},I.iterations_rate=function(t){return 0==arguments.length?c:(c=t,I)},I.subdivision_points_seed=function(t){return 0==arguments.length?P:(P=t,I)},I.subdivision_rate=function(t){return 0==arguments.length?s:(s=t,I)},I.compatbility_threshold=function(t){return 0==arguments.length?compatbility_threshold:(u=t,I)},I},e.utilDataRangeIntensity=d,e.utilDataRangeCategory=ht,e.utilDataRangeChoropleth=ct,e.Map=ut,e.baiduMapCanvasLayer=pt,e.baiduMapAnimationLayer=Ct,e.baiduMapLayer=kt,e.googleMapCanvasLayer=Lt,e.googleMapLayer=Et,e.MaptalksLayer=Tt,e.AMapLayer=zt,e.OpenlayersLayer=Ot,e.DataSet=p,e.geojson=Rt,e.csv=It,Object.defineProperty(e,"__esModule",{value:!0})}(e)}).call(this,n("f28c"))}}]);
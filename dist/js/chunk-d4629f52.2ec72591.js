(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-d4629f52"],{b0ad:function(e,t,n){"use strict";(function(e){n("7f7f"),t.a={methods:{confirmPrompt:function(e,t){var n=this,r=e||this.$t("action.confirmIsRemove");return new Promise(function(e,o){n.$confirm(r,n.$t("action.tip"),{confirmButtonText:n.$t("action.confirm"),cancelButtonText:n.$t("action.cancel"),type:"warning"}).then(function(){e()}).catch(function(){"function"==typeof t&&t()})})},timeLimitFunc:function(e,t,n){if(e&&t)return((new Date(t)-new Date(e))/864e5).toFixed(1)<=n||this.$message.error({message:this.$t("请选择时间范围在"+n+"天内")});this.$message.error({message:this.$t("请选择时间范围")})},addRemoveUnique:function(e,t,n){var r=e.length,o=t.length;return o<r?{name:"add",data:this.$service.isUnique(e,t,n)}:r<o?{name:"remove",data:this.$service.isUnique(t,e,n)}:r==o?{name:"equal",data:this.$service.isUnique(e,t,n)}:void 0},showTooltip:function(e,t){var n=e.target,r=this.$refs[t];r.referenceElm=n,r.$refs.popper.style.display="none",r.doDestroy(),r.setExpectedState(!0),r.handleShowPopper()},mouseenterShowTip:function(e,t,n){var r=e.target;if(r.scrollWidth>r.offsetWidth||n)return this.showTooltip(e,t),n?n.startTime+"~"+n.endTime:r.innerText},mouseenterShowToolTip:function(e,t,n){var r=e.target;return this.showTooltip(e,t),!n&&r.innerText},mouseoverHideTip:function(e){var t=this.$refs[e];t&&(t.setExpectedState(!1),t.handleClosePopper())},asyncDownloadScript:function(t,n){var r=this,o=0<arguments.length&&void 0!==t?t:"Baidu",i=1<arguments.length?n:void 0;return e[o]?e[o]._preloader?e[o]._preloader:Promise.resolve(e[o]):(e[o]={},e[o]._preloader=new Promise(function(t,n){var a=document.createElement("script");a.src=i,e.document.body.appendChild(a),r.$service.isIe()&&r.$service.IE_VERSION<11?a.onreadystatechange=function(){"loaded"!=a.readyState&&"complete"!=a.readyState||(t(e[o]),e[o]._preloader=null)}:a.onload=function(){t(e[o]),e[o]._preloader=null}}),e[o]._preloader)}}}}).call(this,n("c8ba"))},efca:function(e,t,n){"use strict";n.r(t),n("ac6a"),n("96cf");var r=n("3b8d"),o=n("cebc"),i=n("2f62"),a={mixins:[n("b0ad").a],data:function(){return{label:"",common:{enterpriseId:"",fleetId:""}}},computed:Object(o.a)({},Object(i.c)(["user"]),{_table:function(){return this.$refs.routerTable}}),methods:Object(o.a)({},Object(i.b)(["deleteWorkLine"]),{search:function(){this._table.tableInitial()},build:function(){this.$router.push({path:"/monitor/routerManage-addModify",query:{type:"add"}})},showRouter:function(){this.common.enterpriseId?this.$router.push({path:"/monitor/routerManage-look",query:{eid:this.common.enterpriseId,type:this.label.type,action:"swichRouter"}}):this.$message.warning({message:"请先选择公司"})},look:function(e){this.$router.push({path:"/monitor/routerManage-look",query:{id:e.id,fleetId:e.fleetId,action:"look"}})},edit:function(e){this.$router.push({path:"/monitor/routerManage-addModify",query:{id:e.id,type:"modify"}})},del:function(e){var t=this;this.confirmPrompt().then(function(){Object(r.a)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.deleteWorkLine({id:e});case 2:r=n.sent,r.flag?(t.$message.success({message:"删除成功"}),t._table.tableInitial(!0)):t.$message.error({message:"删除失败"});case 5:case"end":return n.stop()}},n)}))()})},returnPage:function(){this.visible=!1},saveRouter:function(e){this.$store.dispatch("queryEnginePoint",{points:JSON.stringify(e.list),mapType:this.$store.getters.mapType+""}).then(function(){})}}),watch:{"common.fleetId":function(e){var t=this;this.common.plateList=[],this.$http({url:"/vehicle/queryVehicleByFleetId",params:{fleetIds:e}}).then(function(e){e.forEach(function(e){t.common.plateList.push({label:e.plateCode,value:e.id})})})}}},s=n("2877"),c=Object(s.a)(a,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"routerManage"},[n("cv-operation",{attrs:{position:"left"}},[n("el-form-item",{attrs:{label:"所属公司/机构"}},[n("cv-dropdown-tree",{attrs:{placeholder:e.$t("common.enterprise.enterpriseName"),url:"/enterprise/findEnterpriseOrganizationTreeList ",label:e.label},on:{"update:label":function(t){e.label=t}},model:{value:e.common.enterpriseId,callback:function(t){e.$set(e.common,"enterpriseId",t)},expression:"common.enterpriseId"}})],1),n("el-form-item",{attrs:{label:"车组选择"}},[n("cv-dropdown-tree",{attrs:{url:"/enterprise/findFleetTreeList","auto-params":{enterpriseId:e.label.enterpriseId,pId:e.label.id,type:e.label.type}},model:{value:e.common.fleetId,callback:function(t){e.$set(e.common,"fleetId","string"==typeof t?t.trim():t)},expression:"common.fleetId"}})],1),n("el-form-item",{staticStyle:{float:"right"}},[n("el-button",{on:{click:e.search}},[e._v("查询")]),n("el-button",{on:{click:e.build}},[e._v("新建")]),n("el-button",{on:{click:e.showRouter}},[e._v("工作情况显示")])],1)],1),n("cv-content",[n("cv-grid",{ref:"routerTable",attrs:{url:"/workLine/queryWorkLines",params:e.common}},[n("el-table-column",{attrs:{label:e.$t("线路名称"),prop:"name"}}),n("el-table-column",{attrs:{label:e.$t("所属公司"),prop:"enterpriseName"}}),n("el-table-column",{attrs:{label:e.$t("所属车组"),prop:"fleetName"}}),n("el-table-column",{attrs:{label:e.$t("action.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[n("cv-span",{attrs:{type:"success"},nativeOn:{click:function(n){return e.look(t.row)}}},[e._v("查看")]),n("cv-span",{attrs:{type:"warning"},nativeOn:{click:function(n){return e.edit(t.row)}}},[e._v("修改")]),n("cv-span",{attrs:{type:"danger"},nativeOn:{click:function(n){return e.del(t.row.id)}}},[e._v("删除")])]}}])})],1)],1)],1)},[],!1,null,null,null).exports;t.default=c}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7111308a"],{"0d45":function(e,t,a){"use strict";var i=a("9add"),n=a("3b6f"),o=a("cd33"),r={mixins:[i.a,o.a,n.a],data:function(){return{energeList:"/monitor/getVehicleListByPlate?onlineStatus",energe:null,treeReady:!0,popover:{alias:"",id:""},listCH:[]}},computed:{_popoverMethods:function(){return this.$refs.popover},_listsMethods:function(){return this.$refs.lists}},methods:{chClick:function(e){var t={text:e,pId:this.listCH.id,plateCode:this.listCH.plateCode,enterpriseId:this.listCH.enterpriseId};this.$store.dispatch("ptSinglePass",t),this.handlerCollectionDestory(),this.$emit("confirm",e)},treeOperation:function(e){var t="",a=this,i=e.type,n=e.isAttention;return 4==i&&(t=1==n?'<i id="tree-collection" class="cv-icon-font el-icon-tsp-shoucang" style="color:#f3aa4e"></i>':'<i id="tree-collection" class="cv-icon-font el-icon-tsp-shoucang1"></i>'),{template:t,methods:function(){var t=document.getElementById("tree-collection");t&&(t.onclick=function(t){a.handlerCollection(t,e)})}}},handlerCollectionDestory:function(){this.mixins_hidePopover(this._popoverMethods)},attentionEditHandler:function(e,t){e.stopPropagation(),this.listCH=t,this.mixins_showPopover(this._popoverMethods,e.target)}},mounted:function(){var e=this;this.$http({url:"/monitor/findVehicleTreeInfoList",params:{flag:!1,carCategory:1}}).then(function(t){t.flag&&(e.energe=t.data,e.treeReady=!1)})}},s=a("2877"),c=Object(s.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cv-tabs-vehiclelists"},[a("cv-tabs",{directives:[{name:"loading",rawName:"v-loading",value:e.treeReady,expression:"treeReady"}],staticClass:"cv-tabs-tree",attrs:{titles:["车辆选择","车辆列表"],isScrollbar:"",type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("cv-tree-search",{ref:"tree",attrs:{data:e.energe,"icons-filter":e.treeIconsFilter,"node-filter":e.nodeFilter,operation:e.isOperation&&e.treeOperation,"limit-check":e.handlerLimitCheck}}),a("cv-tree-lists",{ref:"lists",attrs:{"is-check":!1,"search-api":e.energeList,autoParams:{carCategory:1}},on:{"node-click":e.handlerListsClick},scopedSlots:e._u([{key:"label",fn:function(t){return[a("cv-icon",{attrs:{name:"2"==t.row.deviceTypeCode?"shipinyuan":"cheliang1",color:"1"==t.row.onlineStatus?"#1bca22":""}}),a("span",[e._v(e._s(t.row.plateCode||t.row.text))])]}},{key:"operation",fn:function(t){return[0<t.row.channelInfos.length?a("cv-icon",{attrs:{name:"shijian1"},on:{click:function(a){return e.attentionEditHandler(a,t.row)}}}):e._e()]}}])},[a("template",{slot:"checkbox"},[a("el-checkbox",{attrs:{label:"1"}},[e._v("在线")]),a("el-checkbox",{attrs:{label:"0"}},[e._v("离线")])],1)],2)],1),a("el-popover",{ref:"popover",attrs:{placement:"bottom",width:"160"}},[a("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handlerCollectionDestory,expression:"handlerCollectionDestory"}]},e._l(e.listCH.channelInfos,function(t){return a("li",{key:t.id,staticStyle:{padding:"5px",cursor:"pointer"},on:{click:function(a){return e.chClick(t.channelName)}}},[e._v(e._s(t.channelName))])}),0)])],1)},[],!1,null,null,null);t.a=c.exports},6557:function(e,t,a){"use strict";a.r(t),a("7f7f"),a("ac6a");var i=a("cebc"),n={components:{energeTree:a("0d45").a},data:function(){return{treeLoading:!1,energetree:null,searchTime:[this.$filter.format(new Date-864e5,"yyyy-MM-dd HH:mm:ss"),this.$filter.format(new Date-864e5,"yyyy-MM-dd HH:mm:ss")],pickerOptions0:{disabledDate:function(e){return e.getTime()>Date.now()-864e5}},optionsContext:[{color:"#c03736",name:"电池最高电压",key:"maxVoltage"},{color:"#344b5b",name:"电池最低电压",key:"minVoltage"}],voltageContext:[{color:"#c03736",name:"电池最高温度",key:"maxTemperature"},{color:"#344b5b",name:"电池最低温度",key:"minTemperature"}],searchData:{vehicleId:"",iTime:"0"},plateCode:"--",time:"",timeList:[{name:"默认",id:"0"},{name:"1分钟",id:"1"},{name:"5分钟",id:"5"},{name:"10分钟",id:"10"},{name:"20分钟",id:"20"}],dataItem:[],treeChecked:!1,secondItem:[]}},methods:{handler:function(e){},showEcharts:function(e){var t=this,a=[],n=[];a.push(Object(i.a)({},this.optionsContext[0],{data:e.maxvoltages})),a.push(Object(i.a)({},this.optionsContext[1],{data:e.minvoltas})),e.dataTimes&&e.dataTimes.forEach(function(e){n.push(t.$filter.format(e,"yyyy-MM-dd  HH:mm:ss"))});var o=a.map(function(e){return{name:e.name,type:"line",itemStyle:{normal:{color:e.color}},data:e.data}}),r={title:{text:"电池电压极值曲线图"},yAxis:[{type:"value",name:"电压"}],legend:{left:200,top:20,data:this.optionsContext.map(function(e){return e.name})},grid:{left:"8%",right:"8%",bottom:"5%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:n,name:"时间"},series:o};this.dataItem=r},voltageEcharts:function(e){var t=this,a=[],n=[];e.dataTimes&&e.dataTimes.forEach(function(e){a.push(t.$filter.format(e,"yyyy-MM-dd  HH:mm:ss"))}),n.push(Object(i.a)({},this.voltageContext[0],{data:e.maxtemps})),n.push(Object(i.a)({},this.voltageContext[1],{data:e.minvoltas}));var o=n.map(function(e){return{name:e.name,type:"line",itemStyle:{normal:{color:e.color}},data:e.data}}),r={title:{text:"电池温度极值曲线图"},yAxis:[{type:"value",name:"温度"}],legend:{left:200,top:20,data:this.voltageContext.map(function(e){return e.name})},grid:{left:"8%",right:"8%",bottom:"5%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:a,name:"时间"},series:o};this.secondItem=r},searchEchart:function(){var e=this,t=this;this.searchData.vehicleId?(this.searchData.startDate=this.searchTime[0]||"",this.searchData.endDate=this.searchTime[1]||"",this.$store.dispatch("queryPeakData",this.searchData).then(function(a){a.flag?208==a.errorCode?(e.dataItem={title:{text:"电池电压极值曲线图"},legend:{data:t.optionsContext.map(function(e){return e.name})},grid:{top:"50px"},xAxis:{type:"category",boundaryGap:!1,data:"暂无数据"},series:["暂无数据"]},e.secondItem={title:{text:"电池温度极值曲线图"},legend:{data:t.voltageContext.map(function(e){return e.name})},grid:{top:"50px"},xAxis:{type:"category",boundaryGap:!1,data:"暂无数据"},series:["暂无数据"]}):(e.showEcharts(a.data),e.voltageEcharts(a.data)):e.$message.error({message:e.$t("error."+a.errorCode)})})):this.$message.warning("请选择车辆")}},mounted:function(){var e=this;this.$http({url:"/monitor/findVehicleTreeInfoList",params:{flag:!1,carCategory:1}}).then(function(t){e.energetree=t.data,e.treeLoading=!1})}},o=(a("cb4b"),a("2877")),r=Object(o.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"alarm"},[a("cv-header",[a("el-form-item",{attrs:{label:"统计间隔时间"}},[a("el-select",{attrs:{clearable:""},model:{value:e.searchData.iTime,callback:function(t){e.$set(e.searchData,"iTime",t)},expression:"searchData.iTime"}},e._l(e.timeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"查询时间"}},[a("el-date-picker",{attrs:{editable:!1,size:"small",type:"datetimerange","picker-options":e.pickerOptions0,"value-format":"yyyy-MM-dd  HH:mm:ss",clearable:!1},model:{value:e.searchTime,callback:function(t){e.searchTime=t},expression:"searchTime"}})],1)],1),a("cv-content",[a("energe-tree",{staticClass:"vehiclemaster-tree",attrs:{slot:"aside","node-monitor":e.handler},slot:"aside"})],1)],1)},[],!1,null,"74ee6db7",null).exports;t.default=r},"7c67":function(e,t,a){},cb4b:function(e,t,a){"use strict";var i=a("7c67");a.n(i).a}}]);
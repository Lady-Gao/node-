(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-375a2c8c"],{"05c0":function(t,e,i){"use strict";i("7f7f"),i("20d6"),i("ac6a");var n=i("cebc"),a=i("3f4e"),s=i("2f62"),o={name:"CvPublictreeContent",components:{CvContent:a.a},props:{model:String,vehicleMonitor:Function,loading:Boolean,noresize:{default:!1,type:Boolean}},data:function(){return{entryList:[],condition:""}},computed:Object(n.a)({},Object(s.c)(["onlineList","isAttention","socketEnterprise","socketVehicle","vehicle_data","vehicleCondition"]),{isCheck:function(){switch(this.model){case"multi":return!0;case"single":default:return!1}},_treeMethods:function(){return this.$refs.tabs},_contentMethods:function(){return this.$refs.content}}),beforeDestroy:function(){var t=this._treeMethods.getAllNodes;this.setStoreVehicleSearchCondition(this.condition),this.setStoreVehicleData(t())},mounted:function(){var t=this._treeMethods.$refs.tree.reference().ztreeApi;t()&&t().checkAllNodes(!1)},methods:Object(n.a)({},Object(s.b)(["setStoreVehicleData","setStoreVehicleSearchCondition"]),{handlerVehicleSearch:function(t){this.condition=t},vehicle_Monitor:function(t){var e=t.data;if(t.name,"function"==typeof this.vehicleMonitor)switch(this.model){case"multi":return this.vehicle_Monitor_multi(t);case"single":return this.vehicleMonitor(e[0])}},vehicle_Monitor_multi:function(t){var e=this,i=t.data;switch(t.name){case"check":this.entryList=this.entryList.concat(i);break;case"cancel":i.forEach(function(t){var i=e.entryList.findIndex(function(e){return e.id==t.id});0<=i&&e.entryList.splice(i,1)})}this.vehicleMonitor(this.entryList)}})},r=(i("45d7"),i("2877")),l=Object(r.a)(o,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("cv-content",{ref:"content",attrs:{loading:t.loading,noresize:t.noresize}},[t.model?i("cv-tabs-tree",{ref:"tabs",staticClass:"vehiclemaster-tree",attrs:{slot:"aside","vehicle-search":t.vehicleCondition,"is-checked":t.isCheck,"tree-data":t.vehicle_data,"online-monitor":t.onlineList,"vehicle-monitor":t.socketVehicle,"attention-monitor":t.isAttention,"enterprise-fleet-monitor":t.socketEnterprise,"node-monitor":t.vehicle_Monitor},on:{"vehicle-choose-search":t.handlerVehicleSearch},slot:"aside"}):t._e(),t._t("default")],2)},[],!1,null,"2dfdf41b",null).exports;l.install=function(t){t.component(l.name,l)},e.a=l},"394c":function(t,e,i){"use strict";var n=i("c35d");i.n(n).a},"45d7":function(t,e,i){"use strict";var n=i("6e18");i.n(n).a},"5ac0":function(t,e,i){"use strict";i.r(e),i("28a5");var n=i("cebc"),a={name:"Screenshot",components:{CvPublictreeContent:i("05c0").a},data:function(){return{operation:{startTime:this.$filter.format(new Date,"yyyy-MM-dd start"),endTime:this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss"),channel:null,vehicleId:""},times:[this.$filter.format(new Date,"yyyy-MM-dd start"),this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss")],imgpic:[],multimediaImgList:{options:{current:1,size:10,total:0,flag:!1},table:[],vehicleId:""},tipFlag:!0,msg:"请选择左侧车辆查询数据"}},methods:{photoViewer:function(t){var e=this;this.tipFlag=!1,t?(this.multimediaImgList.options.flag=!0,this.multimediaImgList.options.current=1):this.multimediaImgList.options.flag=!1;var i=this.$loading({target:document.querySelector(".loadding")});this.imgpic=[];var a=Object(n.a)({},this.operation,{current:this.multimediaImgList.options.current,size:this.multimediaImgList.options.size});this.multimediaImgList.options.total=0,this.$http({url:"/screenshot/findScreenShotInfo",params:a}).then(function(t){if(e.msg="没有查询到车辆图片数据",i.close(),t.flag&&208!=t.errorCode){var n=t.data.records;if(e.imgpic=[],e.multimediaImgList.options.size=t.data.size,e.multimediaImgList.options.current=t.data.current,e.multimediaImgList.options.total=t.data.total,n&&0<n.length){e.msg="";for(var a=0;a<n.length;a++)e.imgpic.push({url:n[a].url,carCode:n[a].plateCode,imgDescribe:n[a].imgDescribe,gpsSpeed:n[a].channel,plateColor:e.$filter.plateCodeColor(n[a].plateColor)})}}else e.tipFlag=!0,e.multimediaImgList.options.size=10,e.multimediaImgList.options.current=1,e.multimediaImgList.options.total=0}).catch(function(){e.tipFlag=!0,i.close()})},getImgUrl:function(t){return this.$COMMON.baseUrl.split("/api")[0]+t},handlerVehicleMonitor:function(t){this.operation.vehicleId=t.id},handlerCurrentChange:function(){this.handleClick(!1)},handlerSizeChange:function(t){this.handleClick(!1,t)},handleClick:function(t,e){t&&(this.multimediaImgList.options.current=t),e&&(this.multimediaImgList.options.size=e),this.photoViewer()}},watch:{times:function(t){t?(this.operation.startTime=t[0],this.operation.endTime=t[1]):(this.operation.startTime="",this.operation.endTime="")}}},s=(i("394c"),i("2877")),o=Object(s.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cv-multimedia-manage"},[i("cv-operation",{staticClass:"header",attrs:{position:"left"}},[i("el-form-item",{attrs:{label:"起止日期:"}},[i("div",{staticClass:"block"},[i("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择时间范围",type:"datetimerange",size:"small",editable:!1},model:{value:t.times,callback:function(e){t.times=e},expression:"times"}})],1)]),i("el-form-item",{attrs:{label:"通道号"}},[i("el-select",{attrs:{placeholder:"通道号",clearable:""},model:{value:t.operation.channel,callback:function(e){t.$set(t.operation,"channel",e)},expression:"operation.channel"}},t._l(32,function(t){return i("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),i("el-form-item",{staticStyle:{float:"right"}},[i("cv-tool",{staticClass:"cv-tool",staticStyle:{margin:"0"},attrs:{name:t.$route.name,data:t.$store.getters.monitorMenu,"is-export":!1,"is-remove":!1,"is-add":!1,"is-modify":!1},on:{search:t.photoViewer}})],1)],1),i("cv-content",[i("cv-publictree-content",{attrs:{model:"single","vehicle-monitor":t.handlerVehicleMonitor}},[i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.tipFlag,expression:"tipFlag"}],ref:"tip"},[i("center",{staticStyle:{height:"200px","line-height":"200px","text-align":"center","font-size":"24px"}},[t._v(t._s(t.msg))])],1),i("cv-scrollbar",{staticClass:"cvs"},[i("ul",{staticClass:"loadding",staticStyle:{overflow:"auto"}},t._l(t.imgpic,function(e){return i("li",{key:e.id,staticClass:"card"},[i("el-card",{attrs:{"body-style":"padding:0px;border:0;"}},[i("img",{staticClass:"image",attrs:{src:e.url}}),i("div",{staticStyle:{padding:"14px"}},[i("span",[t._v("车牌号码:")]),i("span",[t._v(t._s(e.carCode))]),i("br"),i("span",[t._v("车牌颜色:")]),i("span",[t._v(t._s(e.plateColor))]),i("br"),i("span",[t._v("通道号:")]),i("span",[t._v(t._s(e.channel))]),i("br"),i("span",[t._v("备注信息:")]),i("span",[t._v(t._s(e.imgDescribe))]),i("br")])])],1)}),0),i("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!=t.multimediaImgList.options.total,expression:"multimediaImgList.options.total == 0 ? false : true"}],staticClass:"cv-grid-pagination",staticStyle:{float:"right","margin-right":"20px"},attrs:{total:t.multimediaImgList.options.total,small:"",layout:"total, sizes, prev, pager, next","current-page":t.multimediaImgList.options.current,"page-sizes":[10,20,30,40,50]},on:{"current-change":t.handlerCurrentChange,"size-change":t.handlerSizeChange,"update:currentPage":function(e){return t.$set(t.multimediaImgList.options,"current",e)},"update:current-page":function(e){return t.$set(t.multimediaImgList.options,"current",e)}}})],1)],1)])],1)],1)},[],!1,null,null,null).exports;e.default=o},"6e18":function(t,e,i){},c35d:function(t,e,i){}}]);
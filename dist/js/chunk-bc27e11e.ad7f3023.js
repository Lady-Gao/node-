(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-bc27e11e"],{"95de":function(e,t,o){"use strict";o.r(t),o("ac6a");var i={props:{options:{}},mixins:[],data:function(){return{formData:{msginfo:"",type:""},loading:!1,rules:{type:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],msginfo:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}]}}},methods:{confirm:function(){var e=this;this.$refs.addForm.validate(function(t){if(!t)return!1;var o={type:e.formData.type,msginfo:e.formData.msginfo,txtLogId:0,enterpriseId:e.$store.getters.user.enterpriseId};e.loading=!0,e.$store.dispatch("insertPredefinedInfo",o).then(function(t){e.loading=!1,!t.flag&&t.errorCode?e.$message.error({message:e.$t("error."+t.errorCode)}):(e.$emit("update:loadTable",!0),e.$message.success(e.$t("action.addSuccess")),e.options.flag=!1)}).catch(function(){e.loading=!1})})},enterpriseId:function(e){this.formData.id=e.id}},watch:{"options.flag":function(e){e||this.$refs.addForm.resetFields()}}},a=o("2877"),n={props:{options:{}},data:function(){return{rules:{msginfo:[{min:0,max:500,message:this.$filter.lanReplace(this.$t("filter.Length"),{min:0,max:500})}]}}},methods:{confirm:function(){this.$emit("update:isLoading",!0),this.options.flag=!1}}},s={props:{options:{}},data:function(){return{formData:{msginfo:"",type:"",id:""},disable:!0,rules:{type:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],msginfo:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}]},loading:!1}},methods:{confirm:function(){var e=this;this.$refs.modify.validate(function(t){if(t){var o={msginfo:e.formData.msginfo,type:e.formData.type,id:e.options.modify.id};e.loading=!0,e.$store.dispatch("updatePredefinedInfo",o).then(function(t){e.loading=!1,!t.flag&&t.errorCode?e.$message.error({message:e.$t("error."+t.errorCode)}):(e.options.flag=!1,e.$emit("update:loadTable",!0),e.$message.success(e.$t("action.modifySuccess")))}).catch(function(){e.loading=!1})}})}},watch:{"options.flag":function(e){e||(this.options.name="")}},mounted:function(){this.formData.msginfo=this.options.modify.msginfo,this.formData.type=this.options.modify.type+""}},r={components:{add:Object(a.a)(i,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{staticClass:"container",attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("el-form",{ref:"addForm",attrs:{model:e.formData,"label-position":"top",inline:!1,rules:e.rules}},[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:e.$t("predefinedInfo.type"),prop:"type"}},[o("el-select",{staticStyle:{width:"550px"},attrs:{size:"small",clearable:""},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},[o("el-option",{attrs:{label:e.$t("predefinedInfo.selectOpt1"),value:"0"}}),o("el-option",{attrs:{label:e.$t("predefinedInfo.selectOpt2"),value:"2"}}),o("el-option",{attrs:{label:e.$t("predefinedInfo.selectOpt3"),value:"3"}}),o("el-option",{attrs:{label:e.$t("predefinedInfo.selectOpt4"),value:"4"}})],1)],1)],1),o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:e.$t("predefinedInfo.msginfo"),prop:"msginfo"}},[o("el-input",{staticStyle:{width:"550px"},attrs:{type:"textarea",rows:3,size:"small"},model:{value:e.formData.msginfo,callback:function(t){e.$set(e.formData,"msginfo","string"==typeof t?t.trim():t)},expression:"formData.msginfo"}})],1)],1)],1)],1),o("el-col",{staticClass:"dialog-footer",attrs:{span:24}},[o("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.confirm}},[e._v(e._s(e.$t("action.save")))]),o("el-button",{on:{click:function(t){e.options.flag=!1}}},[e._v(e._s(e.$t("action.cancel")))])],1)],1)},[],!1,null,"9c139e9a",null).exports,search:Object(a.a)(n,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{ref:"searchFormT",attrs:{model:e.options.search,"label-position":"top","label-width":"80px",rules:e.rules}},[o("el-form-item",{attrs:{label:e.$t("predefinedInfo.type"),prop:"type"}},[o("el-select",{staticStyle:{width:"360px"},attrs:{size:"small",clearable:""},model:{value:e.options.search.type,callback:function(t){e.$set(e.options.search,"type",t)},expression:"options.search.type"}},[o("el-option",{attrs:{label:e.$t("predefinedInfo.selectOpt1"),value:"0"}}),o("el-option",{attrs:{label:e.$t("predefinedInfo.selectOpt2"),value:"2"}}),o("el-option",{attrs:{label:e.$t("predefinedInfo.selectOpt3"),value:"3"}}),o("el-option",{attrs:{label:e.$t("predefinedInfo.selectOpt4"),value:"4"}})],1)],1),o("el-form-item",{attrs:{label:e.$t("predefinedInfo.msginfo"),prop:"msginfo"}},[o("el-input",{staticStyle:{width:"360px"},attrs:{size:"small",maxlength:100},model:{value:e.options.search.msginfo,callback:function(t){e.$set(e.options.search,"msginfo",t)},expression:"options.search.msginfo"}})],1)],1),o("div",{staticClass:"dialog-footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v(e._s(e.$t("action.confirm")))]),o("el-button",{on:{click:function(t){e.options.flag=!1}}},[e._v(e._s(e.$t("action.cancel")))])],1)],1)},[],!1,null,null,null).exports,modify:Object(a.a)(s,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{staticClass:"container",attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("el-form",{ref:"modify",attrs:{model:e.formData,"label-position":"top",inline:!1,rules:e.rules}},[o("el-col",{attrs:{span:24}},[o("el-form-item",{ref:"modify",attrs:{label:e.$t("predefinedInfo.type"),prop:"type"}},[o("el-select",{staticStyle:{width:"550px"},attrs:{size:"small",clearable:""},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},[o("el-option",{attrs:{label:e.$t("predefinedInfo.selectOpt1"),value:"0"}}),o("el-option",{attrs:{label:e.$t("predefinedInfo.selectOpt2"),value:"2"}}),o("el-option",{attrs:{label:e.$t("predefinedInfo.selectOpt3"),value:"3"}}),o("el-option",{attrs:{label:e.$t("predefinedInfo.selectOpt4"),value:"4"}})],1)],1)],1),o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:e.$t("predefinedInfo.msginfo"),prop:"msginfo"}},[o("el-input",{staticStyle:{width:"550px"},attrs:{type:"textarea",rows:3,size:"small"},model:{value:e.formData.msginfo,callback:function(t){e.$set(e.formData,"msginfo","string"==typeof t?t.trim():t)},expression:"formData.msginfo"}})],1)],1)],1)],1),o("el-col",{staticClass:"dialog-footer",attrs:{span:24}},[o("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.confirm}},[e._v(e._s(e.$t("action.confirm")))]),o("el-button",{on:{click:function(t){e.options.flag=!1}}},[e._v(e._s(e.$t("action.cancel")))])],1)],1)},[],!1,null,"bc1119be",null).exports},mixins:[o("b0ad").a],computed:{_table:function(){return this.$refs.predTable}},data:function(){return{loadingTabel:!1,tableFlag:!1,dialog:{flag:!1,title:"--",size:"dialog-small",name:"search",search:{msginfo:"",type:""},modify:{}},multipleSelection:[]}},methods:{toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},getSelectedCount:function(){return this.multipleSelection.length},getSelectedIds:function(){var e=[];return this.multipleSelection.map(function(t){e.push(t.id)}),e},add:function(e){this.$service.mapParams(this.dialog,{title:e.title,name:"add",size:"dialog-small",flag:!0})},search:function(e){this.$service.mapParams(this.dialog,{title:e.title,name:"search",size:"dialog-tiny",flag:!0})},remove:function(e){var t=this;this.confirmPrompt().then(function(){t.$store.dispatch("deletePredefinedInfoById",e.row.id).then(function(e){!e.flag&&e.errorCode?t.$message.error({message:t.$t("error."+e.errorCode)}):(t._table.tableInitial(),t.$message.success({message:t.$t("action.removeSuccess")}))})})},removeBatch:function(){var e=this;0<this.getSelectedCount()?this.confirmPrompt().then(function(){e.$store.dispatch("deletePredefinedInfoByBatch",e.getSelectedIds().join(",")).then(function(t){!t.flag&&t.errorCode?e.$message.error({message:e.$t("error."+t.errorCode)}):(e._table.tableInitial(),e.$message.success({message:e.$t("action.removeSuccess")}))})}):this.$message.warning({message:this.$t("eventInfo.alertToSelect")})},modify:function(e){this.$service.mapParams(this.dialog,{title:this.$t("power.modify"),name:"modify",size:"dialog-small",flag:!0}),this.dialog.modify=e},filterType:function(e){switch(e.type){case 0:return this.$t("predefinedInfo.selectOpt1");case 2:return this.$t("predefinedInfo.selectOpt2");case 3:return this.$t("predefinedInfo.selectOpt3");case 4:return this.$t("predefinedInfo.selectOpt4")}}},watch:{"dialog.flag":function(e){e||(this.dialog.name="")},loadingTabel:function(e){e&&(this._table.tableInitial(e),this.loadingTabel=!1)},tableFlag:function(e){e&&(this._table.tableInitial(),this.tableFlag=!1)}}},l=(o("9621"),Object(a.a)(r,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"cv-predefined-info"},[o("cv-operation",[o("el-form-item",[o("cv-tool",{staticStyle:{margin:"0px"},attrs:{name:e.$route.name,data:e.$store.getters.monitorMenu,"is-modify":!1,"is-remove":!0,"is-export":!1},on:{add:e.add,remove:e.removeBatch,search:e.search}})],1)],1),o("cv-content",[o("cv-grid",{ref:"predTable",attrs:{params:e.dialog.search,url:"/predefinedinfo/getPredefinedInfoPage"},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"55"}}),o("el-table-column",{attrs:{label:e.$t("predefinedInfo.type"),prop:"type",formatter:e.filterType}}),o("el-table-column",{attrs:{label:e.$t("predefinedInfo.msginfo"),prop:"msginfo"}}),o("el-table-column",{attrs:{label:"操作",prop:"operation","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("cv-span",{attrs:{type:"primary"},nativeOn:{click:function(o){return e.modify(t.row)}}},[e._v("修改")]),o("cv-span",{attrs:{type:"danger"},nativeOn:{click:function(o){return e.remove(t)}}},[e._v("删除")])]}}])})],1)],1),o("el-dialog",{attrs:{visible:e.dialog.flag,title:e.dialog.title,"custom-class":e.dialog.size},on:{"update:visible":function(t){return e.$set(e.dialog,"flag",t)}}},[o(e.dialog.name,{tag:"component",attrs:{options:e.dialog,isLoading:e.loadingTabel,loadTable:e.tableFlag},on:{"update:isLoading":function(t){e.loadingTabel=t},"update:is-loading":function(t){e.loadingTabel=t},"update:loadTable":function(t){e.tableFlag=t},"update:load-table":function(t){e.tableFlag=t}}})],1)],1)},[],!1,null,null,null).exports);t.default=l},9621:function(e,t,o){"use strict";var i=o("b23f");o.n(i).a},b0ad:function(e,t,o){"use strict";(function(e){o("7f7f"),t.a={methods:{confirmPrompt:function(e,t){var o=this,i=e||this.$t("action.confirmIsRemove");return new Promise(function(e,a){o.$confirm(i,o.$t("action.tip"),{confirmButtonText:o.$t("action.confirm"),cancelButtonText:o.$t("action.cancel"),type:"warning"}).then(function(){e()}).catch(function(){"function"==typeof t&&t()})})},timeLimitFunc:function(e,t,o){if(e&&t)return((new Date(t)-new Date(e))/864e5).toFixed(1)<=o||this.$message.error({message:this.$t("请选择时间范围在"+o+"天内")});this.$message.error({message:this.$t("请选择时间范围")})},addRemoveUnique:function(e,t,o){var i=e.length,a=t.length;return a<i?{name:"add",data:this.$service.isUnique(e,t,o)}:i<a?{name:"remove",data:this.$service.isUnique(t,e,o)}:i==a?{name:"equal",data:this.$service.isUnique(e,t,o)}:void 0},showTooltip:function(e,t){var o=e.target,i=this.$refs[t];i.referenceElm=o,i.$refs.popper.style.display="none",i.doDestroy(),i.setExpectedState(!0),i.handleShowPopper()},mouseenterShowTip:function(e,t,o){var i=e.target;if(i.scrollWidth>i.offsetWidth||o)return this.showTooltip(e,t),o?o.startTime+"~"+o.endTime:i.innerText},mouseenterShowToolTip:function(e,t,o){var i=e.target;return this.showTooltip(e,t),!o&&i.innerText},mouseoverHideTip:function(e){var t=this.$refs[e];t&&(t.setExpectedState(!1),t.handleClosePopper())},asyncDownloadScript:function(t,o){var i=this,a=0<arguments.length&&void 0!==t?t:"Baidu",n=1<arguments.length?o:void 0;return e[a]?e[a]._preloader?e[a]._preloader:Promise.resolve(e[a]):(e[a]={},e[a]._preloader=new Promise(function(t,o){var s=document.createElement("script");s.src=n,e.document.body.appendChild(s),i.$service.isIe()&&i.$service.IE_VERSION<11?s.onreadystatechange=function(){"loaded"!=s.readyState&&"complete"!=s.readyState||(t(e[a]),e[a]._preloader=null)}:s.onload=function(){t(e[a]),e[a]._preloader=null}}),e[a]._preloader)}}}}).call(this,o("c8ba"))},b23f:function(e,t,o){}}]);
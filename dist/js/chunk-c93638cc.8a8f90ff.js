(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-c93638cc"],{8369:function(e,t,a){"use strict";var i=a("cebc");t.a={data:function(){return{table:{size:10,total:0,current:1,flag:!1,loading:!1,data:[]}}},methods:{tableLoading:function(e,t,a,n){var r=this;a?(this.table.flag=!0,this.table.current=1):this.table.flag=!1,this.table.loading=!0;var o=Object(i.a)({current:this.table.current,size:this.table.size},t);this.$http(n?{url:e,data:o}:{url:e,params:o}).then(function(e){var t=e.data;e.flag&&0!=t.length?(r.table.data=t.records,r.table.total=t.total,r.table.current=t.current):(r.table.data=[],r.table.total=0),r.table.loading=!1}).catch(function(e){r.table.loading=!1})},tableFilterColor:function(e){return this.$filter.plateCodeColor(e.plateColor)},tableFilterIcType:function(e){return this.$filter.icType(e.state)},tableFilterIcResult:function(e){return this.$filter.icResult(e.readerresult)},tableFilterTiredAlarm:function(e){return this.$filter.tiredAlarmType(e.alarm)},tableFilterTiredAdas:function(e){return this.$filter.tiredAdasType(e.alarm)},tableFilterOrderTypeS:function(e){return this.$filter.orderTypeS(e.sendFlag)},tableFilterFormat:function(e){return this.$filter.format(e.orderTime||e.gpsTime)},tableFilterFormats:function(e){return this.$filter.format(e.backTime)},tableBusLineType:function(e){return this.$filter.lineType(e.lineType)},tableFilterAcc:function(e){return this.$filter.accStatus(e.accStatus)},tableSplitMobile:function(e){return e.mobileCode?e.mobileCode.slice(1,e.mobileCode.length):""},tableConfirm:function(e){return this.$filter.isConfirm(e.isnotarize)},tableUpkeep:function(e){return this.$filter.isConfirm(e.type)},tableRenewal:function(e){return this.$filter.renewal(e.state)},tableReMot:function(e){return this.$filter.reMot(e.state)},tableOil:function(e){return this.$filter.fixNumber(e.total,2)},tableSex:function(e){return this.$filter.sex(e.sex)},plateCodeF:function(e){return e.plateCode?e.plateCode:"--"},plateCodeAndColor:function(e){return e.plateCode+"("+this.$filter.plateCodeColor(e.plateColor)+")"},driverStuas:function(e){return this.$filter.alarmStatus(e.fatigueDrive)},overStuas:function(e){return this.$filter.alarmStatus(e.tOversSpeed)},overHStuas:function(e){return this.$filter.alarmStatus(e.tOverSpeedH)},filterAlStuas:function(e){return this.$filter.alarmStatus(e.overSpeed)},filteralarmStuas:function(e){return this.$filter.alarmStatus(e.overSpeedH)},filterLStuas:function(e){return this.$filter.alarmStatus(e.forbid)},applyFlag:function(e){return this.$filter.applyFlag(e.applyFlag)},SEtime:function(e){return this.$filter.SEtime(e.StartTime,e.EndTime)},channelType:function(e){return this.$filter.channelType(e.Channel)},FileSize:function(e){return this.$filter.FileSize(e.fileSize||e.FileSize||0)},AlarmFilter:function(e){return this.$filter.AlarmFilter(e.Alarm)},MediaTypeFilter:function(e){return this.$filter.MediaTypeFilter(e.MediaType)},StreamTypeFilter:function(e){return this.$filter.StreamTypeFilter(e.StreamType)},StorageTypeFilter:function(e){return this.$filter.StorageTypeFilter(e.StorageType)},statusType:function(e){return this.$filter.statusType(e.Status)},fileSource:function(e){return this.$filter.fileSource(e.fileSource)}}}},"8b7c":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0__),_work_tspWeb_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("bd86");__webpack_exports__.a={props:{options:{type:[Object],default:function(){return{isEdit:!0,enterpriseName:"",fleetName:"",maintenanceTime:"",upkeeporderNo:"",maintenanceItems:"",maintenanceBill:"",remarks:"",personPhone:"",maintenanceSite:"",maintenancePerson:"",plateCode:"",vehicleId:""}}}},inject:["store"],data:function(){return{label:"",addForm:{isType:!0,fleetId:"",plateList:[],enterpriseName:"",fleetName:"",remarks:this.options.modify.remarks,maintenanceItems:this.options.modify.maintenanceItems?this.options.modify.maintenanceItems:"",upkeeporderNo:this.options.modify.upkeeporderNo?this.options.modify.upkeeporderNo:"",maintenancePerson:this.options.modify.maintenancePerson?this.options.modify.maintenancePerson:"",maintenanceFee:this.options.modify.maintenanceFee?this.options.modify.maintenanceFee:"",maintenanceBill:this.options.modify.maintenanceBill?this.options.modify.maintenanceBill:"",maintenanceTime:this.options.modify.maintenanceTime?this.options.modify.maintenanceTime:"",maintenanceSite:this.options.modify.maintenanceSite?this.options.modify.maintenanceSite:"",enterpriseId:this.options.modify.enterpriseId?this.options.modify.enterpriseId:"",personPhone:this.options.modify.personPhone?this.options.modify.personPhone:"",plateCode:this.options.modify.plateCode?this.options.modify.plateCode:"",vehicleId:this.options.modify.vehicleId?this.options.modify.vehicleId:""},rules:{enterpriseId:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],fleetId:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],maintenanceTime:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],maintenanceItems:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],vehicleId:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],upkeeporderNo:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},{pattern:/^[0-9]*$/,message:this.$t("filter.type2")}],maintenancePerson:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],maintenanceFee:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},{pattern:/^[0-9]*$/,message:this.$t("filter.type2")}],maintenanceBill:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},{pattern:/^[0-9]*$/,message:this.$t("filter.type2")}],maintenanceSite:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"}],personPhone:[{required:!0,message:this.$t("filter.notEmpty"),trigger:"blur,change"},{pattern:/^(1[3|4|5|7|8][0-9]{9})$/,message:this.$t("filter.type10")}]},pickerOption:{disabledDate:function(e){return e.getTime()>Date.now()-864e5}}}},methods:{changeTime:function(){this.isTime=!1},cancelDialog:function(){this.$emit("update:visible",!1)},confirm:function confirm(){var _this2=this,_this=this,url="";this.$refs.accident.validate(function(valid){if(!valid)return!1;var _params,params=(_params={maintenanceItems:_this.addForm.maintenanceItems,upkeeporderNo:_this.addForm.upkeeporderNo,maintenancePerson:_this.addForm.maintenancePerson,maintenanceFee:_this.addForm.maintenanceFee,maintenanceBill:_this.addForm.maintenanceBill,maintenanceTime:_this.addForm.maintenanceTime,personPhone:_this.addForm.personPhone},Object(_work_tspWeb_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_params,"maintenanceBill",_this.addForm.maintenanceBill),Object(_work_tspWeb_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_params,"vehicleId",_this.addForm.vehicleId),Object(_work_tspWeb_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_params,"maintenanceSite",_this.addForm.maintenanceSite),Object(_work_tspWeb_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_params,"enterpriseId",_this.addForm.enterpriseId),Object(_work_tspWeb_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_params,"remarks",_this.addForm.remarks),Object(_work_tspWeb_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_params,"type",2),Object(_work_tspWeb_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_params,"maintenanceType",_this.isType?1:2),_params),timeS=_this.addForm.maintenanceTime,dateS=eval("new "+eval("/Date(timeS)/").source),dateT=_this.$filter.format(dateS,"yyyy-MM-dd HH:mm:ss");_this.options.edit?(url="/maintenance/updateMaintenanceInfo",params.id=_this.options.modify.id,params.maintenanceTime=dateT):url="/maintenance/insertMaintenanceInfo",_this2.$http({url:url,params:params}).then(function(e){e.flag?(_this.$message.success({message:_this.options.edit?"修改成功":"新增成功"}),_this.$emit("confirm")):_this.$message.error({message:_this.$t("error."+e.errorCode)}),_this.$emit("update:visible",!1)})})}},created:function(){switch(this.options.activeName){case 1:this.isType=!0;break;case 2:this.isType=!1}this.options.edit?this.isEdit=!1:this.isEdit=!0},watch:{"addForm.fleetId":function(e){var t=this;this.addForm.plateList=[],this.addForm.vehicleId="",this.$http({url:"/vehicle/queryVehicleByFleetId",params:{fleetIds:e}}).then(function(e){e.data.forEach(function(e){t.addForm.plateList.push({label:e.plateCode,value:e.id})})})},"addForm.vehicleId":function(e){var t=this;e&&this.addForm.plateList.forEach(function(a){a.value==e&&(t.addForm.plateCode=a.label)})},"addForm.enterpriseName":function(e){e&&(this.addForm.fleetName="")},"addForm.maintenanceTime":function(e){}}}},a511:function(e,t,a){"use strict";a.r(t),a("386d");var i=a("cebc"),n=(a("96cf"),a("3b8d")),r=a("8b7c").a,o=a("2877"),s=Object(o.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"accident",attrs:{model:e.addForm,rules:e.rules}},[a("el-row",[e.isEdit?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-position":"top",label:"所属公司/机构"}},[a("cv-dropdown-tree",{staticStyle:{width:"330px"},attrs:{data:e.store.company_tree,"is-default":!1,label:e.label},on:{"update:label":function(t){e.label=t}},model:{value:e.addForm.enterpriseId,callback:function(t){e.$set(e.addForm,"enterpriseId",t)},expression:"addForm.enterpriseId"}})],1)],1):e._e(),e.isEdit?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-position":"top",label:"车组选择"}},[a("cv-dropdown-tree",{staticStyle:{width:"100%"},attrs:{url:"/enterprise/findFleetTreeList","is-initial":!1,"auto-params":{enterpriseId:e.label.enterpriseId,pId:e.label.id,type:e.label.type}},model:{value:e.addForm.fleetId,callback:function(t){e.$set(e.addForm,"fleetId","string"==typeof t?t.trim():t)},expression:"addForm.fleetId"}})],1)],1):e._e()],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"80",label:"车牌号码",prop:"vehicleId"}},[e.isEdit?a("el-select",{staticStyle:{width:"330px"},attrs:{filterable:"",clearable:"",placeholder:"请选择车辆"},model:{value:e.addForm.vehicleId,callback:function(t){e.$set(e.addForm,"vehicleId",t)},expression:"addForm.vehicleId"}},e._l(e.addForm.plateList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1):e._e(),e.isEdit?e._e():a("el-input",{staticStyle:{width:"330px"},attrs:{placeholder:"",disabled:!0},model:{value:e.addForm.plateCode,callback:function(t){e.$set(e.addForm,"plateCode","string"==typeof t?t.trim():t)},expression:"addForm.plateCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"80",label:"维修单日期:",prop:"maintenanceTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.addForm.maintenanceTime,callback:function(t){e.$set(e.addForm,"maintenanceTime",t)},expression:"addForm.maintenanceTime"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"80",label:"维修单编号:",prop:"upkeeporderNo"}},[a("el-input",{staticStyle:{width:"330px"},model:{value:e.addForm.upkeeporderNo,callback:function(t){e.$set(e.addForm,"upkeeporderNo","string"==typeof t?t.trim():t)},expression:"addForm.upkeeporderNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"80",label:"维修项目:",prop:"maintenanceItems"}},[a("el-input",{model:{value:e.addForm.maintenanceItems,callback:function(t){e.$set(e.addForm,"maintenanceItems","string"==typeof t?t.trim():t)},expression:"addForm.maintenanceItems"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"80",label:"维修地点:",prop:"maintenanceSite"}},[a("el-input",{staticStyle:{width:"330px"},model:{value:e.addForm.maintenanceSite,callback:function(t){e.$set(e.addForm,"maintenanceSite","string"==typeof t?t.trim():t)},expression:"addForm.maintenanceSite"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"80",label:"送修人员:",prop:"maintenancePerson"}},[a("el-input",{model:{value:e.addForm.maintenancePerson,callback:function(t){e.$set(e.addForm,"maintenancePerson","string"==typeof t?t.trim():t)},expression:"addForm.maintenancePerson"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"80",label:"维修金额(含税):",prop:"maintenanceFee"}},[a("el-input",{staticStyle:{width:"330px"},model:{value:e.addForm.maintenanceFee,callback:function(t){e.$set(e.addForm,"maintenanceFee","string"==typeof t?t.trim():t)},expression:"addForm.maintenanceFee"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"80",label:"增值税发票编号:",prop:"maintenanceBill"}},[a("el-input",{model:{value:e.addForm.maintenanceBill,callback:function(t){e.$set(e.addForm,"maintenanceBill","string"==typeof t?t.trim():t)},expression:"addForm.maintenanceBill"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"80",label:"维修明细及其他备注说明:"}},[a("el-input",{staticStyle:{width:"330px"},attrs:{type:"textarea"},model:{value:e.addForm.remarks,callback:function(t){e.$set(e.addForm,"remarks","string"==typeof t?t.trim():t)},expression:"addForm.remarks"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"80",label:"联系方式:",prop:"personPhone"}},[a("el-input",{attrs:{placeholder:"联系电话"},model:{value:e.addForm.personPhone,callback:function(t){e.$set(e.addForm,"personPhone","string"==typeof t?t.trim():t)},expression:"addForm.personPhone"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{staticStyle:{"text-align":"center",float:"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确定")]),a("el-button",{on:{click:e.cancelDialog}},[e._v("取消")])],1)],1)],1)],1)},[],!1,null,null,null).exports,l=a("b0ad"),c={name:"repairChassis",components:{repairAddmodify:s},props:{options:{},searchParams:{},refresh:{}},mixins:[l.a],computed:{_table:function(){return this.$refs.chassisTable}},data:function(){return{loadFlag:!1,dialog:{flag:!1,loading:!1,size:"small",edit:!1,activeName:0,modify:{enterpriseName:"",fleetName:"",maintenanceTime:"",upkeeporderNo:"",maintenanceItems:"",maintenanceBill:"",enterpriseId:"",remarks:"",personPhone:"",maintenanceSite:"",maintenancePerson:"",plateCode:"",vehicleId:"",id:""}}}},methods:{chassisDeil:function(e){this.$router.push({path:"/index/Upkeep",query:{plateCode:e.row.plateCode,activeName:"tabs2"}})},confirm:function(){this.$emit("reload")},search:function(){this.$emit("searchCha")},add:function(){this.$emit("addCha")},modify:function(e){this.dialog.name="repairAddmodify",this.dialog.edit=!0,this.dialog.modify=e.row,this.dialog.title="修改",this.dialog.size="dialog-middle",this.dialog.activeName=1,this.dialog.flag=!0},remove:function(e){var t=this;this.confirmPrompt().then(function(){Object(n.a)(regeneratorRuntime.mark(function a(){var i,n;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$store.dispatch("deleteMaintenanceInfoT",{ids:e.row.id});case 2:i=a.sent,n=i.flag,i.errorCode,n?(t.$message.success({message:"删除成功"}),t._table.tableInitial()):t.$message.error({message:"删除失败"});case 6:case"end":return a.stop()}},a)}))()})}},watch:{"dialog.flag":function(e){e||(this.dialog.name="")},refresh:function(e){e&&(this._table.tableInitial(),this.$emit("update:refresh",!1))},loadFlag:function(e){e&&(this._table.tableInitial(),this.loadFlag=!1)}}},d=Object(o.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chasis"},[a("div",{staticStyle:{"text-align":"right","margin-bottom":"13px"}},[a("cv-tool",{attrs:{name:e.$route.name,data:e.$store.getters.manageMenus,"is-remove":!1,"is-modify":!1,"is-export":!1,"is-add":!0},on:{search:e.search,add:e.add}})],1),a("cv-grid",{ref:"chassisTable",attrs:{params:e.searchParams,url:"/maintenance/queryMaintenanceInfoPage"}},[a("el-table-column",{attrs:{label:e.$t("cE.carNumber"),prop:"plateCode"}}),e._v(">\n        "),a("el-table-column",{attrs:{label:e.$t("Upkeep.company"),prop:"enterpriseName"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.maintenanceItems"),prop:"maintenanceItems"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.maintenanceTime"),prop:"maintenanceTime"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.maintenanceFee"),prop:"maintenanceFee"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.maintenancePerson"),prop:"maintenancePerson"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.tel"),prop:"personPhone"}}),a("el-table-column",{attrs:{label:e.$t("action.operation"),prop:"operate",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cv-span",{attrs:{type:"primary"},nativeOn:{click:function(a){return e.modify(t)}}},[e._v("修改")]),a("cv-span",{attrs:{type:"primary"},nativeOn:{click:function(a){return e.chassisDeil(t)}}},[e._v("保养记录")]),a("cv-span",{attrs:{type:"danger"},nativeOn:{click:function(a){return e.remove(t)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{visible:e.dialog.flag,title:e.dialog.title,"custom-class":e.dialog.size},on:{"update:visible":function(t){return e.$set(e.dialog,"flag",t)}}},[a(e.dialog.name,{tag:"component",attrs:{options:e.dialog,loadTable:e.loadFlag,visible:e.dialog.flag},on:{"update:loadTable":function(t){e.loadFlag=t},"update:load-table":function(t){e.loadFlag=t},"update:visible":function(t){return e.$set(e.dialog,"flag",t)},confirm:e.confirm}})],1)],1)},[],!1,null,null,null).exports,m={name:"repairAssembling",mixins:[l.a],components:{repairAddmodify:s},props:{options:{},searchParams:{},refresh:{}},computed:{_table:function(){return this.$refs.assemblingTable}},data:function(){return{loadFlag:!1,dialog:{flag:!1,loading:!1,size:"small",edit:!1,activeName:0,modify:{enterpriseName:"",fleetName:"",maintenanceTime:"",upkeeporderNo:"",maintenanceItems:"",maintenanceBill:"",remarks:"",personPhone:"",maintenanceSite:"",maintenancePerson:"",enterpriseId:"",plateCode:"",vehicleId:"",id:""}}}},methods:{modify:function(e){this.dialog.name="repairAddmodify",this.dialog.flag=!0,this.dialog.size="dialog-middle",this.dialog.edit=!0,this.dialog.modify=e.row,this.dialog.title="修改",this.dialog.activeName=2},confirm:function(){this.$emit("reloadB")},search:function(){this.$emit("searchBing")},add:function(){this.$emit("addBing")},remove:function(e){var t=this;this.confirmPrompt().then(function(){Object(n.a)(regeneratorRuntime.mark(function a(){var i,n;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$store.dispatch("deleteMaintenanceInfoT",{ids:e.row.id});case 2:i=a.sent,n=i.flag,i.errorCode,n?(t.$message.success({message:"删除成功"}),t._table.tableInitial()):t.$message.error({message:"删除失败"});case 6:case"end":return a.stop()}},a)}))()})},assembDeil:function(e){this.$router.push({path:"/index/Upkeep",query:{plateCode:e.row.plateCode,activeName:"tabs3"}})}},watch:{"dialog.flag":function(e){e||(this.dialog.name="")},refresh:function(e){e&&(this._table.tableInitial(),this.$emit("update:refresh",!1))},loadFlag:function(e){e&&(this._table.tableInitial(),this.loadFlag=!1)}}},p=Object(o.a)(m,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"repair"},[a("div",{staticStyle:{"text-align":"right","margin-bottom":"13px"}},[a("cv-tool",{attrs:{name:e.$route.name,data:e.$store.getters.manageMenus,"is-remove":!1,"is-modify":!1,"is-export":!1,"is-add":!0},on:{search:e.search,add:e.add}})],1),a("cv-grid",{ref:"assemblingTable",attrs:{params:e.searchParams,url:"/maintenance/queryMaintenanceInfoPage"}},[a("el-table-column",{attrs:{label:e.$t("cE.carNumber"),prop:"plateCode"}}),e._v(">\n            "),a("el-table-column",{attrs:{label:e.$t("Upkeep.company"),prop:"enterpriseName"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.maintenanceItems"),prop:"maintenanceItems"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.maintenanceTime"),prop:"maintenanceTime"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.maintenanceFee"),prop:"maintenanceFee"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.maintenancePerson"),prop:"maintenancePerson"}}),a("el-table-column",{attrs:{label:e.$t("Upkeep.tel"),prop:"personPhone"}}),a("el-table-column",{attrs:{label:e.$t("action.operation"),prop:"operate",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cv-span",{attrs:{type:"primary"},nativeOn:{click:function(a){return e.modify(t)}}},[e._v("修改")]),a("cv-span",{attrs:{type:"primary"},nativeOn:{click:function(a){return e.assembDeil(t)}}},[e._v("保养记录")]),a("cv-span",{attrs:{type:"danger"},nativeOn:{click:function(a){return e.remove(t)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{visible:e.dialog.flag,title:e.dialog.title,"custom-class":e.dialog.size},on:{"update:visible":function(t){return e.$set(e.dialog,"flag",t)}}},[a(e.dialog.name,{tag:"component",attrs:{options:e.dialog,loadTable:e.loadFlag,visible:e.dialog.flag},on:{"update:loadTable":function(t){e.loadFlag=t},"update:load-table":function(t){e.loadFlag=t},"update:visible":function(t){return e.$set(e.dialog,"flag",t)},confirm:e.confirm}})],1)],1)},[],!1,null,null,null).exports,u=(a("ed08"),{props:{options:{}},data:function(){return{pickerOption:{disabledDate:function(e){return e.getTime()>Date.now()}}}},methods:{cancelDialog:function(){this.$emit("update:visible",!1)},confirm:function(){this.$emit("confirm"),this.$emit("update:visible",!1)}}}),h=Object(o.a)(u,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{attrs:{data:e.options.search}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-position":"top",label:"所属公司"}},[a("el-input",{staticStyle:{width:"330px"},attrs:{placeholder:""},model:{value:e.options.search.enterpriseName,callback:function(t){e.$set(e.options.search,"enterpriseName",t)},expression:"options.search.enterpriseName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-position":"top",label:"车牌号码"}},[a("el-input",{staticStyle:{width:"330px"},model:{value:e.options.search.plateCode,callback:function(t){e.$set(e.options.search,"plateCode",t)},expression:"options.search.plateCode"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-position":"top",label:"维修起止日期"}},[a("el-date-picker",{staticStyle:{width:"330px"},attrs:{clearable:!1,editable:!1,type:"daterange",placeholder:"选择时间范围","picker-options":e.pickerOption},model:{value:e.options.search.SEtime,callback:function(t){e.$set(e.options.search,"SEtime",t)},expression:"options.search.SEtime"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-position":"top",label:"送修人"}},[a("el-input",{staticStyle:{width:"330px"},model:{value:e.options.search.person,callback:function(t){e.$set(e.options.search,"person",t)},expression:"options.search.person"}})],1)],1)],1),a("el-form-item",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确定")]),a("el-button",{on:{click:e.cancelDialog}},[e._v("取消")])],1)],1)},[],!1,null,null,null).exports,f=a("8369"),b=a("2f62"),_={name:"repair",components:{repairChassis:d,repairAssembling:p,repairAddmodify:s,repairSearch:h},mixins:[f.a],computed:{tabs_0:function(){return this.$refs.chassisT},tabs_1:function(){return this.$refs.assembling}},provide:function(){return{store:this.store}},data:function(){return{store:{company_tree:[]},refresh1:!1,refresh2:!1,isSearch:!0,searchTable:{},pickerOption:{disabledDate:function(e){return e.getTime()>Date.now()}},tabs:{activeName:"tabs0",titles:["底盘维修记录","上装维修记录"]},dialog:{flag:!1,title:"添加",size:"dialog-middle",edit:!1,activeName:0,search:{enterpriseName:"",fleetName:"",plateCode:"",SEtime:["",""],person:""},modify:{enterpriseName:"",fleetName:"",maintenanceTime:"",upkeeporderNo:"",maintenanceItems:"",maintenanceBill:"",enterpriseId:"",remarks:"",personPhone:"",maintenanceSite:"",maintenancePerson:"",plateCode:"",vehicleId:""},options:{},type:{type:[String],default:"add"}},asSearch:{enterpriseName:"",plateCode:"",maintenancePerson:"",mtStartTime:"",mtEndTime:"",type:2,maintenanceType:2},chSearch:{enterpriseName:"",plateCode:"",maintenancePerson:"",mtStartTime:"",mtEndTime:"",type:2,maintenanceType:1}}},methods:Object(i.a)({},Object(b.b)(["queryCompanyInfoList"]),{add:function(){this.dialog.flag=!0,this.dialog.name="repairAddmodify",this.dialog.type="add",this.dialog.edit=!1,"tabs0"==this.tabs.activeName?this.dialog.activeName=1:this.dialog.activeName=2},search:function(){this.dialog.flag=!0,this.dialog.name="repairSearch",this.dialog.title="搜素"},repairAction:function(e,t){var a=this;this.$store.dispatch(e,t).then(function(e){!e.flag&&e.errorCode?a.$message.error({message:a.$t("error."+e.errorCode)}):(a.$emit("confirm"),a.$message.success(a.$t("UserManage.actionSuccess"))),a.loading=!1}).catch(function(){a.loading=!1})},confirm:function(){var e={maintenancePerson:this.dialog.search.person,enterpriseName:this.dialog.search.enterpriseName,mtStartTime:this.dialog.search.SEtime?this.$filter.format(this.dialog.search.SEtime[0],"yyyy-MM-dd start"):"",mtEndTime:this.dialog.search.SEtime?this.$filter.format(this.dialog.search.SEtime[1],"yyyy-MM-dd end"):"",plateCode:this.dialog.search.plateCode};switch(this.tabs.activeName){case"tabs0":this.$service.mapParams(this.chSearch,e),this.refresh1=!0;break;case"tabs1":this.$service.mapParams(this.asSearch,e),this.refresh2=!0}}}),watch:{"dialog.flag":function(e){e||(this.dialog.name="")}},mounted:function(){var e=this;this.queryCompanyInfoList().then(function(t){var a=t.data,i=t.flag;e.store.company_tree=i?a:[]})}},g=Object(o.a)(_,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"repairManage"},[a("cv-content",[a("cv-tabs",{attrs:{titles:e.tabs.titles,forceRender:!1},model:{value:e.tabs.activeName,callback:function(t){e.$set(e.tabs,"activeName",t)},expression:"tabs.activeName"}},[a("repair-chassis",{ref:"chassisT",attrs:{searchParams:e.chSearch,refresh:e.refresh1},on:{"update:searchParams":function(t){e.chSearch=t},"update:search-params":function(t){e.chSearch=t},"update:refresh":function(t){e.refresh1=t},searchCha:e.search,addCha:e.add,reload:e.confirm}}),a("repair-assembling",{ref:"assembling",attrs:{searchParams:e.asSearch,refresh:e.refresh2},on:{"update:searchParams":function(t){e.asSearch=t},"update:search-params":function(t){e.asSearch=t},"update:refresh":function(t){e.refresh2=t},searchBing:e.search,addBing:e.add,reloadB:e.confirm}})],1)],1),a("el-dialog",{attrs:{visible:e.dialog.flag,title:e.dialog.title,"custom-class":e.dialog.size},on:{"update:visible":function(t){return e.$set(e.dialog,"flag",t)}}},[a("cv-scrollbar",[a(e.dialog.name,{tag:"component",attrs:{visible:e.dialog.flag,options:e.dialog,searchTable:e.searchTable},on:{"update:visible":function(t){return e.$set(e.dialog,"flag",t)},confirm:e.confirm,"update:searchTable":function(t){e.searchTable=t},"update:search-table":function(t){e.searchTable=t}}})],1)],1)],1)},[],!1,null,null,null).exports;t.default=g},b0ad:function(e,t,a){"use strict";(function(e){a("7f7f"),t.a={methods:{confirmPrompt:function(e,t){var a=this,i=e||this.$t("action.confirmIsRemove");return new Promise(function(e,n){a.$confirm(i,a.$t("action.tip"),{confirmButtonText:a.$t("action.confirm"),cancelButtonText:a.$t("action.cancel"),type:"warning"}).then(function(){e()}).catch(function(){"function"==typeof t&&t()})})},timeLimitFunc:function(e,t,a){if(e&&t)return((new Date(t)-new Date(e))/864e5).toFixed(1)<=a||this.$message.error({message:this.$t("请选择时间范围在"+a+"天内")});this.$message.error({message:this.$t("请选择时间范围")})},addRemoveUnique:function(e,t,a){var i=e.length,n=t.length;return n<i?{name:"add",data:this.$service.isUnique(e,t,a)}:i<n?{name:"remove",data:this.$service.isUnique(t,e,a)}:i==n?{name:"equal",data:this.$service.isUnique(e,t,a)}:void 0},showTooltip:function(e,t){var a=e.target,i=this.$refs[t];i.referenceElm=a,i.$refs.popper.style.display="none",i.doDestroy(),i.setExpectedState(!0),i.handleShowPopper()},mouseenterShowTip:function(e,t,a){var i=e.target;if(i.scrollWidth>i.offsetWidth||a)return this.showTooltip(e,t),a?a.startTime+"~"+a.endTime:i.innerText},mouseenterShowToolTip:function(e,t,a){var i=e.target;return this.showTooltip(e,t),!a&&i.innerText},mouseoverHideTip:function(e){var t=this.$refs[e];t&&(t.setExpectedState(!1),t.handleClosePopper())},asyncDownloadScript:function(t,a){var i=this,n=0<arguments.length&&void 0!==t?t:"Baidu",r=1<arguments.length?a:void 0;return e[n]?e[n]._preloader?e[n]._preloader:Promise.resolve(e[n]):(e[n]={},e[n]._preloader=new Promise(function(t,a){var o=document.createElement("script");o.src=r,e.document.body.appendChild(o),i.$service.isIe()&&i.$service.IE_VERSION<11?o.onreadystatechange=function(){"loaded"!=o.readyState&&"complete"!=o.readyState||(t(e[n]),e[n]._preloader=null)}:o.onload=function(){t(e[n]),e[n]._preloader=null}}),e[n]._preloader)}}}}).call(this,a("c8ba"))}}]);
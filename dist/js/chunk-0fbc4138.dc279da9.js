(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0fbc4138"],{"18c5":function(e,t,a){"use strict";a("c5f6");var s={inject:["store"],props:{options:{}},mixins:[a("8369").a],data:function(){return{beforeGird:{vehicleId:this.store.currentV,enterpriseId:this.store.currentE,taskExecutionConditionStr:7,Channel:Number(this.store.downLoadParams.Channel),StartTime:this.store.downLoadParams.StartTime,EndTime:this.store.downLoadParams.EndTime,Alarm:Number(this.store.downLoadParams.Alarm),MediaType:Number(this.store.downLoadParams.MediaType),StreamType:Number(this.store.downLoadParams.StreamType),StorageType:Number(this.store.downLoadParams.StorageType),fileSource:Number(this.store.downLoadParams.fileSource)},goFlag:!1}},methods:{reloadGrid:function(){this.$refs.table.tableInitial()},cancel:function(e){var t=this;this.$http({url:"/sendVideoOrder/sendVedioFileUploadController",params:{UploadControl:2,SerialNumber:e.SerialNumber,vehicleId:this.store.currentV,enterpriseId:this.store.currentE,fid:e.id}}).then(function(e){e.flag&&setTimeout(function(){t.$message.warning("已取消"),t.reloadGrid()},1e3)})},pause:function(e){var t=this;this.$http({url:"/sendVideoOrder/sendVedioFileUploadController",params:{UploadControl:0,SerialNumber:e.SerialNumber,vehicleId:this.store.currentV,enterpriseId:this.store.currentE,fid:e.id}}).then(function(e){e.flag&&setTimeout(function(){t.$message.warning("已暂停"),t.reloadGrid()},1e3)})},goOn:function(e){var t=this;this.$http({url:"/sendVideoOrder/sendVedioFileUploadController",params:{UploadControl:1,SerialNumber:e.SerialNumber,vehicleId:this.store.currentV,enterpriseId:this.store.currentE,fid:e.id}}).then(function(e){e.flag&&setTimeout(function(){t.$message.warning("已继续"),t.reloadGrid()},1e3)})},realDownLoad:function(e){var t=this;this.$http({url:"/videoController/readVideoFtpFile",params:{id:e.id}}).then(function(e){e.flag&&t.$message.success("添加至离线下载!")})}},mounted:function(){var e=this;this.store.serverFlag&&this.$http({url:"/sendVideoOrder/sendVedioFileUploadSite",params:this.beforeGird}).then(function(t){t.flag&&e.reloadGrid()})}},r=a("2877"),i=Object(r.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"realtimeDown"},[a("el-button",{on:{click:e.reloadGrid}},[e._v("刷新")]),a("cv-grid",{ref:"table",attrs:{params:{},url:"/videoController/findVideaFileUploadSitePage",defaultHeight:300}},[a("el-table-column",{attrs:{label:"车牌号码",prop:"plateCode"}}),a("el-table-column",{attrs:{label:"通道",formatter:e.channelType,prop:"Channel"}}),a("el-table-column",{attrs:{label:"文件时间",prop:"TimeRange"}}),a("el-table-column",{attrs:{label:"请求时间",prop:"ReqTime"}}),a("el-table-column",{attrs:{label:"状态",formatter:e.statusType,prop:"Status"}}),a("el-table-column",{attrs:{label:"文件源",formatter:e.fileSource,prop:"fileSource"}}),a("el-table-column",{attrs:{label:e.$t("action.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cv-span",{directives:[{name:"show",rawName:"v-show",value:1==t.row.fileSource&&(0==t.row.Status||4==t.row.Status),expression:"scope.row.fileSource == 1 && (scope.row.Status == 0 || scope.row.Status == 4)"}],attrs:{type:"danger"},nativeOn:{click:function(a){return e.cancel(t.row)}}},[e._v("取消")]),a("cv-span",{directives:[{name:"show",rawName:"v-show",value:1==t.row.fileSource&&0==t.row.Status,expression:"scope.row.fileSource == 1 && scope.row.Status == 0"}],attrs:{type:"warning"},nativeOn:{click:function(a){return e.pause(t.row)}}},[e._v("暂停")]),a("cv-span",{directives:[{name:"show",rawName:"v-show",value:1==t.row.fileSource&&4==t.row.Status,expression:"scope.row.fileSource == 1 && scope.row.Status == 4"}],attrs:{type:"success"},nativeOn:{click:function(a){return e.goOn(t.row)}}},[e._v("继续")]),a("cv-span",{directives:[{name:"show",rawName:"v-show",value:1==t.row.Status,expression:"scope.row.Status == 1"}],attrs:{type:"success"},nativeOn:{click:function(a){return e.realDownLoad(t.row)}}},[e._v("下载")])]}}])})],1)],1)},[],!1,null,null,null);t.a=i.exports},"1bb7":function(e,t,a){},"1df0":function(e,t,a){"use strict";a.d(t,"a",function(){return i});var s=a("d225"),r=a("b0b4"),i=(a("9268"),function(){function e(t){Object(s.a)(this,e),this.options=t,this.renderScrollContent(),this.renderCtrl(),this.bindEvent()}return Object(r.a)(e,[{key:"renderCtrl",value:function(){var e=this,t=["cv-autodrag__top"];t.forEach(function(t){var a=document.createElement("div");a.class=a.className=t,e.options.poster&&e.options.poster.appendChild(a)}),this.dragTop=this.options.poster.querySelector("."+t[0])}},{key:"renderScrollContent",value:function(){this.scrollContent=this.options.poster.querySelector(".tab-content"),this.scrollContent.style.height=(this.options.minHeight||140)+"px"}},{key:"bindEvent",value:function(){var e=this;this.dragTop&&this.dragTop.addEventListener("mousedown",function(t){var a=t||window.event,s=a.clientY,r=parseInt(e.scrollContent.style.height);a.preventDefault(),document.onmousemove=function(t){!function(t,a,s){var r=t||window.event,i=a-r.clientY,o=s+i;r.preventDefault(),e.minMaxHeightLimit(o)?e.scrollContent.style.height=e.options.maxHeight+"px":e.scrollContent.style.height=s+i+"px"}(t,s,r)},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}})}},{key:"minMaxHeightLimit",value:function(e){return parseInt(e)>this.options.maxHeight}}]),e}())},"21d4":function(e,t,a){},"30fa":function(e,t,a){"use strict";a("ac6a");var s={components:{videos:a("dc0b").a},props:{data:{default:function(){return{}}},flg:!1,common:{default:function(){return{}}}},data:function(){return{src:null,current:0}},methods:{currentVideo:function(e,t){t.url&&(this.common.vehicleId=t.title.pId),this.$store.dispatch("changeVideoCurrent",e)},closeVideo:function(){var e=this.$refs.video;e.forEach(function(e){e.reLoad()})}}},r=(a("a17e"),a("2877")),i=Object(r.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{ref:"videoArea",staticClass:"cv-video-area"},e._l(e.data.array,function(t,s){return a("li",{key:s,class:[e.$store.getters.videoCurrent==s?"currentVideo":"","videoArea-item","col-xs-"+e.data.ruler],on:{click:function(a){return e.currentVideo(s,t)}}},[a("videos",{ref:"video",refInFor:!0,attrs:{src:t.url,title:t.title,ratio:e.data.ratio,type:"rtmp/flv","reset-init":e.flg},on:{"video-click":function(t){return e.currentVideo(s)}}})],1)}),0)},[],!1,null,"439f5527",null);t.a=i.exports},3633:function(e,t,a){"use strict";a.r(t),a("c5f6"),a("ac6a"),a("96cf");var s,r,i=a("3b8d"),o=(a("a481"),a("cebc")),n=a("7a3a"),l=a("30fa"),c=a("fb67"),d=a("b0ad"),u=a("1df0"),m=a("8b11"),h=a("3b6f"),p=a("cc81"),f={name:"CvBottomTabs",mixins:[d.a,m.a,h.a],props:{data:{},current:{},all:{},showDownTable:{}},data:function(){return{content:"",cur:0,key:"monitor",pagination:0,isToggleTree:!1,isToggle:!1,timer:null,freeDrag:null,currentDatas:[],tooltipContent:""}},computed:{_tooltip:function(){return this.$refs.tooltip}},methods:{resetGroup:function(){this.currentDatas=[],this.classifyArray.monitor=[],this.classifyArray.driver=[],this.classifyArray.silent=[],this.classifyArray.unline=[],this.classifyArray.extreme=[],this.classifyArray.other=[]},switchIsLoop:function(e){this.currentDatas=e},downLoad:function(e){this.$emit("download",e)},rePlay:function(e){this.$emit("replay",e)},toggle:function(){this.isToggle=!this.isToggle},setPagination:function(e){var t=Math.ceil((window.innerHeight-160)/32);this.currentDatas=this.currentDatas.concat(e.slice(this.pagination*t,(this.pagination+1)*t))},openTables:function(){this.$emit("openTables")},handlerMouseleave:function(){this.mixins_hideTooltip(this._tooltip)},handlerMouseover:function(e){var t=Object(p.a)(e,"el-col");t&&(this.content=this.mixins_ellipsisShowTooltip(t,this._tooltip))}},watch:{isToggle:function(e){this.freeDrag&&this.freeDrag.dragTop&&(this.freeDrag.dragTop.style.display=e?"block":"none")},showDownTable:function(e){e&&(this.isToggle=!0,this.showDownTable=!1)}},mounted:function(){this.freeDrag=new u.a({poster:this.$refs.bottomDetail,minHeight:140,maxHeight:window.innerHeight-260})}},v=(a("be4f"),a("2877")),b=Object(v.a)(f,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"bottomDetail",staticClass:"cv-track-list"},[a("ul",{staticClass:"tab-header bg"},[a("li",{staticClass:"tab-head-item toggle-style",on:{click:e.toggle}},[a("cv-icon",{staticStyle:{"vertical-align":"middle"},attrs:{color:"#969696",size:"24",name:e.isToggle?"xialajiantou":"shanglajiantou-copy"}})],1),a("li",{staticClass:"tab-head-item toggle-style"},[a("el-button",{attrs:{size:"small",type:"success",icon:"upload"},on:{click:e.openTables}},[e._v("打开下载列表")])],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isToggle,expression:"isToggle"}],staticClass:"tab-content-detail"},[a("el-row",{staticClass:"list-header"},[a("el-col",{staticClass:"tab-item",attrs:{span:2}},[e._v(e._s(e.$t("cvtsp.plateCode")))]),a("el-col",{staticClass:"tab-item",attrs:{span:8}},[e._v(e._s("时间"))]),a("el-col",{staticClass:"tab-item",attrs:{span:2}},[e._v(e._s("报警标志"))]),a("el-col",{staticClass:"tab-item",attrs:{span:2}},[e._v(e._s("音视频资源类型"))]),a("el-col",{staticClass:"tab-item",attrs:{span:2}},[e._v(e._s("码流类型"))]),a("el-col",{staticClass:"tab-item",attrs:{span:2}},[e._v(e._s("存储器类型"))]),a("el-col",{staticClass:"tab-item",attrs:{span:1}},[e._v(e._s("通道"))]),a("el-col",{staticClass:"tab-item",attrs:{span:2}},[e._v(e._s("大小(MB)"))]),a("el-col",{staticClass:"tab-item",attrs:{span:3}},[e._v(e._s("操作"))])],1),a("cv-inifinite-scroll",{staticClass:"tab-content",attrs:{list:e.data},nativeOn:{mouseover:function(t){return e.handlerMouseover(t)}},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-col",{staticClass:"tab-item",attrs:{span:2},nativeOn:{mouseleave:function(t){return e.handlerMouseleave(t)}}},[e._v(e._s(t.row.plateCode))]),a("el-col",{staticClass:"tab-item",attrs:{span:8},nativeOn:{mouseleave:function(t){return e.handlerMouseleave(t)}}},[e._v(e._s(e.$filter.SEtime(t.row.startTime,t.row.endTime)))]),a("el-col",{staticClass:"tab-item",attrs:{span:2},nativeOn:{mouseleave:function(t){return e.handlerMouseleave(t)}}},[e._v(e._s(e.$filter.AlarmFilter(t.row.alarm)))]),a("el-col",{staticClass:"tab-item",attrs:{span:2},nativeOn:{mouseleave:function(t){return e.handlerMouseleave(t)}}},[e._v(e._s(e.$filter.MediaTypeFilter(t.row.mediaType)))]),a("el-col",{staticClass:"tab-item",attrs:{span:2},nativeOn:{mouseleave:function(t){return e.handlerMouseleave(t)}}},[e._v(e._s(e.$filter.StreamTypeFilter(t.row.streamType)))]),a("el-col",{staticClass:"tab-item",attrs:{span:2},nativeOn:{mouseleave:function(t){return e.handlerMouseleave(t)}}},[e._v(e._s(e.$filter.StorageTypeFilter(t.row.storageType)))]),a("el-col",{staticClass:"tab-item",attrs:{span:1},nativeOn:{mouseleave:function(t){return e.handlerMouseleave(t)}}},[e._v(e._s(t.row.channel))]),a("el-col",{staticClass:"tab-item",attrs:{span:2},nativeOn:{mouseleave:function(t){return e.handlerMouseleave(t)}}},[e._v(e._s(e.$filter.FileSize(t.row.fileSize)))]),a("el-col",{staticClass:"tab-item",attrs:{span:3},nativeOn:{mouseleave:function(t){return e.handlerMouseleave(t)}}},[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.downLoad(t.row)}}},[e._v("下载")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.rePlay(t.row)}}},[e._v("回放")])],1)]}}])})],1),a("el-tooltip",{ref:"tooltip",attrs:{"popper-class":"maxWidth",content:e.content,placement:"top"}})],1)},[],!1,null,"4841376c",null).exports,g=a("18c5"),y=a("59c0"),S=a("2f62"),w={components:{videoTree:n.a,videoGroup:l.a,vehicleInfo:c.a,CvBottomTabs:b,downLoadCtrl:g.a,downS:y.a},provide:function(){return{store:this.store}},mixins:[d.a],data:function(){return{showDownTable:!1,currentSearchParams:null,store:{currentV:"",currentE:"",downLoadParams:{Channel:"",StartTime:"",EndTime:"",Alarm:"",MediaType:"",StreamType:"",StorageType:"",fileSource:""}},dialog:{flag:!1,name:"",title:"下载列表",size:"dialog-middle"},flg:!1,videoGroupName:"",treeReady:!1,video:{videonumber:[4]},videoSize:{},common:{isFull:!1,vehicleId:null,enterpriseId:null,plateCode:null,channel:0},tableData:[],searchFlag:!1,SEtime:[this.$filter.format(new Date,"yyyy-MM-dd start"),this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss")],alarmNum:0,replaySearchParams:{screen:"1",screenList:[{label:"1屏",value:"1"},{label:"4屏",value:"4"},{label:"6屏",value:"6"},{label:"9屏",value:"9"},{label:"16屏",value:"16"}],MediaType:"0",MediaTypeList:[{label:"音视频",value:"0"},{label:"音频",value:"1"},{label:"视频",value:"2"},{label:"视频或音视频",value:"3"}],StreamType:"0",StreamTypeList:[{label:"所有码流",value:"0"},{label:"主码流",value:"1"},{label:"子码流",value:"2"}],StorageType:"0",StorageTypeList:[{label:"所有存储器",value:"0"},{label:"主存储器",value:"1"},{label:"灾备存储器",value:"2"}],DataSource:"1",DataSourceList:[{label:"终端",value:"1"},{label:"存储服务器",value:"2"}],Alarm:"",AlarmList:[]}}},methods:Object(o.a)({},Object(S.b)(["getAlarmTypeList","sendVedioQueryResouceStoreByRtmp","sendRemoteVideoPlayBackRequestByRtmp","sendVideoReplayTransport","reSetVideoArr"]),{fullscreen:function(){this.$service.requestFullScreen(this.$refs.videoGroup.$el)},isFullscreen:function(){return document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||!1},nodeClick:function(e){5==e.type?(this.common.vehicleId=e.pId,this.common.enterpriseId=e.enterpriseId,this.common.plateCode=e.plateCode,this.common.channel=e.text.replace(/[^\d]/g,"")):this.common.channel=0},setScreen:function(e){switch(e){case"1":this.videoNumber(e,"1");break;case"4":this.videoNumber(e,"4");break;case"6":this.videoNumber(e,"6");break;case"9":this.videoNumber(e,"9");break;case"16":this.videoNumber(e,"16")}},videoNumber:function(e,t){var a=1<arguments.length&&void 0!==t?t:"1",s=this.$store.getters.videoMess.array;s.length<e?this.$store.dispatch("addVideo",{num:e-s.length,regular:a}):s.length>e&&(this.$store.dispatch("removeVideo",{num:e,regular:a}),this.$store.dispatch("removeVideoPlayer"))},openList:function(){var e=this;setTimeout(function(){e.openTable()},800)},download:function(e){var t=this;2==this.replaySearchParams.DataSource?this.confirmPrompt("是否确定下发下载指令").then(function(){t.store.serverFlag=!0,t.store.downLoadParams.Channel=e.channel,t.store.downLoadParams.StartTime=e.startTime.replace(/T/g," "),t.store.downLoadParams.EndTime=e.endTime.replace(/T/g," "),t.store.downLoadParams.Alarm=e.alarm,t.store.downLoadParams.MediaType=e.mediaType,t.store.downLoadParams.StreamType=e.streamType,t.store.downLoadParams.StorageType=e.storageType,t.store.downLoadParams.fileSource=t.currentSearchParams.DataSource,t.store.currentV=t.common.vehicleId,t.store.currentE=t.common.enterpriseId,t.dialog.name="downLoadCtrl",t.dialog.title="下载管理",t.dialog.flag=!0}):(this.dialog.name="downS",this.dialog.title="下载",this.dialog.size="dialog-tiny",this.dialog.flag=!0,this.store.downLoadParams.Channel=e.channel,this.store.downLoadParams.StartTime=e.startTime.replace(/T/g," "),this.store.downLoadParams.EndTime=e.endTime.replace(/T/g," "),this.store.downLoadParams.Alarm=e.alarm,this.store.downLoadParams.MediaType=e.mediaType,this.store.downLoadParams.StreamType=e.streamType,this.store.downLoadParams.StorageType=e.storageType,this.store.downLoadParams.fileSource=this.currentSearchParams.DataSource,this.store.currentV=this.common.vehicleId,this.store.currentE=this.common.enterpriseId)},openTable:function(){this.$service.mapParams(this.dialog,{flag:!0,name:"downLoadCtrl",size:"dialog-middle",title:"下载列表"})},replay:(r=Object(i.a)(regeneratorRuntime.mark(function e(t){var a,s,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={F_VEHICLE_ID:t.vId,F_ENTERPRISE_ID:t.eId,Channel:t.channel,StartTime:t.startTime.replace("T"," "),EndTime:this.$filter.timeStamp(t.endTime.replace("T"," "))/1e3,StreamType:t.streamType},s={plateCode:t.plateCode,text:"CH"+t.channel},e.next=4,this.sendRemoteVideoPlayBackRequestByRtmp(a);case 4:r=e.sent,i=r.flag,o=r.data,i&&this.playBackG(o,s,t);case 8:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)}),playBackG:function(e,t){this.sendVideoReplayTransport({params:e,message:t,isRest:!1,index:this.$store.getters.videoCurrent})},alarmChange:function(e){var t=0;e.forEach(function(e){t+=Number(e)}),this.alarmNum=t},search:(s=Object(i.a)(regeneratorRuntime.mark(function e(){var t,a,s,r,i,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.tableData=[],this.searchFlag=!0,this.videoGroupName="",this.common.vehicleId){e.next=7;break}return this.$message.warning("请选择车辆！"),this.searchFlag=!1,e.abrupt("return",!1);case 7:return t={F_VEHICLE_ID:this.common.vehicleId,F_ENTERPRISE_ID:this.common.enterpriseId,Channel:Number(this.common.channel),StartTime:this.$filter.timeStamp(this.SEtime[0])/1e3,EndTime:this.$filter.timeStamp(this.SEtime[1])/1e3,Alarm:this.alarmNum,MediaType:Number(this.replaySearchParams.MediaType),StreamType:Number(this.replaySearchParams.StreamType),StorageType:Number(this.replaySearchParams.StorageType),DataSource:Number(this.replaySearchParams.DataSource)},this.currentSearchParams=t,e.next=11,this.sendVedioQueryResouceStoreByRtmp(t);case 11:a=e.sent,s=a.flag,r=a.data,i=a.errorCode,this.videoGroupName="videoGroup",s?(this.tableData=r.jTVideoListInfo.fileList.map(function(e){return Object(o.a)({},e,{plateCode:n.common.plateCode,vId:n.common.vehicleId,eId:n.common.enterpriseId})}),this.searchFlag=!1,this.showDownTable=!0,this.$message.success("查询成功")):(this.$message.warning({message:this.$t("error."+i)}),this.searchFlag=!1);case 17:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)}),singleCar:function(e){this.common.vehicleId=e.data[0].id,this.common.enterpriseId=e.data[0].enterpriseId,this.common.plateCode=e.data[0].plateCode,this.common.channel=0}}),beforeMount:function(){var e=this;this.getAlarmTypeList().then(function(t){for(var a in t.data)e.replaySearchParams.AlarmList.push({label:a,value:t.data[a]})})},watch:{"$store.getters.ptSinglePass":function(e,t){var a=0<arguments.length&&void 0!==e?e:{};a&&(this.common.vehicleId=a.pId,this.common.enterpriseId=a.enterpriseId,this.common.plateCode=a.plateCode,this.common.channel=a.text.replace(/[^\d]/g,""))}},beforeDestroy:function(){var e=this;["","moz","webkit","ms"].forEach(function(t){document.removeEventListener(t+"fullscreenchange",function(){e.common.isFull=e.isFullscreen()})}),this.videoNumber(1),this.reSetVideoArr()},mounted:function(){var e=this;["","moz","webkit","ms"].forEach(function(t){document.addEventListener(t+"fullscreenchange",function(){e.common.isFull=e.isFullscreen()})}),setTimeout(function(){e.treeReady=!0,e.videoGroupName="videoGroup"},2e3)}},I=(a("a99c"),Object(v.a)(w,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flashPlayback"},[a("cv-operation",{attrs:{position:"left"}},[a("el-form-item",[a("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"分屏选择"},on:{change:e.setScreen},model:{value:e.replaySearchParams.screen,callback:function(t){e.$set(e.replaySearchParams,"screen",t)},expression:"replaySearchParams.screen"}},e._l(e.replaySearchParams.screenList,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",[a("el-date-picker",{attrs:{editable:!1,clearable:!1,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.SEtime,callback:function(t){e.SEtime=t},expression:"SEtime"}})],1),a("el-form-item",[a("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"报警类型选择"},on:{change:e.alarmChange},model:{value:e.replaySearchParams.Alarm,callback:function(t){e.$set(e.replaySearchParams,"Alarm",t)},expression:"replaySearchParams.Alarm"}},e._l(e.replaySearchParams.AlarmList,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",[a("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"音视频资源类型选择"},model:{value:e.replaySearchParams.MediaType,callback:function(t){e.$set(e.replaySearchParams,"MediaType",t)},expression:"replaySearchParams.MediaType"}},e._l(e.replaySearchParams.MediaTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",[a("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"码流类型选择"},model:{value:e.replaySearchParams.StreamType,callback:function(t){e.$set(e.replaySearchParams,"StreamType",t)},expression:"replaySearchParams.StreamType"}},e._l(e.replaySearchParams.StreamTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",[a("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"存储器类型选择"},model:{value:e.replaySearchParams.StorageType,callback:function(t){e.$set(e.replaySearchParams,"StorageType",t)},expression:"replaySearchParams.StorageType"}},e._l(e.replaySearchParams.StorageTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",[a("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"数据类型选择"},model:{value:e.replaySearchParams.DataSource,callback:function(t){e.$set(e.replaySearchParams,"DataSource",t)},expression:"replaySearchParams.DataSource"}},e._l(e.replaySearchParams.DataSourceList,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",[a("el-button",{on:{click:e.fullscreen}},[e._v("全屏")])],1),a("el-form-item",[a("el-button",{attrs:{loading:e.searchFlag},on:{click:e.search}},[e._v("搜索")])],1)],1),a("cv-content",[a("div",{staticStyle:{width:"100%",height:"99.5%"},attrs:{slot:"aside"},slot:"aside"},[a("video-tree",{class:[e.treeReady?"widthF":"widthE"],attrs:{"node-monitor":e.singleCar},on:{"node-click":e.nodeClick}})],1),a("div",{class:["inContent",e.common.isFull?"inContent-full":""]},[a(e.videoGroupName,{ref:"videoGroup",tag:"component",class:["videoProt",e.common.isFull?"v-fullscreen":""],attrs:{num:e.video.videonumber,flg:e.flg,data:e.$store.getters.videoMess,videoSize:e.videoSize}}),a("cv-lazy-render",{attrs:{time:"500",immediate:e.mapInitial,transition:"bottom"}},[a("cv-bottom-tabs",{ref:"pagination",staticClass:"track-list",attrs:{data:e.tableData,showDownTable:e.showDownTable,mapType:e.mapType},on:{download:e.download,openTables:e.openTable,replay:e.replay}})],1)],1)]),a("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.dialog.flag,title:e.dialog.title,"custom-class":e.dialog.size},on:{"update:visible":function(t){return e.$set(e.dialog,"flag",t)}}},[a(e.dialog.name,{tag:"component",attrs:{options:e.dialog},on:{opList:e.openList}})],1)],1)},[],!1,null,null,null).exports);t.default=I},"59c0":function(e,t,a){"use strict";a("c5f6");var s={inject:["store"],props:{options:{}},data:function(){return{confirmFlag:!1,beforeGird:{vehicleId:this.store.currentV,enterpriseId:this.store.currentE,taskExecutionConditionStr:"7",Channel:Number(this.store.downLoadParams.Channel),StartTime:this.store.downLoadParams.StartTime,EndTime:this.store.downLoadParams.EndTime,Alarm:Number(this.store.downLoadParams.Alarm),MediaType:Number(this.store.downLoadParams.MediaType),StreamType:Number(this.store.downLoadParams.StreamType),StorageType:Number(this.store.downLoadParams.StorageType),fileSource:Number(this.store.downLoadParams.fileSource)},optionsList:[{value:"1",label:"WIFI"},{value:"2",label:"LAN"},{value:"4",label:"3G/4G"}],value5:["1","2","4"]}},methods:{schange:function(e){this.beforeGird.taskExecutionConditionStr=e.join(",")},confirm:function(){var e=this;if(this.confirmFlag=!0,0==this.value5.length)return this.$message.warning("请选择下载环境!"),this.confirmFlag=!1;this.$http({url:"/sendVideoOrder/sendVedioFileUploadSite",params:this.beforeGird}).then(function(t){t.flag&&(e.options.flag=!1,e.confirmFlag=!1,e.$emit("opList")),t.flag||(e.$message.error({message:e.$t("error."+t.errorCode)}),e.options.flag=!1,e.confirmFlag=!1)})}}},r=a("2877"),i=Object(r.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{staticClass:"dSelect"},[a("el-form-item",{attrs:{label:"下载环境"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},on:{change:e.schange},model:{value:e.value5,callback:function(t){e.value5=t},expression:"value5"}},e._l(e.optionsList,function(e){return a("el-option",{key:e._id,attrs:{label:e.label,value:e.value}})}),1)],1),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",loading:e.confirmFlag},on:{click:e.confirm}},[e._v(e._s(e.$t("action.confirm")))]),a("el-button",{on:{click:function(t){e.options.flag=!1}}},[e._v(e._s(e.$t("action.cancel")))])],1)],1)},[],!1,null,null,null);t.a=i.exports},6447:function(e,t,a){"use strict";var s=a("21d4");a.n(s).a},9268:function(e,t,a){},"95be":function(e,t,a){},"96f8":function(e,t,a){},a17e:function(e,t,a){"use strict";var s=a("96f8");a.n(s).a},a99c:function(e,t,a){"use strict";var s=a("1bb7");a.n(s).a},b0ad:function(e,t,a){"use strict";(function(e){a("7f7f"),t.a={methods:{confirmPrompt:function(e,t){var a=this,s=e||this.$t("action.confirmIsRemove");return new Promise(function(e,r){a.$confirm(s,a.$t("action.tip"),{confirmButtonText:a.$t("action.confirm"),cancelButtonText:a.$t("action.cancel"),type:"warning"}).then(function(){e()}).catch(function(){"function"==typeof t&&t()})})},timeLimitFunc:function(e,t,a){if(e&&t)return((new Date(t)-new Date(e))/864e5).toFixed(1)<=a||this.$message.error({message:this.$t("请选择时间范围在"+a+"天内")});this.$message.error({message:this.$t("请选择时间范围")})},addRemoveUnique:function(e,t,a){var s=e.length,r=t.length;return r<s?{name:"add",data:this.$service.isUnique(e,t,a)}:s<r?{name:"remove",data:this.$service.isUnique(t,e,a)}:s==r?{name:"equal",data:this.$service.isUnique(e,t,a)}:void 0},showTooltip:function(e,t){var a=e.target,s=this.$refs[t];s.referenceElm=a,s.$refs.popper.style.display="none",s.doDestroy(),s.setExpectedState(!0),s.handleShowPopper()},mouseenterShowTip:function(e,t,a){var s=e.target;if(s.scrollWidth>s.offsetWidth||a)return this.showTooltip(e,t),a?a.startTime+"~"+a.endTime:s.innerText},mouseenterShowToolTip:function(e,t,a){var s=e.target;return this.showTooltip(e,t),!a&&s.innerText},mouseoverHideTip:function(e){var t=this.$refs[e];t&&(t.setExpectedState(!1),t.handleClosePopper())},asyncDownloadScript:function(t,a){var s=this,r=0<arguments.length&&void 0!==t?t:"Baidu",i=1<arguments.length?a:void 0;return e[r]?e[r]._preloader?e[r]._preloader:Promise.resolve(e[r]):(e[r]={},e[r]._preloader=new Promise(function(t,a){var o=document.createElement("script");o.src=i,e.document.body.appendChild(o),s.$service.isIe()&&s.$service.IE_VERSION<11?o.onreadystatechange=function(){"loaded"!=o.readyState&&"complete"!=o.readyState||(t(e[r]),e[r]._preloader=null)}:o.onload=function(){t(e[r]),e[r]._preloader=null}}),e[r]._preloader)}}}}).call(this,a("c8ba"))},be4f:function(e,t,a){"use strict";var s=a("95be");a.n(s).a},fb67:function(e,t,a){"use strict";a("c5f6"),a("96cf");var s,r=a("3b8d"),i={props:{vehicleInfos:{}},data:function(){return{basicInfo:{},content:{activeName:"tabs0"},loopTimer:null}},methods:{loopLocations:(s=Object(r.a)(regeneratorRuntime.mark(function e(t){var a,s,r,i,o,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.basicInfo.vehicleIds&&t!=this.basicInfo.vehicleIds&&(this.basicInfo={}),a={vehicleIds:t,mapType:this.$store.getters.mapType},e.next=4,this.$http({url:"/videoController/getVehicleVideoLastLocation",params:a});case 4:s=e.sent,r=s.flag,i=s.data,s.errorCode,r&&(this.basicInfo=i.records[0],this.$refs.map.mapMethods.clearOverlays(),o=this.$refs.map.mapMethods.point({latitude:i.records[0].mapLatitude,longitude:i.records[0].mapLongitude}),n=this.$refs.map.mapMethods.mapAddpoint({longitude:Number(i.records[0].mapLongitude),latitude:Number(i.records[0].mapLatitude)},this.$filter.isOnline(i.records[0],!1,this.$store.getters.mapName),{width:32,height:32}),this.$refs.map.mapMethods.addOverlay(n),this.$refs.map.mapMethods.moveToCenter(o,this.$refs.map.mapMethods.map.getZoom()));case 9:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})},watch:{"vehicleInfos.vehicleId":function(e){var t=this;this.basicInfo={},clearInterval(this.loopTimer),this.loopTimer=setInterval(function(){t.loopLocations(e)},1500)}},beforeDestroy:function(){clearInterval(this.loopTimer)}},o=(a("6447"),a("2877")),n=Object(o.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("cv-scrollbar",{staticClass:"vehicleInfo-video"},[a("div",{staticClass:"status"},[a("h3",[e._v("基本信息")]),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[e._v("终端ID:")]),a("el-col",{attrs:{span:14}},[e._v("\n                "+e._s(e._f("isValue")(e.basicInfo.terminalCode))+"\n            ")])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[e._v("所属公司:")]),a("el-col",{attrs:{span:14}},[e._v("\n                "+e._s(e._f("isValue")(e.basicInfo.enterpriseName))+"\n            ")])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[e._v("车队:")]),a("el-col",{attrs:{span:14}},[e._v("\n                "+e._s(e._f("isValue")(e.basicInfo.fleetName))+"\n            ")])],1),a("div",{staticClass:"plateCode"},[a("div",{staticClass:"pColor",style:{borderColor:this.$filter.plateCodeColor1(e.basicInfo.plateColor)}},[a("div",{staticClass:"inColor",style:{backgroundColor:this.$filter.plateCodeColor1(e.basicInfo.plateColor),color:4==e.basicInfo.plateColor?"black":"#fff"}},[e._v("\n                    "+e._s(e.basicInfo.plateCode||"--")+"\n                ")])])]),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[e._v("上报时间:")]),a("el-col",{attrs:{span:17}},[e._v("\n                "+e._s(e._f("isValue")(e._f("format")(e.basicInfo.gpsTime,"yyyy-MM-dd HH:mm:ss")))+"\n            ")])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[e._v("速度:")]),a("el-col",{style:{color:1==e.basicInfo.locateStatus?"#000":"red"},attrs:{span:5}},[e._v(e._s(e._f("isValue")("0.0"==e.basicInfo.dspeed?"0.0"==e.basicInfo.gpsSpeed?"0 ":e.basicInfo.gpsSpeed:e.basicInfo.dspeed,"km/h")))]),a("el-col",{attrs:{span:5}},[e._v("总里程:")]),a("el-col",{attrs:{span:5}},[e._v(e._s(e._f("isValue")(e.basicInfo.mileage,"km")))])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[e._v("方向:")]),a("el-col",{attrs:{span:5}},[e._v(e._s(e._f("isValue")(e._f("direction")(e.basicInfo.directionText))))]),a("el-col",{attrs:{span:5}},[e._v("海拔:")]),a("el-col",{attrs:{span:5}},[e._v(e._s(e._f("isValue")(e.basicInfo.height,"m")))])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[e._v("经度:")]),a("el-col",{attrs:{span:5}},[e._v(e._s(e._f("isValue")(e._f("toFixed")(e.basicInfo.mapLongitude,6))))]),a("el-col",{attrs:{span:5}},[e._v("纬度:")]),a("el-col",{attrs:{span:5}},[e._v(e._s(e._f("isValue")(e._f("toFixed")(e.basicInfo.mapLatitude,6))))])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[e._v("当前报警:")]),a("el-col",{attrs:{span:14}},[e._v(e._s(e._f("isValue")(e.basicInfo.alarmCount)))])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[e._v("报警信息:")]),a("el-col",{attrs:{span:17}},[e._v(e._s(e._f("isValue")(e.basicInfo.alarmShortInfo)))])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[e._v("地理位置:")]),a("el-col",{attrs:{span:17}},[e._v(e._s(e._f("isValue")(e.basicInfo.locationDesc)))])],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[e._v("ACC状态:")]),a("el-col",{attrs:{span:17}},[e._v(e._s(e._f("isValue")(e._f("accStatus")(e.basicInfo.accStatus))))])],1),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{size:"small",disabled:""}},[e._v("预览所有")])],1),a("el-col",{attrs:{span:6}},[a("el-button",{directives:[{name:"instruction",rawName:"v-instruction",value:{title:"文本下发",id:this.vehicleInfos.vehicleId?this.vehicleInfos.vehicleId:"",enterpriseId:this.vehicleInfos.enterpriseId?this.vehicleInfos.enterpriseId:"",size:"dialog-middle",name:"textIssue",params:{vehicleId:this.vehicleInfos.vehicleId?this.vehicleInfos.vehicleId:"",enterpriseId:this.vehicleInfos.enterpriseId?this.vehicleInfos.enterpriseId:""}},expression:"{\n                                    title: '文本下发',\n                                    id: this.vehicleInfos.vehicleId?this.vehicleInfos.vehicleId:'',\n                                    enterpriseId: this.vehicleInfos.enterpriseId?this.vehicleInfos.enterpriseId:'',\n                                    size: 'dialog-middle',\n                                    name: 'textIssue', \n                                    params:{vehicleId:this.vehicleInfos.vehicleId?this.vehicleInfos.vehicleId:'',enterpriseId:this.vehicleInfos.enterpriseId?this.vehicleInfos.enterpriseId:''}}"}],attrs:{size:"small"}},[e._v("文本下发")])],1),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{size:"small",disabled:""}},[e._v("电话回拨")])],1),a("el-col",{attrs:{span:6}},[a("el-button",{directives:[{name:"instruction",rawName:"v-instruction",value:{title:"拍照",id:this.vehicleInfos.vehicleId?this.vehicleInfos.vehicleId:"",enterpriseId:this.vehicleInfos.enterpriseId?this.vehicleInfos.enterpriseId:"",size:"dialog-middle",name:"photo",params:{vehicleId:this.vehicleInfos.vehicleId?this.vehicleInfos.vehicleId:"",enterpriseId:this.vehicleInfos.enterpriseId?this.vehicleInfos.enterpriseId:""}},expression:"{\n                                    title: '拍照',\n                                    id: this.vehicleInfos.vehicleId?this.vehicleInfos.vehicleId:'',\n                                    enterpriseId: this.vehicleInfos.enterpriseId?this.vehicleInfos.enterpriseId:'',\n                                    size: 'dialog-middle',\n                                    name: 'photo', \n                                    params:{vehicleId:this.vehicleInfos.vehicleId?this.vehicleInfos.vehicleId:'',enterpriseId:this.vehicleInfos.enterpriseId?this.vehicleInfos.enterpriseId:''}}"}],attrs:{size:"small"}},[e._v("拍照")])],1)],1)],1),a(e.$store.getters.mapName,{ref:"map",tag:"component",staticClass:"mapbottom"})],1)},[],!1,null,"1c8b5965",null);t.a=n.exports}}]);
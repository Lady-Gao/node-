(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1ae05146"],{"05c0":function(t,e,i){"use strict";i("7f7f"),i("20d6"),i("ac6a");var n=i("cebc"),a=i("3f4e"),o=i("2f62"),r={name:"CvPublictreeContent",components:{CvContent:a.a},props:{model:String,vehicleMonitor:Function,loading:Boolean,noresize:{default:!1,type:Boolean}},data:function(){return{entryList:[],condition:""}},computed:Object(n.a)({},Object(o.c)(["onlineList","isAttention","socketEnterprise","socketVehicle","vehicle_data","vehicleCondition"]),{isCheck:function(){switch(this.model){case"multi":return!0;case"single":default:return!1}},_treeMethods:function(){return this.$refs.tabs},_contentMethods:function(){return this.$refs.content}}),beforeDestroy:function(){var t=this._treeMethods.getAllNodes;this.setStoreVehicleSearchCondition(this.condition),this.setStoreVehicleData(t())},mounted:function(){var t=this._treeMethods.$refs.tree.reference().ztreeApi;t()&&t().checkAllNodes(!1)},methods:Object(n.a)({},Object(o.b)(["setStoreVehicleData","setStoreVehicleSearchCondition"]),{handlerVehicleSearch:function(t){this.condition=t},vehicle_Monitor:function(t){var e=t.data;if(t.name,"function"==typeof this.vehicleMonitor)switch(this.model){case"multi":return this.vehicle_Monitor_multi(t);case"single":return this.vehicleMonitor(e[0])}},vehicle_Monitor_multi:function(t){var e=this,i=t.data;switch(t.name){case"check":this.entryList=this.entryList.concat(i);break;case"cancel":i.forEach(function(t){var i=e.entryList.findIndex(function(e){return e.id==t.id});0<=i&&e.entryList.splice(i,1)})}this.vehicleMonitor(this.entryList)}})},s=(i("45d7"),i("2877")),c=Object(s.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("cv-content",{ref:"content",attrs:{loading:t.loading,noresize:t.noresize}},[t.model?i("cv-tabs-tree",{ref:"tabs",staticClass:"vehiclemaster-tree",attrs:{slot:"aside","vehicle-search":t.vehicleCondition,"is-checked":t.isCheck,"tree-data":t.vehicle_data,"online-monitor":t.onlineList,"vehicle-monitor":t.socketVehicle,"attention-monitor":t.isAttention,"enterprise-fleet-monitor":t.socketEnterprise,"node-monitor":t.vehicle_Monitor},on:{"vehicle-choose-search":t.handlerVehicleSearch},slot:"aside"}):t._e(),t._t("default")],2)},[],!1,null,"2dfdf41b",null).exports;c.install=function(t){t.component(c.name,c)},e.a=c},4419:function(t,e,i){"use strict";i.r(e),i("7f7f"),i("ac6a");var n={components:{CvPublictreeContent:i("05c0").a},data:function(){return{pickerOptions0:{disabledDate:function(t){return t.getTime()>Date.now()}},time:[this.$filter.timeStamp(this.$filter.format(new Date,"yyyy-MM-dd start")),this.$filter.timeStamp(this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss"))],vehicleId:"",loading:!1,options:{},echarts:{loading:!1,dataItem:[]}}},computed:{_table:function(){return this.$refs.table}},methods:{handlerVehicleMonitor:function(t){this.options.vehicleId=t.id},search:function(){this.options.vehicleId?this.time?(this.options.startTime=this.$filter.format(this.time[0],"yyyy-MM-dd HH:mm:ss"),this.options.endTime=this.$filter.format(this.time[1],"yyyy-MM-dd HH:mm:ss"),this._table.tableInitial()):this.$message.warning("请选择时间"):this.$message.warning("请选择车辆")},func2:function(t){return t.name+": "+t.value+"km/h"},showEchart:function(t){var e=this;this.echarts.loading=!0,this.echarts.dataItem=[],this.$store.dispatch("getGbSpeedStateDetailList",{gbrdId:t.gbrdId}).then(function(t){if(t.flag){var i={x:[],y1:[],y2:[]};t.data.forEach(function(t){i.x.push(t.number),i.y1.push(t.recordspeed),i.y2.push(t.contrasspeed)}),e.echarts.dataItem=i,e.getMapCarCount(i)}else e.echarts.dataItem=[],e.getMapCarCount([]);e.echarts.loading=!1})},getMapCarCount:function(t){var e=this,i={legend:{data:["记录速度","参考速度"],x:"left"},grid:{left:"3%",right:"5%",bottom:"3%",containLabel:!0},tooltip:{formatter:function(t){var i=t;return e.func2(i)}},xAxis:{type:"category",name:"秒(s)",boundaryGap:!1,data:t.x},yAxis:[{name:"速度(km/h)",type:"value"}],series:[{name:"记录速度",type:"line",itemStyle:{normal:{color:"red"}},symbolSize:8,lineStyle:{normal:{width:3}},data:t.y1},{name:"参考速度",type:"line",itemStyle:{normal:{color:"rgb(64, 203,55)"}},symbolSize:8,lineStyle:{normal:{width:3}},data:t.y2}]};this.echarts.dataItem=i}}},a=(i("47de"),i("2877")),o=Object(a.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"speedLog"},[i("cv-operation",{staticClass:"header",attrs:{position:"left"}},[i("el-form-item",{attrs:{label:"起始时间:"}},[i("el-date-picker",{staticClass:"picker",attrs:{"picker-options":t.pickerOptions0,clearable:!1,editable:!1,type:"datetimerange",placeholder:"选择时间范围",prop:"time"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),i("el-form-item",{staticStyle:{float:"right"}},[i("cv-tool",{staticClass:"cv-tool",staticStyle:{margin:"0"},attrs:{name:t.$route.name,data:t.$store.getters.monitorMenu,"is-export":!1,"is-remove":!1,"is-add":!1,"is-modify":!1},on:{search:t.search}})],1)],1),i("cv-content",[i("cv-publictree-content",{attrs:{model:"single","vehicle-monitor":t.handlerVehicleMonitor}},[i("cv-grid",{ref:"table",attrs:{url:"/gbSpeedState/getGbSpeedStatePage",params:t.options}},[i("el-table-column",{attrs:{label:"车牌号 ","min-width":"150",align:"center",prop:"plateCode"}}),i("el-table-column",{attrs:{label:"所属企业 ","min-width":"150",align:"center",prop:"enterpriseName"}}),i("el-table-column",{attrs:{label:"车辆分组 ","min-width":"150",align:"center",prop:"fleetName"}}),i("el-table-column",{attrs:{label:"速度状态 ","min-width":"150",align:"center",prop:"stateText"}}),i("el-table-column",{attrs:{label:"速度状态起始时间 ","min-width":"150",align:"center",prop:"startTime"}}),i("el-table-column",{attrs:{label:"速度状态终止时间 ","min-width":"150",align:"center",prop:"endTime"}}),i("el-table-column",{attrs:{label:t.$t("action.operation"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"cv-table-tool"},[i("cv-span",{attrs:{type:"success"},nativeOn:{click:function(i){return t.showEchart(e.row)}}},[t._v("查看详细")])],1)]}}])})],1)],1),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.echarts.loading,expression:"echarts.loading"}],staticStyle:{width:"100%","margin-top":"40px"}},[i("cv-echart",{staticClass:"propChart",staticStyle:{width:"100%",height:"240px"},attrs:{name:"line",data:t.echarts.dataItem}})],1)],1)],1)},[],!1,null,null,null).exports;o.install=function(t){t.component(o.name,o)},e.default=o},"45d7":function(t,e,i){"use strict";var n=i("6e18");i.n(n).a},"47de":function(t,e,i){"use strict";var n=i("ac13");i.n(n).a},"6e18":function(t,e,i){},ac13:function(t,e,i){}}]);
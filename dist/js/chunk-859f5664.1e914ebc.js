(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-859f5664"],{"4e8a":function(e,t,a){"use strict";a.r(t),a("386d"),a("96cf");var l,r=a("3b8d"),i=(a("ac6a"),{props:{model:{},refresh:{}},computed:{_table:function(){return this.$refs.multipleTable}},methods:{handleSelectionChange:function(e){var t=[];e.forEach(function(e){t.push(e.vehicleid)}),this.$emit("searchEchart",{vehicleIds:t.join(",")})}},watch:{refresh:function(e){e&&(this._table.tableInitial(!0),this.$emit("update:refresh",!1))}}}),o=a("2877"),s=Object(o.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("cv-grid",{ref:"multipleTable",attrs:{params:e.model,url:"/insuranceReport/queryInsuranceReportByPage"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:e.$t("reportForm.driverIdCollection.plateCode"),prop:"plateCode"}}),a("el-table-column",{attrs:{label:e.$t("reportForm.vehicleOpt.vehicleJia"),prop:"chassisNum"}}),a("el-table-column",{attrs:{label:e.$t("vehicleInfo.terminalCode"),prop:"deviceId"}}),a("el-table-column",{attrs:{label:e.$t("cL.vehicleOwnerName"),prop:"owner"}}),a("el-table-column",{attrs:{label:e.$t("historyTrack.Trip")}},[a("el-table-column",{attrs:{label:e.$t("historyTrack.Totalmileage")+"(km)",prop:"totalMileage",width:"120"}}),a("el-table-column",{attrs:{label:e.$t("historyTrack.Totalmileage"),prop:"days",width:"120"}}),a("el-table-column",{attrs:{label:"有效运行天数",prop:"effectiveDays",width:"120"}}),a("el-table-column",{attrs:{label:"日均里程(km/天)",prop:"avgSpeedByDay",width:"150"}}),a("el-table-column",{attrs:{label:"单日最大里程(km)",prop:"maxMileageByDay",width:"150"}}),a("el-table-column",{attrs:{label:"单日最小里程(km)",prop:"minMileageByDay",width:"150"}})],1),a("el-table-column",{attrs:{label:"速度"}},[a("el-table-column",{attrs:{label:"周期最大速度(km/h)",prop:"maxSpeed",width:"200"}}),a("el-table-column",{attrs:{label:"周期平均速度(km/h)",prop:"avgSpeed",width:"200"}}),a("el-table-column",{attrs:{label:"小于60km/h(km)",prop:"mileage1",width:"120"}}),a("el-table-column",{attrs:{label:"60-75km/h(km)",prop:"mileage2",width:"120"}}),a("el-table-column",{attrs:{label:"75-90km/h(km)",prop:"mileage3",width:"120"}}),a("el-table-column",{attrs:{label:"大于90km/h(km)",prop:"mileage4",width:"120"}})],1),a("el-table-column",{attrs:{label:"不良驾驶行为"}},[a("el-table-column",{attrs:{label:"超速(次)",prop:"totalOverspeedCount"}}),a("el-table-column",{attrs:{label:"急加速(次)",prop:"totalHardAccelerationCount"}}),a("el-table-column",{attrs:{label:"急减速(次)",prop:"totalSharpSlowdownCount"}}),a("el-table-column",{attrs:{label:"急转弯(次)",prop:"totalSharpTurnCount"}}),a("el-table-column",{attrs:{label:"疲劳驾驶(次)",prop:"totalDriverFatigueCount",width:"120"}})],1),a("el-table-column",{attrs:{label:"驾驶时间分布"}},[a("el-table-column",{attrs:{label:"周期运行时长",prop:"periodCtripDurationStr",width:"230"}}),a("el-table-column",{attrs:{label:"日均运行时长",prop:"avgMileageTimeStr",width:"230"}}),a("el-table-column",{attrs:{label:"00:00:00-6:00:00",prop:"duration1Str",width:"230"}}),a("el-table-column",{attrs:{label:"6:00:00-18:00:00",prop:"duration2Str",width:"230"}}),a("el-table-column",{attrs:{label:"18:00:00-24:00:00",prop:"duration3Str",width:"230"}})],1)],1)},[],!1,null,null,null).exports,n=(a("7f7f"),{props:{model:{}},data:function(){return{loading:!1,dayWeekItem:[],mileageItem:[],speedItem:[],alarmItem:[],timeItem:[],dayWeekObj:{},mileageObj:{},speedObj:{},alarmObj:{},timeObj:{}}},methods:{search:function(){var e=this;this.loading=!0,this.$store.dispatch("queryCycleReport",this.model).then(function(t){t.flag?e.setEchartData(t.data):(e.clearDate(),e.$message.error(e.$t("error."+errorCode))),e.loading=!1}).catch(function(){e.loading=!1,e.$message.error("请求异常")})},clearDate:function(){this.setEchartData([])},setEchartData:function(e){var t=this;this.dayWeekObj={xAxis:{type:"category",data:["有效行程日","行驶周期"]},yAxis:[{type:"value"}],series:[{type:"bar",data:[e.effectiveDays||0,e.days||0]}],title:"车辆行驶统计",func:function(e){return e.name+" : "+e.value+"天"}},this.mileageObj={xAxis:[{type:"category",data:["日均里程","单日最大行程","单日最短行程"]}],yAxis:{type:"value"},series:[{type:"bar",data:[e.avgSpeedByDay||0,e.maxMileageByDay||0,e.minMileageByDay||0]}],title:"车辆行程统计",func:function(e){return e.name+" : "+e.value+"km"}},this.speedObj={name:"速度",x:["小于60km/h(km)","60-75km/h(km)","75-90km/h(km)","大于90km/h(km)"],y:[{name:"小于60km/h",value:e.mileage1&&e.mileage1.toFixed(2)||0},{name:"60-75km/h",value:e.mileage2&&e.mileage2.toFixed(2)||0},{name:"75-90km/h",value:e.mileage3&&e.mileage3.toFixed(2)||0},{name:"大于90km/h",value:e.mileage4&&e.mileage4.toFixed(2)||0}],title:"车辆速度统计"},this.alarmObj={name:"行为",x:["超速(次)","急加速(次)","急减速(次)","急转弯(次)","疲劳驾驶(次)"],y:[{name:"超速",value:e.totalOverspeedCount||0},{name:"急加速",value:e.totalHardAccelerationCount||0},{name:"急减速",value:e.totalSharpSlowdownCount||0},{name:"急转弯",value:e.totalSharpTurnCount||0},{name:"疲劳驾驶",value:e.totalDriverFatigueCount||0}],title:"疲劳驾驶分析"},this.timeObj={xAxis:[{type:"category",data:["周期行程时长(小时)","日均行驶时长(小时)","00:00:00-6:00:00(小时)","6:00:00-18:00:00(小时)","18:00:00-24:00:00(小时)"]}],yAxis:{name:"秒",type:"value"},series:[{type:"bar",data:[e.periodCtripDuration||0,e.avgMileageTime||0,e.duration1||0,e.duration2||0,e.duration3||0]}],title:"驾驶分布时间",func:function(e){var a=t.setTimeStr(e.value);return e.name+" : "+a}},this.showBar(this.dayWeekObj,"dayWeekItem"),this.showBar(this.mileageObj,"mileageItem"),this.showBar(this.timeObj,"timeItem"),this.showPie(this.speedObj,"speedItem"),this.showPie(this.alarmObj,"alarmItem")},setTimeStr:function(e){var t=e,a=0,l=0;60<t&&(a=parseInt(t/60),t=parseInt(t%60),60<a&&(l=parseInt(a/60),a=parseInt(a%60)));var r=parseInt(t)+"秒";return 0<a&&(r=parseInt(a)+"分"+r),0<l&&(r=parseInt(l)+"小时"+r),r},showBar:function(e,t){var a={tooltip:{formatter:function(t){var a=t;return e.func(a)}},toolbox:{feature:{saveAsImage:{}},right:"5%"},title:{text:e.title,x:"center"},xAxis:e.xAxis,yAxis:e.yAxis,series:e.series};this[t]=a},showPie:function(e,t){var a={title:{text:e.title,x:"center",top:"30"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},toolbox:{feature:{saveAsImage:{}},right:"5%",top:"30"},legend:{orient:"vertical",left:"left",data:e.x},series:[{name:e.name,type:"pie",radius:"55%",center:["50%","60%"],data:e.y}]};this[t]=a}}}),m=(a("98b7"),{components:{tableList:s,echartList:Object(o.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"el-tabs__content",staticStyle:{width:"100%"}},[a("cv-echart",{staticClass:"echart-area",attrs:{name:"bar",data:e.dayWeekItem}}),a("cv-echart",{staticClass:"echart-area",attrs:{name:"bar",data:e.mileageItem}}),a("cv-echart",{staticClass:"echart-area",attrs:{name:"pie",data:e.speedItem}}),a("cv-echart",{staticClass:"echart-area",attrs:{name:"pie",data:e.alarmItem}}),a("cv-echart",{staticStyle:{width:"100%",height:"400px"},attrs:{name:"bar",data:e.timeItem}})],1)},[],!1,null,"e921c308",null).exports},data:function(){return{type:"month",model:{date:this.$filter.format(new Date,"yyyy-MM"),plateCode:""},tableSearch:!1}},methods:{down:(l=Object(r.a)(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.model.date)return t={plateCode:this.model.plateCode,date:"string"==typeof this.model.date?this.model.date:this.$filter.format(this.model.date,"yyyy-MM")},e.next=4,this.$http({url:"/insuranceReport/exportInsuranceReport",params:t});e.next=8;break;case 4:(a=e.sent).flag?this.$message.warning("导出任务已执行"):this.$message.error(this.$t("error."+a.errorCode)),e.next=9;break;case 8:this.$message.warning("请选择查询时间");case 9:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)}),tableLoad:function(){this.model.date?this.tableSearch=!0:this.$message.warning("请选择时间")},searchEchart:function(e){this.model.date?(this.model.vehicleIds=e.vehicleIds,e.vehicleIds?this.$refs.echartList.search():this.$refs.echartList.clearDate()):this.$message.warning("请选择时间")}}}),c=Object(o.a)(m,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("cv-operation",{attrs:{position:"left"}},[a("el-form-item",{attrs:{label:e.$t("reportForm.overSpeed.searchTime")}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM",type:"month",placeholder:"选择月",clearable:!1},model:{value:e.model.date,callback:function(t){e.$set(e.model,"date",t)},expression:"model.date"}})],1),a("el-form-item",{attrs:{label:e.$t("reportForm.driverIdCollection.plateCode")}},[a("el-input",{attrs:{maxlength:10},model:{value:e.model.plateCode,callback:function(t){e.$set(e.model,"plateCode","string"==typeof t?t.trim():t)},expression:"model.plateCode"}})],1),a("el-form-item",{staticStyle:{float:"right"}},[a("cv-tool",{staticStyle:{margin:"0px"},attrs:{name:e.$route.name,data:e.$store.getters.monitorMenu,"is-add":!1,"is-modify":!1,"is-remove":!1},on:{export:e.down,search:e.tableLoad}})],1)],1),a("cv-content",{attrs:{fill:!0}},[a("table-list",{attrs:{refresh:e.tableSearch,model:e.model},on:{"update:refresh":function(t){e.tableSearch=t},searchEchart:e.searchEchart}}),a("echartList",{ref:"echartList",staticStyle:{"margin-top":"45px"},attrs:{model:e.model}})],1)],1)},[],!1,null,"4950b786",null).exports;t.default=c},8050:function(e,t,a){},"98b7":function(e,t,a){"use strict";var l=a("8050");a.n(l).a}}]);
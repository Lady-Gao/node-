(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-d49377c8"],{1258:function(e,t,a){"use strict";a.r(t),a("ac6a"),a("c5f6"),a("386d"),a("96cf");var r,l=a("3b8d"),i=(a("28a5"),{mixins:[a("b0ad").a],computed:{_table1:function(){return this.$refs.table1},_table2:function(){return this.$refs.table2},_table3:function(){return this.$refs.table3},_table4:function(){return this.$refs.table4}},data:function(){return{alarmTree:"",alarmData:[],label:{},enterpriseId:"",pickerOptions0:{disabledDate:function(e){return e.getTime()>Date.now()}},dpId:"",fleetId:"",plateCode:"",alarmTypeNameT:"",downFlag:!0,search:{enterpriseId:"",startTime:this.$filter.format(new Date,"yyyy-MM-dd start"),endTime:this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss"),alarmTypeIds:"",typeName:1},search2:{enterpriseId:"",startTime:this.$filter.format(new Date,"yyyy-MM-dd start"),endTime:this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss"),alarmTypeIds:"",typeName:2,dpIds:"",plateCode:""},search3:{enterpriseId:"",startTime:this.$filter.format(new Date,"yyyy-MM-dd start"),endTime:this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss"),alarmTypeIds:"",dpIds:"",typeName:1},search4:{enterpriseId:"",startTime:this.$filter.format(new Date,"yyyy-MM-dd start"),endTime:this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss"),alarmTypeIds:"",dpIds:"",plateCode:"",typeName:2},time:[this.$filter.format(new Date,"yyyy-MM-dd start"),this.$filter.format(new Date,"yyyy-MM-dd HH:mm:ss")],activeName:"tabs0"}},methods:{load:function(e){switch(this.activeName){case"tabs0":this._table1.tableInitial(!0),this.downFlag=!0;break;case"tabs1":this._table2.tableInitial(!0),this.downFlag=!0;break;case"tabs2":this._table3.tableInitial(!0),this.downFlag=!0;break;case"tabs3":this._table4.tableInitial(!0),this.downFlag=!0}},alarmLev:function(e){var t="";switch(e.alarmLevel){case"2":t="一般报警";break;case"1":t="中级报警";break;case"0":t="紧急报警"}return t},companyDeil:function(e){var t=this;this.enterpriseId=e.enterpriseId,this.alarmTypeNameT=e.alarmTypeId.split(","),this.fleetId=e.dpId,this.activeName="tabs1",setTimeout(function(){t._table2.tableInitial(!0)},0)},groupDeil:function(e){var t=this;this.fleetId=e.dpId,this.enterpriseId=e.enterpriseId,this.plateCode=e.plateCode?e.plateCode:"",this.alarmTypeNameT=e.alarmTypeId.split(","),this.activeName="tabs3",setTimeout(function(){t._table4.tableInitial(!0)},0)},getunTimelyHandle:function(e){return 0==e.unTimelyHandle&&0==e.timelyHandle?e.alarmCount:e.unTimelyHandle},down:(r=Object(l.a)(regeneratorRuntime.mark(function e(){var t,a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",a={},this.time){e.next=5;break}return this.$message.warning("请选择时间!"),e.abrupt("return",!1);case 5:e.t0=this.activeName,e.next="tabs0"===e.t0?8:"tabs1"===e.t0?11:"tabs2"===e.t0?14:"tabs3"===e.t0?17:20;break;case 8:return t="/report/reportVehicleAlarmHandle",a=this.search,e.abrupt("break",20);case 11:return t="/report/reportVehicleAlarmHandle",a=this.search2,e.abrupt("break",20);case 14:return t="/report/reportVehicleAlarmHandleInfo",a=this.search3,e.abrupt("break",20);case 17:return t="/report/reportVehicleAlarmHandleInfo",a=this.search4,e.abrupt("break",20);case 20:return e.next=22,this.$http({url:t,params:a});case 22:(r=e.sent).flag?this.$message.warning("导出任务已执行"):this.$message.error(this.$t("error."+r.errorCode));case 24:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)}),handleLevel:function(e){return(100*Number(e.timelypercentage)).toFixed(2)+"%"}},created:function(){var e=this;this.$http({url:"/alarmInfo/frinAlarmTypeInfoList.do"}).then(function(t){t.flag&&(e.alarmData=t.data.children,e.alarmTree="cvDropdownTree")})},watch:{activeName:function(e){},fleetId:function(e){this.search2.dpIds=e?e.join(","):"",this.search3.dpIds=e?e.join(","):"",this.search4.dpIds=e?e.join(","):""},enterpriseId:function(e){this.search.enterpriseId=e||"",this.search2.enterpriseId=e||"",this.search3.enterpriseId=e||"",this.search4.enterpriseId=e||""},plateCode:function(e){this.search2.plateCode=e,this.search4.plateCode=e},alarmTypeNameT:function(e){if(e){var t=[];e.forEach(function(e){e.length<4&&t.push(e)}),this.search.alarmTypeIds=this.search2.alarmTypeIds=this.search3.alarmTypeIds=this.search4.alarmTypeIds=t.join(",")}else this.search.alarmTypeIds=this.search2.alarmTypeIds=this.search3.alarmTypeIds=this.search4.alarmTypeIds=""},time:function(e){this.search.startTime=this.search2.startTime=this.search3.startTime=this.search4.startTime=this.$filter.format(new Date(e[0]),"yyyy-MM-dd start"),this.search.endTime=this.search2.endTime=this.search3.endTime=this.search4.endTime=this.$filter.format(new Date(e[1]),"yyyy-MM-dd end")}}}),n=a("2877"),s=Object(n.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vehiclePeccancy"},[a("cv-operation",{attrs:{position:"left"}},[a("el-form-item",{attrs:{label:"所属公司/机构"}},[a("cv-dropdown-tree",{staticStyle:{width:"250px"},attrs:{url:"/enterprise/findEnterpriseOrganizationTreeList","is-default":!1,label:e.label},on:{"update:label":function(t){e.label=t}},model:{value:e.enterpriseId,callback:function(t){e.enterpriseId=t},expression:"enterpriseId"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"tabs0"!=e.activeName,expression:'(activeName == "tabs0"  ? false : true)'}],attrs:{label:"所属车组"}},[a("cv-dropdown-tree",{staticStyle:{width:"250px"},attrs:{"is-check":!0,url:"/enterprise/findFleetTreeList","auto-params":{enterpriseId:e.label.enterpriseId,pId:e.label.id,type:e.label.type}},model:{value:e.fleetId,callback:function(t){e.fleetId=t},expression:"fleetId"}})],1),a("el-form-item",{attrs:{label:"报警类型:"}},[a(e.alarmTree,{tag:"component",staticStyle:{width:"220px"},attrs:{isCheck:!0,data:e.alarmData},model:{value:e.alarmTypeNameT,callback:function(t){e.alarmTypeNameT=t},expression:"alarmTypeNameT"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"tabs0"!=e.activeName&&"tabs2"!=e.activeName,expression:'((activeName == "tabs0" || activeName == "tabs2") ? false : true)'}],attrs:{label:e.$t("cL.carNumber")}},[a("el-input",{staticStyle:{width:"120px"},attrs:{maxlength:10,clearable:!0},model:{value:e.plateCode,callback:function(t){e.plateCode="string"==typeof t?t.trim():t},expression:"plateCode"}})],1),a("el-form-item",{attrs:{label:"选择时间:"}},[a("el-date-picker",{staticClass:"picker",staticStyle:{width:"360px"},attrs:{"picker-options":e.pickerOptions0,clearable:!1,editable:!1,type:"datetimerange",placeholder:"选择时间范围","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),a("el-form-item",{staticStyle:{float:"right"}},[a("cv-tool",{staticStyle:{margin:"0px"},attrs:{name:e.$route.name,data:e.$store.getters.monitorMenu,"is-modify":!1,"is-remove":!1,"is-add":!1,"is-export":e.downFlag},on:{export:e.down,search:e.load}})],1)],1),a("cv-content",{attrs:{fill:!0}},[a("cv-tabs",{attrs:{titles:["公司告警及时处理统计信息","公司告警及时处理详细信息","分组告警及时处理统计信息","分组告警及时处理详细信息"],"force-render":!1},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("cv-grid",{ref:"table1",attrs:{params:e.search,url:"/alarmInfo/vehicleAlarmHandle",isInitial:!1}},[a("el-table-column",{attrs:{align:"center",label:"公司名称","min-width":"100",prop:"enterpriseName"}}),a("el-table-column",{attrs:{align:"center",label:"报警级别","min-width":"100",prop:"alarmLevel",formatter:e.alarmLev}}),a("el-table-column",{attrs:{align:"center",label:"报警类型","min-width":"150",prop:"alarmTypeName"}}),a("el-table-column",{attrs:{align:"center",label:"开始时间","min-width":"150",prop:"startTime"}}),a("el-table-column",{attrs:{align:"center",label:"结束时间","min-width":"150",prop:"endTime"}}),a("el-table-column",{attrs:{align:"center",label:"报警次数 ","min-width":"100",prop:"alarmCount"}}),a("el-table-column",{attrs:{align:"center",label:"处理次数","min-width":"100",prop:"timelyHandle"}}),a("el-table-column",{attrs:{align:"center",label:"未处理次数","min-width":"100",prop:"unTimelyHandle",formatter:e.getunTimelyHandle}}),a("el-table-column",{attrs:{align:"center",label:"处理率","min-width":"80",prop:"timelypercentage",formatter:e.handleLevel}}),a("el-table-column",{attrs:{align:"center",label:e.$t("action.operation"),prop:"operate"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cv-span",{attrs:{type:"primary"},nativeOn:{click:function(a){return e.companyDeil(t.row)}}},[e._v("详细信息")])]}}])})],1),a("cv-grid",{ref:"table2",attrs:{params:e.search2,url:"/alarmInfo/vehicleAlarmHandle",isInitial:!1}},[a("el-table-column",{attrs:{align:"center",label:"车牌号","min-width":"100",prop:"plateCode"}}),a("el-table-column",{attrs:{align:"center",label:"公司名称","min-width":"100",prop:"enterpriseName"}}),a("el-table-column",{attrs:{align:"center",label:"分组名称","min-width":"100",prop:"dpName"}}),a("el-table-column",{attrs:{align:"center",label:"报警级别","min-width":"100",prop:"alarmLevel",formatter:e.alarmLev}}),a("el-table-column",{attrs:{align:"center",label:"报警类型","min-width":"150",prop:"alarmTypeName"}}),a("el-table-column",{attrs:{align:"center",label:"开始时间 ","min-width":"150",prop:"startTime"}}),a("el-table-column",{attrs:{align:"center",label:"结束时间","min-width":"150",prop:"endTime"}}),a("el-table-column",{attrs:{align:"center",label:"报警次数","min-width":"100",prop:"alarmCount"}}),a("el-table-column",{attrs:{align:"center",label:"已处理次数","min-width":"120",prop:"timelyHandle"}}),a("el-table-column",{attrs:{align:"center",label:"未处理次数","min-width":"120",prop:"unTimelyHandle",formatter:e.getunTimelyHandle}}),a("el-table-column",{attrs:{align:"center",label:"处理率","min-width":"80",prop:"timelypercentage",formatter:e.handleLevel}})],1),a("cv-grid",{ref:"table3",attrs:{params:e.search3,url:"/alarmInfo/vehicleAlarmHandleInfo",isInitial:!1}},[a("el-table-column",{attrs:{align:"center",label:"公司名称 ","min-width":"100",prop:"enterpriseName"}}),a("el-table-column",{attrs:{align:"center",label:"分组名称","min-width":"100",prop:"dpName"}}),a("el-table-column",{attrs:{align:"center",label:"报警级别","min-width":"100",prop:"alarmLevel",formatter:e.alarmLev}}),a("el-table-column",{attrs:{align:"center",label:"报警类型","min-width":"150",prop:"alarmTypeName"}}),a("el-table-column",{attrs:{align:"center",label:"开始时间","min-width":"150",prop:"startTime"}}),a("el-table-column",{attrs:{align:"center",label:"结束时间","min-width":"150",prop:"endTime"}}),a("el-table-column",{attrs:{align:"center",label:"报警次数 ","min-width":"100",prop:"alarmCount"}}),a("el-table-column",{attrs:{align:"center",label:"处理次数","min-width":"100",prop:"timelyHandle"}}),a("el-table-column",{attrs:{align:"center",label:"未处理次数","min-width":"120",prop:"unTimelyHandle",formatter:e.getunTimelyHandle}}),a("el-table-column",{attrs:{align:"center",label:"处理率","min-width":"80",prop:"timelypercentage",formatter:e.handleLevel}}),a("el-table-column",{attrs:{align:"center",label:e.$t("action.operation"),prop:"operate"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cv-span",{attrs:{type:"primary"},nativeOn:{click:function(a){return e.groupDeil(t.row)}}},[e._v("\n                            详细信息")])]}}])})],1),a("cv-grid",{ref:"table4",attrs:{params:e.search4,url:"/alarmInfo/vehicleAlarmHandleInfo",isInitial:!1}},[a("el-table-column",{attrs:{label:"车牌号","min-width":"100",prop:"plateCode"}}),a("el-table-column",{attrs:{label:"公司名称","min-width":"100",prop:"enterpriseName"}}),a("el-table-column",{attrs:{label:"分组名称","min-width":"100",prop:"dpName"}}),a("el-table-column",{attrs:{label:"报警级别","min-width":"100",prop:"alarmLevel",formatter:e.alarmLev}}),a("el-table-column",{attrs:{label:"报警类型","min-width":"150",prop:"alarmTypeName"}}),a("el-table-column",{attrs:{label:"开始时间 ","min-width":"150",prop:"startTime"}}),a("el-table-column",{attrs:{label:"结束时间","min-width":"150",prop:"endTime"}}),a("el-table-column",{attrs:{label:"报警次数","min-width":"100",prop:"alarmCount"}}),a("el-table-column",{attrs:{label:"已处理次数","min-width":"120",prop:"timelyHandle"}}),a("el-table-column",{attrs:{label:"未处理次数","min-width":"120",prop:"unTimelyHandle",formatter:e.getunTimelyHandle}}),a("el-table-column",{attrs:{label:"处理率","min-width":"80",prop:"timelypercentage",formatter:e.handleLevel}})],1)],1)],1)],1)},[],!1,null,null,null).exports;t.default=s},b0ad:function(e,t,a){"use strict";(function(e){a("7f7f"),t.a={methods:{confirmPrompt:function(e,t){var a=this,r=e||this.$t("action.confirmIsRemove");return new Promise(function(e,l){a.$confirm(r,a.$t("action.tip"),{confirmButtonText:a.$t("action.confirm"),cancelButtonText:a.$t("action.cancel"),type:"warning"}).then(function(){e()}).catch(function(){"function"==typeof t&&t()})})},timeLimitFunc:function(e,t,a){if(e&&t)return((new Date(t)-new Date(e))/864e5).toFixed(1)<=a||this.$message.error({message:this.$t("请选择时间范围在"+a+"天内")});this.$message.error({message:this.$t("请选择时间范围")})},addRemoveUnique:function(e,t,a){var r=e.length,l=t.length;return l<r?{name:"add",data:this.$service.isUnique(e,t,a)}:r<l?{name:"remove",data:this.$service.isUnique(t,e,a)}:r==l?{name:"equal",data:this.$service.isUnique(e,t,a)}:void 0},showTooltip:function(e,t){var a=e.target,r=this.$refs[t];r.referenceElm=a,r.$refs.popper.style.display="none",r.doDestroy(),r.setExpectedState(!0),r.handleShowPopper()},mouseenterShowTip:function(e,t,a){var r=e.target;if(r.scrollWidth>r.offsetWidth||a)return this.showTooltip(e,t),a?a.startTime+"~"+a.endTime:r.innerText},mouseenterShowToolTip:function(e,t,a){var r=e.target;return this.showTooltip(e,t),!a&&r.innerText},mouseoverHideTip:function(e){var t=this.$refs[e];t&&(t.setExpectedState(!1),t.handleClosePopper())},asyncDownloadScript:function(t,a){var r=this,l=0<arguments.length&&void 0!==t?t:"Baidu",i=1<arguments.length?a:void 0;return e[l]?e[l]._preloader?e[l]._preloader:Promise.resolve(e[l]):(e[l]={},e[l]._preloader=new Promise(function(t,a){var n=document.createElement("script");n.src=i,e.document.body.appendChild(n),r.$service.isIe()&&r.$service.IE_VERSION<11?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(t(e[l]),e[l]._preloader=null)}:n.onload=function(){t(e[l]),e[l]._preloader=null}}),e[l]._preloader)}}}}).call(this,a("c8ba"))}}]);
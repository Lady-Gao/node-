(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2ef08854"],{"419f":function(e,t,a){"use strict";var i=a("6d69");a.n(i).a},"632a":function(e,t,a){},"6d69":function(e,t,a){},aed4:function(e,t,a){"use strict";var i=a("632a");a.n(i).a},b0ad:function(e,t,a){"use strict";(function(e){a("7f7f"),t.a={methods:{confirmPrompt:function(e,t){var a=this,i=e||this.$t("action.confirmIsRemove");return new Promise(function(e,o){a.$confirm(i,a.$t("action.tip"),{confirmButtonText:a.$t("action.confirm"),cancelButtonText:a.$t("action.cancel"),type:"warning"}).then(function(){e()}).catch(function(){"function"==typeof t&&t()})})},timeLimitFunc:function(e,t,a){if(e&&t)return((new Date(t)-new Date(e))/864e5).toFixed(1)<=a||this.$message.error({message:this.$t("请选择时间范围在"+a+"天内")});this.$message.error({message:this.$t("请选择时间范围")})},addRemoveUnique:function(e,t,a){var i=e.length,o=t.length;return o<i?{name:"add",data:this.$service.isUnique(e,t,a)}:i<o?{name:"remove",data:this.$service.isUnique(t,e,a)}:i==o?{name:"equal",data:this.$service.isUnique(e,t,a)}:void 0},showTooltip:function(e,t){var a=e.target,i=this.$refs[t];i.referenceElm=a,i.$refs.popper.style.display="none",i.doDestroy(),i.setExpectedState(!0),i.handleShowPopper()},mouseenterShowTip:function(e,t,a){var i=e.target;if(i.scrollWidth>i.offsetWidth||a)return this.showTooltip(e,t),a?a.startTime+"~"+a.endTime:i.innerText},mouseenterShowToolTip:function(e,t,a){var i=e.target;return this.showTooltip(e,t),!a&&i.innerText},mouseoverHideTip:function(e){var t=this.$refs[e];t&&(t.setExpectedState(!1),t.handleClosePopper())},asyncDownloadScript:function(t,a){var i=this,o=0<arguments.length&&void 0!==t?t:"Baidu",n=1<arguments.length?a:void 0;return e[o]?e[o]._preloader?e[o]._preloader:Promise.resolve(e[o]):(e[o]={},e[o]._preloader=new Promise(function(t,a){var r=document.createElement("script");r.src=n,e.document.body.appendChild(r),i.$service.isIe()&&i.$service.IE_VERSION<11?r.onreadystatechange=function(){"loaded"!=r.readyState&&"complete"!=r.readyState||(t(e[o]),e[o]._preloader=null)}:r.onload=function(){t(e[o]),e[o]._preloader=null}}),e[o]._preloader)}}}}).call(this,a("c8ba"))},c427:function(e,t,a){"use strict";var i=["icon1","fullscreen","fullscreen-exit","monitor1","jikediancanicon44","msnui-alarm-triangle","xitong","guijihuifang","order","baojing","baobiao","alarm","guiji","yuyan","vehicle-group","cheliangguanli","wenben","guiji1","200","baobiao1","yuyan1-copy","baojing1","52d72adc69438zhuanhuan","renyuan","baobiao2","yunwei","langnoround","yunweiguanli","baobiao3","anquan1","yuyan1","yuyan2","xitong1","unif010","renyuanjiankong","cheliang","organization","gjcx","aguiji","vehicle","icon","jigou2","zuzhi","yunwei1","xitong2","duobianxing","jiankong","people","baobiao4","xitong3","baobiao5","monitor","yunwei2","baobiao6","yuanxing","zuzhi1","chart","hangcheguiji","ef--shijian","line","xitong4","cheliang1","baobiao7","dunpai","circle","polygon","Refresh","xitong5","PDF--","xitong6","shijian","yuyan3","clgj","pdf","jiankong-","home","renyuanjiankong1","list","xitong7","yunweiguanli1","ccgl-baobiao-4","dunpai1","yuyan4","icon-test","guiji2","huodongguiji","baobiao8","wenben2","baobiao9","yuyan5","jiankong1","shijianzhuizong","xitong8","dunpai2","rectangle","draw-polyline","xitong9","yuyan6","yunweitiaoshi","zuzhi2","baobiao10","company","tubiao-","icon-test1","fence","zhexian","shijian1","gengxinguiji","big-car","map-marker","shouye","cheliangjiankong","fenxitongji","xitongguanli","hangshijilu","anquan","qita","rizhiguanli","weilan","gengduo"],o=a("ed08"),n={data:function(){return{photo:i}},mounted:function(){var e=this;o.c.on(this.$refs.photoGroup,"click",function(t){for(var a=window.event||t,i=a.target||a.srcElement;i;)if("string"==typeof i.className){if("photo-item"===i.className){var n=o.c.attr(i,"name");return e.$emit("show-name",n),o.c.hide(e.$parent.$refs.popper)}i=i.parentNode}else i=i.parentNode})}},r=(a("419f"),a("2877")),s=Object(r.a)(n,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cv-photo-group"},[t("cv-scrollbar",{staticClass:"slider-area",attrs:{tag:"ul","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list"}},[t("li",{ref:"photoGroup"},this._l(this.photo,function(e){return t("div",{key:e,staticClass:"photo-item",attrs:{name:e}},[t("cv-icon",{attrs:{name:e,size:"24"}})],1)}),0)])],1)},[],!1,null,null,null);t.a=s.exports},d6ae:function(e,t,a){"use strict";a.r(t),a("7f7f"),a("386d");var i=a("cebc"),o=a("b0ad"),n=(a("ac6a"),a("ed08"),{props:{options:{}},data:function(){return{grid:{current:[]},paramGrid:{enterpriseName:"",plateCode:"",onlineStatus:"",useStatus:"",isLogout:"",fleetId:this.options.add.fleetId,mobileCode:""}}},computed:{_addTable:function(){return this.$refs.addTable}},methods:{handlerChange:function(e){var t=this;this.grid.current=[],e.forEach(function(e){t.grid.current.push(e.id)})},tableSearch:function(){this._addTable.tableInitial()},confirm:function(){var e=this;if(0!==this.grid.current.length){var t={vehicleIds:this.grid.current.join(","),fleetId:this.options.add.fleetId,enterpriseId:this.options.add.enterpriseId};this.$store.dispatch("addFleetEscrowVehicle",t).then(function(t){t.flag?(e.$message.success("新增成功!"),e.options.flag=!1,e.$emit("update:search",!0)):e.$message.error("新增失败!")})}else this.$message.error("请选择一行数据")},isUse:function(e,t,a){return this.$filter.isStuas(e.useStatus)},isOnline:function(e){return this.$filter.isOnlineState(e.onlineStatus)},isRegister:function(e){return this.$filter.isRegisterFilter(e.isLogout)}},watch:{"options.flag":function(e){e||(this.options.name="")}}}),r=(a("aed4"),a("2877")),s=Object(r.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vehicleG"},[a("el-row",[a("el-col",{attrs:{span:22}},[a("el-form",{attrs:{inline:!0,"label-width":"80px"}},[a("el-form-item",{attrs:{label:e.$t("vgEscrow.company")}},[a("el-input",{model:{value:e.paramGrid.enterpriseName,callback:function(t){e.$set(e.paramGrid,"enterpriseName","string"==typeof t?t.trim():t)},expression:"paramGrid.enterpriseName"}})],1),a("el-form-item",{attrs:{label:e.$t("vgEscrow.plateCode")}},[a("el-input",{model:{value:e.paramGrid.plateCode,callback:function(t){e.$set(e.paramGrid,"plateCode","string"==typeof t?t.trim():t)},expression:"paramGrid.plateCode"}})],1),a("el-form-item",{attrs:{label:e.$t("vgEscrow.mobile")}},[a("el-input",{model:{value:e.paramGrid.mobileCode,callback:function(t){e.$set(e.paramGrid,"mobileCode","string"==typeof t?t.trim():t)},expression:"paramGrid.mobileCode"}})],1),a("el-form-item",{attrs:{label:e.$t("vgEscrow.useStatus")}},[a("el-select",{staticClass:"select",attrs:{clearable:""},model:{value:e.paramGrid.useStatus,callback:function(t){e.$set(e.paramGrid,"useStatus",t)},expression:"paramGrid.useStatus"}},[a("el-option",{attrs:{label:e.$t("vgEscrow.use"),value:"0"}}),a("el-option",{attrs:{label:e.$t("vgEscrow.stop"),value:"1"}})],1)],1),a("el-form-item",{attrs:{label:e.$t("vgEscrow.onlineStatus")}},[a("el-select",{staticClass:"select",attrs:{clearable:""},model:{value:e.paramGrid.onlineStatus,callback:function(t){e.$set(e.paramGrid,"onlineStatus",t)},expression:"paramGrid.onlineStatus"}},[a("el-option",{attrs:{label:e.$t("vgEscrow.online"),value:"1"}}),a("el-option",{attrs:{label:e.$t("vgEscrow.offline"),value:"0"}})],1)],1),a("el-form-item",{attrs:{label:e.$t("vgEscrow.isLogOut")}},[a("el-select",{staticClass:"select",attrs:{clearable:""},model:{value:e.paramGrid.isLogout,callback:function(t){e.$set(e.paramGrid,"isLogout",t)},expression:"paramGrid.isLogout"}},[a("el-option",{attrs:{label:e.$t("vgEscrow.isLog"),value:"0"}}),a("el-option",{attrs:{label:e.$t("vgEscrow.isOut"),value:"1"}})],1)],1)],1)],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"success"},on:{click:e.tableSearch}},[e._v(e._s(e.$t("power.search")))])],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("cv-grid",{ref:"addTable",attrs:{params:e.paramGrid,url:"/fleet/findFleetSureEscrowVehicleList"},on:{"selection-change":e.handlerChange}},[a("el-table-column",{attrs:{type:"selection",width:"55px"}}),a("el-table-column",{attrs:{label:e.$t("vgEscrow.company"),prop:"enterpriseName"}}),a("el-table-column",{attrs:{label:e.$t("vgEscrow.plateCode"),prop:"plateCode"}}),a("el-table-column",{attrs:{label:e.$t("vgEscrow.terminalCode"),prop:"mobileCode"}}),a("el-table-column",{attrs:{label:e.$t("vgEscrow.useStatus"),formatter:e.isUse,prop:"useStatus"}}),a("el-table-column",{attrs:{label:e.$t("vgEscrow.onlineStatus"),formatter:e.isOnline,prop:"onlineStatus"}}),a("el-table-column",{attrs:{label:e.$t("vgEscrow.isLogOut"),formatter:e.isRegister,prop:"isLogout"}})],1)],1)],1),a("el-row",{staticClass:"dialog-footer",staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:24}},[a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v(e._s(this.$t("power.add")))]),a("el-button",{on:{click:function(t){e.options.flag=!1}}},[e._v(e._s(this.$t("action.cancel")))])],1)],1)],1)},[],!1,null,null,null).exports,l={components:{photoGroup:a("c427").a},props:{options:{}},methods:{confirm:function(){this.$emit("update:search",!0),this.options.flag=!1}},watch:{"options.flag":function(e){e||this.$refs.searchForm.resetFields()}}},c=Object(r.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"searchForm",attrs:{model:e.options.search}},[a("el-form-item",{attrs:{label:e.$t("vgEscrow.company"),prop:"enterpriseName"}},[a("el-input",{attrs:{maxlength:30},model:{value:e.options.search.enterpriseName,callback:function(t){e.$set(e.options.search,"enterpriseName","string"==typeof t?t.trim():t)},expression:"options.search.enterpriseName"}})],1),a("el-form-item",{attrs:{label:e.$t("vgEscrow.plateCode"),prop:"plateCode"}},[a("el-input",{attrs:{maxlength:30},model:{value:e.options.search.plateCode,callback:function(t){e.$set(e.options.search,"plateCode","string"==typeof t?t.trim():t)},expression:"options.search.plateCode"}})],1)],1),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v(e._s(e.$t("action.confirm")))]),a("el-button",{on:{click:function(t){e.options.flag=!1}}},[e._v(e._s(e.$t("action.cancel")))])],1)],1)},[],!1,null,null,null).exports,u=a("2f62"),d={mixins:[o.a],components:{add:s,search:c},data:function(){return{searchFlag:!1,enterpriseId:"",fleetData:[],label:"",dialog:{flag:!1,title:"--",size:"dialog-large",name:"search",search:{fleetId:"",enterpriseName:"",plateCode:""},add:{fleetId:"",enterpriseId:""}}}},computed:{_table:function(){return this.$refs.escrowTable}},methods:Object(i.a)({},Object(u.b)(["queryFleetTreeList"]),{treeClick:function(e){3==e.type?(this.dialog.search.fleetId=e.id,this.dialog.add.fleetId=e.id,this.searchFlag=!0):(this.dialog.search.fleetId="",this.dialog.add.fleetId="")},search:function(e){if(!this.dialog.search.fleetId)return this.$message.warning("请选择车组"),!1;this.dialog.flag=!0,this.dialog.title=this.$t("power.search"),this.dialog.name="search",this.dialog.size="dialog-tiny"},add:function(e){if(!this.dialog.add.fleetId)return this.$message.warning("请选择车组"),!1;this.dialog.flag=!0,this.dialog.title=this.$t("vgEscrow.chooseCar"),this.dialog.name="add",this.dialog.size="dialog-large"},remove:function(e){var t=this;this.confirmPrompt().then(function(){var a={fleetId:t.dialog.search.fleetId,vehicleIds:e.row.id};t.$store.dispatch("deleteFleetEscrowVehicle",a).then(function(e){e.flag?(t.$message.success(t.$t("action.removeSuccess")),t.searchFlag=!0):t.$message.error(t.$t("action.removeFail"))})})},isUse:function(e,t,a){return this.$filter.isStuas(e.useStatus)},isOnline:function(e){return this.$filter.isOnlineState(e.onlineStatus)},isRegister:function(e){return this.$filter.isRegisterFilter(e.isLogout)}}),watch:{enterpriseId:function(e){var t=this;e?this.queryFleetTreeList({enterpriseId:e}).then(function(e){t.fleetData=e.data}):this.fleetData=[],this.dialog.add.enterpriseId=e},searchFlag:function(e){e&&(this._table.tableInitial(),this.searchFlag=!1)}},mounted:function(){var e=this;setTimeout(function(){e.enterpriseId=e.$store.getters.user.enterpriseId},1300)}},p=Object(r.a)(d,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vehicle-group-escrow"},[a("cv-operation",[a("el-form-item",[a("cv-tool",{staticClass:"cv-tool",attrs:{name:e.$route.name,data:e.$store.getters.manageMenus,"is-remove":!1,"is-modify":!1,"is-export":!1},on:{search:e.search,add:e.add}})],1)],1),a("cv-content",[a("div",{attrs:{slot:"aside"},slot:"aside"},[a("cv-dropdown-tree",{staticStyle:{width:"300px"},attrs:{url:"/enterprise/getEnterpriseTreeList","is-default":!0,label:e.label},on:{"update:label":function(t){e.label=t}},model:{value:e.enterpriseId,callback:function(t){e.enterpriseId=t},expression:"enterpriseId"}}),a("cv-tree",{staticStyle:{position:"absolute",top:"35px",width:"300px",bottom:"5px",overflow:"auto"},attrs:{data:e.fleetData},on:{"node-click":e.treeClick}})],1),a("cv-grid",{ref:"escrowTable",attrs:{params:e.dialog.search,url:"/fleet/findFleetEscrowVehicleList"}},[a("el-table-column",{attrs:{label:e.$t("vgEscrow.company"),prop:"enterpriseName"}}),a("el-table-column",{attrs:{label:e.$t("vgEscrow.plateCode"),prop:"plateCode"}}),a("el-table-column",{attrs:{label:e.$t("vgEscrow.terminalCode"),prop:"mobileCode","min-width":"110px"}}),a("el-table-column",{attrs:{label:e.$t("vgEscrow.useStatus"),formatter:e.isUse,prop:"useStatus"}}),a("el-table-column",{attrs:{label:e.$t("vgEscrow.onlineStatus"),formatter:e.isOnline,prop:"onlineStatus"}}),a("el-table-column",{attrs:{label:e.$t("vgEscrow.isLogOut"),formatter:e.isRegister,prop:"isLogout"}}),a("el-table-column",{attrs:{label:e.$t("vgEscrow.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cv-table-tool",{attrs:{name:e.$route.name,data:e.$store.getters.manageMenus,"is-modify":!1},on:{remove:function(a){return e.remove(t)}}})]}}])})],1)],1),a("el-dialog",{attrs:{visible:e.dialog.flag,title:e.dialog.title,"custom-class":e.dialog.size},on:{"update:visible":function(t){return e.$set(e.dialog,"flag",t)}}},[a(e.dialog.name,{tag:"component",attrs:{options:e.dialog,search:e.searchFlag},on:{"update:search":function(t){e.searchFlag=t}}})],1)],1)},[],!1,null,null,null).exports;p.install=function(e){e.component(p.name,p)},t.default=p}}]);
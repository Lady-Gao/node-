(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-56a1b580"],{"05c0":function(e,t,i){"use strict";i("7f7f"),i("20d6"),i("ac6a");var n=i("cebc"),o=i("3f4e"),s=i("2f62"),a={name:"CvPublictreeContent",components:{CvContent:o.a},props:{model:String,vehicleMonitor:Function,loading:Boolean,noresize:{default:!1,type:Boolean}},data:function(){return{entryList:[],condition:""}},computed:Object(n.a)({},Object(s.c)(["onlineList","isAttention","socketEnterprise","socketVehicle","vehicle_data","vehicleCondition"]),{isCheck:function(){switch(this.model){case"multi":return!0;case"single":default:return!1}},_treeMethods:function(){return this.$refs.tabs},_contentMethods:function(){return this.$refs.content}}),beforeDestroy:function(){var e=this._treeMethods.getAllNodes;this.setStoreVehicleSearchCondition(this.condition),this.setStoreVehicleData(e())},mounted:function(){var e=this._treeMethods.$refs.tree.reference().ztreeApi;e()&&e().checkAllNodes(!1)},methods:Object(n.a)({},Object(s.b)(["setStoreVehicleData","setStoreVehicleSearchCondition"]),{handlerVehicleSearch:function(e){this.condition=e},vehicle_Monitor:function(e){var t=e.data;if(e.name,"function"==typeof this.vehicleMonitor)switch(this.model){case"multi":return this.vehicle_Monitor_multi(e);case"single":return this.vehicleMonitor(t[0])}},vehicle_Monitor_multi:function(e){var t=this,i=e.data;switch(e.name){case"check":this.entryList=this.entryList.concat(i);break;case"cancel":i.forEach(function(e){var i=t.entryList.findIndex(function(t){return t.id==e.id});0<=i&&t.entryList.splice(i,1)})}this.vehicleMonitor(this.entryList)}})},r=(i("45d7"),i("2877")),c=Object(r.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("cv-content",{ref:"content",attrs:{loading:e.loading,noresize:e.noresize}},[e.model?i("cv-tabs-tree",{ref:"tabs",staticClass:"vehiclemaster-tree",attrs:{slot:"aside","vehicle-search":e.vehicleCondition,"is-checked":e.isCheck,"tree-data":e.vehicle_data,"online-monitor":e.onlineList,"vehicle-monitor":e.socketVehicle,"attention-monitor":e.isAttention,"enterprise-fleet-monitor":e.socketEnterprise,"node-monitor":e.vehicle_Monitor},on:{"vehicle-choose-search":e.handlerVehicleSearch},slot:"aside"}):e._e(),e._t("default")],2)},[],!1,null,"2dfdf41b",null).exports;c.install=function(e){e.component(c.name,c)},t.a=c},"05ee":function(e,t,i){"use strict";var n=i("72a6");i.n(n).a},"45d7":function(e,t,i){"use strict";var n=i("6e18");i.n(n).a},"6e18":function(e,t,i){},"72a6":function(e,t,i){},b0ad:function(e,t,i){"use strict";(function(e){i("7f7f"),t.a={methods:{confirmPrompt:function(e,t){var i=this,n=e||this.$t("action.confirmIsRemove");return new Promise(function(e,o){i.$confirm(n,i.$t("action.tip"),{confirmButtonText:i.$t("action.confirm"),cancelButtonText:i.$t("action.cancel"),type:"warning"}).then(function(){e()}).catch(function(){"function"==typeof t&&t()})})},timeLimitFunc:function(e,t,i){if(e&&t)return((new Date(t)-new Date(e))/864e5).toFixed(1)<=i||this.$message.error({message:this.$t("请选择时间范围在"+i+"天内")});this.$message.error({message:this.$t("请选择时间范围")})},addRemoveUnique:function(e,t,i){var n=e.length,o=t.length;return o<n?{name:"add",data:this.$service.isUnique(e,t,i)}:n<o?{name:"remove",data:this.$service.isUnique(t,e,i)}:n==o?{name:"equal",data:this.$service.isUnique(e,t,i)}:void 0},showTooltip:function(e,t){var i=e.target,n=this.$refs[t];n.referenceElm=i,n.$refs.popper.style.display="none",n.doDestroy(),n.setExpectedState(!0),n.handleShowPopper()},mouseenterShowTip:function(e,t,i){var n=e.target;if(n.scrollWidth>n.offsetWidth||i)return this.showTooltip(e,t),i?i.startTime+"~"+i.endTime:n.innerText},mouseenterShowToolTip:function(e,t,i){var n=e.target;return this.showTooltip(e,t),!i&&n.innerText},mouseoverHideTip:function(e){var t=this.$refs[e];t&&(t.setExpectedState(!1),t.handleClosePopper())},asyncDownloadScript:function(t,i){var n=this,o=0<arguments.length&&void 0!==t?t:"Baidu",s=1<arguments.length?i:void 0;return e[o]?e[o]._preloader?e[o]._preloader:Promise.resolve(e[o]):(e[o]={},e[o]._preloader=new Promise(function(t,i){var a=document.createElement("script");a.src=s,e.document.body.appendChild(a),n.$service.isIe()&&n.$service.IE_VERSION<11?a.onreadystatechange=function(){"loaded"!=a.readyState&&"complete"!=a.readyState||(t(e[o]),e[o]._preloader=null)}:a.onload=function(){t(e[o]),e[o]._preloader=null}}),e[o]._preloader)}}}}).call(this,i("c8ba"))},c68c:function(e,t,i){"use strict";i.r(t),i("ac6a"),i("386d");var n=i("b0ad"),o=i("7ba4"),s=i("29a2"),a=i("05c0"),r={components:{eventAdd:o.a,eventUpdate:s.a,CvPublictreeContent:a.a},mixins:[n.a],data:function(){return{grid:{vehicleId:""},dialog:{flag:!1,title:"--",size:"dialog-tiny",selectVehicleObject:null,name:"search",id:"",search:{vehicleId:""}},multipleSelection:[]}},computed:{_table:function(){return this.$refs.eventSend}},methods:{handlerVehicleMonitor:function(e){this.grid.vehicleId!=e.id&&(this.grid.vehicleId=e.id,this.dialog.search.vehicleId=e.id,this.dialog.selectVehicleObject=e,this._table.tableInitial())},confirm:function(){this._table.tableInitial()},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},getSelectedCount:function(){return this.multipleSelection.length},getSelectedIds:function(){var e=[];return this.multipleSelection.map(function(t){e.push(t.id)}),e},sendDelAll:function(){var e=this;if(this.dialog.selectVehicleObject){var t={vehicleId:this.grid.vehicleId,type:0,ids:this.getSelectedIds().join(",")};this.confirmPrompt(this.$t("vehicleEventSend.confirmIsSendDelAll")).then(function(){e.$store.dispatch("sendVehicleEventCmd",t).then(function(t){t.flag&&(e._table.tableInitial(),e.$message.success({message:e.$t("action.orderSuccess")})),!t.flag&&t.errorCode&&e.$message.error({message:e.$t("error."+t.errorCode)})})})}else this.$message.warning({message:this.$t("vgPower.choseVehicle")})},sendUpdate:function(){this.grid.vehicleId?(this.dialog.flag=!0,this.dialog.name="eventUpdate",this.dialog.size="dialog-large",this.dialog.title="发送更新",this.dialog.id=this.grid.vehicleId):this.$message.warning({message:this.$t("vgPower.choseVehicle")})},sendAdd:function(){this.dialog.selectVehicleObject?(this.dialog.flag=!0,this.dialog.name="eventAdd",this.dialog.size="dialog-small",this.dialog.title=this.dialog.selectVehicleObject.plateCode,this.dialog.id=this.grid.vehicleId):this.$message.warning({message:this.$t("vgPower.choseVehicle")})},sendEdit:function(){var e=this;if(this.dialog.selectVehicleObject){var t={vehicleId:this.grid.vehicleId,type:3,ids:this.getSelectedIds().join(",")};0<this.getSelectedCount()?this.confirmPrompt(this.$t("vehicleEventSend.confirmIsSendEdit")).then(function(){e.$store.dispatch("sendVehicleEventCmd",t).then(function(t){t.flag&&(e._table.tableInitial(),e.$message.success({message:e.$t("action.orderSuccess")})),!t.flag&&t.errorCode&&e.$message.error({message:e.$t("error."+t.errorCode)})})}):this.$message.warning({message:this.$t("vehicleEventSend.alertToSelect")})}else this.$message.warning({message:this.$t("vgPower.choseVehicle")})},sendDel:function(){var e=this;if(this.dialog.selectVehicleObject){var t={vehicleId:this.grid.vehicleId,type:4,ids:this.getSelectedIds().join(",")};0<this.getSelectedCount()?this.confirmPrompt(this.$t("vehicleEventSend.confirmIsSendDel")).then(function(){e.$store.dispatch("sendVehicleEventCmd",t).then(function(t){t.flag&&(e._table.tableInitial(),e.$message.success({message:e.$t("action.orderSuccess")})),!t.flag&&t.errorCode&&e.$message.error({message:e.$t("error."+t.errorCode)})})}):this.$message.warning({message:this.$t("vehicleEventSend.alertToSelect")})}else this.$message.warning({message:this.$t("vgPower.choseVehicle")})}},beforeDestroy:function(){}},c=(i("05ee"),i("2877")),l=Object(c.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("cv-operation",[i("el-form-item",{staticStyle:{float:"right"}},[i("cv-tool",{staticStyle:{margin:"0px"},attrs:{name:e.$route.name,data:e.$store.getters.monitorMenu,"is-add":!1,"is-modify":!1,"is-remove":!0,"is-export":!1,"is-search":!1},on:{remove:e.sendDel,sendDelAll:e.sendDelAll,sendUpdate:e.sendUpdate,sendAdd:e.sendAdd,sendEdit:e.sendEdit}})],1)],1),i("cv-content",{staticStyle:{top:"50px"}},[i("cv-publictree-content",{ref:"tabs",attrs:{model:"single","vehicle-monitor":e.handlerVehicleMonitor,loading:!1}},[i("cv-grid",{ref:"eventSend",attrs:{params:e.grid,url:"/eventinfo/getVehicleEventPage"},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{label:e.$t("vehicleEventSend.plateCode"),prop:"plateCode"}}),i("el-table-column",{attrs:{label:e.$t("vehicleEventSend.eventId"),prop:"eventId"}}),i("el-table-column",{attrs:{label:e.$t("vehicleEventSend.eventContent"),prop:"eventContent"}}),i("el-table-column",{attrs:{label:e.$t("vehicleEventSend.createtimeStr"),prop:"createtimeStr"}})],1)],1)],1),i("el-dialog",{attrs:{visible:e.dialog.flag,title:e.dialog.title,"custom-class":e.dialog.size},on:{"update:visible":function(t){return e.$set(e.dialog,"flag",t)}}},[i(e.dialog.name,{tag:"component",attrs:{options:e.dialog},on:{confirm:e.confirm}})],1)],1)},[],!1,null,null,null).exports;t.default=l}}]);